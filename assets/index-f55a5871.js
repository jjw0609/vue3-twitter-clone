(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function y_(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const ie={},Fa=[],Mr=()=>{},AF=()=>!1,CF=/^on[^a-z]/,Up=e=>CF.test(e),__=e=>e.startsWith("onUpdate:"),Je=Object.assign,w_=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},NF=Object.prototype.hasOwnProperty,jt=(e,t)=>NF.call(e,t),Et=Array.isArray,Ua=e=>jp(e)==="[object Map]",u1=e=>jp(e)==="[object Set]",Ct=e=>typeof e=="function",ke=e=>typeof e=="string",b_=e=>typeof e=="symbol",le=e=>e!==null&&typeof e=="object",c1=e=>le(e)&&Ct(e.then)&&Ct(e.catch),l1=Object.prototype.toString,jp=e=>l1.call(e),RF=e=>jp(e).slice(8,-1),f1=e=>jp(e)==="[object Object]",E_=e=>ke(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Oh=y_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Vp=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},OF=/-(\w)/g,fi=Vp(e=>e.replace(OF,(t,n)=>n?n.toUpperCase():"")),xF=/\B([A-Z])/g,js=Vp(e=>e.replace(xF,"-$1").toLowerCase()),Bp=Vp(e=>e.charAt(0).toUpperCase()+e.slice(1)),cm=Vp(e=>e?`on${Bp(e)}`:""),el=(e,t)=>!Object.is(e,t),xh=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},zh=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},uy=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let DT;const cy=()=>DT||(DT=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function I_(e){if(Et(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=ke(r)?LF(r):I_(r);if(i)for(const s in i)t[s]=i[s]}return t}else{if(ke(e))return e;if(le(e))return e}}const PF=/;(?![^(]*\))/g,kF=/:([^]+)/,DF=/\/\*[^]*?\*\//g;function LF(e){const t={};return e.replace(DF,"").split(PF).forEach(n=>{if(n){const r=n.split(kF);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Eu(e){let t="";if(ke(e))t=e;else if(Et(e))for(let n=0;n<e.length;n++){const r=Eu(e[n]);r&&(t+=r+" ")}else if(le(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const MF="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",FF=y_(MF);function h1(e){return!!e||e===""}const UF=e=>ke(e)?e:e==null?"":Et(e)||le(e)&&(e.toString===l1||!Ct(e.toString))?JSON.stringify(e,p1,2):String(e),p1=(e,t)=>t&&t.__v_isRef?p1(e,t.value):Ua(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:u1(t)?{[`Set(${t.size})`]:[...t.values()]}:le(t)&&!Et(t)&&!f1(t)?String(t):t;let Rr;class jF{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Rr,!t&&Rr&&(this.index=(Rr.scopes||(Rr.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Rr;try{return Rr=this,t()}finally{Rr=n}}}on(){Rr=this}off(){Rr=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function VF(e,t=Rr){t&&t.active&&t.effects.push(e)}function BF(){return Rr}const T_=e=>{const t=new Set(e);return t.w=0,t.n=0,t},d1=e=>(e.w&Ao)>0,v1=e=>(e.n&Ao)>0,qF=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Ao},HF=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];d1(i)&&!v1(i)?i.delete(e):t[n++]=i,i.w&=~Ao,i.n&=~Ao}t.length=n}},ly=new WeakMap;let Lc=0,Ao=1;const fy=30;let xr;const bs=Symbol(""),hy=Symbol("");class S_{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,VF(this,r)}run(){if(!this.active)return this.fn();let t=xr,n=bo;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=xr,xr=this,bo=!0,Ao=1<<++Lc,Lc<=fy?qF(this):LT(this),this.fn()}finally{Lc<=fy&&HF(this),Ao=1<<--Lc,xr=this.parent,bo=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){xr===this?this.deferStop=!0:this.active&&(LT(this),this.onStop&&this.onStop(),this.active=!1)}}function LT(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let bo=!0;const g1=[];function Iu(){g1.push(bo),bo=!1}function Tu(){const e=g1.pop();bo=e===void 0?!0:e}function Wn(e,t,n){if(bo&&xr){let r=ly.get(e);r||ly.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=T_()),m1(i)}}function m1(e,t){let n=!1;Lc<=fy?v1(e)||(e.n|=Ao,n=!d1(e)):n=!e.has(xr),n&&(e.add(xr),xr.deps.push(e))}function Ui(e,t,n,r,i,s){const a=ly.get(e);if(!a)return;let c=[];if(t==="clear")c=[...a.values()];else if(n==="length"&&Et(e)){const l=Number(r);a.forEach((h,p)=>{(p==="length"||p>=l)&&c.push(h)})}else switch(n!==void 0&&c.push(a.get(n)),t){case"add":Et(e)?E_(n)&&c.push(a.get("length")):(c.push(a.get(bs)),Ua(e)&&c.push(a.get(hy)));break;case"delete":Et(e)||(c.push(a.get(bs)),Ua(e)&&c.push(a.get(hy)));break;case"set":Ua(e)&&c.push(a.get(bs));break}if(c.length===1)c[0]&&py(c[0]);else{const l=[];for(const h of c)h&&l.push(...h);py(T_(l))}}function py(e,t){const n=Et(e)?e:[...e];for(const r of n)r.computed&&MT(r);for(const r of n)r.computed||MT(r)}function MT(e,t){(e!==xr||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const GF=y_("__proto__,__v_isRef,__isVue"),y1=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(b_)),WF=A_(),$F=A_(!1,!0),zF=A_(!0),FT=KF();function KF(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Gt(this);for(let s=0,a=this.length;s<a;s++)Wn(r,"get",s+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(Gt)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Iu();const r=Gt(this)[t].apply(this,n);return Tu(),r}}),e}function QF(e){const t=Gt(this);return Wn(t,"has",e),t.hasOwnProperty(e)}function A_(e=!1,t=!1){return function(r,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&s===(e?t?f2:I1:t?E1:b1).get(r))return r;const a=Et(r);if(!e){if(a&&jt(FT,i))return Reflect.get(FT,i,s);if(i==="hasOwnProperty")return QF}const c=Reflect.get(r,i,s);return(b_(i)?y1.has(i):GF(i))||(e||Wn(r,"get",i),t)?c:pn(c)?a&&E_(i)?c:c.value:le(c)?e?S1(c):Ml(c):c}}const YF=_1(),XF=_1(!0);function _1(e=!1){return function(n,r,i,s){let a=n[r];if(Ka(a)&&pn(a)&&!pn(i))return!1;if(!e&&(!Kh(i)&&!Ka(i)&&(a=Gt(a),i=Gt(i)),!Et(n)&&pn(a)&&!pn(i)))return a.value=i,!0;const c=Et(n)&&E_(r)?Number(r)<n.length:jt(n,r),l=Reflect.set(n,r,i,s);return n===Gt(s)&&(c?el(i,a)&&Ui(n,"set",r,i):Ui(n,"add",r,i)),l}}function JF(e,t){const n=jt(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Ui(e,"delete",t,void 0),r}function ZF(e,t){const n=Reflect.has(e,t);return(!b_(t)||!y1.has(t))&&Wn(e,"has",t),n}function t2(e){return Wn(e,"iterate",Et(e)?"length":bs),Reflect.ownKeys(e)}const w1={get:WF,set:YF,deleteProperty:JF,has:ZF,ownKeys:t2},e2={get:zF,set(e,t){return!0},deleteProperty(e,t){return!0}},n2=Je({},w1,{get:$F,set:XF}),C_=e=>e,qp=e=>Reflect.getPrototypeOf(e);function uh(e,t,n=!1,r=!1){e=e.__v_raw;const i=Gt(e),s=Gt(t);n||(t!==s&&Wn(i,"get",t),Wn(i,"get",s));const{has:a}=qp(i),c=r?C_:n?O_:nl;if(a.call(i,t))return c(e.get(t));if(a.call(i,s))return c(e.get(s));e!==i&&e.get(t)}function ch(e,t=!1){const n=this.__v_raw,r=Gt(n),i=Gt(e);return t||(e!==i&&Wn(r,"has",e),Wn(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function lh(e,t=!1){return e=e.__v_raw,!t&&Wn(Gt(e),"iterate",bs),Reflect.get(e,"size",e)}function UT(e){e=Gt(e);const t=Gt(this);return qp(t).has.call(t,e)||(t.add(e),Ui(t,"add",e,e)),this}function jT(e,t){t=Gt(t);const n=Gt(this),{has:r,get:i}=qp(n);let s=r.call(n,e);s||(e=Gt(e),s=r.call(n,e));const a=i.call(n,e);return n.set(e,t),s?el(t,a)&&Ui(n,"set",e,t):Ui(n,"add",e,t),this}function VT(e){const t=Gt(this),{has:n,get:r}=qp(t);let i=n.call(t,e);i||(e=Gt(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&Ui(t,"delete",e,void 0),s}function BT(){const e=Gt(this),t=e.size!==0,n=e.clear();return t&&Ui(e,"clear",void 0,void 0),n}function fh(e,t){return function(r,i){const s=this,a=s.__v_raw,c=Gt(a),l=t?C_:e?O_:nl;return!e&&Wn(c,"iterate",bs),a.forEach((h,p)=>r.call(i,l(h),l(p),s))}}function hh(e,t,n){return function(...r){const i=this.__v_raw,s=Gt(i),a=Ua(s),c=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,h=i[e](...r),p=n?C_:t?O_:nl;return!t&&Wn(s,"iterate",l?hy:bs),{next(){const{value:v,done:m}=h.next();return m?{value:v,done:m}:{value:c?[p(v[0]),p(v[1])]:p(v),done:m}},[Symbol.iterator](){return this}}}}function ro(e){return function(...t){return e==="delete"?!1:this}}function r2(){const e={get(s){return uh(this,s)},get size(){return lh(this)},has:ch,add:UT,set:jT,delete:VT,clear:BT,forEach:fh(!1,!1)},t={get(s){return uh(this,s,!1,!0)},get size(){return lh(this)},has:ch,add:UT,set:jT,delete:VT,clear:BT,forEach:fh(!1,!0)},n={get(s){return uh(this,s,!0)},get size(){return lh(this,!0)},has(s){return ch.call(this,s,!0)},add:ro("add"),set:ro("set"),delete:ro("delete"),clear:ro("clear"),forEach:fh(!0,!1)},r={get(s){return uh(this,s,!0,!0)},get size(){return lh(this,!0)},has(s){return ch.call(this,s,!0)},add:ro("add"),set:ro("set"),delete:ro("delete"),clear:ro("clear"),forEach:fh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=hh(s,!1,!1),n[s]=hh(s,!0,!1),t[s]=hh(s,!1,!0),r[s]=hh(s,!0,!0)}),[e,n,t,r]}const[i2,o2,s2,a2]=r2();function N_(e,t){const n=t?e?a2:s2:e?o2:i2;return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(jt(n,i)&&i in r?n:r,i,s)}const u2={get:N_(!1,!1)},c2={get:N_(!1,!0)},l2={get:N_(!0,!1)},b1=new WeakMap,E1=new WeakMap,I1=new WeakMap,f2=new WeakMap;function h2(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function p2(e){return e.__v_skip||!Object.isExtensible(e)?0:h2(RF(e))}function Ml(e){return Ka(e)?e:R_(e,!1,w1,u2,b1)}function T1(e){return R_(e,!1,n2,c2,E1)}function S1(e){return R_(e,!0,e2,l2,I1)}function R_(e,t,n,r,i){if(!le(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const a=p2(e);if(a===0)return e;const c=new Proxy(e,a===2?r:n);return i.set(e,c),c}function ja(e){return Ka(e)?ja(e.__v_raw):!!(e&&e.__v_isReactive)}function Ka(e){return!!(e&&e.__v_isReadonly)}function Kh(e){return!!(e&&e.__v_isShallow)}function A1(e){return ja(e)||Ka(e)}function Gt(e){const t=e&&e.__v_raw;return t?Gt(t):e}function C1(e){return zh(e,"__v_skip",!0),e}const nl=e=>le(e)?Ml(e):e,O_=e=>le(e)?S1(e):e;function N1(e){bo&&xr&&(e=Gt(e),m1(e.dep||(e.dep=T_())))}function R1(e,t){e=Gt(e);const n=e.dep;n&&py(n)}function pn(e){return!!(e&&e.__v_isRef===!0)}function Oi(e){return O1(e,!1)}function d2(e){return O1(e,!0)}function O1(e,t){return pn(e)?e:new v2(e,t)}class v2{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Gt(t),this._value=n?t:nl(t)}get value(){return N1(this),this._value}set value(t){const n=this.__v_isShallow||Kh(t)||Ka(t);t=n?t:Gt(t),el(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:nl(t),R1(this))}}function Va(e){return pn(e)?e.value:e}const g2={get:(e,t,n)=>Va(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return pn(i)&&!pn(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function x1(e){return ja(e)?e:new Proxy(e,g2)}class m2{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new S_(t,()=>{this._dirty||(this._dirty=!0,R1(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=Gt(this);return N1(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function y2(e,t,n=!1){let r,i;const s=Ct(e);return s?(r=e,i=Mr):(r=e.get,i=e.set),new m2(r,i,s||!i,n)}function Eo(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){Hp(s,t,n)}return i}function Fr(e,t,n,r){if(Ct(e)){const s=Eo(e,t,n,r);return s&&c1(s)&&s.catch(a=>{Hp(a,t,n)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(Fr(e[s],t,n,r));return i}function Hp(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const a=t.proxy,c=n;for(;s;){const h=s.ec;if(h){for(let p=0;p<h.length;p++)if(h[p](e,a,c)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){Eo(l,null,10,[e,a,c]);return}}_2(e,n,i,r)}function _2(e,t,n,r=!0){console.error(e)}let rl=!1,dy=!1;const hn=[];let ii=0;const Ba=[];let Ni=null,fs=0;const P1=Promise.resolve();let x_=null;function k1(e){const t=x_||P1;return e?t.then(this?e.bind(this):e):t}function w2(e){let t=ii+1,n=hn.length;for(;t<n;){const r=t+n>>>1;il(hn[r])<e?t=r+1:n=r}return t}function P_(e){(!hn.length||!hn.includes(e,rl&&e.allowRecurse?ii+1:ii))&&(e.id==null?hn.push(e):hn.splice(w2(e.id),0,e),D1())}function D1(){!rl&&!dy&&(dy=!0,x_=P1.then(M1))}function b2(e){const t=hn.indexOf(e);t>ii&&hn.splice(t,1)}function E2(e){Et(e)?Ba.push(...e):(!Ni||!Ni.includes(e,e.allowRecurse?fs+1:fs))&&Ba.push(e),D1()}function qT(e,t=rl?ii+1:0){for(;t<hn.length;t++){const n=hn[t];n&&n.pre&&(hn.splice(t,1),t--,n())}}function L1(e){if(Ba.length){const t=[...new Set(Ba)];if(Ba.length=0,Ni){Ni.push(...t);return}for(Ni=t,Ni.sort((n,r)=>il(n)-il(r)),fs=0;fs<Ni.length;fs++)Ni[fs]();Ni=null,fs=0}}const il=e=>e.id==null?1/0:e.id,I2=(e,t)=>{const n=il(e)-il(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function M1(e){dy=!1,rl=!0,hn.sort(I2);const t=Mr;try{for(ii=0;ii<hn.length;ii++){const n=hn[ii];n&&n.active!==!1&&Eo(n,null,14)}}finally{ii=0,hn.length=0,L1(),rl=!1,x_=null,(hn.length||Ba.length)&&M1()}}function T2(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||ie;let i=n;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in r){const p=`${a==="modelValue"?"model":a}Modifiers`,{number:v,trim:m}=r[p]||ie;m&&(i=n.map(y=>ke(y)?y.trim():y)),v&&(i=n.map(uy))}let c,l=r[c=cm(t)]||r[c=cm(fi(t))];!l&&s&&(l=r[c=cm(js(t))]),l&&Fr(l,e,6,i);const h=r[c+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,Fr(h,e,6,i)}}function F1(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let a={},c=!1;if(!Ct(e)){const l=h=>{const p=F1(h,t,!0);p&&(c=!0,Je(a,p))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!c?(le(e)&&r.set(e,null),null):(Et(s)?s.forEach(l=>a[l]=null):Je(a,s),le(e)&&r.set(e,a),a)}function Gp(e,t){return!e||!Up(t)?!1:(t=t.slice(2).replace(/Once$/,""),jt(e,t[0].toLowerCase()+t.slice(1))||jt(e,js(t))||jt(e,t))}let vr=null,U1=null;function Qh(e){const t=vr;return vr=e,U1=e&&e.type.__scopeId||null,t}function Wp(e,t=vr,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&ZT(-1);const s=Qh(t);let a;try{a=e(...i)}finally{Qh(s),r._d&&ZT(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function lm(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[a],slots:c,attrs:l,emit:h,render:p,renderCache:v,data:m,setupState:y,ctx:b,inheritAttrs:E}=e;let I,C;const P=Qh(e);try{if(n.shapeFlag&4){const F=i||r;I=ri(p.call(F,F,v,s,y,m,b)),C=l}else{const F=t;I=ri(F.length>1?F(s,{attrs:l,slots:c,emit:h}):F(s,null)),C=t.props?l:S2(l)}}catch(F){Hc.length=0,Hp(F,e,1),I=ye(Rs)}let D=I;if(C&&E!==!1){const F=Object.keys(C),{shapeFlag:Q}=D;F.length&&Q&7&&(a&&F.some(__)&&(C=A2(C,a)),D=Qa(D,C))}return n.dirs&&(D=Qa(D),D.dirs=D.dirs?D.dirs.concat(n.dirs):n.dirs),n.transition&&(D.transition=n.transition),I=D,Qh(P),I}const S2=e=>{let t;for(const n in e)(n==="class"||n==="style"||Up(n))&&((t||(t={}))[n]=e[n]);return t},A2=(e,t)=>{const n={};for(const r in e)(!__(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function C2(e,t,n){const{props:r,children:i,component:s}=e,{props:a,children:c,patchFlag:l}=t,h=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?HT(r,a,h):!!a;if(l&8){const p=t.dynamicProps;for(let v=0;v<p.length;v++){const m=p[v];if(a[m]!==r[m]&&!Gp(h,m))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:r===a?!1:r?a?HT(r,a,h):!0:!!a;return!1}function HT(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!Gp(n,s))return!0}return!1}function N2({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const R2=e=>e.__isSuspense;function O2(e,t){t&&t.pendingBranch?Et(e)?t.effects.push(...e):t.effects.push(e):E2(e)}const ph={};function qa(e,t,n){return j1(e,t,n)}function j1(e,t,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:a}=ie){var c;const l=BF()===((c=on)==null?void 0:c.scope)?on:null;let h,p=!1,v=!1;if(pn(e)?(h=()=>e.value,p=Kh(e)):ja(e)?(h=()=>e,r=!0):Et(e)?(v=!0,p=e.some(F=>ja(F)||Kh(F)),h=()=>e.map(F=>{if(pn(F))return F.value;if(ja(F))return vs(F);if(Ct(F))return Eo(F,l,2)})):Ct(e)?t?h=()=>Eo(e,l,2):h=()=>{if(!(l&&l.isUnmounted))return m&&m(),Fr(e,l,3,[y])}:h=Mr,t&&r){const F=h;h=()=>vs(F())}let m,y=F=>{m=P.onStop=()=>{Eo(F,l,4)}},b;if(sl)if(y=Mr,t?n&&Fr(t,l,3,[h(),v?[]:void 0,y]):h(),i==="sync"){const F=EU();b=F.__watcherHandles||(F.__watcherHandles=[])}else return Mr;let E=v?new Array(e.length).fill(ph):ph;const I=()=>{if(P.active)if(t){const F=P.run();(r||p||(v?F.some((Q,U)=>el(Q,E[U])):el(F,E)))&&(m&&m(),Fr(t,l,3,[F,E===ph?void 0:v&&E[0]===ph?[]:E,y]),E=F)}else P.run()};I.allowRecurse=!!t;let C;i==="sync"?C=I:i==="post"?C=()=>Vn(I,l&&l.suspense):(I.pre=!0,l&&(I.id=l.uid),C=()=>P_(I));const P=new S_(h,C);t?n?I():E=P.run():i==="post"?Vn(P.run.bind(P),l&&l.suspense):P.run();const D=()=>{P.stop(),l&&l.scope&&w_(l.scope.effects,P)};return b&&b.push(D),D}function x2(e,t,n){const r=this.proxy,i=ke(e)?e.includes(".")?V1(r,e):()=>r[e]:e.bind(r,r);let s;Ct(t)?s=t:(s=t.handler,n=t);const a=on;Ya(this);const c=j1(i,s.bind(r),n);return a?Ya(a):Es(),c}function V1(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function vs(e,t){if(!le(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),pn(e))vs(e.value,t);else if(Et(e))for(let n=0;n<e.length;n++)vs(e[n],t);else if(u1(e)||Ua(e))e.forEach(n=>{vs(n,t)});else if(f1(e))for(const n in e)vs(e[n],t);return e}function Bc(e,t){const n=vr;if(n===null)return e;const r=Qp(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[a,c,l,h=ie]=t[s];a&&(Ct(a)&&(a={mounted:a,updated:a}),a.deep&&vs(c),i.push({dir:a,instance:r,value:c,oldValue:void 0,arg:l,modifiers:h}))}return e}function as(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let a=0;a<i.length;a++){const c=i[a];s&&(c.oldValue=s[a].value);let l=c.dir[r];l&&(Iu(),Fr(l,n,8,[e.el,c,e,t]),Tu())}}function B1(e,t){return Ct(e)?(()=>Je({name:e.name},t,{setup:e}))():e}const Ph=e=>!!e.type.__asyncLoader,q1=e=>e.type.__isKeepAlive;function P2(e,t){H1(e,"a",t)}function k2(e,t){H1(e,"da",t)}function H1(e,t,n=on){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if($p(t,r,n),n){let i=n.parent;for(;i&&i.parent;)q1(i.parent.vnode)&&D2(r,t,n,i),i=i.parent}}function D2(e,t,n,r){const i=$p(t,e,r,!0);$1(()=>{w_(r[t],i)},n)}function $p(e,t,n=on,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...a)=>{if(n.isUnmounted)return;Iu(),Ya(n);const c=Fr(t,n,e,a);return Es(),Tu(),c});return r?i.unshift(s):i.push(s),s}}const Gi=e=>(t,n=on)=>(!sl||e==="sp")&&$p(e,(...r)=>t(...r),n),G1=Gi("bm"),W1=Gi("m"),L2=Gi("bu"),M2=Gi("u"),F2=Gi("bum"),$1=Gi("um"),U2=Gi("sp"),j2=Gi("rtg"),V2=Gi("rtc");function B2(e,t=on){$p("ec",e,t)}const k_="components";function Br(e,t){return K1(k_,e,!0,t)||e}const z1=Symbol.for("v-ndc");function q2(e){return ke(e)?K1(k_,e,!1)||e:e||z1}function K1(e,t,n=!0,r=!1){const i=vr||on;if(i){const s=i.type;if(e===k_){const c=_U(s,!1);if(c&&(c===t||c===fi(t)||c===Bp(fi(t))))return s}const a=GT(i[e]||s[e],t)||GT(i.appContext[e],t);return!a&&r?s:a}}function GT(e,t){return e&&(e[t]||e[fi(t)]||e[Bp(fi(t))])}function Co(e,t,n,r){let i;const s=n&&n[r];if(Et(e)||ke(e)){i=new Array(e.length);for(let a=0,c=e.length;a<c;a++)i[a]=t(e[a],a,void 0,s&&s[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,s&&s[a])}else if(le(e))if(e[Symbol.iterator])i=Array.from(e,(a,c)=>t(a,c,void 0,s&&s[c]));else{const a=Object.keys(e);i=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const h=a[c];i[c]=t(e[h],h,c,s&&s[c])}}else i=[];return n&&(n[r]=i),i}const vy=e=>e?oN(e)?Qp(e)||e.proxy:vy(e.parent):null,qc=Je(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>vy(e.parent),$root:e=>vy(e.root),$emit:e=>e.emit,$options:e=>D_(e),$forceUpdate:e=>e.f||(e.f=()=>P_(e.update)),$nextTick:e=>e.n||(e.n=k1.bind(e.proxy)),$watch:e=>x2.bind(e)}),fm=(e,t)=>e!==ie&&!e.__isScriptSetup&&jt(e,t),H2={get({_:e},t){const{ctx:n,setupState:r,data:i,props:s,accessCache:a,type:c,appContext:l}=e;let h;if(t[0]!=="$"){const y=a[t];if(y!==void 0)switch(y){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(fm(r,t))return a[t]=1,r[t];if(i!==ie&&jt(i,t))return a[t]=2,i[t];if((h=e.propsOptions[0])&&jt(h,t))return a[t]=3,s[t];if(n!==ie&&jt(n,t))return a[t]=4,n[t];gy&&(a[t]=0)}}const p=qc[t];let v,m;if(p)return t==="$attrs"&&Wn(e,"get",t),p(e);if((v=c.__cssModules)&&(v=v[t]))return v;if(n!==ie&&jt(n,t))return a[t]=4,n[t];if(m=l.config.globalProperties,jt(m,t))return m[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return fm(i,t)?(i[t]=n,!0):r!==ie&&jt(r,t)?(r[t]=n,!0):jt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},a){let c;return!!n[a]||e!==ie&&jt(e,a)||fm(t,a)||(c=s[0])&&jt(c,a)||jt(r,a)||jt(qc,a)||jt(i.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:jt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function WT(e){return Et(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let gy=!0;function G2(e){const t=D_(e),n=e.proxy,r=e.ctx;gy=!1,t.beforeCreate&&$T(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:a,watch:c,provide:l,inject:h,created:p,beforeMount:v,mounted:m,beforeUpdate:y,updated:b,activated:E,deactivated:I,beforeDestroy:C,beforeUnmount:P,destroyed:D,unmounted:F,render:Q,renderTracked:U,renderTriggered:_t,errorCaptured:Wt,serverPrefetch:lt,expose:Ze,inheritAttrs:O,components:Wr,directives:cn,filters:Vo}=t;if(h&&W2(h,r,null),a)for(const Ft in a){const Ut=a[Ft];Ct(Ut)&&(r[Ft]=Ut.bind(n))}if(i){const Ft=i.call(n,n);le(Ft)&&(e.data=Ml(Ft))}if(gy=!0,s)for(const Ft in s){const Ut=s[Ft],fe=Ct(Ut)?Ut.bind(n,n):Ct(Ut.get)?Ut.get.bind(n,n):Mr,ur=!Ct(Ut)&&Ct(Ut.set)?Ut.set.bind(n):Mr,tn=dr({get:fe,set:ur});Object.defineProperty(r,Ft,{enumerable:!0,configurable:!0,get:()=>tn.value,set:Ge=>tn.value=Ge})}if(c)for(const Ft in c)Q1(c[Ft],r,n,Ft);if(l){const Ft=Ct(l)?l.call(n):l;Reflect.ownKeys(Ft).forEach(Ut=>{kh(Ut,Ft[Ut])})}p&&$T(p,e,"c");function oe(Ft,Ut){Et(Ut)?Ut.forEach(fe=>Ft(fe.bind(n))):Ut&&Ft(Ut.bind(n))}if(oe(G1,v),oe(W1,m),oe(L2,y),oe(M2,b),oe(P2,E),oe(k2,I),oe(B2,Wt),oe(V2,U),oe(j2,_t),oe(F2,P),oe($1,F),oe(U2,lt),Et(Ze))if(Ze.length){const Ft=e.exposed||(e.exposed={});Ze.forEach(Ut=>{Object.defineProperty(Ft,Ut,{get:()=>n[Ut],set:fe=>n[Ut]=fe})})}else e.exposed||(e.exposed={});Q&&e.render===Mr&&(e.render=Q),O!=null&&(e.inheritAttrs=O),Wr&&(e.components=Wr),cn&&(e.directives=cn)}function W2(e,t,n=Mr){Et(e)&&(e=my(e));for(const r in e){const i=e[r];let s;le(i)?"default"in i?s=Ur(i.from||r,i.default,!0):s=Ur(i.from||r):s=Ur(i),pn(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[r]=s}}function $T(e,t,n){Fr(Et(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Q1(e,t,n,r){const i=r.includes(".")?V1(n,r):()=>n[r];if(ke(e)){const s=t[e];Ct(s)&&qa(i,s)}else if(Ct(e))qa(i,e.bind(n));else if(le(e))if(Et(e))e.forEach(s=>Q1(s,t,n,r));else{const s=Ct(e.handler)?e.handler.bind(n):t[e.handler];Ct(s)&&qa(i,s,e)}}function D_(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,c=s.get(t);let l;return c?l=c:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(h=>Yh(l,h,a,!0)),Yh(l,t,a)),le(t)&&s.set(t,l),l}function Yh(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&Yh(e,s,n,!0),i&&i.forEach(a=>Yh(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const c=$2[a]||n&&n[a];e[a]=c?c(e[a],t[a]):t[a]}return e}const $2={data:zT,props:KT,emits:KT,methods:Mc,computed:Mc,beforeCreate:An,created:An,beforeMount:An,mounted:An,beforeUpdate:An,updated:An,beforeDestroy:An,beforeUnmount:An,destroyed:An,unmounted:An,activated:An,deactivated:An,errorCaptured:An,serverPrefetch:An,components:Mc,directives:Mc,watch:K2,provide:zT,inject:z2};function zT(e,t){return t?e?function(){return Je(Ct(e)?e.call(this,this):e,Ct(t)?t.call(this,this):t)}:t:e}function z2(e,t){return Mc(my(e),my(t))}function my(e){if(Et(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function An(e,t){return e?[...new Set([].concat(e,t))]:t}function Mc(e,t){return e?Je(Object.create(null),e,t):t}function KT(e,t){return e?Et(e)&&Et(t)?[...new Set([...e,...t])]:Je(Object.create(null),WT(e),WT(t??{})):t}function K2(e,t){if(!e)return t;if(!t)return e;const n=Je(Object.create(null),e);for(const r in t)n[r]=An(e[r],t[r]);return n}function Y1(){return{app:null,config:{isNativeTag:AF,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Q2=0;function Y2(e,t){return function(r,i=null){Ct(r)||(r=Je({},r)),i!=null&&!le(i)&&(i=null);const s=Y1(),a=new Set;let c=!1;const l=s.app={_uid:Q2++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:IU,get config(){return s.config},set config(h){},use(h,...p){return a.has(h)||(h&&Ct(h.install)?(a.add(h),h.install(l,...p)):Ct(h)&&(a.add(h),h(l,...p))),l},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),l},component(h,p){return p?(s.components[h]=p,l):s.components[h]},directive(h,p){return p?(s.directives[h]=p,l):s.directives[h]},mount(h,p,v){if(!c){const m=ye(r,i);return m.appContext=s,p&&t?t(m,h):e(m,h,v),c=!0,l._container=h,h.__vue_app__=l,Qp(m.component)||m.component.proxy}},unmount(){c&&(e(null,l._container),delete l._container.__vue_app__)},provide(h,p){return s.provides[h]=p,l},runWithContext(h){Xh=l;try{return h()}finally{Xh=null}}};return l}}let Xh=null;function kh(e,t){if(on){let n=on.provides;const r=on.parent&&on.parent.provides;r===n&&(n=on.provides=Object.create(r)),n[e]=t}}function Ur(e,t,n=!1){const r=on||vr;if(r||Xh){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:Xh._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Ct(t)?t.call(r&&r.proxy):t}}function X2(e,t,n,r=!1){const i={},s={};zh(s,Kp,1),e.propsDefaults=Object.create(null),X1(e,t,i,s);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:T1(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function J2(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=e,c=Gt(i),[l]=e.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const p=e.vnode.dynamicProps;for(let v=0;v<p.length;v++){let m=p[v];if(Gp(e.emitsOptions,m))continue;const y=t[m];if(l)if(jt(s,m))y!==s[m]&&(s[m]=y,h=!0);else{const b=fi(m);i[b]=yy(l,c,b,y,e,!1)}else y!==s[m]&&(s[m]=y,h=!0)}}}else{X1(e,t,i,s)&&(h=!0);let p;for(const v in c)(!t||!jt(t,v)&&((p=js(v))===v||!jt(t,p)))&&(l?n&&(n[v]!==void 0||n[p]!==void 0)&&(i[v]=yy(l,c,v,void 0,e,!0)):delete i[v]);if(s!==c)for(const v in s)(!t||!jt(t,v))&&(delete s[v],h=!0)}h&&Ui(e,"set","$attrs")}function X1(e,t,n,r){const[i,s]=e.propsOptions;let a=!1,c;if(t)for(let l in t){if(Oh(l))continue;const h=t[l];let p;i&&jt(i,p=fi(l))?!s||!s.includes(p)?n[p]=h:(c||(c={}))[p]=h:Gp(e.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,a=!0)}if(s){const l=Gt(n),h=c||ie;for(let p=0;p<s.length;p++){const v=s[p];n[v]=yy(i,l,v,h[v],e,!jt(h,v))}}return a}function yy(e,t,n,r,i,s){const a=e[n];if(a!=null){const c=jt(a,"default");if(c&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Ct(l)){const{propsDefaults:h}=i;n in h?r=h[n]:(Ya(i),r=h[n]=l.call(null,t),Es())}else r=l}a[0]&&(s&&!c?r=!1:a[1]&&(r===""||r===js(n))&&(r=!0))}return r}function J1(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const s=e.props,a={},c=[];let l=!1;if(!Ct(e)){const p=v=>{l=!0;const[m,y]=J1(v,t,!0);Je(a,m),y&&c.push(...y)};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}if(!s&&!l)return le(e)&&r.set(e,Fa),Fa;if(Et(s))for(let p=0;p<s.length;p++){const v=fi(s[p]);QT(v)&&(a[v]=ie)}else if(s)for(const p in s){const v=fi(p);if(QT(v)){const m=s[p],y=a[v]=Et(m)||Ct(m)?{type:m}:Je({},m);if(y){const b=JT(Boolean,y.type),E=JT(String,y.type);y[0]=b>-1,y[1]=E<0||b<E,(b>-1||jt(y,"default"))&&c.push(v)}}}const h=[a,c];return le(e)&&r.set(e,h),h}function QT(e){return e[0]!=="$"}function YT(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function XT(e,t){return YT(e)===YT(t)}function JT(e,t){return Et(t)?t.findIndex(n=>XT(n,e)):Ct(t)&&XT(t,e)?0:-1}const Z1=e=>e[0]==="_"||e==="$stable",L_=e=>Et(e)?e.map(ri):[ri(e)],Z2=(e,t,n)=>{if(t._n)return t;const r=Wp((...i)=>L_(t(...i)),n);return r._c=!1,r},tN=(e,t,n)=>{const r=e._ctx;for(const i in e){if(Z1(i))continue;const s=e[i];if(Ct(s))t[i]=Z2(i,s,r);else if(s!=null){const a=L_(s);t[i]=()=>a}}},eN=(e,t)=>{const n=L_(t);e.slots.default=()=>n},tU=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Gt(t),zh(t,"_",n)):tN(t,e.slots={})}else e.slots={},t&&eN(e,t);zh(e.slots,Kp,1)},eU=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,a=ie;if(r.shapeFlag&32){const c=t._;c?n&&c===1?s=!1:(Je(i,t),!n&&c===1&&delete i._):(s=!t.$stable,tN(t,i)),a=t}else t&&(eN(e,t),a={default:1});if(s)for(const c in i)!Z1(c)&&!(c in a)&&delete i[c]};function _y(e,t,n,r,i=!1){if(Et(e)){e.forEach((m,y)=>_y(m,t&&(Et(t)?t[y]:t),n,r,i));return}if(Ph(r)&&!i)return;const s=r.shapeFlag&4?Qp(r.component)||r.component.proxy:r.el,a=i?null:s,{i:c,r:l}=e,h=t&&t.r,p=c.refs===ie?c.refs={}:c.refs,v=c.setupState;if(h!=null&&h!==l&&(ke(h)?(p[h]=null,jt(v,h)&&(v[h]=null)):pn(h)&&(h.value=null)),Ct(l))Eo(l,c,12,[a,p]);else{const m=ke(l),y=pn(l);if(m||y){const b=()=>{if(e.f){const E=m?jt(v,l)?v[l]:p[l]:l.value;i?Et(E)&&w_(E,s):Et(E)?E.includes(s)||E.push(s):m?(p[l]=[s],jt(v,l)&&(v[l]=p[l])):(l.value=[s],e.k&&(p[e.k]=l.value))}else m?(p[l]=a,jt(v,l)&&(v[l]=a)):y&&(l.value=a,e.k&&(p[e.k]=a))};a?(b.id=-1,Vn(b,n)):b()}}}const Vn=O2;function nU(e){return rU(e)}function rU(e,t){const n=cy();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:c,createComment:l,setText:h,setElementText:p,parentNode:v,nextSibling:m,setScopeId:y=Mr,insertStaticContent:b}=e,E=(S,A,x,L=null,V=null,B=null,tt=!1,z=null,X=!!A.dynamicChildren)=>{if(S===A)return;S&&!Ac(S,A)&&(L=j(S),Ge(S,V,B,!0),S=null),A.patchFlag===-2&&(X=!1,A.dynamicChildren=null);const{type:W,ref:pt,shapeFlag:st}=A;switch(W){case zp:I(S,A,x,L);break;case Rs:C(S,A,x,L);break;case Dh:S==null&&P(A,x,L,tt);break;case Fe:Wr(S,A,x,L,V,B,tt,z,X);break;default:st&1?Q(S,A,x,L,V,B,tt,z,X):st&6?cn(S,A,x,L,V,B,tt,z,X):(st&64||st&128)&&W.process(S,A,x,L,V,B,tt,z,X,H)}pt!=null&&V&&_y(pt,S&&S.ref,B,A||S,!A)},I=(S,A,x,L)=>{if(S==null)r(A.el=c(A.children),x,L);else{const V=A.el=S.el;A.children!==S.children&&h(V,A.children)}},C=(S,A,x,L)=>{S==null?r(A.el=l(A.children||""),x,L):A.el=S.el},P=(S,A,x,L)=>{[S.el,S.anchor]=b(S.children,A,x,L,S.el,S.anchor)},D=({el:S,anchor:A},x,L)=>{let V;for(;S&&S!==A;)V=m(S),r(S,x,L),S=V;r(A,x,L)},F=({el:S,anchor:A})=>{let x;for(;S&&S!==A;)x=m(S),i(S),S=x;i(A)},Q=(S,A,x,L,V,B,tt,z,X)=>{tt=tt||A.type==="svg",S==null?U(A,x,L,V,B,tt,z,X):lt(S,A,V,B,tt,z,X)},U=(S,A,x,L,V,B,tt,z)=>{let X,W;const{type:pt,props:st,shapeFlag:dt,transition:wt,dirs:Nt}=S;if(X=S.el=a(S.type,B,st&&st.is,st),dt&8?p(X,S.children):dt&16&&Wt(S.children,X,null,L,V,B&&pt!=="foreignObject",tt,z),Nt&&as(S,null,L,"created"),_t(X,S,S.scopeId,tt,L),st){for(const vt in st)vt!=="value"&&!Oh(vt)&&s(X,vt,null,st[vt],B,S.children,L,V,We);"value"in st&&s(X,"value",null,st.value),(W=st.onVnodeBeforeMount)&&ei(W,L,S)}Nt&&as(S,null,L,"beforeMount");const Yt=(!V||V&&!V.pendingBranch)&&wt&&!wt.persisted;Yt&&wt.beforeEnter(X),r(X,A,x),((W=st&&st.onVnodeMounted)||Yt||Nt)&&Vn(()=>{W&&ei(W,L,S),Yt&&wt.enter(X),Nt&&as(S,null,L,"mounted")},V)},_t=(S,A,x,L,V)=>{if(x&&y(S,x),L)for(let B=0;B<L.length;B++)y(S,L[B]);if(V){let B=V.subTree;if(A===B){const tt=V.vnode;_t(S,tt,tt.scopeId,tt.slotScopeIds,V.parent)}}},Wt=(S,A,x,L,V,B,tt,z,X=0)=>{for(let W=X;W<S.length;W++){const pt=S[W]=z?lo(S[W]):ri(S[W]);E(null,pt,A,x,L,V,B,tt,z)}},lt=(S,A,x,L,V,B,tt)=>{const z=A.el=S.el;let{patchFlag:X,dynamicChildren:W,dirs:pt}=A;X|=S.patchFlag&16;const st=S.props||ie,dt=A.props||ie;let wt;x&&us(x,!1),(wt=dt.onVnodeBeforeUpdate)&&ei(wt,x,A,S),pt&&as(A,S,x,"beforeUpdate"),x&&us(x,!0);const Nt=V&&A.type!=="foreignObject";if(W?Ze(S.dynamicChildren,W,z,x,L,Nt,B):tt||Ut(S,A,z,null,x,L,Nt,B,!1),X>0){if(X&16)O(z,A,st,dt,x,L,V);else if(X&2&&st.class!==dt.class&&s(z,"class",null,dt.class,V),X&4&&s(z,"style",st.style,dt.style,V),X&8){const Yt=A.dynamicProps;for(let vt=0;vt<Yt.length;vt++){const se=Yt[vt],$e=st[se],_i=dt[se];(_i!==$e||se==="value")&&s(z,se,$e,_i,V,S.children,x,L,We)}}X&1&&S.children!==A.children&&p(z,A.children)}else!tt&&W==null&&O(z,A,st,dt,x,L,V);((wt=dt.onVnodeUpdated)||pt)&&Vn(()=>{wt&&ei(wt,x,A,S),pt&&as(A,S,x,"updated")},L)},Ze=(S,A,x,L,V,B,tt)=>{for(let z=0;z<A.length;z++){const X=S[z],W=A[z],pt=X.el&&(X.type===Fe||!Ac(X,W)||X.shapeFlag&70)?v(X.el):x;E(X,W,pt,null,L,V,B,tt,!0)}},O=(S,A,x,L,V,B,tt)=>{if(x!==L){if(x!==ie)for(const z in x)!Oh(z)&&!(z in L)&&s(S,z,x[z],null,tt,A.children,V,B,We);for(const z in L){if(Oh(z))continue;const X=L[z],W=x[z];X!==W&&z!=="value"&&s(S,z,W,X,tt,A.children,V,B,We)}"value"in L&&s(S,"value",x.value,L.value)}},Wr=(S,A,x,L,V,B,tt,z,X)=>{const W=A.el=S?S.el:c(""),pt=A.anchor=S?S.anchor:c("");let{patchFlag:st,dynamicChildren:dt,slotScopeIds:wt}=A;wt&&(z=z?z.concat(wt):wt),S==null?(r(W,x,L),r(pt,x,L),Wt(A.children,x,pt,V,B,tt,z,X)):st>0&&st&64&&dt&&S.dynamicChildren?(Ze(S.dynamicChildren,dt,x,V,B,tt,z),(A.key!=null||V&&A===V.subTree)&&nN(S,A,!0)):Ut(S,A,x,pt,V,B,tt,z,X)},cn=(S,A,x,L,V,B,tt,z,X)=>{A.slotScopeIds=z,S==null?A.shapeFlag&512?V.ctx.activate(A,x,L,tt,X):Vo(A,x,L,V,B,tt,X):$r(S,A,X)},Vo=(S,A,x,L,V,B,tt)=>{const z=S.component=dU(S,L,V);if(q1(S)&&(z.ctx.renderer=H),vU(z),z.asyncDep){if(V&&V.registerDep(z,oe),!S.el){const X=z.subTree=ye(Rs);C(null,X,A,x)}return}oe(z,S,A,x,V,B,tt)},$r=(S,A,x)=>{const L=A.component=S.component;if(C2(S,A,x))if(L.asyncDep&&!L.asyncResolved){Ft(L,A,x);return}else L.next=A,b2(L.update),L.update();else A.el=S.el,L.vnode=A},oe=(S,A,x,L,V,B,tt)=>{const z=()=>{if(S.isMounted){let{next:pt,bu:st,u:dt,parent:wt,vnode:Nt}=S,Yt=pt,vt;us(S,!1),pt?(pt.el=Nt.el,Ft(S,pt,tt)):pt=Nt,st&&xh(st),(vt=pt.props&&pt.props.onVnodeBeforeUpdate)&&ei(vt,wt,pt,Nt),us(S,!0);const se=lm(S),$e=S.subTree;S.subTree=se,E($e,se,v($e.el),j($e),S,V,B),pt.el=se.el,Yt===null&&N2(S,se.el),dt&&Vn(dt,V),(vt=pt.props&&pt.props.onVnodeUpdated)&&Vn(()=>ei(vt,wt,pt,Nt),V)}else{let pt;const{el:st,props:dt}=A,{bm:wt,m:Nt,parent:Yt}=S,vt=Ph(A);if(us(S,!1),wt&&xh(wt),!vt&&(pt=dt&&dt.onVnodeBeforeMount)&&ei(pt,Yt,A),us(S,!0),st&&Vt){const se=()=>{S.subTree=lm(S),Vt(st,S.subTree,S,V,null)};vt?A.type.__asyncLoader().then(()=>!S.isUnmounted&&se()):se()}else{const se=S.subTree=lm(S);E(null,se,x,L,S,V,B),A.el=se.el}if(Nt&&Vn(Nt,V),!vt&&(pt=dt&&dt.onVnodeMounted)){const se=A;Vn(()=>ei(pt,Yt,se),V)}(A.shapeFlag&256||Yt&&Ph(Yt.vnode)&&Yt.vnode.shapeFlag&256)&&S.a&&Vn(S.a,V),S.isMounted=!0,A=x=L=null}},X=S.effect=new S_(z,()=>P_(W),S.scope),W=S.update=()=>X.run();W.id=S.uid,us(S,!0),W()},Ft=(S,A,x)=>{A.component=S;const L=S.vnode.props;S.vnode=A,S.next=null,J2(S,A.props,L,x),eU(S,A.children,x),Iu(),qT(),Tu()},Ut=(S,A,x,L,V,B,tt,z,X=!1)=>{const W=S&&S.children,pt=S?S.shapeFlag:0,st=A.children,{patchFlag:dt,shapeFlag:wt}=A;if(dt>0){if(dt&128){ur(W,st,x,L,V,B,tt,z,X);return}else if(dt&256){fe(W,st,x,L,V,B,tt,z,X);return}}wt&8?(pt&16&&We(W,V,B),st!==W&&p(x,st)):pt&16?wt&16?ur(W,st,x,L,V,B,tt,z,X):We(W,V,B,!0):(pt&8&&p(x,""),wt&16&&Wt(st,x,L,V,B,tt,z,X))},fe=(S,A,x,L,V,B,tt,z,X)=>{S=S||Fa,A=A||Fa;const W=S.length,pt=A.length,st=Math.min(W,pt);let dt;for(dt=0;dt<st;dt++){const wt=A[dt]=X?lo(A[dt]):ri(A[dt]);E(S[dt],wt,x,null,V,B,tt,z,X)}W>pt?We(S,V,B,!0,!1,st):Wt(A,x,L,V,B,tt,z,X,st)},ur=(S,A,x,L,V,B,tt,z,X)=>{let W=0;const pt=A.length;let st=S.length-1,dt=pt-1;for(;W<=st&&W<=dt;){const wt=S[W],Nt=A[W]=X?lo(A[W]):ri(A[W]);if(Ac(wt,Nt))E(wt,Nt,x,null,V,B,tt,z,X);else break;W++}for(;W<=st&&W<=dt;){const wt=S[st],Nt=A[dt]=X?lo(A[dt]):ri(A[dt]);if(Ac(wt,Nt))E(wt,Nt,x,null,V,B,tt,z,X);else break;st--,dt--}if(W>st){if(W<=dt){const wt=dt+1,Nt=wt<pt?A[wt].el:L;for(;W<=dt;)E(null,A[W]=X?lo(A[W]):ri(A[W]),x,Nt,V,B,tt,z,X),W++}}else if(W>dt)for(;W<=st;)Ge(S[W],V,B,!0),W++;else{const wt=W,Nt=W,Yt=new Map;for(W=Nt;W<=dt;W++){const we=A[W]=X?lo(A[W]):ri(A[W]);we.key!=null&&Yt.set(we.key,W)}let vt,se=0;const $e=dt-Nt+1;let _i=!1,Bu=0;const ne=new Array($e);for(W=0;W<$e;W++)ne[W]=0;for(W=wt;W<=st;W++){const we=S[W];if(se>=$e){Ge(we,V,B,!0);continue}let De;if(we.key!=null)De=Yt.get(we.key);else for(vt=Nt;vt<=dt;vt++)if(ne[vt-Nt]===0&&Ac(we,A[vt])){De=vt;break}De===void 0?Ge(we,V,B,!0):(ne[De-Nt]=W+1,De>=Bu?Bu=De:_i=!0,E(we,A[De],x,null,V,B,tt,z,X),se++)}const qu=_i?iU(ne):Fa;for(vt=qu.length-1,W=$e-1;W>=0;W--){const we=Nt+W,De=A[we],Hu=we+1<pt?A[we+1].el:L;ne[W]===0?E(null,De,x,Hu,V,B,tt,z,X):_i&&(vt<0||W!==qu[vt]?tn(De,x,Hu,2):vt--)}}},tn=(S,A,x,L,V=null)=>{const{el:B,type:tt,transition:z,children:X,shapeFlag:W}=S;if(W&6){tn(S.component.subTree,A,x,L);return}if(W&128){S.suspense.move(A,x,L);return}if(W&64){tt.move(S,A,x,H);return}if(tt===Fe){r(B,A,x);for(let st=0;st<X.length;st++)tn(X[st],A,x,L);r(S.anchor,A,x);return}if(tt===Dh){D(S,A,x);return}if(L!==2&&W&1&&z)if(L===0)z.beforeEnter(B),r(B,A,x),Vn(()=>z.enter(B),V);else{const{leave:st,delayLeave:dt,afterLeave:wt}=z,Nt=()=>r(B,A,x),Yt=()=>{st(B,()=>{Nt(),wt&&wt()})};dt?dt(B,Nt,Yt):Yt()}else r(B,A,x)},Ge=(S,A,x,L=!1,V=!1)=>{const{type:B,props:tt,ref:z,children:X,dynamicChildren:W,shapeFlag:pt,patchFlag:st,dirs:dt}=S;if(z!=null&&_y(z,null,x,S,!0),pt&256){A.ctx.deactivate(S);return}const wt=pt&1&&dt,Nt=!Ph(S);let Yt;if(Nt&&(Yt=tt&&tt.onVnodeBeforeUnmount)&&ei(Yt,A,S),pt&6)Bo(S.component,x,L);else{if(pt&128){S.suspense.unmount(x,L);return}wt&&as(S,null,A,"beforeUnmount"),pt&64?S.type.remove(S,A,x,V,H,L):W&&(B!==Fe||st>0&&st&64)?We(W,A,x,!1,!0):(B===Fe&&st&384||!V&&pt&16)&&We(X,A,x),L&&mi(S)}(Nt&&(Yt=tt&&tt.onVnodeUnmounted)||wt)&&Vn(()=>{Yt&&ei(Yt,A,S),wt&&as(S,null,A,"unmounted")},x)},mi=S=>{const{type:A,el:x,anchor:L,transition:V}=S;if(A===Fe){yi(x,L);return}if(A===Dh){F(S);return}const B=()=>{i(x),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(S.shapeFlag&1&&V&&!V.persisted){const{leave:tt,delayLeave:z}=V,X=()=>tt(x,B);z?z(S.el,B,X):X()}else B()},yi=(S,A)=>{let x;for(;S!==A;)x=m(S),i(S),S=x;i(A)},Bo=(S,A,x)=>{const{bum:L,scope:V,update:B,subTree:tt,um:z}=S;L&&xh(L),V.stop(),B&&(B.active=!1,Ge(tt,S,A,x)),z&&Vn(z,A),Vn(()=>{S.isUnmounted=!0},A),A&&A.pendingBranch&&!A.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===A.pendingId&&(A.deps--,A.deps===0&&A.resolve())},We=(S,A,x,L=!1,V=!1,B=0)=>{for(let tt=B;tt<S.length;tt++)Ge(S[tt],A,x,L,V)},j=S=>S.shapeFlag&6?j(S.component.subTree):S.shapeFlag&128?S.suspense.next():m(S.anchor||S.el),nt=(S,A,x)=>{S==null?A._vnode&&Ge(A._vnode,null,null,!0):E(A._vnode||null,S,A,null,null,null,x),qT(),L1(),A._vnode=S},H={p:E,um:Ge,m:tn,r:mi,mt:Vo,mc:Wt,pc:Ut,pbc:Ze,n:j,o:e};let ft,Vt;return t&&([ft,Vt]=t(H)),{render:nt,hydrate:ft,createApp:Y2(nt,ft)}}function us({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function nN(e,t,n=!1){const r=e.children,i=t.children;if(Et(r)&&Et(i))for(let s=0;s<r.length;s++){const a=r[s];let c=i[s];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[s]=lo(i[s]),c.el=a.el),n||nN(a,c)),c.type===zp&&(c.el=a.el)}}function iU(e){const t=e.slice(),n=[0];let r,i,s,a,c;const l=e.length;for(r=0;r<l;r++){const h=e[r];if(h!==0){if(i=n[n.length-1],e[i]<h){t[r]=i,n.push(r);continue}for(s=0,a=n.length-1;s<a;)c=s+a>>1,e[n[c]]<h?s=c+1:a=c;h<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=t[a];return n}const oU=e=>e.__isTeleport,Fe=Symbol.for("v-fgt"),zp=Symbol.for("v-txt"),Rs=Symbol.for("v-cmt"),Dh=Symbol.for("v-stc"),Hc=[];let Pr=null;function te(e=!1){Hc.push(Pr=e?null:[])}function sU(){Hc.pop(),Pr=Hc[Hc.length-1]||null}let ol=1;function ZT(e){ol+=e}function rN(e){return e.dynamicChildren=ol>0?Pr||Fa:null,sU(),ol>0&&Pr&&Pr.push(e),e}function _e(e,t,n,r,i,s){return rN(ot(e,t,n,r,i,s,!0))}function Fl(e,t,n,r,i){return rN(ye(e,t,n,r,i,!0))}function wy(e){return e?e.__v_isVNode===!0:!1}function Ac(e,t){return e.type===t.type&&e.key===t.key}const Kp="__vInternal",iN=({key:e})=>e??null,Lh=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ke(e)||pn(e)||Ct(e)?{i:vr,r:e,k:t,f:!!n}:e:null);function ot(e,t=null,n=null,r=0,i=null,s=e===Fe?0:1,a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&iN(t),ref:t&&Lh(t),scopeId:U1,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:vr};return c?(M_(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=ke(n)?8:16),ol>0&&!a&&Pr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Pr.push(l),l}const ye=aU;function aU(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===z1)&&(e=Rs),wy(e)){const c=Qa(e,t,!0);return n&&M_(c,n),ol>0&&!s&&Pr&&(c.shapeFlag&6?Pr[Pr.indexOf(e)]=c:Pr.push(c)),c.patchFlag|=-2,c}if(wU(e)&&(e=e.__vccOpts),t){t=uU(t);let{class:c,style:l}=t;c&&!ke(c)&&(t.class=Eu(c)),le(l)&&(A1(l)&&!Et(l)&&(l=Je({},l)),t.style=I_(l))}const a=ke(e)?1:R2(e)?128:oU(e)?64:le(e)?4:Ct(e)?2:0;return ot(e,t,n,r,i,a,s,!0)}function uU(e){return e?A1(e)||Kp in e?Je({},e):e:null}function Qa(e,t,n=!1){const{props:r,ref:i,patchFlag:s,children:a}=e,c=t?fU(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&iN(c),ref:t&&t.ref?n&&i?Et(i)?i.concat(Lh(t)):[i,Lh(t)]:Lh(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fe?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Qa(e.ssContent),ssFallback:e.ssFallback&&Qa(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function cU(e=" ",t=0){return ye(zp,null,e,t)}function di(e,t){const n=ye(Dh,null,e);return n.staticCount=t,n}function lU(e="",t=!1){return t?(te(),Fl(Rs,null,e)):ye(Rs,null,e)}function ri(e){return e==null||typeof e=="boolean"?ye(Rs):Et(e)?ye(Fe,null,e.slice()):typeof e=="object"?lo(e):ye(zp,null,String(e))}function lo(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Qa(e)}function M_(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Et(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),M_(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(Kp in t)?t._ctx=vr:i===3&&vr&&(vr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ct(t)?(t={default:t,_ctx:vr},n=32):(t=String(t),r&64?(n=16,t=[cU(t)]):n=8);e.children=t,e.shapeFlag|=n}function fU(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Eu([t.class,r.class]));else if(i==="style")t.style=I_([t.style,r.style]);else if(Up(i)){const s=t[i],a=r[i];a&&s!==a&&!(Et(s)&&s.includes(a))&&(t[i]=s?[].concat(s,a):a)}else i!==""&&(t[i]=r[i])}return t}function ei(e,t,n,r=null){Fr(e,t,7,[n,r])}const hU=Y1();let pU=0;function dU(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||hU,s={uid:pU++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new jF(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:J1(r,i),emitsOptions:F1(r,i),emit:null,emitted:null,propsDefaults:ie,inheritAttrs:r.inheritAttrs,ctx:ie,data:ie,props:ie,attrs:ie,slots:ie,refs:ie,setupState:ie,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=T2.bind(null,s),e.ce&&e.ce(s),s}let on=null,F_,wa,tS="__VUE_INSTANCE_SETTERS__";(wa=cy()[tS])||(wa=cy()[tS]=[]),wa.push(e=>on=e),F_=e=>{wa.length>1?wa.forEach(t=>t(e)):wa[0](e)};const Ya=e=>{F_(e),e.scope.on()},Es=()=>{on&&on.scope.off(),F_(null)};function oN(e){return e.vnode.shapeFlag&4}let sl=!1;function vU(e,t=!1){sl=t;const{props:n,children:r}=e.vnode,i=oN(e);X2(e,n,i,t),tU(e,r);const s=i?gU(e,t):void 0;return sl=!1,s}function gU(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=C1(new Proxy(e.ctx,H2));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?yU(e):null;Ya(e),Iu();const s=Eo(r,e,0,[e.props,i]);if(Tu(),Es(),c1(s)){if(s.then(Es,Es),t)return s.then(a=>{eS(e,a,t)}).catch(a=>{Hp(a,e,0)});e.asyncDep=s}else eS(e,s,t)}else sN(e,t)}function eS(e,t,n){Ct(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:le(t)&&(e.setupState=x1(t)),sN(e,n)}let nS;function sN(e,t,n){const r=e.type;if(!e.render){if(!t&&nS&&!r.render){const i=r.template||D_(e).template;if(i){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:c,compilerOptions:l}=r,h=Je(Je({isCustomElement:s,delimiters:c},a),l);r.render=nS(i,h)}}e.render=r.render||Mr}Ya(e),Iu(),G2(e),Tu(),Es()}function mU(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return Wn(e,"get","$attrs"),t[n]}}))}function yU(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return mU(e)},slots:e.slots,emit:e.emit,expose:t}}function Qp(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(x1(C1(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in qc)return qc[n](e)},has(t,n){return n in t||n in qc}}))}function _U(e,t=!0){return Ct(e)?e.displayName||e.name:e.name||t&&e.__name}function wU(e){return Ct(e)&&"__vccOpts"in e}const dr=(e,t)=>y2(e,t,sl);function aN(e,t,n){const r=arguments.length;return r===2?le(t)&&!Et(t)?wy(t)?ye(e,null,[t]):ye(e,t):ye(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&wy(n)&&(n=[n]),ye(e,t,n))}const bU=Symbol.for("v-scx"),EU=()=>Ur(bU),IU="3.3.4",TU="http://www.w3.org/2000/svg",hs=typeof document<"u"?document:null,rS=hs&&hs.createElement("template"),SU={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?hs.createElementNS(TU,e):hs.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>hs.createTextNode(e),createComment:e=>hs.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>hs.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const a=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{rS.innerHTML=r?`<svg>${e}</svg>`:e;const c=rS.content;if(r){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}t.insertBefore(c,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function AU(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function CU(e,t,n){const r=e.style,i=ke(n);if(n&&!i){if(t&&!ke(t))for(const s in t)n[s]==null&&by(r,s,"");for(const s in n)by(r,s,n[s])}else{const s=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}const iS=/\s*!important$/;function by(e,t,n){if(Et(n))n.forEach(r=>by(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=NU(e,t);iS.test(n)?e.setProperty(js(r),n.replace(iS,""),"important"):e[r]=n}}const oS=["Webkit","Moz","ms"],hm={};function NU(e,t){const n=hm[t];if(n)return n;let r=fi(t);if(r!=="filter"&&r in e)return hm[t]=r;r=Bp(r);for(let i=0;i<oS.length;i++){const s=oS[i]+r;if(s in e)return hm[t]=s}return t}const sS="http://www.w3.org/1999/xlink";function RU(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(sS,t.slice(6,t.length)):e.setAttributeNS(sS,t,n);else{const s=FF(t);n==null||s&&!h1(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function OU(e,t,n,r,i,s,a){if(t==="innerHTML"||t==="textContent"){r&&a(r,i,s),e[t]=n??"";return}const c=e.tagName;if(t==="value"&&c!=="PROGRESS"&&!c.includes("-")){e._value=n;const h=c==="OPTION"?e.getAttribute("value"):e.value,p=n??"";h!==p&&(e.value=p),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const h=typeof e[t];h==="boolean"?n=h1(n):n==null&&h==="string"?(n="",l=!0):h==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function Na(e,t,n,r){e.addEventListener(t,n,r)}function xU(e,t,n,r){e.removeEventListener(t,n,r)}function PU(e,t,n,r,i=null){const s=e._vei||(e._vei={}),a=s[t];if(r&&a)a.value=r;else{const[c,l]=kU(t);if(r){const h=s[t]=MU(r,i);Na(e,c,h,l)}else a&&(xU(e,c,a,l),s[t]=void 0)}}const aS=/(?:Once|Passive|Capture)$/;function kU(e){let t;if(aS.test(e)){t={};let r;for(;r=e.match(aS);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):js(e.slice(2)),t]}let pm=0;const DU=Promise.resolve(),LU=()=>pm||(DU.then(()=>pm=0),pm=Date.now());function MU(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Fr(FU(r,n.value),t,5,[r])};return n.value=e,n.attached=LU(),n}function FU(e,t){if(Et(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const uS=/^on[a-z]/,UU=(e,t,n,r,i=!1,s,a,c,l)=>{t==="class"?AU(e,r,i):t==="style"?CU(e,n,r):Up(t)?__(t)||PU(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):jU(e,t,r,i))?OU(e,t,r,s,a,c,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),RU(e,t,r,i))};function jU(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&uS.test(t)&&Ct(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||uS.test(t)&&ke(n)?!1:t in e}const cS=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Et(t)?n=>xh(t,n):t};function VU(e){e.target.composing=!0}function lS(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Gc={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=cS(i);const s=r||i.props&&i.props.type==="number";Na(e,t?"change":"input",a=>{if(a.target.composing)return;let c=e.value;n&&(c=c.trim()),s&&(c=uy(c)),e._assign(c)}),n&&Na(e,"change",()=>{e.value=e.value.trim()}),t||(Na(e,"compositionstart",VU),Na(e,"compositionend",lS),Na(e,"change",lS))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},s){if(e._assign=cS(s),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&uy(e.value)===t))return;const a=t??"";e.value!==a&&(e.value=a)}},BU={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},qU=(e,t)=>n=>{if(!("key"in n))return;const r=js(n.key);if(t.some(i=>i===r||BU[i]===r))return e(n)},HU=Je({patchProp:UU},SU);let fS;function GU(){return fS||(fS=nU(HU))}const WU=(...e)=>{const t=GU().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=$U(r);if(!i)return;const s=t._component;!Ct(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function $U(e){return ke(e)?document.querySelector(e):e}function zU(){return uN().__VUE_DEVTOOLS_GLOBAL_HOOK__}function uN(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const KU=typeof Proxy=="function",QU="devtools-plugin:setup",YU="plugin:settings:set";let ba,Ey;function XU(){var e;return ba!==void 0||(typeof window<"u"&&window.performance?(ba=!0,Ey=window.performance):typeof global<"u"&&(!((e=global.perf_hooks)===null||e===void 0)&&e.performance)?(ba=!0,Ey=global.perf_hooks.performance):ba=!1),ba}function JU(){return XU()?Ey.now():Date.now()}class ZU{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const r={};if(t.settings)for(const a in t.settings){const c=t.settings[a];r[a]=c.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let s=Object.assign({},r);try{const a=localStorage.getItem(i),c=JSON.parse(a);Object.assign(s,c)}catch{}this.fallbacks={getSettings(){return s},setSettings(a){try{localStorage.setItem(i,JSON.stringify(a))}catch{}s=a},now(){return JU()}},n&&n.on(YU,(a,c)=>{a===this.plugin.id&&this.fallbacks.setSettings(c)}),this.proxiedOn=new Proxy({},{get:(a,c)=>this.target?this.target.on[c]:(...l)=>{this.onQueue.push({method:c,args:l})}}),this.proxiedTarget=new Proxy({},{get:(a,c)=>this.target?this.target[c]:c==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(c)?(...l)=>(this.targetQueue.push({method:c,args:l,resolve:()=>{}}),this.fallbacks[c](...l)):(...l)=>new Promise(h=>{this.targetQueue.push({method:c,args:l,resolve:h})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function tj(e,t){const n=e,r=uN(),i=zU(),s=KU&&n.enableEarlyProxy;if(i&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))i.emit(QU,e,t);else{const a=s?new ZU(n,i):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:a}),a&&t(a.proxiedTarget)}}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const Ra=typeof window<"u";function ej(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const zt=Object.assign;function dm(e,t){const n={};for(const r in t){const i=t[r];n[r]=qr(i)?i.map(e):e(i)}return n}const Wc=()=>{},qr=Array.isArray,nj=/\/$/,rj=e=>e.replace(nj,"");function vm(e,t,n="/"){let r,i={},s="",a="";const c=t.indexOf("#");let l=t.indexOf("?");return c<l&&c>=0&&(l=-1),l>-1&&(r=t.slice(0,l),s=t.slice(l+1,c>-1?c:t.length),i=e(s)),c>-1&&(r=r||t.slice(0,c),a=t.slice(c,t.length)),r=aj(r??t,n),{fullPath:r+(s&&"?")+s+a,path:r,query:i,hash:a}}function ij(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function hS(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function oj(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Xa(t.matched[r],n.matched[i])&&cN(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Xa(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function cN(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!sj(e[n],t[n]))return!1;return!0}function sj(e,t){return qr(e)?pS(e,t):qr(t)?pS(t,e):e===t}function pS(e,t){return qr(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function aj(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,a,c;for(a=0;a<r.length;a++)if(c=r[a],c!==".")if(c==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(a-(a===r.length?1:0)).join("/")}var al;(function(e){e.pop="pop",e.push="push"})(al||(al={}));var $c;(function(e){e.back="back",e.forward="forward",e.unknown=""})($c||($c={}));function uj(e){if(!e)if(Ra){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),rj(e)}const cj=/^[^#]+#/;function lj(e,t){return e.replace(cj,"#")+t}function fj(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Yp=()=>({left:window.pageXOffset,top:window.pageYOffset});function hj(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=fj(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function dS(e,t){return(history.state?history.state.position-t:-1)+e}const Iy=new Map;function pj(e,t){Iy.set(e,t)}function dj(e){const t=Iy.get(e);return Iy.delete(e),t}let vj=()=>location.protocol+"//"+location.host;function lN(e,t){const{pathname:n,search:r,hash:i}=t,s=e.indexOf("#");if(s>-1){let c=i.includes(e.slice(s))?e.slice(s).length:1,l=i.slice(c);return l[0]!=="/"&&(l="/"+l),hS(l,"")}return hS(n,e)+r+i}function gj(e,t,n,r){let i=[],s=[],a=null;const c=({state:m})=>{const y=lN(e,location),b=n.value,E=t.value;let I=0;if(m){if(n.value=y,t.value=m,a&&a===b){a=null;return}I=E?m.position-E.position:0}else r(y);i.forEach(C=>{C(n.value,b,{delta:I,type:al.pop,direction:I?I>0?$c.forward:$c.back:$c.unknown})})};function l(){a=n.value}function h(m){i.push(m);const y=()=>{const b=i.indexOf(m);b>-1&&i.splice(b,1)};return s.push(y),y}function p(){const{history:m}=window;m.state&&m.replaceState(zt({},m.state,{scroll:Yp()}),"")}function v(){for(const m of s)m();s=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",p)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",p,{passive:!0}),{pauseListeners:l,listen:h,destroy:v}}function vS(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?Yp():null}}function mj(e){const{history:t,location:n}=window,r={value:lN(e,n)},i={value:t.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,h,p){const v=e.indexOf("#"),m=v>-1?(n.host&&document.querySelector("base")?e:e.slice(v))+l:vj()+e+l;try{t[p?"replaceState":"pushState"](h,"",m),i.value=h}catch(y){console.error(y),n[p?"replace":"assign"](m)}}function a(l,h){const p=zt({},t.state,vS(i.value.back,l,i.value.forward,!0),h,{position:i.value.position});s(l,p,!0),r.value=l}function c(l,h){const p=zt({},i.value,t.state,{forward:l,scroll:Yp()});s(p.current,p,!0);const v=zt({},vS(r.value,l,null),{position:p.position+1},h);s(l,v,!1),r.value=l}return{location:r,state:i,push:c,replace:a}}function yj(e){e=uj(e);const t=mj(e),n=gj(e,t.state,t.location,t.replace);function r(s,a=!0){a||n.pauseListeners(),history.go(s)}const i=zt({location:"",base:e,go:r,createHref:lj.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function _j(e){return typeof e=="string"||e&&typeof e=="object"}function fN(e){return typeof e=="string"||typeof e=="symbol"}const io={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},hN=Symbol("");var gS;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(gS||(gS={}));function Ja(e,t){return zt(new Error,{type:e,[hN]:!0},t)}function Si(e,t){return e instanceof Error&&hN in e&&(t==null||!!(e.type&t))}const mS="[^/]+?",wj={sensitive:!1,strict:!1,start:!0,end:!0},bj=/[.+*?^${}()[\]/\\]/g;function Ej(e,t){const n=zt({},wj,t),r=[];let i=n.start?"^":"";const s=[];for(const h of e){const p=h.length?[]:[90];n.strict&&!h.length&&(i+="/");for(let v=0;v<h.length;v++){const m=h[v];let y=40+(n.sensitive?.25:0);if(m.type===0)v||(i+="/"),i+=m.value.replace(bj,"\\$&"),y+=40;else if(m.type===1){const{value:b,repeatable:E,optional:I,regexp:C}=m;s.push({name:b,repeatable:E,optional:I});const P=C||mS;if(P!==mS){y+=10;try{new RegExp(`(${P})`)}catch(F){throw new Error(`Invalid custom RegExp for param "${b}" (${P}): `+F.message)}}let D=E?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;v||(D=I&&h.length<2?`(?:/${D})`:"/"+D),I&&(D+="?"),i+=D,y+=20,I&&(y+=-8),E&&(y+=-20),P===".*"&&(y+=-50)}p.push(y)}r.push(p)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function c(h){const p=h.match(a),v={};if(!p)return null;for(let m=1;m<p.length;m++){const y=p[m]||"",b=s[m-1];v[b.name]=y&&b.repeatable?y.split("/"):y}return v}function l(h){let p="",v=!1;for(const m of e){(!v||!p.endsWith("/"))&&(p+="/"),v=!1;for(const y of m)if(y.type===0)p+=y.value;else if(y.type===1){const{value:b,repeatable:E,optional:I}=y,C=b in h?h[b]:"";if(qr(C)&&!E)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const P=qr(C)?C.join("/"):C;if(!P)if(I)m.length<2&&(p.endsWith("/")?p=p.slice(0,-1):v=!0);else throw new Error(`Missing required param "${b}"`);p+=P}}return p||"/"}return{re:a,score:r,keys:s,parse:c,stringify:l}}function Ij(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Tj(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const s=Ij(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(yS(r))return 1;if(yS(i))return-1}return i.length-r.length}function yS(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Sj={type:0,value:""},Aj=/[a-zA-Z0-9_]/;function Cj(e){if(!e)return[[]];if(e==="/")return[[Sj]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(y){throw new Error(`ERR (${n})/"${h}": ${y}`)}let n=0,r=n;const i=[];let s;function a(){s&&i.push(s),s=[]}let c=0,l,h="",p="";function v(){h&&(n===0?s.push({type:0,value:h}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:h,regexp:p,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),h="")}function m(){h+=l}for(;c<e.length;){if(l=e[c++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(h&&v(),a()):l===":"?(v(),n=1):m();break;case 4:m(),n=r;break;case 1:l==="("?n=2:Aj.test(l)?m():(v(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case 2:l===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+l:n=3:p+=l;break;case 3:v(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--,p="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${h}"`),v(),a(),i}function Nj(e,t,n){const r=Ej(Cj(e.path),n),i=zt(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Rj(e,t){const n=[],r=new Map;t=bS({strict:!1,end:!0,sensitive:!1},t);function i(p){return r.get(p)}function s(p,v,m){const y=!m,b=Oj(p);b.aliasOf=m&&m.record;const E=bS(t,p),I=[b];if("alias"in p){const D=typeof p.alias=="string"?[p.alias]:p.alias;for(const F of D)I.push(zt({},b,{components:m?m.record.components:b.components,path:F,aliasOf:m?m.record:b}))}let C,P;for(const D of I){const{path:F}=D;if(v&&F[0]!=="/"){const Q=v.record.path,U=Q[Q.length-1]==="/"?"":"/";D.path=v.record.path+(F&&U+F)}if(C=Nj(D,v,E),m?m.alias.push(C):(P=P||C,P!==C&&P.alias.push(C),y&&p.name&&!wS(C)&&a(p.name)),b.children){const Q=b.children;for(let U=0;U<Q.length;U++)s(Q[U],C,m&&m.children[U])}m=m||C,(C.record.components&&Object.keys(C.record.components).length||C.record.name||C.record.redirect)&&l(C)}return P?()=>{a(P)}:Wc}function a(p){if(fN(p)){const v=r.get(p);v&&(r.delete(p),n.splice(n.indexOf(v),1),v.children.forEach(a),v.alias.forEach(a))}else{const v=n.indexOf(p);v>-1&&(n.splice(v,1),p.record.name&&r.delete(p.record.name),p.children.forEach(a),p.alias.forEach(a))}}function c(){return n}function l(p){let v=0;for(;v<n.length&&Tj(p,n[v])>=0&&(p.record.path!==n[v].record.path||!pN(p,n[v]));)v++;n.splice(v,0,p),p.record.name&&!wS(p)&&r.set(p.record.name,p)}function h(p,v){let m,y={},b,E;if("name"in p&&p.name){if(m=r.get(p.name),!m)throw Ja(1,{location:p});E=m.record.name,y=zt(_S(v.params,m.keys.filter(P=>!P.optional).map(P=>P.name)),p.params&&_S(p.params,m.keys.map(P=>P.name))),b=m.stringify(y)}else if("path"in p)b=p.path,m=n.find(P=>P.re.test(b)),m&&(y=m.parse(b),E=m.record.name);else{if(m=v.name?r.get(v.name):n.find(P=>P.re.test(v.path)),!m)throw Ja(1,{location:p,currentLocation:v});E=m.record.name,y=zt({},v.params,p.params),b=m.stringify(y)}const I=[];let C=m;for(;C;)I.unshift(C.record),C=C.parent;return{name:E,path:b,params:y,matched:I,meta:Pj(I)}}return e.forEach(p=>s(p)),{addRoute:s,resolve:h,removeRoute:a,getRoutes:c,getRecordMatcher:i}}function _S(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Oj(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:xj(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function xj(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function wS(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Pj(e){return e.reduce((t,n)=>zt(t,n.meta),{})}function bS(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function pN(e,t){return t.children.some(n=>n===e||pN(e,n))}const dN=/#/g,kj=/&/g,Dj=/\//g,Lj=/=/g,Mj=/\?/g,vN=/\+/g,Fj=/%5B/g,Uj=/%5D/g,gN=/%5E/g,jj=/%60/g,mN=/%7B/g,Vj=/%7C/g,yN=/%7D/g,Bj=/%20/g;function U_(e){return encodeURI(""+e).replace(Vj,"|").replace(Fj,"[").replace(Uj,"]")}function qj(e){return U_(e).replace(mN,"{").replace(yN,"}").replace(gN,"^")}function Ty(e){return U_(e).replace(vN,"%2B").replace(Bj,"+").replace(dN,"%23").replace(kj,"%26").replace(jj,"`").replace(mN,"{").replace(yN,"}").replace(gN,"^")}function Hj(e){return Ty(e).replace(Lj,"%3D")}function Gj(e){return U_(e).replace(dN,"%23").replace(Mj,"%3F")}function Wj(e){return e==null?"":Gj(e).replace(Dj,"%2F")}function Jh(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function $j(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(vN," "),a=s.indexOf("="),c=Jh(a<0?s:s.slice(0,a)),l=a<0?null:Jh(s.slice(a+1));if(c in t){let h=t[c];qr(h)||(h=t[c]=[h]),h.push(l)}else t[c]=l}return t}function ES(e){let t="";for(let n in e){const r=e[n];if(n=Hj(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(qr(r)?r.map(s=>s&&Ty(s)):[r&&Ty(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function zj(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=qr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const Kj=Symbol(""),IS=Symbol(""),Xp=Symbol(""),j_=Symbol(""),Sy=Symbol("");function Cc(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function fo(e,t,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const l=v=>{v===!1?c(Ja(4,{from:n,to:t})):v instanceof Error?c(v):_j(v)?c(Ja(2,{from:t,to:v})):(s&&r.enterCallbacks[i]===s&&typeof v=="function"&&s.push(v),a())},h=e.call(r&&r.instances[i],t,n,l);let p=Promise.resolve(h);e.length<3&&(p=p.then(l)),p.catch(v=>c(v))})}function gm(e,t,n,r){const i=[];for(const s of e)for(const a in s.components){let c=s.components[a];if(!(t!=="beforeRouteEnter"&&!s.instances[a]))if(Qj(c)){const h=(c.__vccOpts||c)[t];h&&i.push(fo(h,n,r,s,a))}else{let l=c();i.push(()=>l.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${s.path}"`));const p=ej(h)?h.default:h;s.components[a]=p;const m=(p.__vccOpts||p)[t];return m&&fo(m,n,r,s,a)()}))}}return i}function Qj(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function TS(e){const t=Ur(Xp),n=Ur(j_),r=dr(()=>t.resolve(Va(e.to))),i=dr(()=>{const{matched:l}=r.value,{length:h}=l,p=l[h-1],v=n.matched;if(!p||!v.length)return-1;const m=v.findIndex(Xa.bind(null,p));if(m>-1)return m;const y=SS(l[h-2]);return h>1&&SS(p)===y&&v[v.length-1].path!==y?v.findIndex(Xa.bind(null,l[h-2])):m}),s=dr(()=>i.value>-1&&Zj(n.params,r.value.params)),a=dr(()=>i.value>-1&&i.value===n.matched.length-1&&cN(n.params,r.value.params));function c(l={}){return Jj(l)?t[Va(e.replace)?"replace":"push"](Va(e.to)).catch(Wc):Promise.resolve()}return{route:r,href:dr(()=>r.value.href),isActive:s,isExactActive:a,navigate:c}}const Yj=B1({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:TS,setup(e,{slots:t}){const n=Ml(TS(e)),{options:r}=Ur(Xp),i=dr(()=>({[AS(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[AS(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&t.default(n);return e.custom?s:aN("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Xj=Yj;function Jj(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Zj(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!qr(i)||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function SS(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const AS=(e,t,n)=>e??t??n,tV=B1({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=Ur(Sy),i=dr(()=>e.route||r.value),s=Ur(IS,0),a=dr(()=>{let h=Va(s);const{matched:p}=i.value;let v;for(;(v=p[h])&&!v.components;)h++;return h}),c=dr(()=>i.value.matched[a.value]);kh(IS,dr(()=>a.value+1)),kh(Kj,c),kh(Sy,i);const l=Oi();return qa(()=>[l.value,c.value,e.name],([h,p,v],[m,y,b])=>{p&&(p.instances[v]=h,y&&y!==p&&h&&h===m&&(p.leaveGuards.size||(p.leaveGuards=y.leaveGuards),p.updateGuards.size||(p.updateGuards=y.updateGuards))),h&&p&&(!y||!Xa(p,y)||!m)&&(p.enterCallbacks[v]||[]).forEach(E=>E(h))},{flush:"post"}),()=>{const h=i.value,p=e.name,v=c.value,m=v&&v.components[p];if(!m)return CS(n.default,{Component:m,route:h});const y=v.props[p],b=y?y===!0?h.params:typeof y=="function"?y(h):y:null,I=aN(m,zt({},b,t,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(v.instances[p]=null)},ref:l}));return CS(n.default,{Component:I,route:h})||I}}});function CS(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const eV=tV;function nV(e){const t=Rj(e.routes,e),n=e.parseQuery||$j,r=e.stringifyQuery||ES,i=e.history,s=Cc(),a=Cc(),c=Cc(),l=d2(io);let h=io;Ra&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=dm.bind(null,j=>""+j),v=dm.bind(null,Wj),m=dm.bind(null,Jh);function y(j,nt){let H,ft;return fN(j)?(H=t.getRecordMatcher(j),ft=nt):ft=j,t.addRoute(ft,H)}function b(j){const nt=t.getRecordMatcher(j);nt&&t.removeRoute(nt)}function E(){return t.getRoutes().map(j=>j.record)}function I(j){return!!t.getRecordMatcher(j)}function C(j,nt){if(nt=zt({},nt||l.value),typeof j=="string"){const x=vm(n,j,nt.path),L=t.resolve({path:x.path},nt),V=i.createHref(x.fullPath);return zt(x,L,{params:m(L.params),hash:Jh(x.hash),redirectedFrom:void 0,href:V})}let H;if("path"in j)H=zt({},j,{path:vm(n,j.path,nt.path).path});else{const x=zt({},j.params);for(const L in x)x[L]==null&&delete x[L];H=zt({},j,{params:v(x)}),nt.params=v(nt.params)}const ft=t.resolve(H,nt),Vt=j.hash||"";ft.params=p(m(ft.params));const S=ij(r,zt({},j,{hash:qj(Vt),path:ft.path})),A=i.createHref(S);return zt({fullPath:S,hash:Vt,query:r===ES?zj(j.query):j.query||{}},ft,{redirectedFrom:void 0,href:A})}function P(j){return typeof j=="string"?vm(n,j,l.value.path):zt({},j)}function D(j,nt){if(h!==j)return Ja(8,{from:nt,to:j})}function F(j){return _t(j)}function Q(j){return F(zt(P(j),{replace:!0}))}function U(j){const nt=j.matched[j.matched.length-1];if(nt&&nt.redirect){const{redirect:H}=nt;let ft=typeof H=="function"?H(j):H;return typeof ft=="string"&&(ft=ft.includes("?")||ft.includes("#")?ft=P(ft):{path:ft},ft.params={}),zt({query:j.query,hash:j.hash,params:"path"in ft?{}:j.params},ft)}}function _t(j,nt){const H=h=C(j),ft=l.value,Vt=j.state,S=j.force,A=j.replace===!0,x=U(H);if(x)return _t(zt(P(x),{state:typeof x=="object"?zt({},Vt,x.state):Vt,force:S,replace:A}),nt||H);const L=H;L.redirectedFrom=nt;let V;return!S&&oj(r,ft,H)&&(V=Ja(16,{to:L,from:ft}),tn(ft,ft,!0,!1)),(V?Promise.resolve(V):Ze(L,ft)).catch(B=>Si(B)?Si(B,2)?B:ur(B):Ut(B,L,ft)).then(B=>{if(B){if(Si(B,2))return _t(zt({replace:A},P(B.to),{state:typeof B.to=="object"?zt({},Vt,B.to.state):Vt,force:S}),nt||L)}else B=Wr(L,ft,!0,A,Vt);return O(L,ft,B),B})}function Wt(j,nt){const H=D(j,nt);return H?Promise.reject(H):Promise.resolve()}function lt(j){const nt=yi.values().next().value;return nt&&typeof nt.runWithContext=="function"?nt.runWithContext(j):j()}function Ze(j,nt){let H;const[ft,Vt,S]=rV(j,nt);H=gm(ft.reverse(),"beforeRouteLeave",j,nt);for(const x of ft)x.leaveGuards.forEach(L=>{H.push(fo(L,j,nt))});const A=Wt.bind(null,j,nt);return H.push(A),We(H).then(()=>{H=[];for(const x of s.list())H.push(fo(x,j,nt));return H.push(A),We(H)}).then(()=>{H=gm(Vt,"beforeRouteUpdate",j,nt);for(const x of Vt)x.updateGuards.forEach(L=>{H.push(fo(L,j,nt))});return H.push(A),We(H)}).then(()=>{H=[];for(const x of S)if(x.beforeEnter)if(qr(x.beforeEnter))for(const L of x.beforeEnter)H.push(fo(L,j,nt));else H.push(fo(x.beforeEnter,j,nt));return H.push(A),We(H)}).then(()=>(j.matched.forEach(x=>x.enterCallbacks={}),H=gm(S,"beforeRouteEnter",j,nt),H.push(A),We(H))).then(()=>{H=[];for(const x of a.list())H.push(fo(x,j,nt));return H.push(A),We(H)}).catch(x=>Si(x,8)?x:Promise.reject(x))}function O(j,nt,H){c.list().forEach(ft=>lt(()=>ft(j,nt,H)))}function Wr(j,nt,H,ft,Vt){const S=D(j,nt);if(S)return S;const A=nt===io,x=Ra?history.state:{};H&&(ft||A?i.replace(j.fullPath,zt({scroll:A&&x&&x.scroll},Vt)):i.push(j.fullPath,Vt)),l.value=j,tn(j,nt,H,A),ur()}let cn;function Vo(){cn||(cn=i.listen((j,nt,H)=>{if(!Bo.listening)return;const ft=C(j),Vt=U(ft);if(Vt){_t(zt(Vt,{replace:!0}),ft).catch(Wc);return}h=ft;const S=l.value;Ra&&pj(dS(S.fullPath,H.delta),Yp()),Ze(ft,S).catch(A=>Si(A,12)?A:Si(A,2)?(_t(A.to,ft).then(x=>{Si(x,20)&&!H.delta&&H.type===al.pop&&i.go(-1,!1)}).catch(Wc),Promise.reject()):(H.delta&&i.go(-H.delta,!1),Ut(A,ft,S))).then(A=>{A=A||Wr(ft,S,!1),A&&(H.delta&&!Si(A,8)?i.go(-H.delta,!1):H.type===al.pop&&Si(A,20)&&i.go(-1,!1)),O(ft,S,A)}).catch(Wc)}))}let $r=Cc(),oe=Cc(),Ft;function Ut(j,nt,H){ur(j);const ft=oe.list();return ft.length?ft.forEach(Vt=>Vt(j,nt,H)):console.error(j),Promise.reject(j)}function fe(){return Ft&&l.value!==io?Promise.resolve():new Promise((j,nt)=>{$r.add([j,nt])})}function ur(j){return Ft||(Ft=!j,Vo(),$r.list().forEach(([nt,H])=>j?H(j):nt()),$r.reset()),j}function tn(j,nt,H,ft){const{scrollBehavior:Vt}=e;if(!Ra||!Vt)return Promise.resolve();const S=!H&&dj(dS(j.fullPath,0))||(ft||!H)&&history.state&&history.state.scroll||null;return k1().then(()=>Vt(j,nt,S)).then(A=>A&&hj(A)).catch(A=>Ut(A,j,nt))}const Ge=j=>i.go(j);let mi;const yi=new Set,Bo={currentRoute:l,listening:!0,addRoute:y,removeRoute:b,hasRoute:I,getRoutes:E,resolve:C,options:e,push:F,replace:Q,go:Ge,back:()=>Ge(-1),forward:()=>Ge(1),beforeEach:s.add,beforeResolve:a.add,afterEach:c.add,onError:oe.add,isReady:fe,install(j){const nt=this;j.component("RouterLink",Xj),j.component("RouterView",eV),j.config.globalProperties.$router=nt,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>Va(l)}),Ra&&!mi&&l.value===io&&(mi=!0,F(i.location).catch(Vt=>{}));const H={};for(const Vt in io)Object.defineProperty(H,Vt,{get:()=>l.value[Vt],enumerable:!0});j.provide(Xp,nt),j.provide(j_,T1(H)),j.provide(Sy,l);const ft=j.unmount;yi.add(j),j.unmount=function(){yi.delete(j),yi.size<1&&(h=io,cn&&cn(),cn=null,l.value=io,mi=!1,Ft=!1),ft()}}};function We(j){return j.reduce((nt,H)=>nt.then(()=>lt(H)),Promise.resolve())}return Bo}function rV(e,t){const n=[],r=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let a=0;a<s;a++){const c=t.matched[a];c&&(e.matched.find(h=>Xa(h,c))?r.push(c):n.push(c));const l=e.matched[a];l&&(t.matched.find(h=>Xa(h,l))||i.push(l))}return[n,r,i]}function _N(){return Ur(Xp)}function iV(){return Ur(j_)}const wr=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},oV={},sV={class:"hidden lg:block lg:w-2/5 px-4 py-2"},aV=ot("div",{class:"relative mb-5"},[ot("input",{placeholder:" ",type:"text",class:"pl-10 rounded-full w-full p-2 bg-gray-100 text-sm focus:ring-1 focus:ring-primary focus:bg-white focus:outline-none"}),ot("i",{class:"fas fa-search absolute left-0 mt-2 ml-3 text-sm text-light"})],-1),uV={class:"w-full rounded-lg bg-gray-50 flex flex-col"},cV=ot("div",{class:"flex items-center justify-between px-3 py-1 border-b border-gray-100"},[ot("span",{class:"text-lg font-bold"},"  "),ot("i",{class:"text-center fas fa-cog text-lg text-primary hover:bg-blue-50 p-2 rounded-full"})],-1),lV=di('<div class="flex"><div class="flex-1 flex flex-col"><div class="text-gray-500">  </div><div class="font-bold text-lg"></div><div class="text-gray-500">3,564 </div></div><i class="fas fa-ellipsis-h text-gray-500"></i></div>',1),fV=[lV],hV=ot("div",{class:"px-4 py-2 hover:bg-gray-100"},[ot("span",{class:"text-primary text-lg px-4 py-2 rounded-xl"}," ")],-1),pV={class:"mt-5 w-full rounded-lg bg-gray-50 flex flex-col"},dV=ot("div",{class:"px-3 py-3 border-b border-gray-100"},[ot("span",{class:"text-lg font-bold"}," ")],-1),vV=di('<div class="flex items-center"><img src="http://picsum.photos/200" class="w-12 h-12 rounded-full mr-2"><div class="flex-1 flex flex-col"><div class="font-bold"></div><div class="text-gray-500 text-sm">@jung_jaeWoong</div></div><div><button class="border-2 border-primary hover:bg-blue-100 px-2 py-1 rounded-full text-primary text-sm"></button></div></div>',1),gV=[vV],mV=ot("div",{class:"px-4 py-2 hover:bg-gray-100"},[ot("span",{class:"text-primary text-lg px-4 py-2 rounded-xl"}," ")],-1);function yV(e,t,n,r,i,s){return te(),_e("div",sV,[aV,ot("div",uV,[cV,(te(),_e(Fe,null,Co(3,a=>ot("div",{class:"border-b border-gray-100 hover:bg-gray-100 px-4 py-2 cursor-pointer",key:a},fV)),64)),hV]),ot("div",pV,[dV,(te(),_e(Fe,null,Co(3,a=>ot("div",{class:"border-b border-gray-100 hover:bg-gray-100 px-4 py-2 cursor-pointer",key:a},gV)),64)),mV])])}const V_=wr(oV,[["render",yV]]),_V={},wV={class:"flex px-3 py-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer"},bV=di('<img src="http://picsum.photos/200" class="w-10 h-10 rounded-full hover:opacity-80 cursor-pointer"><div class="ml-3 flex-1 flex flex-col space-y-1"><div class="text-sm space-x-1"><span class="font-bold"></span><span class="text-gray-500 text-xs">@jjw</span><span></span><span class="text-gray-500 text-xs">7</span></div><div> ..... ..... ..... </div><div class="flex justify-between"><div class="text-gray-500 hover:text-primary"><i class="far fa-comment hover:bg-blue-50 rounded-full p-2"></i><span class="ml-1 text-gray-500 text-sm">1</span></div><div class="text-gray-500 hover:text-green-500"><i class="fa fa-retweet hover:bg-green-50 rounded-full p-2"></i><span class="ml-1 text-gray-500 text-sm">1</span></div><div class="text-gray-500 hover:text-red-500"><i class="far fa-heart hover:bg-red-50 rounded-full p-2"></i><span class="ml-1 text-gray-500 text-sm">1</span></div><div class="text-gray-500 hover:text-primary"><i class="far fa-share-square hover:bg-blue-50 rounded-full p-2"></i></div></div></div>',2),EV=[bV];function IV(e,t,n,r,i,s){return te(),_e("div",wV,EV)}const wN=wr(_V,[["render",IV]]),TV={components:{Trends:V_,Tweet:wN},setup(){}},SV={class:"flex-1 border-r border-gray-100 overflow-y-auto"},AV={class:"flex flex-col"},CV=di('<div class="border-b border-gray-100 px-3 py-2 font-bold text-lg">  </div><div class="flex px-3 py-3 border-b-8 border-gray-100"><img src="http://picsum.photos/200" class="w-10 h-10 rounded-full hover:opacity-80 cursor-pointer"><div class="ml-2 flex-1 flex flex-col"><textarea placeholder="   ?" class="w-full text-lg font-bold focus:outline-none mb-3 resize-none bg-gray-100"></textarea><div class="text-right"><button class="bg-primary hover:bg-dark text-sm font-bold text-white px-4 py-1 rounded-full"></button></div></div></div>',2);function NV(e,t,n,r,i,s){const a=Br("Tweet"),c=Br("Trends");return te(),_e(Fe,null,[ot("div",SV,[ot("div",AV,[CV,(te(),_e(Fe,null,Co(5,l=>ye(a,{key:l})),64))])]),ye(c)],64)}const NS=wr(TV,[["render",NV]]),RV={components:{Trends:V_}},OV={class:"flex-1 border-r border-gray-100 flex flex-col overflow-y-auto"},xV=ot("div",{class:"p-3 font-bold text-lg border-b border-gray-100"},"",-1),PV=di('<div class="flex justify-between"><img src="http://picsum.photos/100" class="w-10 h-10 rounded-full hover:opacity-80"><i class="fas fa-ellipsis-h text-gray-500 hover:bg-blue-50 hover:text-primary p-2 rounded-full w-10 h-10 flex items-center justify-center"></i></div><div><span class="font-bold"></span>   </div><div class="text-gray-500"> wjelifwjeiflwejfiwejfil wefiwejfiweofjweiof wefjiewjf dcivcvf </div>',3),kV=[PV];function DV(e,t,n,r,i,s){const a=Br("Trends");return te(),_e(Fe,null,[ot("div",OV,[xV,(te(),_e(Fe,null,Co(10,c=>ot("div",{class:"flex flex-col hover:bg-gray-50 p-3 space-y-2 border-b border-gray-100 cursor-pointer",key:c},kV)),64))]),ye(a)],64)}const LV=wr(RV,[["render",DV]]),MV={},FV={class:"flex-1 flex"},UV={class:"w-2/5 border-r border-gray-100 overflow-y-scroll"},jV={class:"flex flex-col"},VV=di('<div class="p-3 font-bold text-lg border-b border-gray-100 h-14"></div><div class="flex px-3 py-4 hover:bg-gray-50 border-b border-gray-100 bg-gray-200"><img src="http://picsum.photos/200" class="w-10 h-10 rounded-full cursor-pointer mr-2"><div><div class="flex space-x-1"><div class="font-bold">jjw.com</div><div class="text-gray-500">@jaewoong</div><div class="text-gray-500">9 17</div></div><div class="text-gray-500"></div></div></div>',2),BV=di('<img src="http://picsum.photos/200" class="w-10 h-10 rounded-full cursor-pointer mr-2"><div><div class="flex space-x-1"><div class="font-bold">jjw.com</div><div class="text-gray-500">@jaewoong</div><div class="text-gray-500">9 17</div></div><div class="text-gray-500"></div></div>',2),qV=[BV],HV={class:"w-3/5 border-r border-gray-100"},GV={class:"flex flex-col h-screen"},WV=di('<div class="flex px-3 h-14 items-center border-b border-gray-100"><img src="http://picsum.photos/100" class="w-8 h-8 rounded-full mr-2 cursor-pointer"><div><div class="font-bold text-lg">jjw.com</div><div class="text-sm text-gray-500">@jaewoong</div></div></div><div class="flex flex-col justify-center items-center border-b border-gray-100 hover:bg-gray-50 py-6"><div><span class="font-bold mr-1">jjw.com</span><span class="text-gray-500">@jaewoong</span></div><div><span class="font-bold mr-1">28</span><span class="text-gray-500"> </span><span class="font-bold ml-3 mr-1">7</span><span class="text-gray-500"></span></div><div><span class="text-gray-500 mr-1"></span><span class="text-gray-500">2021 3</span></div></div>',2),$V={class:"flex-1 overflow-y-scroll"},zV=ot("div",{class:"text-right px-3 py-3"},[ot("span",{class:"bg-primary text-white px-4 py-2 rounded-full"},""),ot("div",{class:"mt-2 text-xs text-gray-500"},"2023 9 17  7:16")],-1),KV=ot("span",{class:"bg-gray-100 px-4 py-2 rounded-full"},"",-1),QV=ot("div",{class:"mt-2 text-xs text-gray-500"},"2023 9 17  7:16",-1),YV=[KV,QV],XV=ot("div",{class:"flex items-center bg-white border-t border-gray-100 sticky"},[ot("input",{type:"text",class:"m-2 py-1 px-4 rounded-full bg-gray-100 resize-none outline-none flex-1",placeholder:"  ",rows:"1"}),ot("button",{class:"text-center"},[ot("i",{class:"far fa-paper-plane text-primary text-lg hover:bg-blue-50 p-2 rounded-full w-10 h-10"})])],-1);function JV(e,t,n,r,i,s){return te(),_e("div",FV,[ot("div",UV,[ot("div",jV,[VV,(te(),_e(Fe,null,Co(5,a=>ot("div",{class:"flex px-3 py-4 hover:bg-gray-50 border-b border-gray-100",key:a},qV)),64))])]),ot("div",HV,[ot("div",GV,[WV,ot("div",$V,[zV,(te(),_e(Fe,null,Co(20,a=>ot("div",{class:"text-left px-3 py-3",key:a},YV)),64))]),XV])])])}const mm=wr(MV,[["render",JV]]),ZV={components:{Trends:V_,Tweet:wN}},t4={class:"flex-1 flex"},e4={class:"flex-1 flex flex-col border-r border-color"},n4=di('<div class="px-3 py-1 flex border-b border-color"><button class="mr-4"><i class="fas fa-arrow-left text-primary p-3 rounded-full hover:bg-blue-50"></i></button><div><div class="font-extrabold text-lg">jjw.com</div><div class="text-xs text-gray">393 </div></div></div><div class="bg-gray-300 h-40 relative flex-none"><div class="border-4 border-white bg-gray-100 w-28 h-28 rounded-full absolute -bottom-14 left-2"><img src="http://picsum.photos/200" class="rounded-full hover:opacity-90 hover:opacity-100 cursor-pointer"></div></div><div class="text-right mt-2 mr-2"><button class="border text-sm border-primary text-primary px-3 py-2 hover:bg-blue-50 font-bold rounded-full"> </button></div><div class="mx-3 mt-2"><div class="font-extrabold text-lg">jjw.com</div><div class="text-gray">@jaewoong</div><div><span class="text-gray">:</span><span class="text-gray">2011 10</span></div><div><span class="font-bold mr-1">28</span><span class="text-gray mr-3"> </span><span class="font-bold mr-1">7</span><span class="text-gray"></span></div></div><div class="flex border-b border-color mt-3"><div class="py-3 text-primary font-bold border-b border-primary text-center w-1/4 hover:bg-blue-50 cursor-pointer hover:text-primary">  </div><div class="py-3 text-gray font-bold text-center w-1/4 hover:bg-blue-50 cursor-pointer hover:text-primary">  </div><div class="py-3 text-gray font-bold text-center w-1/4 hover:bg-blue-50 cursor-pointer hover:text-primary">  </div><div class="py-3 text-gray font-bold text-center w-1/4 hover:bg-blue-50 cursor-pointer hover:text-primary">  </div></div>',5),r4={class:"overflow-y-auto"};function i4(e,t,n,r,i,s){const a=Br("Tweet"),c=Br("Trends");return te(),_e("div",t4,[ot("div",e4,[n4,ot("div",r4,[(te(),_e(Fe,null,Co(10,l=>ye(a,{key:l})),64))])]),ye(c)])}const RS=wr(ZV,[["render",i4]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ay=function(e,t){return Ay=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Ay(e,t)};function J(e,t){Ay(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ee=function(){return ee=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ee.apply(this,arguments)};function R(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(p){try{h(r.next(p))}catch(v){a(v)}}function l(p){try{h(r.throw(p))}catch(v){a(v)}}function h(p){p.done?s(p.value):i(p.value).then(c,l)}h((r=r.apply(e,t||[])).next())})}function N(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(h){return function(p){return l([h,p])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(p){h=[6,p],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Te(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ul(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function Wi(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ul(arguments[t]));return e}function Ae(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],a=0,c=s.length;a<c;a++,i++)r[i]=s[a];return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bN={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K=function(e,t){if(!e)throw Su(t)},Su=function(e){return new Error("Firebase Database ("+bN.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EN=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},o4=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){var s=e[n++],a=e[n++],c=e[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{var s=e[n++],a=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return t.join("")},B_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var s=e[i],a=i+1<e.length,c=a?e[i+1]:0,l=i+2<e.length,h=l?e[i+2]:0,p=s>>2,v=(s&3)<<4|c>>4,m=(c&15)<<2|h>>6,y=h&63;l||(y=64,a||(m=64)),r.push(n[p],n[v],n[m],n[y])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(EN(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):o4(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],a=i<e.length,c=a?n[e.charAt(i)]:0;++i;var l=i<e.length,h=l?n[e.charAt(i)]:64;++i;var p=i<e.length,v=p?n[e.charAt(i)]:64;if(++i,s==null||c==null||h==null||v==null)throw Error();var m=s<<2|c>>4;if(r.push(m),h!==64){var y=c<<4&240|h>>2;if(r.push(y),v!==64){var b=h<<6&192|v;r.push(b)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},s4=function(e){var t=EN(e);return B_.encodeByteArray(t,!0)},OS=function(e){try{return B_.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(e){return cl(void 0,e)}function cl(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)!t.hasOwnProperty(r)||!a4(r)||(e[r]=cl(e[r],t[r]));return e}function a4(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn=function(){function e(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){t.resolve=n,t.reject=r})}return e.prototype.wrapCallback=function(t){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof t=="function"&&(n.promise.catch(function(){}),t.length===1?t(r):t(r,i))}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function q_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Os())}function u4(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function c4(){return typeof self=="object"&&self.self===self}function H_(){var e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function TN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function l4(){return Os().indexOf("Electron/")>=0}function f4(){var e=Os();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function h4(){return Os().indexOf("MSAppHost/")>=0}function SN(){return bN.NODE_ADMIN===!0}function G_(){return"indexedDB"in self&&indexedDB!=null}function W_(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(s){t(s)}})}function AN(){return!(!navigator||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p4="FirebaseError",Au=function(e){J(t,e);function t(n,r,i){var s=e.call(this,r)||this;return s.code=n,s.customData=i,s.name=p4,Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,Do.prototype.create),s}return t}(Error),Do=function(){function e(t,n,r){this.service=t,this.serviceName=n,this.errors=r}return e.prototype.create=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},s=this.service+"/"+t,a=this.errors[t],c=a?d4(a,i):"Error",l=this.serviceName+": "+c+" ("+s+").",h=new Au(s,l,i);return h},e}();function d4(e,t){return e.replace(v4,function(n,r){var i=t[r];return i!=null?String(i):"<"+r+"?>"})}var v4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(e){return JSON.parse(e)}function Ue(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CN=function(e){var t={},n={},r={},i="";try{var s=e.split(".");t=ll(OS(s[0])||""),n=ll(OS(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}},g4=function(e){var t=CN(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},m4=function(e){var t=CN(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function kr(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Cy(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Zh(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(e){for(var t=[],n=function(l,h){Array.isArray(h)?h.forEach(function(p){t.push(encodeURIComponent(l)+"="+encodeURIComponent(p))}):t.push(encodeURIComponent(l)+"="+encodeURIComponent(h))},r=0,i=Object.entries(e);r<i.length;r++){var s=i[r],a=s[0],c=s[1];n(a,c)}return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _4=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,n){n||(n=0);var r=this.W_;if(typeof t=="string")for(var i=0;i<16;i++)r[i]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(var i=0;i<16;i++)r[i]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(var i=16;i<80;i++){var s=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=(s<<1|s>>>31)&4294967295}for(var a=this.chain_[0],c=this.chain_[1],l=this.chain_[2],h=this.chain_[3],p=this.chain_[4],v,m,i=0;i<80;i++){i<40?i<20?(v=h^c&(l^h),m=1518500249):(v=c^l^h,m=1859775393):i<60?(v=c&l|h&(c|l),m=2400959708):(v=c^l^h,m=3395469782);var s=(a<<5|a>>>27)+v+p+m+r[i]&4294967295;p=h,h=l,l=(c<<30|c>>>2)&4294967295,c=a,a=s}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295},e.prototype.update=function(t,n){if(t!=null){n===void 0&&(n=t.length);for(var r=n-this.blockSize,i=0,s=this.buf_,a=this.inbuf_;i<n;){if(a===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(s[a]=t.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}else for(;i<n;)if(s[a]=t[i],++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=n}},e.prototype.digest=function(){var t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);for(var i=0,r=0;r<5;r++)for(var s=24;s>=0;s-=8)t[i]=this.chain_[r]>>s&255,++i;return t},e}();function w4(e,t){var n=new b4(e,t);return n.subscribe.bind(n)}var b4=function(){function e(t,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(i){r.error(i)})}return e.prototype.next=function(t){this.forEachObserver(function(n){n.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(n){n.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},e.prototype.subscribe=function(t,n,r){var i=this,s;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");E4(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:r},s.next===void 0&&(s.next=ym),s.error===void 0&&(s.error=ym),s.complete===void 0&&(s.complete=ym);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?s.error(i.finalError):s.complete()}catch{}}),this.observers.push(s),a},e.prototype.unsubscribeOne=function(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},e.prototype.forEachObserver=function(t){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,t)},e.prototype.sendOne=function(t,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[t]!==void 0)try{n(r.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})},e.prototype.close=function(t){var n=this;this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},e}();function E4(e,t){if(typeof e!="object"||e===null)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&typeof e[i]=="function")return!0}return!1}function ym(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=n===0?"none":"no more than "+n),i){var s=e+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function yr(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument ",i}function Qe(e,t,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(yr(e,t,r)+"must be a valid function.")}function xS(e,t,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(yr(e,t,r)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I4=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,K(r<e.length,"Surrogate pair missing trail surrogate.");var a=e.charCodeAt(r)-56320;i=65536+(s<<10)+a}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Mh=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var T4=1e3,S4=2,A4=4*60*60*1e3,C4=.5;function Ny(e,t,n){t===void 0&&(t=T4),n===void 0&&(n=S4);var r=t*Math.pow(n,e),i=Math.round(C4*r*(Math.random()-.5)*2);return Math.min(A4,r+i)}var zn=function(){function e(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},e.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},e.prototype.setServiceProps=function(t){return this.serviceProps=t,this},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NN=function(){function e(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(t){t===void 0&&(t=Oa);var n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){var r=new Bn;this.instancesDeferred.set(n,r);try{var i=this.getOrInitializeService(n);i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise},e.prototype.getImmediate=function(t){var n=ee({identifier:Oa,optional:!1},t),r=n.identifier,i=n.optional,s=this.normalizeInstanceIdentifier(r);try{var a=this.getOrInitializeService(s);if(!a){if(i)return null;throw Error("Service "+this.name+" is not available")}return a}catch(c){if(i)return null;throw c}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(t){var n,r;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,R4(t))try{this.getOrInitializeService(Oa)}catch{}try{for(var i=Te(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=ul(s.value,2),c=a[0],l=a[1],h=this.normalizeInstanceIdentifier(c);try{var p=this.getOrInitializeService(h);l.resolve(p)}catch{}}}catch(v){n={error:v}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.clearInstance=function(t){t===void 0&&(t=Oa),this.instancesDeferred.delete(t),this.instances.delete(t)},e.prototype.delete=function(){return R(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Wi(t.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}),t.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()})))];case 1:return n.sent(),[2]}})})},e.prototype.isComponentSet=function(){return this.component!=null},e.prototype.getOrInitializeService=function(t){var n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,N4(t)),this.instances.set(t,n)),n||null},e.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:Oa:t},e}();function N4(e){return e===Oa?void 0:e}function R4(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var RN=function(){function e(t){this.name=t,this.providers=new Map}return e.prototype.addComponent=function(t){var n=this.getProvider(t.name);if(n.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);n.setComponent(t)},e.prototype.addOrOverwriteComponent=function(t){var n=this.getProvider(t.name);n.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},e.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var n=new NN(t,this);return this.providers.set(t,n),n},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Nr(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],a=0,c=s.length;a<c;a++,i++)r[i]=s[a];return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cs,$_=[],Rt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Rt||(Rt={}));var ON={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},O4=Rt.INFO,x4=(cs={},cs[Rt.DEBUG]="log",cs[Rt.VERBOSE]="log",cs[Rt.INFO]="info",cs[Rt.WARN]="warn",cs[Rt.ERROR]="error",cs),P4=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=new Date().toISOString(),s=x4[t];if(s)console[s].apply(console,Nr(["["+i+"]  "+e.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}},Cu=function(){function e(t){this.name=t,this._logLevel=O4,this._logHandler=P4,this._userLogHandler=null,$_.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Rt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(t){this._logLevel=typeof t=="string"?ON[t]:t},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Nr([this,Rt.DEBUG],t)),this._logHandler.apply(this,Nr([this,Rt.DEBUG],t))},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Nr([this,Rt.VERBOSE],t)),this._logHandler.apply(this,Nr([this,Rt.VERBOSE],t))},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Nr([this,Rt.INFO],t)),this._logHandler.apply(this,Nr([this,Rt.INFO],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Nr([this,Rt.WARN],t)),this._logHandler.apply(this,Nr([this,Rt.WARN],t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Nr([this,Rt.ERROR],t)),this._logHandler.apply(this,Nr([this,Rt.ERROR],t))},e}();function k4(e){$_.forEach(function(t){t.setLogLevel(e)})}function D4(e,t){for(var n=function(a){var c=null;t&&t.level&&(c=ON[t.level]),e===null?a.userLogHandler=null:a.userLogHandler=function(l,h){for(var p=[],v=2;v<arguments.length;v++)p[v-2]=arguments[v];var m=p.map(function(y){if(y==null)return null;if(typeof y=="string")return y;if(typeof y=="number"||typeof y=="boolean")return y.toString();if(y instanceof Error)return y.message;try{return JSON.stringify(y)}catch{return null}}).filter(function(y){return y}).join(" ");h>=(c??l.logLevel)&&e({level:Rt[h].toLowerCase(),message:m,args:p,type:l.name})}},r=0,i=$_;r<i.length;r++){var s=i[r];n(s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oo,L4=(oo={},oo["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",oo["bad-app-name"]="Illegal App name: '{$appName}",oo["duplicate-app"]="Firebase App named '{$appName}' already exists",oo["app-deleted"]="Firebase App named '{$appName}' already deleted",oo["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",oo["invalid-log-argument"]="First argument to `onLog` must be null or a function.",oo),xa=new Do("app","Firebase",L4),xN="@firebase/app",M4="0.6.14",F4="@firebase/analytics",U4="@firebase/auth",j4="@firebase/database",V4="@firebase/functions",B4="@firebase/installations",q4="@firebase/messaging",H4="@firebase/performance",G4="@firebase/remote-config",W4="@firebase/storage",$4="@firebase/firestore",z4="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var In,tp="[DEFAULT]",K4=(In={},In[xN]="fire-core",In[F4]="fire-analytics",In[U4]="fire-auth",In[j4]="fire-rtdb",In[V4]="fire-fn",In[B4]="fire-iid",In[q4]="fire-fcm",In[H4]="fire-perf",In[G4]="fire-rc",In[W4]="fire-gcs",In[$4]="fire-fst",In["fire-js"]="fire-js",In[z4]="fire-js-all",In);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Za=new Cu("@firebase/app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fh=function(){function e(t,n,r){var i,s,a=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=IN(t),this.container=new RN(n.name),this._addComponent(new zn("app",function(){return a},"PUBLIC"));try{for(var c=Te(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next()){var h=l.value;this._addComponent(h)}}catch(p){i={error:p}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(i)throw i.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var t=this;return new Promise(function(n){t.checkDestroyed_(),n()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(n){return n.delete()}))}).then(function(){t.isDeleted_=!0})},e.prototype._getService=function(t,n){return n===void 0&&(n=tp),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:n})},e.prototype._removeServiceInstance=function(t,n){n===void 0&&(n=tp),this.container.getProvider(t).clearInstance(n)},e.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(n){Za.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,n)}},e.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw xa.create("app-deleted",{appName:this.name_})},e}();Fh.prototype.name&&Fh.prototype.options||Fh.prototype.delete||console.log("dc");var Q4="8.2.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(e){var t={},n=new Map,r={__esModule:!0,initializeApp:a,app:s,registerVersion:h,setLogLevel:k4,onLog:p,apps:null,SDK_VERSION:Q4,INTERNAL:{registerComponent:l,removeApp:i,components:n,useAsService:v}};r.default=r,Object.defineProperty(r,"apps",{get:c});function i(m){delete t[m]}function s(m){if(m=m||tp,!$n(t,m))throw xa.create("no-app",{appName:m});return t[m]}s.App=e;function a(m,y){if(y===void 0&&(y={}),typeof y!="object"||y===null){var b=y;y={name:b}}var E=y;E.name===void 0&&(E.name=tp);var I=E.name;if(typeof I!="string"||!I)throw xa.create("bad-app-name",{appName:String(I)});if($n(t,I))throw xa.create("duplicate-app",{appName:I});var C=new e(m,E,r);return t[I]=C,C}function c(){return Object.keys(t).map(function(m){return t[m]})}function l(m){var y,b,E=m.name;if(n.has(E))return Za.debug("There were multiple attempts to register component "+E+"."),m.type==="PUBLIC"?r[E]:null;if(n.set(E,m),m.type==="PUBLIC"){var I=function(F){if(F===void 0&&(F=s()),typeof F[E]!="function")throw xa.create("invalid-app-argument",{appName:E});return F[E]()};m.serviceProps!==void 0&&cl(I,m.serviceProps),r[E]=I,e.prototype[E]=function(){for(var F=[],Q=0;Q<arguments.length;Q++)F[Q]=arguments[Q];var U=this._getService.bind(this,E);return U.apply(this,m.multipleInstances?F:[])}}try{for(var C=Te(Object.keys(t)),P=C.next();!P.done;P=C.next()){var D=P.value;t[D]._addComponent(m)}}catch(F){y={error:F}}finally{try{P&&!P.done&&(b=C.return)&&b.call(C)}finally{if(y)throw y.error}}return m.type==="PUBLIC"?r[E]:null}function h(m,y,b){var E,I=(E=K4[m])!==null&&E!==void 0?E:m;b&&(I+="-"+b);var C=I.match(/\s|\//),P=y.match(/\s|\//);if(C||P){var D=['Unable to register library "'+I+'" with version "'+y+'":'];C&&D.push('library name "'+I+'" contains illegal characters (whitespace or "/")'),C&&P&&D.push("and"),P&&D.push('version name "'+y+'" contains illegal characters (whitespace or "/")'),Za.warn(D.join(" "));return}l(new zn(I+"-version",function(){return{library:I,version:y}},"VERSION"))}function p(m,y){if(m!==null&&typeof m!="function")throw xa.create("invalid-log-argument",{appName:name});D4(m,y)}function v(m,y){if(y==="serverAuth")return null;var b=y;return b}return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(){var e=Y4(Fh);e.INTERNAL=ee(ee({},e.INTERNAL),{createFirebaseNamespace:PN,extendNamespace:t,createSubscribe:w4,ErrorFactory:Do,deepExtend:cl});function t(n){cl(e,n)}return e}var z_=PN();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X4=function(){function e(t){this.container=t}return e.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map(function(n){if(J4(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},e}();function J4(e){var t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z4(e,t){e.INTERNAL.registerComponent(new zn("platform-logger",function(n){return new X4(n)},"PRIVATE")),e.registerVersion(xN,M4,t),e.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(c4()&&self.firebase!==void 0){Za.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var PS=self.firebase.SDK_VERSION;PS&&PS.indexOf("LITE")>=0&&Za.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var t3=z_.initializeApp;z_.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u4()&&Za.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),t3.apply(void 0,e)};var at=z_;Z4(at);(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,f){o!=Array.prototype&&o!=Object.prototype&&(o[u]=f.value)};function n(o){o=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,o];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}return globalThis}var r=n(this);function i(o,u){if(u){var f=r;o=o.split(".");for(var d=0;d<o.length-1;d++){var g=o[d];g in f||(f[g]={}),f=f[g]}o=o[o.length-1],d=f[o],u=u(d),u!=d&&u!=null&&t(f,o,{configurable:!0,writable:!0,value:u})}}function s(o){var u=0;return function(){return u<o.length?{done:!1,value:o[u++]}:{done:!0}}}function a(o){var u=typeof Symbol<"u"&&Symbol.iterator&&o[Symbol.iterator];return u?u.call(o):{next:s(o)}}i("Promise",function(o){function u(w){this.b=0,this.c=void 0,this.a=[];var T=this.f();try{w(T.resolve,T.reject)}catch(M){T.reject(M)}}function f(){this.a=null}function d(w){return w instanceof u?w:new u(function(T){T(w)})}if(o)return o;f.prototype.b=function(w){if(this.a==null){this.a=[];var T=this;this.c(function(){T.g()})}this.a.push(w)};var g=r.setTimeout;f.prototype.c=function(w){g(w,0)},f.prototype.g=function(){for(;this.a&&this.a.length;){var w=this.a;this.a=[];for(var T=0;T<w.length;++T){var M=w[T];w[T]=null;try{M()}catch(q){this.f(q)}}}this.a=null},f.prototype.f=function(w){this.c(function(){throw w})},u.prototype.f=function(){function w(q){return function(bt){M||(M=!0,q.call(T,bt))}}var T=this,M=!1;return{resolve:w(this.m),reject:w(this.g)}},u.prototype.m=function(w){if(w===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(w instanceof u)this.s(w);else{t:switch(typeof w){case"object":var T=w!=null;break t;case"function":T=!0;break t;default:T=!1}T?this.v(w):this.h(w)}},u.prototype.v=function(w){var T=void 0;try{T=w.then}catch(M){this.g(M);return}typeof T=="function"?this.u(T,w):this.h(w)},u.prototype.g=function(w){this.i(2,w)},u.prototype.h=function(w){this.i(1,w)},u.prototype.i=function(w,T){if(this.b!=0)throw Error("Cannot settle("+w+", "+T+"): Promise already settled in state"+this.b);this.b=w,this.c=T,this.l()},u.prototype.l=function(){if(this.a!=null){for(var w=0;w<this.a.length;++w)_.b(this.a[w]);this.a=null}};var _=new f;return u.prototype.s=function(w){var T=this.f();w.Qa(T.resolve,T.reject)},u.prototype.u=function(w,T){var M=this.f();try{w.call(T,M.resolve,M.reject)}catch(q){M.reject(q)}},u.prototype.then=function(w,T){function M(Bt,ze){return typeof Bt=="function"?function(Ti){try{q(Bt(Ti))}catch(um){bt(um)}}:ze}var q,bt,$t=new u(function(Bt,ze){q=Bt,bt=ze});return this.Qa(M(w,q),M(T,bt)),$t},u.prototype.catch=function(w){return this.then(void 0,w)},u.prototype.Qa=function(w,T){function M(){switch(q.b){case 1:w(q.c);break;case 2:T(q.c);break;default:throw Error("Unexpected state: "+q.b)}}var q=this;this.a==null?_.b(M):this.a.push(M)},u.resolve=d,u.reject=function(w){return new u(function(T,M){M(w)})},u.race=function(w){return new u(function(T,M){for(var q=a(w),bt=q.next();!bt.done;bt=q.next())d(bt.value).Qa(T,M)})},u.all=function(w){var T=a(w),M=T.next();return M.done?d([]):new u(function(q,bt){function $t(Ti){return function(um){Bt[Ti]=um,ze--,ze==0&&q(Bt)}}var Bt=[],ze=0;do Bt.push(void 0),ze++,d(M.value).Qa($t(Bt.length-1),bt),M=T.next();while(!M.done)})},u});var c=c||{},l=this||self,h=/^[\w+/_-]+[=]{0,2}$/,p=null;function v(o){return(o=o.querySelector&&o.querySelector("script[nonce]"))&&(o=o.nonce||o.getAttribute("nonce"))&&h.test(o)?o:""}function m(){}function y(o){var u=typeof o;return u!="object"?u:o?Array.isArray(o)?"array":u:"null"}function b(o){var u=y(o);return u=="array"||u=="object"&&typeof o.length=="number"}function E(o){return y(o)=="function"}function I(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function C(o){return Object.prototype.hasOwnProperty.call(o,P)&&o[P]||(o[P]=++D)}var P="closure_uid_"+(1e9*Math.random()>>>0),D=0;function F(o,u,f){return o.call.apply(o.bind,arguments)}function Q(o,u,f){if(!o)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,d),o.apply(u,g)}}return function(){return o.apply(u,arguments)}}function U(o,u,f){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?U=F:U=Q,U.apply(null,arguments)}function _t(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var d=f.slice();return d.push.apply(d,arguments),o.apply(this,d)}}var Wt=Date.now;function lt(o,u){function f(){}f.prototype=u.prototype,o.ab=u.prototype,o.prototype=new f,o.prototype.constructor=o}function Ze(o){return o}function O(o,u,f){this.code=cn+o,this.message=u||Vo[o]||"",this.a=f||null}lt(O,Error),O.prototype.w=function(){var o={code:this.code,message:this.message};return this.a&&(o.serverResponse=this.a),o},O.prototype.toJSON=function(){return this.w()};function Wr(o){var u=o&&o.code;return u?new O(u.substring(cn.length),o.message,o.serverResponse):null}var cn="auth/",Vo={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},$r={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function oe(o){for(var u in $r)if($r[u].id===o)return o=$r[u],{firebaseEndpoint:o.Ta,secureTokenEndpoint:o.Za,identityPlatformEndpoint:o.Wa};return null}var Ft;Ft=oe("__EID__")?"__EID__":void 0;function Ut(o){if(!o)return!1;try{return!!o.$goog_Thenable}catch{return!1}}function fe(o){if(Error.captureStackTrace)Error.captureStackTrace(this,fe);else{var u=Error().stack;u&&(this.stack=u)}o&&(this.message=String(o))}lt(fe,Error),fe.prototype.name="CustomError";function ur(o,u){o=o.split("%s");for(var f="",d=o.length-1,g=0;g<d;g++)f+=o[g]+(g<u.length?u[g]:"%s");fe.call(this,f+o[d])}lt(ur,fe),ur.prototype.name="AssertionError";function tn(o,u){throw new ur("Failure"+(o?": "+o:""),Array.prototype.slice.call(arguments,1))}function Ge(o,u){this.c=o,this.f=u,this.b=0,this.a=null}Ge.prototype.get=function(){if(0<this.b){this.b--;var o=this.a;this.a=o.next,o.next=null}else o=this.c();return o};function mi(o,u){o.f(u),100>o.b&&(o.b++,u.next=o.a,o.a=u)}function yi(){this.b=this.a=null}var Bo=new Ge(function(){return new j},function(o){o.reset()});yi.prototype.add=function(o,u){var f=Bo.get();f.set(o,u),this.b?this.b.next=f:this.a=f,this.b=f};function We(){var o=m0,u=null;return o.a&&(u=o.a,o.a=o.a.next,o.a||(o.b=null),u.next=null),u}function j(){this.next=this.b=this.a=null}j.prototype.set=function(o,u){this.a=o,this.b=u,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var nt=Array.prototype.indexOf?function(o,u){return Array.prototype.indexOf.call(o,u,void 0)}:function(o,u){if(typeof o=="string")return typeof u!="string"||u.length!=1?-1:o.indexOf(u,0);for(var f=0;f<o.length;f++)if(f in o&&o[f]===u)return f;return-1},H=Array.prototype.forEach?function(o,u,f){Array.prototype.forEach.call(o,u,f)}:function(o,u,f){for(var d=o.length,g=typeof o=="string"?o.split(""):o,_=0;_<d;_++)_ in g&&u.call(f,g[_],_,o)};function ft(o,u){for(var f=typeof o=="string"?o.split(""):o,d=o.length-1;0<=d;--d)d in f&&u.call(void 0,f[d],d,o)}var Vt=Array.prototype.filter?function(o,u){return Array.prototype.filter.call(o,u,void 0)}:function(o,u){for(var f=o.length,d=[],g=0,_=typeof o=="string"?o.split(""):o,w=0;w<f;w++)if(w in _){var T=_[w];u.call(void 0,T,w,o)&&(d[g++]=T)}return d},S=Array.prototype.map?function(o,u){return Array.prototype.map.call(o,u,void 0)}:function(o,u){for(var f=o.length,d=Array(f),g=typeof o=="string"?o.split(""):o,_=0;_<f;_++)_ in g&&(d[_]=u.call(void 0,g[_],_,o));return d},A=Array.prototype.some?function(o,u){return Array.prototype.some.call(o,u,void 0)}:function(o,u){for(var f=o.length,d=typeof o=="string"?o.split(""):o,g=0;g<f;g++)if(g in d&&u.call(void 0,d[g],g,o))return!0;return!1};function x(o){t:{for(var u=oL,f=o.length,d=typeof o=="string"?o.split(""):o,g=0;g<f;g++)if(g in d&&u.call(void 0,d[g],g,o)){u=g;break t}u=-1}return 0>u?null:typeof o=="string"?o.charAt(u):o[u]}function L(o,u){return 0<=nt(o,u)}function V(o,u){u=nt(o,u);var f;return(f=0<=u)&&Array.prototype.splice.call(o,u,1),f}function B(o,u){var f=0;ft(o,function(d,g){u.call(void 0,d,g,o)&&Array.prototype.splice.call(o,g,1).length==1&&f++})}function tt(o){return Array.prototype.concat.apply([],arguments)}function z(o){var u=o.length;if(0<u){for(var f=Array(u),d=0;d<u;d++)f[d]=o[d];return f}return[]}var X=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]},W=/&/g,pt=/</g,st=/>/g,dt=/"/g,wt=/'/g,Nt=/\x00/g,Yt=/[\x00&<>"']/;function vt(o,u){return o.indexOf(u)!=-1}function se(o,u){return o<u?-1:o>u?1:0}var $e;t:{var _i=l.navigator;if(_i){var Bu=_i.userAgent;if(Bu){$e=Bu;break t}}$e=""}function ne(o){return vt($e,o)}function qu(o,u){for(var f in o)u.call(void 0,o[f],f,o)}function we(o){for(var u in o)return!1;return!0}function De(o){var u={},f;for(f in o)u[f]=o[f];return u}var Hu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ln(o,u){for(var f,d,g=1;g<arguments.length;g++){d=arguments[g];for(f in d)o[f]=d[f];for(var _=0;_<Hu.length;_++)f=Hu[_],Object.prototype.hasOwnProperty.call(d,f)&&(o[f]=d[f])}}function Xb(o,u){t:{try{var f=o&&o.ownerDocument,d=f&&(f.defaultView||f.parentWindow);if(d=d||l,d.Element&&d.Location){var g=d;break t}}catch{}g=null}if(g&&typeof g[u]<"u"&&(!o||!(o instanceof g[u])&&(o instanceof g.Location||o instanceof g.Element))){if(I(o))try{var _=o.constructor.displayName||o.constructor.name||Object.prototype.toString.call(o)}catch{_="<object could not be stringified>"}else _=o===void 0?"undefined":o===null?"null":typeof o;tn("Argument is not a %s (or a non-Element, non-Location mock); got: %s",u,_)}}function zr(o,u){this.a=o===cf&&u||"",this.b=Jb}zr.prototype.sa=!0,zr.prototype.ra=function(){return this.a},zr.prototype.toString=function(){return"Const{"+this.a+"}"};function Fd(o){return o instanceof zr&&o.constructor===zr&&o.b===Jb?o.a:(tn("expected object of type Const, got '"+o+"'"),"type_error:Const")}var Jb={},cf={},lf;function Zb(){if(lf===void 0){var o=null,u=l.trustedTypes;if(u&&u.createPolicy){try{o=u.createPolicy("goog#html",{createHTML:Ze,createScript:Ze,createScriptURL:Ze})}catch(f){l.console&&l.console.error(f.message)}lf=o}else lf=o}return lf}function Ys(o,u){this.a=u===e0?o:""}Ys.prototype.sa=!0,Ys.prototype.ra=function(){return this.a.toString()},Ys.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function t0(o){return o instanceof Ys&&o.constructor===Ys?o.a:(tn("expected object of type TrustedResourceUrl, got '"+o+"' of type "+y(o)),"type_error:TrustedResourceUrl")}function Ud(o,u){var f=Fd(o);if(!Lk.test(f))throw Error("Invalid TrustedResourceUrl format: "+f);return o=f.replace(Dk,function(d,g){if(!Object.prototype.hasOwnProperty.call(u,g))throw Error('Found marker, "'+g+'", in format string, "'+f+'", but no valid label mapping found in args: '+JSON.stringify(u));return d=u[g],d instanceof zr?Fd(d):encodeURIComponent(String(d))}),Mk(o)}var Dk=/%{(\w+)}/g,Lk=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,e0={};function Mk(o){var u=Zb();return o=u?u.createScriptURL(o):o,new Ys(o,e0)}function Mn(o,u){this.a=u===Gu?o:""}Mn.prototype.sa=!0,Mn.prototype.ra=function(){return this.a.toString()},Mn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function ff(o){return o instanceof Mn&&o.constructor===Mn?o.a:(tn("expected object of type SafeUrl, got '"+o+"' of type "+y(o)),"type_error:SafeUrl")}var Fk=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Uk=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,n0=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function r0(o){if(o instanceof Mn)return o;if(o=typeof o=="object"&&o.sa?o.ra():String(o),n0.test(o))o=new Mn(o,Gu);else{o=String(o),o=o.replace(/(%0A|%0D)/g,"");var u=o.match(Uk);o=u&&Fk.test(u[1])?new Mn(o,Gu):null}return o}function i0(o){return o instanceof Mn?o:(o=typeof o=="object"&&o.sa?o.ra():String(o),n0.test(o)||(o="about:invalid#zClosurez"),new Mn(o,Gu))}var Gu={},o0=new Mn("about:invalid#zClosurez",Gu);function Xs(o,u,f){this.a=f===s0?o:""}Xs.prototype.sa=!0,Xs.prototype.ra=function(){return this.a.toString()},Xs.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function jk(o){return o instanceof Xs&&o.constructor===Xs?o.a:(tn("expected object of type SafeHtml, got '"+o+"' of type "+y(o)),"type_error:SafeHtml")}var s0={};function Vk(o,u){Xb(o,"HTMLScriptElement"),o.src=t0(u),(u=o.ownerDocument&&o.ownerDocument.defaultView)&&u!=l?u=v(u.document):(p===null&&(p=v(l.document)),u=p),u&&o.setAttribute("nonce",u)}function a0(o,u,f,d){return o=o instanceof Mn?o:i0(o),u=u||l,f=f instanceof zr?Fd(f):f||"",u.open(ff(o),f,d,void 0)}function u0(o,u){for(var f=o.split("%s"),d="",g=Array.prototype.slice.call(arguments,1);g.length&&1<f.length;)d+=f.shift()+g.shift();return d+f.join("%s")}function jd(o){return Yt.test(o)&&(o.indexOf("&")!=-1&&(o=o.replace(W,"&amp;")),o.indexOf("<")!=-1&&(o=o.replace(pt,"&lt;")),o.indexOf(">")!=-1&&(o=o.replace(st,"&gt;")),o.indexOf('"')!=-1&&(o=o.replace(dt,"&quot;")),o.indexOf("'")!=-1&&(o=o.replace(wt,"&#39;")),o.indexOf("\0")!=-1&&(o=o.replace(Nt,"&#0;"))),o}function Vd(o){return Vd[" "](o),o}Vd[" "]=m;function Bk(o,u){var f=Wk;return Object.prototype.hasOwnProperty.call(f,o)?f[o]:f[o]=u(o)}var qk=ne("Opera"),br=ne("Trident")||ne("MSIE"),c0=ne("Edge"),Hk=c0||br,l0=ne("Gecko")&&!(vt($e.toLowerCase(),"webkit")&&!ne("Edge"))&&!(ne("Trident")||ne("MSIE"))&&!ne("Edge"),Gk=vt($e.toLowerCase(),"webkit")&&!ne("Edge");function f0(){var o=l.document;return o?o.documentMode:void 0}var hf;t:{var Bd="",qd=function(){var o=$e;if(l0)return/rv:([^\);]+)(\)|;)/.exec(o);if(c0)return/Edge\/([\d\.]+)/.exec(o);if(br)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o);if(Gk)return/WebKit\/(\S+)/.exec(o);if(qk)return/(?:Version)[ \/]?(\S+)/.exec(o)}();if(qd&&(Bd=qd?qd[1]:""),br){var Hd=f0();if(Hd!=null&&Hd>parseFloat(Bd)){hf=String(Hd);break t}}hf=Bd}var Wk={};function h0(o){return Bk(o,function(){for(var u=0,f=X(String(hf)).split("."),d=X(String(o)).split("."),g=Math.max(f.length,d.length),_=0;u==0&&_<g;_++){var w=f[_]||"",T=d[_]||"";do{if(w=/(\d*)(\D*)(.*)/.exec(w)||["","","",""],T=/(\d*)(\D*)(.*)/.exec(T)||["","","",""],w[0].length==0&&T[0].length==0)break;u=se(w[1].length==0?0:parseInt(w[1],10),T[1].length==0?0:parseInt(T[1],10))||se(w[2].length==0,T[2].length==0)||se(w[2],T[2]),w=w[3],T=T[3]}while(u==0)}return 0<=u})}var Gd;if(l.document&&br){var p0=f0();Gd=p0||parseInt(hf,10)||void 0}else Gd=void 0;var Qi=Gd;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var $k=!br||9<=Number(Qi);function Wu(o){var u=document;return typeof o=="string"?u.getElementById(o):o}function d0(o,u){qu(u,function(f,d){f&&typeof f=="object"&&f.sa&&(f=f.ra()),d=="style"?o.style.cssText=f:d=="class"?o.className=f:d=="for"?o.htmlFor=f:v0.hasOwnProperty(d)?o.setAttribute(v0[d],f):d.lastIndexOf("aria-",0)==0||d.lastIndexOf("data-",0)==0?o.setAttribute(d,f):o[d]=f})}var v0={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function zk(o,u,f){var d=arguments,g=document,_=String(d[0]),w=d[1];if(!$k&&w&&(w.name||w.type)){if(_=["<",_],w.name&&_.push(' name="',jd(w.name),'"'),w.type){_.push(' type="',jd(w.type),'"');var T={};Ln(T,w),delete T.type,w=T}_.push(">"),_=_.join("")}return _=pf(g,_),w&&(typeof w=="string"?_.className=w:Array.isArray(w)?_.className=w.join(" "):d0(_,w)),2<d.length&&Kk(g,_,d),_}function Kk(o,u,f){function d(T){T&&u.appendChild(typeof T=="string"?o.createTextNode(T):T)}for(var g=2;g<f.length;g++){var _=f[g];if(!b(_)||I(_)&&0<_.nodeType)d(_);else{t:{if(_&&typeof _.length=="number"){if(I(_)){var w=typeof _.item=="function"||typeof _.item=="string";break t}if(E(_)){w=typeof _.item=="function";break t}}w=!1}H(w?z(_):_,d)}}}function pf(o,u){return u=String(u),o.contentType==="application/xhtml+xml"&&(u=u.toLowerCase()),o.createElement(u)}function g0(o){l.setTimeout(function(){throw o},0)}var Wd;function Qk(){var o=l.MessageChannel;if(typeof o>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!ne("Presto")&&(o=function(){var g=pf(document,"IFRAME");g.style.display="none",document.documentElement.appendChild(g);var _=g.contentWindow;g=_.document,g.open(),g.close();var w="callImmediate"+Math.random(),T=_.location.protocol=="file:"?"*":_.location.protocol+"//"+_.location.host;g=U(function(M){(T=="*"||M.origin==T)&&M.data==w&&this.port1.onmessage()},this),_.addEventListener("message",g,!1),this.port1={},this.port2={postMessage:function(){_.postMessage(w,T)}}}),typeof o<"u"&&!ne("Trident")&&!ne("MSIE")){var u=new o,f={},d=f;return u.port1.onmessage=function(){if(f.next!==void 0){f=f.next;var g=f.Gb;f.Gb=null,g()}},function(g){d.next={Gb:g},d=d.next,u.port2.postMessage(0)}}return function(g){l.setTimeout(g,0)}}function df(o,u){vf||Yk(),$d||(vf(),$d=!0),m0.add(o,u)}var vf;function Yk(){if(l.Promise&&l.Promise.resolve){var o=l.Promise.resolve(void 0);vf=function(){o.then(y0)}}else vf=function(){var u=y0;!E(l.setImmediate)||l.Window&&l.Window.prototype&&!ne("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(Wd||(Wd=Qk()),Wd(u)):l.setImmediate(u)}}var $d=!1,m0=new yi;function y0(){for(var o;o=We();){try{o.a.call(o.b)}catch(u){g0(u)}mi(Bo,o)}$d=!1}function xt(o,u){if(this.a=qo,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,o!=m)try{var f=this;o.call(u,function(d){Ho(f,$u,d)},function(d){if(!(d instanceof Js))try{throw d instanceof Error?d:Error("Promise rejected.")}catch{}Ho(f,wi,d)})}catch(d){Ho(this,wi,d)}}var qo=0,$u=2,wi=3;function _0(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}_0.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var w0=new Ge(function(){return new _0},function(o){o.reset()});function zd(o,u,f){var d=w0.get();return d.g=o,d.b=u,d.f=f,d}function gt(o){if(o instanceof xt)return o;var u=new xt(m);return Ho(u,$u,o),u}function ae(o){return new xt(function(u,f){f(o)})}function b0(o,u,f){S0(o,u,f,null)||df(_t(u,o))}function Xk(o){return new xt(function(u,f){var d=o.length,g=[];if(d)for(var _=function(q,bt){d--,g[q]=bt,d==0&&u(g)},w=function(q){f(q)},T=0,M;T<o.length;T++)M=o[T],b0(M,_t(_,T),w);else u(g)})}function E0(o){return new xt(function(u){var f=o.length,d=[];if(f)for(var g=function(T,M,q){f--,d[T]=M?{Pb:!0,value:q}:{Pb:!1,reason:q},f==0&&u(d)},_=0,w;_<o.length;_++)w=o[_],b0(w,_t(g,_,!0),_t(g,_,!1));else u(d)})}xt.prototype.then=function(o,u,f){return T0(this,E(o)?o:null,E(u)?u:null,f)},xt.prototype.$goog_Thenable=!0,e=xt.prototype,e.oa=function(o,u){return o=zd(o,o,u),o.c=!0,Kd(this,o),this},e.o=function(o,u){return T0(this,null,o,u)},e.cancel=function(o){if(this.a==qo){var u=new Js(o);df(function(){I0(this,u)},this)}};function I0(o,u){if(o.a==qo)if(o.c){var f=o.c;if(f.b){for(var d=0,g=null,_=null,w=f.b;w&&(w.c||(d++,w.a==o&&(g=w),!(g&&1<d)));w=w.next)g||(_=w);g&&(f.a==qo&&d==1?I0(f,u):(_?(d=_,d.next==f.f&&(f.f=d),d.next=d.next.next):C0(f),N0(f,g,wi,u)))}o.c=null}else Ho(o,wi,u)}function Kd(o,u){o.b||o.a!=$u&&o.a!=wi||A0(o),o.f?o.f.next=u:o.b=u,o.f=u}function T0(o,u,f,d){var g=zd(null,null,null);return g.a=new xt(function(_,w){g.g=u?function(T){try{var M=u.call(d,T);_(M)}catch(q){w(q)}}:_,g.b=f?function(T){try{var M=f.call(d,T);M===void 0&&T instanceof Js?w(T):_(M)}catch(q){w(q)}}:w}),g.a.c=o,Kd(o,g),g.a}e.$c=function(o){this.a=qo,Ho(this,$u,o)},e.ad=function(o){this.a=qo,Ho(this,wi,o)};function Ho(o,u,f){o.a==qo&&(o===f&&(u=wi,f=new TypeError("Promise cannot resolve to itself")),o.a=1,S0(f,o.$c,o.ad,o)||(o.i=f,o.a=u,o.c=null,A0(o),u!=wi||f instanceof Js||Zk(o,f)))}function S0(o,u,f,d){if(o instanceof xt)return Kd(o,zd(u||m,f||null,d)),!0;if(Ut(o))return o.then(u,f,d),!0;if(I(o))try{var g=o.then;if(E(g))return Jk(o,g,u,f,d),!0}catch(_){return f.call(d,_),!0}return!1}function Jk(o,u,f,d,g){function _(M){T||(T=!0,d.call(g,M))}function w(M){T||(T=!0,f.call(g,M))}var T=!1;try{u.call(o,w,_)}catch(M){_(M)}}function A0(o){o.h||(o.h=!0,df(o.gc,o))}function C0(o){var u=null;return o.b&&(u=o.b,o.b=u.next,u.next=null),o.b||(o.f=null),u}e.gc=function(){for(var o;o=C0(this);)N0(this,o,this.a,this.i);this.h=!1};function N0(o,u,f,d){if(f==wi&&u.b&&!u.c)for(;o&&o.g;o=o.c)o.g=!1;if(u.a)u.a.c=null,R0(u,f,d);else try{u.c?u.g.call(u.f):R0(u,f,d)}catch(g){O0.call(null,g)}mi(w0,u)}function R0(o,u,f){u==$u?o.g.call(o.f,f):o.b&&o.b.call(o.f,f)}function Zk(o,u){o.g=!0,df(function(){o.g&&O0.call(null,u)})}var O0=g0;function Js(o){fe.call(this,o)}lt(Js,fe),Js.prototype.name="cancel";function gf(){this.xa=this.xa,this.pa=this.pa}var tD=0;gf.prototype.xa=!1;function x0(o){!o.xa&&(o.xa=!0,o.Da(),tD!=0)&&C(o)}gf.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var eD=Object.freeze||function(o){return o},P0=!br||9<=Number(Qi),nD=br&&!h0("9"),rD=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{l.addEventListener("test",m,u),l.removeEventListener("test",m,u)}catch{}return o}();function Fn(o,u){this.type=o,this.b=this.target=u,this.defaultPrevented=!1}Fn.prototype.preventDefault=function(){this.defaultPrevented=!0};function Go(o,u){if(Fn.call(this,o?o.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,o){var f=this.type=o.type,d=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.b=u,u=o.relatedTarget){if(l0){t:{try{Vd(u.nodeName);var g=!0;break t}catch{}g=!1}g||(u=null)}}else f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement);this.relatedTarget=u,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:iD[o.pointerType]||"",this.a=o,o.defaultPrevented&&this.preventDefault()}}lt(Go,Fn);var iD=eD({2:"touch",3:"pen",4:"mouse"});Go.prototype.preventDefault=function(){Go.ab.preventDefault.call(this);var o=this.a;if(o.preventDefault)o.preventDefault();else if(o.returnValue=!1,nD)try{(o.ctrlKey||112<=o.keyCode&&123>=o.keyCode)&&(o.keyCode=-1)}catch{}},Go.prototype.g=function(){return this.a};var zu="closure_listenable_"+(1e6*Math.random()|0),oD=0;function sD(o,u,f,d,g){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!d,this.Va=g,this.key=++oD,this.va=this.Pa=!1}function mf(o){o.va=!0,o.listener=null,o.proxy=null,o.src=null,o.Va=null}function yf(o){this.src=o,this.a={},this.b=0}yf.prototype.add=function(o,u,f,d,g){var _=o.toString();o=this.a[_],o||(o=this.a[_]=[],this.b++);var w=Yd(o,u,d,g);return-1<w?(u=o[w],f||(u.Pa=!1)):(u=new sD(u,this.src,_,!!d,g),u.Pa=f,o.push(u)),u};function Qd(o,u){var f=u.type;f in o.a&&V(o.a[f],u)&&(mf(u),o.a[f].length==0&&(delete o.a[f],o.b--))}function Yd(o,u,f,d){for(var g=0;g<o.length;++g){var _=o[g];if(!_.va&&_.listener==u&&_.capture==!!f&&_.Va==d)return g}return-1}var Xd="closure_lm_"+(1e6*Math.random()|0),Jd={};function cr(o,u,f,d,g){if(d&&d.once)Zd(o,u,f,d,g);else if(Array.isArray(u))for(var _=0;_<u.length;_++)cr(o,u[_],f,d,g);else f=ev(f),o&&o[zu]?U0(o,u,f,I(d)?!!d.capture:!!d,g):k0(o,u,f,!1,d,g)}function k0(o,u,f,d,g,_){if(!u)throw Error("Invalid event type");var w=I(g)?!!g.capture:!!g,T=_f(o);if(T||(o[Xd]=T=new yf(o)),f=T.add(u,f,d,w,_),!f.proxy)if(d=aD(),f.proxy=d,d.src=o,d.listener=f,o.addEventListener)rD||(g=w),g===void 0&&(g=!1),o.addEventListener(u.toString(),d,g);else if(o.attachEvent)o.attachEvent(L0(u.toString()),d);else if(o.addListener&&o.removeListener)o.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.")}function aD(){var o=uD,u=P0?function(f){return o.call(u.src,u.listener,f)}:function(f){if(f=o.call(u.src,u.listener,f),!f)return f};return u}function Zd(o,u,f,d,g){if(Array.isArray(u))for(var _=0;_<u.length;_++)Zd(o,u[_],f,d,g);else f=ev(f),o&&o[zu]?nv(o,u,f,I(d)?!!d.capture:!!d,g):k0(o,u,f,!0,d,g)}function Yn(o,u,f,d,g){if(Array.isArray(u))for(var _=0;_<u.length;_++)Yn(o,u[_],f,d,g);else d=I(d)?!!d.capture:!!d,f=ev(f),o&&o[zu]?(o=o.v,u=String(u).toString(),u in o.a&&(_=o.a[u],f=Yd(_,f,d,g),-1<f&&(mf(_[f]),Array.prototype.splice.call(_,f,1),_.length==0&&(delete o.a[u],o.b--)))):o&&(o=_f(o))&&(u=o.a[u.toString()],o=-1,u&&(o=Yd(u,f,d,g)),(f=-1<o?u[o]:null)&&D0(f))}function D0(o){if(typeof o!="number"&&o&&!o.va){var u=o.src;if(u&&u[zu])Qd(u.v,o);else{var f=o.type,d=o.proxy;u.removeEventListener?u.removeEventListener(f,d,o.capture):u.detachEvent?u.detachEvent(L0(f),d):u.addListener&&u.removeListener&&u.removeListener(d),(f=_f(u))?(Qd(f,o),f.b==0&&(f.src=null,u[Xd]=null)):mf(o)}}}function L0(o){return o in Jd?Jd[o]:Jd[o]="on"+o}function M0(o,u,f,d){var g=!0;if((o=_f(o))&&(u=o.a[u.toString()]))for(u=u.concat(),o=0;o<u.length;o++){var _=u[o];_&&_.capture==f&&!_.va&&(_=F0(_,d),g=g&&_!==!1)}return g}function F0(o,u){var f=o.listener,d=o.Va||o.src;return o.Pa&&D0(o),f.call(d,u)}function uD(o,u){if(o.va)return!0;if(!P0){if(!u)t:{u=["window","event"];for(var f=l,d=0;d<u.length;d++)if(f=f[u[d]],f==null){u=null;break t}u=f}if(d=u,u=new Go(d,this),f=!0,!(0>d.keyCode||d.returnValue!=null)){t:{var g=!1;if(d.keyCode==0)try{d.keyCode=-1;break t}catch{g=!0}(g||d.returnValue==null)&&(d.returnValue=!0)}for(d=[],g=u.b;g;g=g.parentNode)d.push(g);for(o=o.type,g=d.length-1;0<=g;g--){u.b=d[g];var _=M0(d[g],o,!0,u);f=f&&_}for(g=0;g<d.length;g++)u.b=d[g],_=M0(d[g],o,!1,u),f=f&&_}return f}return F0(o,new Go(u,this))}function _f(o){return o=o[Xd],o instanceof yf?o:null}var tv="__closure_events_fn_"+(1e9*Math.random()>>>0);function ev(o){return E(o)?o:(o[tv]||(o[tv]=function(u){return o.handleEvent(u)}),o[tv])}function bn(){gf.call(this),this.v=new yf(this),this.ac=this,this.gb=null}lt(bn,gf),bn.prototype[zu]=!0,bn.prototype.addEventListener=function(o,u,f,d){cr(this,o,u,f,d)},bn.prototype.removeEventListener=function(o,u,f,d){Yn(this,o,u,f,d)},bn.prototype.dispatchEvent=function(o){var u,f=this.gb;if(f)for(u=[];f;f=f.gb)u.push(f);f=this.ac;var d=o.type||o;if(typeof o=="string")o=new Fn(o,f);else if(o instanceof Fn)o.target=o.target||f;else{var g=o;o=new Fn(d,f),Ln(o,g)}if(g=!0,u)for(var _=u.length-1;0<=_;_--){var w=o.b=u[_];g=wf(w,d,!0,o)&&g}if(w=o.b=f,g=wf(w,d,!0,o)&&g,g=wf(w,d,!1,o)&&g,u)for(_=0;_<u.length;_++)w=o.b=u[_],g=wf(w,d,!1,o)&&g;return g},bn.prototype.Da=function(){if(bn.ab.Da.call(this),this.v){var o=this.v,u;for(u in o.a){for(var f=o.a[u],d=0;d<f.length;d++)mf(f[d]);delete o.a[u],o.b--}}this.gb=null};function U0(o,u,f,d,g){o.v.add(String(u),f,!1,d,g)}function nv(o,u,f,d,g){o.v.add(String(u),f,!0,d,g)}function wf(o,u,f,d){if(u=o.v.a[String(u)],!u)return!0;u=u.concat();for(var g=!0,_=0;_<u.length;++_){var w=u[_];if(w&&!w.va&&w.capture==f){var T=w.listener,M=w.Va||w.src;w.Pa&&Qd(o.v,w),g=T.call(M,d)!==!1&&g}}return g&&!d.defaultPrevented}function rv(o,u,f){if(E(o))f&&(o=U(o,f));else if(o&&typeof o.handleEvent=="function")o=U(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function Zs(o){var u=null;return new xt(function(f,d){u=rv(function(){f(void 0)},o),u==-1&&d(Error("Failed to schedule timer."))}).o(function(f){throw l.clearTimeout(u),f})}function j0(o){if(o.W&&typeof o.W=="function")return o.W();if(typeof o=="string")return o.split("");if(b(o)){for(var u=[],f=o.length,d=0;d<f;d++)u.push(o[d]);return u}u=[],f=0;for(d in o)u[f++]=o[d];return u}function V0(o){if(o.Y&&typeof o.Y=="function")return o.Y();if(!o.W||typeof o.W!="function"){if(b(o)||typeof o=="string"){var u=[];o=o.length;for(var f=0;f<o;f++)u.push(f);return u}u=[],f=0;for(var d in o)u[f++]=d;return u}}function cD(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(b(o)||typeof o=="string")H(o,u,void 0);else for(var f=V0(o),d=j0(o),g=d.length,_=0;_<g;_++)u.call(void 0,d[_],f&&f[_],o)}function ta(o,u){this.b={},this.a=[],this.c=0;var f=arguments.length;if(1<f){if(f%2)throw Error("Uneven number of arguments");for(var d=0;d<f;d+=2)this.set(arguments[d],arguments[d+1])}else if(o)if(o instanceof ta)for(f=o.Y(),d=0;d<f.length;d++)this.set(f[d],o.get(f[d]));else for(d in o)this.set(d,o[d])}e=ta.prototype,e.W=function(){iv(this);for(var o=[],u=0;u<this.a.length;u++)o.push(this.b[this.a[u]]);return o},e.Y=function(){return iv(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0};function iv(o){if(o.c!=o.a.length){for(var u=0,f=0;u<o.a.length;){var d=o.a[u];Wo(o.b,d)&&(o.a[f++]=d),u++}o.a.length=f}if(o.c!=o.a.length){var g={};for(f=u=0;u<o.a.length;)d=o.a[u],Wo(g,d)||(o.a[f++]=d,g[d]=1),u++;o.a.length=f}}e.get=function(o,u){return Wo(this.b,o)?this.b[o]:u},e.set=function(o,u){Wo(this.b,o)||(this.c++,this.a.push(o)),this.b[o]=u},e.forEach=function(o,u){for(var f=this.Y(),d=0;d<f.length;d++){var g=f[d],_=this.get(g);o.call(u,_,g,this)}};function Wo(o,u){return Object.prototype.hasOwnProperty.call(o,u)}var B0=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function lD(o,u){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var d=o[f].indexOf("="),g=null;if(0<=d){var _=o[f].substring(0,d);g=o[f].substring(d+1)}else _=o[f];u(_,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}}function Yi(o,u){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var f;o instanceof Yi?(this.i=u!==void 0?u:o.i,Ku(this,o.c),this.l=o.l,this.a=o.a,Qu(this,o.g),this.f=o.f,ov(this,W0(o.b)),this.h=o.h):o&&(f=String(o).match(B0))?(this.i=!!u,Ku(this,f[1]||"",!0),this.l=Yu(f[2]||""),this.a=Yu(f[3]||"",!0),Qu(this,f[4]),this.f=Yu(f[5]||"",!0),ov(this,f[6]||"",!0),this.h=Yu(f[7]||"")):(this.i=!!u,this.b=new $o(null,this.i))}Yi.prototype.toString=function(){var o=[],u=this.c;u&&o.push(Xu(u,q0,!0),":");var f=this.a;return(f||u=="file")&&(o.push("//"),(u=this.l)&&o.push(Xu(u,q0,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.g,f!=null&&o.push(":",String(f))),(f=this.f)&&(this.a&&f.charAt(0)!="/"&&o.push("/"),o.push(Xu(f,f.charAt(0)=="/"?pD:hD,!0))),(f=this.b.toString())&&o.push("?",f),(f=this.h)&&o.push("#",Xu(f,vD)),o.join("")},Yi.prototype.resolve=function(o){var u=new Yi(this),f=!!o.c;f?Ku(u,o.c):f=!!o.l,f?u.l=o.l:f=!!o.a,f?u.a=o.a:f=o.g!=null;var d=o.f;if(f)Qu(u,o.g);else if(f=!!o.f){if(d.charAt(0)!="/")if(this.a&&!this.f)d="/"+d;else{var g=u.f.lastIndexOf("/");g!=-1&&(d=u.f.substr(0,g+1)+d)}if(g=d,g==".."||g==".")d="";else if(vt(g,"./")||vt(g,"/.")){d=g.lastIndexOf("/",0)==0,g=g.split("/");for(var _=[],w=0;w<g.length;){var T=g[w++];T=="."?d&&w==g.length&&_.push(""):T==".."?((1<_.length||_.length==1&&_[0]!="")&&_.pop(),d&&w==g.length&&_.push("")):(_.push(T),d=!0)}d=_.join("/")}else d=g}return f?u.f=d:f=o.b.toString()!=="",f?ov(u,W0(o.b)):f=!!o.h,f&&(u.h=o.h),u};function Ku(o,u,f){o.c=f?Yu(u,!0):u,o.c&&(o.c=o.c.replace(/:$/,""))}function Qu(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.g=u}else o.g=null}function ov(o,u,f){u instanceof $o?(o.b=u,gD(o.b,o.i)):(f||(u=Xu(u,dD)),o.b=new $o(u,o.i))}function be(o,u,f){o.b.set(u,f)}function lr(o,u){return o.b.get(u)}function Un(o){return o instanceof Yi?new Yi(o):new Yi(o,void 0)}function bf(o,u,f,d){var g=new Yi(null,void 0);return o&&Ku(g,o),u&&(g.a=u),f&&Qu(g,f),d&&(g.f=d),g}function Yu(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Xu(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,fD),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function fD(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var q0=/[#\/\?@]/g,hD=/[#\?:]/g,pD=/[#\?]/g,dD=/[#\?@]/g,vD=/#/g;function $o(o,u){this.b=this.a=null,this.c=o||null,this.f=!!u}function Xi(o){o.a||(o.a=new ta,o.b=0,o.c&&lD(o.c,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}function H0(o){var u=V0(o);if(typeof u>"u")throw Error("Keys are undefined");var f=new $o(null,void 0);o=j0(o);for(var d=0;d<u.length;d++){var g=u[d],_=o[d];Array.isArray(_)?G0(f,g,_):f.add(g,_)}return f}e=$o.prototype,e.add=function(o,u){Xi(this),this.c=null,o=ea(this,o);var f=this.a.get(o);return f||this.a.set(o,f=[]),f.push(u),this.b+=1,this};function Kr(o,u){Xi(o),u=ea(o,u),Wo(o.a.b,u)&&(o.c=null,o.b-=o.a.get(u).length,o=o.a,Wo(o.b,u)&&(delete o.b[u],o.c--,o.a.length>2*o.c&&iv(o)))}e.clear=function(){this.a=this.c=null,this.b=0};function sv(o,u){return Xi(o),u=ea(o,u),Wo(o.a.b,u)}e.forEach=function(o,u){Xi(this),this.a.forEach(function(f,d){H(f,function(g){o.call(u,g,d,this)},this)},this)},e.Y=function(){Xi(this);for(var o=this.a.W(),u=this.a.Y(),f=[],d=0;d<u.length;d++)for(var g=o[d],_=0;_<g.length;_++)f.push(u[d]);return f},e.W=function(o){Xi(this);var u=[];if(typeof o=="string")sv(this,o)&&(u=tt(u,this.a.get(ea(this,o))));else{o=this.a.W();for(var f=0;f<o.length;f++)u=tt(u,o[f])}return u},e.set=function(o,u){return Xi(this),this.c=null,o=ea(this,o),sv(this,o)&&(this.b-=this.a.get(o).length),this.a.set(o,[u]),this.b+=1,this},e.get=function(o,u){return o?(o=this.W(o),0<o.length?String(o[0]):u):u};function G0(o,u,f){Kr(o,u),0<f.length&&(o.c=null,o.a.set(ea(o,u),z(f)),o.b+=f.length)}e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var o=[],u=this.a.Y(),f=0;f<u.length;f++){var d=u[f],g=encodeURIComponent(String(d));d=this.W(d);for(var _=0;_<d.length;_++){var w=g;d[_]!==""&&(w+="="+encodeURIComponent(String(d[_]))),o.push(w)}}return this.c=o.join("&")};function W0(o){var u=new $o;return u.c=o.c,o.a&&(u.a=new ta(o.a),u.b=o.b),u}function ea(o,u){return u=String(u),o.f&&(u=u.toLowerCase()),u}function gD(o,u){u&&!o.f&&(Xi(o),o.c=null,o.a.forEach(function(f,d){var g=d.toLowerCase();d!=g&&(Kr(this,d),G0(this,g,f))},o)),o.f=u}function $0(o){var u=[];return av(new mD,o,u),u.join("")}function mD(){}function av(o,u,f){if(u==null)f.push("null");else{if(typeof u=="object"){if(Array.isArray(u)){var d=u;u=d.length,f.push("[");for(var g="",_=0;_<u;_++)f.push(g),av(o,d[_],f),g=",";f.push("]");return}if(u instanceof String||u instanceof Number||u instanceof Boolean)u=u.valueOf();else{f.push("{"),g="";for(d in u)Object.prototype.hasOwnProperty.call(u,d)&&(_=u[d],typeof _!="function"&&(f.push(g),K0(d,f),f.push(":"),av(o,_,f),g=","));f.push("}");return}}switch(typeof u){case"string":K0(u,f);break;case"number":f.push(isFinite(u)&&!isNaN(u)?String(u):"null");break;case"boolean":f.push(String(u));break;case"function":f.push("null");break;default:throw Error("Unknown type: "+typeof u)}}}var z0={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},yD=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function K0(o,u){u.push('"',o.replace(yD,function(f){var d=z0[f];return d||(d="\\u"+(f.charCodeAt(0)|65536).toString(16).substr(1),z0[f]=d),d}),'"')}function uv(){var o=en();return br&&!!Qi&&Qi==11||/Edge\/\d+/.test(o)}function Ju(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function Q0(o,u){u=u||l.window;var f="about:blank";o&&(f=ff(r0(o)||o0)),u.location.href=f}function Y0(o,u){var f=[],d;for(d in o)d in u?typeof o[d]!=typeof u[d]?f.push(d):typeof o[d]=="object"&&o[d]!=null&&u[d]!=null?0<Y0(o[d],u[d]).length&&f.push(d):o[d]!==u[d]&&f.push(d):f.push(d);for(d in u)d in o||f.push(d);return f}function _D(){var o=en();return o=na(o)!=tE?null:(o=o.match(/\sChrome\/(\d+)/i))&&o.length==2?parseInt(o[1],10):null,o&&30>o?!1:!br||!Qi||9<Qi}function X0(o){return o=(o||en()).toLowerCase(),!!(o.match(/android/)||o.match(/webos/)||o.match(/iphone|ipad|ipod/)||o.match(/blackberry/)||o.match(/windows phone/)||o.match(/iemobile/))}function zo(o){o=o||l.window;try{o.close()}catch{}}function J0(o,u,f){var d=Math.floor(1e9*Math.random()).toString();u=u||500,f=f||600;var g=(window.screen.availHeight-f)/2,_=(window.screen.availWidth-u)/2;u={width:u,height:f,top:0<g?g:0,left:0<_?_:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},f=en().toLowerCase(),d&&(u.target=d,vt(f,"crios/")&&(u.target="_blank")),na(en())==fv&&(o=o||"http://localhost",u.scrollbars=!0),f=o||"",(o=u)||(o={}),d=window,u=f instanceof Mn?f:r0(typeof f.href<"u"?f.href:String(f))||o0,f=o.target||f.target,g=[];for(w in o)switch(w){case"width":case"height":case"top":case"left":g.push(w+"="+o[w]);break;case"target":case"noopener":case"noreferrer":break;default:g.push(w+"="+(o[w]?1:0))}var w=g.join(",");if((ne("iPhone")&&!ne("iPod")&&!ne("iPad")||ne("iPad")||ne("iPod"))&&d.navigator&&d.navigator.standalone&&f&&f!="_self"?(w=pf(document,"A"),Xb(w,"HTMLAnchorElement"),u=u instanceof Mn?u:i0(u),w.href=ff(u),w.setAttribute("target",f),o.noreferrer&&w.setAttribute("rel","noreferrer"),o=document.createEvent("MouseEvent"),o.initMouseEvent("click",!0,!0,d,1),w.dispatchEvent(o),w={}):o.noreferrer?(w=a0("",d,f,w),o=ff(u),w&&(Hk&&vt(o,";")&&(o="'"+o.replace(/'/g,"%27")+"'"),w.opener=null,o='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+jd(o)+'">',o=(d=Zb())?d.createHTML(o):o,o=new Xs(o,null,s0),d=w.document)&&(d.write(jk(o)),d.close())):(w=a0(u,d,f,w))&&o.noopener&&(w.opener=null),w)try{w.focus()}catch{}return w}function wD(o){return new xt(function(u){function f(){Zs(2e3).then(function(){if(!o||o.closed)u();else return f()})}return f()})}var bD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ED=/^[^@]+@[^@]+$/;function Ef(){var o=null;return new xt(function(u){l.document.readyState=="complete"?u():(o=function(){u()},Zd(window,"load",o))}).o(function(u){throw Yn(window,"load",o),u})}function ID(){return cv(void 0)?Ef().then(function(){return new xt(function(o,u){var f=l.document,d=setTimeout(function(){u(Error("Cordova framework is not ready."))},1e3);f.addEventListener("deviceready",function(){clearTimeout(d),o()},!1)})}):ae(Error("Cordova must run in an Android or iOS file scheme."))}function cv(o){return o=o||en(),!(ia()!=="file:"&&ia()!=="ionic:"||!o.toLowerCase().match(/iphone|ipad|ipod|android/))}function lv(){var o=l.window;try{return!(!o||o==o.top)}catch{return!1}}function Er(){return typeof l.WorkerGlobalScope<"u"&&typeof l.importScripts=="function"}function Qr(){return at.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":at.INTERNAL.hasOwnProperty("node")?"Node":Er()?"Worker":"Browser"}function Z0(){var o=Qr();return o==="ReactNative"||o==="Node"}function TD(){for(var o=50,u=[];0<o;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return u.join("")}var fv="Firefox",tE="Chrome";function na(o){var u=o.toLowerCase();if(vt(u,"opera/")||vt(u,"opr/")||vt(u,"opios/"))return"Opera";if(vt(u,"iemobile"))return"IEMobile";if(vt(u,"msie")||vt(u,"trident/"))return"IE";if(vt(u,"edge/"))return"Edge";if(vt(u,"firefox/"))return fv;if(vt(u,"silk/"))return"Silk";if(vt(u,"blackberry"))return"Blackberry";if(vt(u,"webos"))return"Webos";if(!vt(u,"safari/")||vt(u,"chrome/")||vt(u,"crios/")||vt(u,"android"))if(!vt(u,"chrome/")&&!vt(u,"crios/")||vt(u,"edge/")){if(vt(u,"android"))return"Android";if((o=o.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&o.length==2)return o[1]}else return tE;else return"Safari";return"Other"}var eE={md:"FirebaseCore-web",od:"FirebaseUI-web"};function ra(o,u){u=u||[];var f=[],d={},g;for(g in eE)d[eE[g]]=!0;for(g=0;g<u.length;g++)typeof d[u[g]]<"u"&&(delete d[u[g]],f.push(u[g]));return f.sort(),u=f,u.length||(u=["FirebaseCore-web"]),f=Qr(),f==="Browser"?(d=en(),f=na(d)):f==="Worker"&&(d=en(),f=na(d)+"-"+f),f+"/JsCore/"+o+"/"+u.join(",")}function en(){return l.navigator&&l.navigator.userAgent||""}function ue(o,u){o=o.split("."),u=u||l;for(var f=0;f<o.length&&typeof u=="object"&&u!=null;f++)u=u[o[f]];return f!=o.length&&(u=void 0),u}function hv(){try{var o=l.localStorage,u=Qo();if(o)return o.setItem(u,"1"),o.removeItem(u),uv()?!!l.indexedDB:!0}catch{return Er()&&!!l.indexedDB}return!1}function Ko(){return(If()||ia()==="chrome-extension:"||cv())&&!Z0()&&hv()&&!Er()}function If(){return ia()==="http:"||ia()==="https:"}function ia(){return l.location&&l.location.protocol||null}function Zu(o){return o=o||en(),!(X0(o)||na(o)==fv)}function tc(o){return typeof o>"u"?null:$0(o)}function nE(o){var u={},f;for(f in o)o.hasOwnProperty(f)&&o[f]!==null&&o[f]!==void 0&&(u[f]=o[f]);return u}function oa(o){if(o!==null)return JSON.parse(o)}function Qo(o){return o||Math.floor(1e9*Math.random()).toString()}function rE(o){return o=o||en(),!(na(o)=="Safari"||o.toLowerCase().match(/iphone|ipad|ipod/))}function iE(){var o=l.___jsl;if(o&&o.H){for(var u in o.H)if(o.H[u].r=o.H[u].r||[],o.H[u].L=o.H[u].L||[],o.H[u].r=o.H[u].L.concat(),o.CP)for(var f=0;f<o.CP.length;f++)o.CP[f]=null}}function Ji(o,u){if(o>u)throw Error("Short delay should be less than long delay!");this.a=o,this.c=u,o=en(),u=Qr(),this.b=X0(o)||u==="ReactNative"}Ji.prototype.get=function(){var o=l.navigator;return!(o&&typeof o.onLine=="boolean"&&(If()||ia()==="chrome-extension:"||typeof o.connection<"u"))||o.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};function pv(){var o=l.document;return o&&typeof o.visibilityState<"u"?o.visibilityState=="visible":!0}function SD(){var o=l.document,u=null;return pv()||!o?gt():new xt(function(f){u=function(){pv()&&(o.removeEventListener("visibilitychange",u,!1),f())},o.addEventListener("visibilitychange",u,!1)}).o(function(f){throw o.removeEventListener("visibilitychange",u,!1),f})}function ec(o){try{var u=new Date(parseInt(o,10));if(!isNaN(u.getTime())&&!/[^0-9]/.test(o))return u.toUTCString()}catch{}return null}function oE(){return!(!ue("fireauth.oauthhelper",l)&&!ue("fireauth.iframe",l))}function AD(){var o=l.navigator;return o&&o.serviceWorker&&o.serviceWorker.controller||null}function CD(){var o=l.navigator;return o&&o.serviceWorker?gt().then(function(){return o.serviceWorker.ready}).then(function(u){return u.active||null}).o(function(){return null}):gt(null)}var sE={};function dv(o){sE[o]||(sE[o]=!0,typeof console<"u"&&typeof console.warn=="function"&&console.warn(o))}var vv;try{var gv={};Object.defineProperty(gv,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(gv,"abcd",{configurable:!0,enumerable:!0,value:2}),vv=gv.abcd==2}catch{vv=!1}function it(o,u,f){vv?Object.defineProperty(o,u,{configurable:!0,enumerable:!0,value:f}):o[u]=f}function En(o,u){if(u)for(var f in u)u.hasOwnProperty(f)&&it(o,f,u[f])}function Yr(o){var u={};return En(u,o),u}function ND(o){var u={},f;for(f in o)o.hasOwnProperty(f)&&(u[f]=o[f]);return u}function RD(o,u){if(!u||!u.length)return!0;if(!o)return!1;for(var f=0;f<u.length;f++){var d=o[u[f]];if(d==null||d==="")return!1}return!0}function mv(o){var u=o;if(typeof o=="object"&&o!=null){u="length"in o?[]:{};for(var f in o)it(u,f,mv(o[f]))}return u}function yv(o){var u=o&&(o[Ev]?"phone":null);if(u&&o&&o[bv]){it(this,"uid",o[bv]),it(this,"displayName",o[aE]||null);var f=null;o[wv]&&(f=new Date(o[wv]).toUTCString()),it(this,"enrollmentTime",f),it(this,"factorId",u)}else throw new O("internal-error","Internal assert: invalid MultiFactorInfo object")}yv.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function _v(o){try{var u=new nc(o)}catch{u=null}return u}var aE="displayName",wv="enrolledAt",bv="mfaEnrollmentId",Ev="phoneInfo";function nc(o){yv.call(this,o),it(this,"phoneNumber",o[Ev])}lt(nc,yv),nc.prototype.w=function(){var o=nc.ab.w.call(this);return o.phoneNumber=this.phoneNumber,o};function OD(o){var u={},f=o[xD],d=o[kD],g=o[DD];if(o=_v(o[PD]),!g||g!=Tf&&g!=rc&&!f||g==rc&&!d||g==Iv&&!o)throw Error("Invalid checkActionCode response!");g==rc?(u[cE]=f||null,u[lE]=f||null,u[uE]=d):(u[cE]=d||null,u[lE]=d||null,u[uE]=f||null),u[LD]=o||null,it(this,FD,g),it(this,MD,mv(u))}var Iv="REVERT_SECOND_FACTOR_ADDITION",Tf="EMAIL_SIGNIN",rc="VERIFY_AND_CHANGE_EMAIL",xD="email",PD="mfaInfo",kD="newEmail",DD="requestType",uE="email",cE="fromEmail",LD="multiFactorInfo",lE="previousEmail",MD="data",FD="operation";function Tv(o){o=Un(o);var u=lr(o,fE)||null,f=lr(o,hE)||null,d=lr(o,pE)||null;if(d=d&&BD[d]||null,!u||!f||!d)throw new O("argument-error",fE+", "+hE+"and "+pE+" are required in a valid action code URL.");En(this,{apiKey:u,operation:d,code:f,continueUrl:lr(o,UD)||null,languageCode:lr(o,jD)||null,tenantId:lr(o,VD)||null})}var fE="apiKey",hE="oobCode",UD="continueUrl",jD="languageCode",pE="mode",VD="tenantId",BD={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Iv,signIn:Tf,verifyAndChangeEmail:rc,verifyEmail:"VERIFY_EMAIL"};function dE(o){try{return new Tv(o)}catch{return null}}function Sf(o){var u=o[qD];if(typeof u>"u")throw new O("missing-continue-uri");if(typeof u!="string"||typeof u=="string"&&!u.length)throw new O("invalid-continue-uri");this.h=u,this.b=this.a=null,this.g=!1;var f=o[vE];if(f&&typeof f=="object"){u=f[wE];var d=f[yE];if(f=f[_E],typeof u=="string"&&u.length){if(this.a=u,typeof d<"u"&&typeof d!="boolean")throw new O("argument-error",yE+" property must be a boolean when specified.");if(this.g=!!d,typeof f<"u"&&(typeof f!="string"||typeof f=="string"&&!f.length))throw new O("argument-error",_E+" property must be a non empty string when specified.");this.b=f||null}else{if(typeof u<"u")throw new O("argument-error",wE+" property must be a non empty string when specified.");if(typeof d<"u"||typeof f<"u")throw new O("missing-android-pkg-name")}}else if(typeof f<"u")throw new O("argument-error",vE+" property must be a non null object when specified.");if(this.f=null,(u=o[mE])&&typeof u=="object"){if(u=u[bE],typeof u=="string"&&u.length)this.f=u;else if(typeof u<"u")throw new O("argument-error",bE+" property must be a non empty string when specified.")}else if(typeof u<"u")throw new O("argument-error",mE+" property must be a non null object when specified.");if(u=o[Sv],typeof u<"u"&&typeof u!="boolean")throw new O("argument-error",Sv+" property must be a boolean when specified.");if(this.c=!!u,o=o[gE],typeof o<"u"&&(typeof o!="string"||typeof o=="string"&&!o.length))throw new O("argument-error",gE+" property must be a non empty string when specified.");this.i=o||null}var vE="android",gE="dynamicLinkDomain",Sv="handleCodeInApp",mE="iOS",qD="url",yE="installApp",_E="minimumVersion",wE="packageName",bE="bundleId";function Af(o){var u={};u.continueUrl=o.h,u.canHandleCodeInApp=o.c,(u.androidPackageName=o.a)&&(u.androidMinimumVersion=o.b,u.androidInstallApp=o.g),u.iOSBundleId=o.f,u.dynamicLinkDomain=o.i;for(var f in u)u[f]===null&&delete u[f];return u}function HD(o){return S(o,function(u){return u=u.toString(16),1<u.length?u:"0"+u}).join("")}var ic=null;function GD(o){var u=[];return WD(o,function(f){u.push(f)}),u}function WD(o,u){function f(M){for(;d<o.length;){var q=o.charAt(d++),bt=ic[q];if(bt!=null)return bt;if(!/^[\s\xa0]*$/.test(q))throw Error("Unknown base64 encoding at char: "+q)}return M}$D();for(var d=0;;){var g=f(-1),_=f(0),w=f(64),T=f(64);if(T===64&&g===-1)break;u(g<<2|_>>4),w!=64&&(u(_<<4&240|w>>2),T!=64&&u(w<<6&192|T))}}function $D(){if(!ic){ic={};for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),u=["+/=","+/","-_=","-_.","-_"],f=0;5>f;f++)for(var d=o.concat(u[f].split("")),g=0;g<d.length;g++){var _=d[g];ic[_]===void 0&&(ic[_]=g)}}}function Cf(o){var u=EE(o);if(!(u&&u.sub&&u.iss&&u.aud&&u.exp))throw Error("Invalid JWT");this.h=o,this.a=u.exp,this.i=u.sub,o=Date.now()/1e3,this.g=u.iat||(o>this.a?this.a:o),this.b=u.provider_id||u.firebase&&u.firebase.sign_in_provider||null,this.f=u.firebase&&u.firebase.tenant||null,this.c=!!u.is_anonymous||this.b=="anonymous"}Cf.prototype.T=function(){return this.f},Cf.prototype.l=function(){return this.c},Cf.prototype.toString=function(){return this.h};function Nf(o){try{return new Cf(o)}catch{return null}}function EE(o){if(!o||(o=o.split("."),o.length!=3))return null;o=o[1];for(var u=(4-o.length%4)%4,f=0;f<u;f++)o+=".";try{var d=GD(o);for(o=[],f=u=0;u<d.length;){var g=d[u++];if(128>g)o[f++]=String.fromCharCode(g);else if(191<g&&224>g){var _=d[u++];o[f++]=String.fromCharCode((g&31)<<6|_&63)}else if(239<g&&365>g){_=d[u++];var w=d[u++],T=d[u++],M=((g&7)<<18|(_&63)<<12|(w&63)<<6|T&63)-65536;o[f++]=String.fromCharCode(55296+(M>>10)),o[f++]=String.fromCharCode(56320+(M&1023))}else _=d[u++],w=d[u++],o[f++]=String.fromCharCode((g&15)<<12|(_&63)<<6|w&63)}return JSON.parse(o.join(""))}catch{}return null}var IE="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Rf=["client_id","response_type","scope","redirect_uri","state"],Av={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Rf},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Rf},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Rf},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:IE},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Cv(o){for(var u in Av)if(Av[u].fa==o)return Av[u];return null}function TE(o){var u={};u["facebook.com"]=AE,u["google.com"]=NE,u["github.com"]=CE,u["twitter.com"]=RE;var f=o&&o[SE];try{if(f)return u[f]?new u[f](o):new Xr(o);if(typeof o[Nv]<"u")return new Rv(o)}catch{}return null}var Nv="idToken",SE="providerId";function Rv(o){var u=o[SE];if(!u&&o[Nv]){var f=Nf(o[Nv]);f&&f.b&&(u=f.b)}if(!u)throw Error("Invalid additional user info!");(u=="anonymous"||u=="custom")&&(u=null),f=!1,typeof o.isNewUser<"u"?f=!!o.isNewUser:o.kind==="identitytoolkit#SignupNewUserResponse"&&(f=!0),it(this,"providerId",u),it(this,"isNewUser",f)}function Xr(o){Rv.call(this,o),o=oa(o.rawUserInfo||"{}"),it(this,"profile",mv(o||{}))}lt(Xr,Rv);function AE(o){if(Xr.call(this,o),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}lt(AE,Xr);function CE(o){if(Xr.call(this,o),this.providerId!="github.com")throw Error("Invalid provider ID!");it(this,"username",this.profile&&this.profile.login||null)}lt(CE,Xr);function NE(o){if(Xr.call(this,o),this.providerId!="google.com")throw Error("Invalid provider ID!")}lt(NE,Xr);function RE(o){if(Xr.call(this,o),this.providerId!="twitter.com")throw Error("Invalid provider ID!");it(this,"username",o.screenName||null)}lt(RE,Xr);function OE(o){var u=Un(o),f=lr(u,"link"),d=lr(Un(f),"link");return u=lr(u,"deep_link_id"),lr(Un(u),"link")||u||d||f||o}function Of(o,u){if(!o&&!u)throw new O("internal-error","Internal assert: no raw session string available");if(o&&u)throw new O("internal-error","Internal assert: unable to determine the session type");this.a=o||null,this.b=u||null,this.type=this.a?oc:xf}var oc="enroll",xf="signin";Of.prototype.Ha=function(){return this.a?gt(this.a):gt(this.b)},Of.prototype.w=function(){return this.type==oc?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function sa(){}sa.prototype.ka=function(){},sa.prototype.b=function(){},sa.prototype.c=function(){},sa.prototype.w=function(){};function aa(o,u){return o.then(function(f){if(f[Sr]){var d=Nf(f[Sr]);if(!d||u!=d.i)throw new O("user-mismatch");return f}throw new O("user-mismatch")}).o(function(f){throw f&&f.code&&f.code==cn+"user-not-found"?new O("user-mismatch"):f})}function Yo(o,u){if(u)this.a=u;else throw new O("internal-error","failed to construct a credential");it(this,"providerId",o),it(this,"signInMethod",o)}Yo.prototype.ka=function(o){return Zv(o,Ov(this))},Yo.prototype.b=function(o,u){var f=Ov(this);return f.idToken=u,tg(o,f)},Yo.prototype.c=function(o,u){return aa(eg(o,Ov(this)),u)};function Ov(o){return{pendingToken:o.a,requestUri:"http://localhost"}}Yo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function zD(o){if(o&&o.providerId&&o.signInMethod&&o.providerId.indexOf("saml.")==0&&o.pendingToken)try{return new Yo(o.providerId,o.pendingToken)}catch{}return null}function bi(o,u,f){if(this.a=null,u.idToken||u.accessToken)u.idToken&&it(this,"idToken",u.idToken),u.accessToken&&it(this,"accessToken",u.accessToken),u.nonce&&!u.pendingToken&&it(this,"nonce",u.nonce),u.pendingToken&&(this.a=u.pendingToken);else if(u.oauthToken&&u.oauthTokenSecret)it(this,"accessToken",u.oauthToken),it(this,"secret",u.oauthTokenSecret);else throw new O("internal-error","failed to construct a credential");it(this,"providerId",o),it(this,"signInMethod",f)}bi.prototype.ka=function(o){return Zv(o,xv(this))},bi.prototype.b=function(o,u){var f=xv(this);return f.idToken=u,tg(o,f)},bi.prototype.c=function(o,u){var f=xv(this);return aa(eg(o,f),u)};function xv(o){var u={};return o.idToken&&(u.id_token=o.idToken),o.accessToken&&(u.access_token=o.accessToken),o.secret&&(u.oauth_token_secret=o.secret),u.providerId=o.providerId,o.nonce&&!o.a&&(u.nonce=o.nonce),u={postBody:H0(u).toString(),requestUri:"http://localhost"},o.a&&(delete u.postBody,u.pendingToken=o.a),u}bi.prototype.w=function(){var o={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(o.oauthIdToken=this.idToken),this.accessToken&&(o.oauthAccessToken=this.accessToken),this.secret&&(o.oauthTokenSecret=this.secret),this.nonce&&(o.nonce=this.nonce),this.a&&(o.pendingToken=this.a),o};function KD(o){if(o&&o.providerId&&o.signInMethod){var u={idToken:o.oauthIdToken,accessToken:o.oauthTokenSecret?null:o.oauthAccessToken,oauthTokenSecret:o.oauthTokenSecret,oauthToken:o.oauthTokenSecret&&o.oauthAccessToken,nonce:o.nonce,pendingToken:o.pendingToken};try{return new bi(o.providerId,u,o.signInMethod)}catch{}}return null}function Xo(o,u){this.Qc=u||[],En(this,{providerId:o,isOAuthProvider:!0}),this.Ib={},this.pb=(Cv(o)||{}).Ja||null,this.ob=null}Xo.prototype.Ka=function(o){return this.Ib=De(o),this};function xE(o){if(typeof o!="string"||o.indexOf("saml.")!=0)throw new O("argument-error",'SAML provider IDs must be prefixed with "saml."');Xo.call(this,o,[])}lt(xE,Xo);function Xn(o){Xo.call(this,o,Rf),this.a=[]}lt(Xn,Xo),Xn.prototype.Ca=function(o){return L(this.a,o)||this.a.push(o),this},Xn.prototype.Qb=function(){return z(this.a)},Xn.prototype.credential=function(o,u){var f;if(I(o)?f={idToken:o.idToken||null,accessToken:o.accessToken||null,nonce:o.rawNonce||null}:f={idToken:o||null,accessToken:u||null},!f.idToken&&!f.accessToken)throw new O("argument-error","credential failed: must provide the ID token and/or the access token.");return new bi(this.providerId,f,this.providerId)};function Jo(){Xn.call(this,"facebook.com")}lt(Jo,Xn),it(Jo,"PROVIDER_ID","facebook.com"),it(Jo,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function PE(o){if(!o)throw new O("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=o;return I(o)&&(u=o.accessToken),new Jo().credential({accessToken:u})}function Zo(){Xn.call(this,"github.com")}lt(Zo,Xn),it(Zo,"PROVIDER_ID","github.com"),it(Zo,"GITHUB_SIGN_IN_METHOD","github.com");function kE(o){if(!o)throw new O("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=o;return I(o)&&(u=o.accessToken),new Zo().credential({accessToken:u})}function ts(){Xn.call(this,"google.com"),this.Ca("profile")}lt(ts,Xn),it(ts,"PROVIDER_ID","google.com"),it(ts,"GOOGLE_SIGN_IN_METHOD","google.com");function DE(o,u){var f=o;return I(o)&&(f=o.idToken,u=o.accessToken),new ts().credential({idToken:f,accessToken:u})}function ua(){Xo.call(this,"twitter.com",IE)}lt(ua,Xo),it(ua,"PROVIDER_ID","twitter.com"),it(ua,"TWITTER_SIGN_IN_METHOD","twitter.com");function LE(o,u){var f=o;if(I(f)||(f={oauthToken:o,oauthTokenSecret:u}),!f.oauthToken||!f.oauthTokenSecret)throw new O("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new bi("twitter.com",f,"twitter.com")}function Zi(o,u,f){this.a=o,this.f=u,it(this,"providerId","password"),it(this,"signInMethod",f===fr.EMAIL_LINK_SIGN_IN_METHOD?fr.EMAIL_LINK_SIGN_IN_METHOD:fr.EMAIL_PASSWORD_SIGN_IN_METHOD)}Zi.prototype.ka=function(o){return this.signInMethod==fr.EMAIL_LINK_SIGN_IN_METHOD?Pt(o,PL,{email:this.a,oobCode:this.f}):Pt(o,cI,{email:this.a,password:this.f})},Zi.prototype.b=function(o,u){return this.signInMethod==fr.EMAIL_LINK_SIGN_IN_METHOD?Pt(o,kL,{idToken:u,email:this.a,oobCode:this.f}):Pt(o,uI,{idToken:u,email:this.a,password:this.f})},Zi.prototype.c=function(o,u){return aa(this.ka(o),u)},Zi.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function QD(o){return o&&o.email&&o.password?new Zi(o.email,o.password,o.signInMethod):null}function fr(){En(this,{providerId:"password",isOAuthProvider:!1})}function ME(o,u){if(u=Pv(u),!u)throw new O("argument-error","Invalid email link!");return new Zi(o,u.code,fr.EMAIL_LINK_SIGN_IN_METHOD)}function Pv(o){return o=OE(o),(o=dE(o))&&o.operation===Tf?o:null}En(fr,{PROVIDER_ID:"password"}),En(fr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),En(fr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function to(o){if(!(o.eb&&o.cb||o.La&&o.ea))throw new O("internal-error");this.a=o,it(this,"providerId","phone"),this.fa="phone",it(this,"signInMethod","phone")}to.prototype.ka=function(o){return o.fb(sc(this))},to.prototype.b=function(o,u){var f=sc(this);return f.idToken=u,Pt(o,ZL,f)},to.prototype.c=function(o,u){var f=sc(this);return f.operation="REAUTH",o=Pt(o,tM,f),aa(o,u)},to.prototype.w=function(){var o={providerId:"phone"};return this.a.eb&&(o.verificationId=this.a.eb),this.a.cb&&(o.verificationCode=this.a.cb),this.a.La&&(o.temporaryProof=this.a.La),this.a.ea&&(o.phoneNumber=this.a.ea),o};function YD(o){if(o&&o.providerId==="phone"&&(o.verificationId&&o.verificationCode||o.temporaryProof&&o.phoneNumber)){var u={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(f){o[f]&&(u[f]=o[f])}),new to(u)}return null}function sc(o){return o.a.La&&o.a.ea?{temporaryProof:o.a.La,phoneNumber:o.a.ea}:{sessionInfo:o.a.eb,code:o.a.cb}}function Ei(o){try{this.a=o||at.auth()}catch{throw new O("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}En(this,{providerId:"phone",isOAuthProvider:!1})}Ei.prototype.fb=function(o,u){var f=this.a.a;return gt(u.verify()).then(function(d){if(typeof d!="string")throw new O("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(u.type){case"recaptcha":var g=I(o)?o.session:null,_=I(o)?o.phoneNumber:o,w;return g&&g.type==oc?w=g.Ha().then(function(T){return IL(f,{idToken:T,phoneEnrollmentInfo:{phoneNumber:_,recaptchaToken:d}})}):g&&g.type==xf?w=g.Ha().then(function(T){return TL(f,{mfaPendingCredential:T,mfaEnrollmentId:o.multiFactorHint&&o.multiFactorHint.uid||o.multiFactorUid,phoneSignInInfo:{recaptchaToken:d}})}):w=EL(f,{phoneNumber:_,recaptchaToken:d}),w.then(function(T){return typeof u.reset=="function"&&u.reset(),T},function(T){throw typeof u.reset=="function"&&u.reset(),T});default:throw new O("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function FE(o,u){if(!o)throw new O("missing-verification-id");if(!u)throw new O("missing-verification-code");return new to({eb:o,cb:u})}En(Ei,{PROVIDER_ID:"phone"}),En(Ei,{PHONE_SIGN_IN_METHOD:"phone"});function kv(o){if(o.temporaryProof&&o.phoneNumber)return new to({La:o.temporaryProof,ea:o.phoneNumber});var u=o&&o.providerId;if(!u||u==="password")return null;var f=o&&o.oauthAccessToken,d=o&&o.oauthTokenSecret,g=o&&o.nonce,_=o&&o.oauthIdToken,w=o&&o.pendingToken;try{switch(u){case"google.com":return DE(_,f);case"facebook.com":return PE(f);case"github.com":return kE(f);case"twitter.com":return LE(f,d);default:return f||d||_||w?w?u.indexOf("saml.")==0?new Yo(u,w):new bi(u,{pendingToken:w,idToken:o.oauthIdToken,accessToken:o.oauthAccessToken},u):new Xn(u).credential({idToken:_,accessToken:f,rawNonce:g}):null}}catch{return null}}function Dv(o){if(!o.isOAuthProvider)throw new O("invalid-oauth-provider")}function Ir(o,u,f,d,g,_,w){if(this.c=o,this.b=u||null,this.g=f||null,this.f=d||null,this.i=_||null,this.h=w||null,this.a=g||null,this.g||this.a){if(this.g&&this.a)throw new O("invalid-auth-event");if(this.g&&!this.f)throw new O("invalid-auth-event")}else throw new O("invalid-auth-event")}Ir.prototype.getUid=function(){var o=[];return o.push(this.c),this.b&&o.push(this.b),this.f&&o.push(this.f),this.h&&o.push(this.h),o.join("-")},Ir.prototype.T=function(){return this.h},Ir.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function UE(o){return o=o||{},o.type?new Ir(o.type,o.eventId,o.urlResponse,o.sessionId,o.error&&Wr(o.error),o.postBody,o.tenantId):null}function XD(){this.b=null,this.a=[]}var Lv=null;function JD(o){var u=Lv;u.a.push(o),u.b||(u.b=function(f){for(var d=0;d<u.a.length;d++)u.a[d](f)},o=ue("universalLinks.subscribe",l),typeof o=="function"&&o(null,u.b))}function Mv(o){var u="unauthorized-domain",f=void 0,d=Un(o);o=d.a,d=d.c,d=="chrome-extension"?f=u0("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):d=="http"||d=="https"?f=u0("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):u="operation-not-supported-in-this-environment",O.call(this,u,f)}lt(Mv,O);function ac(o,u,f){O.call(this,o,f),o=u||{},o.Jb&&it(this,"email",o.Jb),o.ea&&it(this,"phoneNumber",o.ea),o.credential&&it(this,"credential",o.credential),o.Zb&&it(this,"tenantId",o.Zb)}lt(ac,O),ac.prototype.w=function(){var o={code:this.code,message:this.message};this.email&&(o.email=this.email),this.phoneNumber&&(o.phoneNumber=this.phoneNumber),this.tenantId&&(o.tenantId=this.tenantId);var u=this.credential&&this.credential.w();return u&&Ln(o,u),o},ac.prototype.toJSON=function(){return this.w()};function Pf(o){if(o.code){var u=o.code||"";u.indexOf(cn)==0&&(u=u.substring(cn.length));var f={credential:kv(o),Zb:o.tenantId};if(o.email)f.Jb=o.email;else if(o.phoneNumber)f.ea=o.phoneNumber;else if(!f.credential)return new O(u,o.message||void 0);return new ac(u,f,o.message)}return null}function uc(){}uc.prototype.c=null;function jE(o){return o.c||(o.c=o.b())}var Fv;function kf(){}lt(kf,uc),kf.prototype.a=function(){var o=VE(this);return o?new ActiveXObject(o):new XMLHttpRequest},kf.prototype.b=function(){var o={};return VE(this)&&(o[0]=!0,o[1]=!0),o};function VE(o){if(!o.f&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var u=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],f=0;f<u.length;f++){var d=u[f];try{return new ActiveXObject(d),o.f=d}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return o.f}Fv=new kf;function Df(){}lt(Df,uc),Df.prototype.a=function(){var o=new XMLHttpRequest;if("withCredentials"in o)return o;if(typeof XDomainRequest<"u")return new BE;throw Error("Unsupported browser")},Df.prototype.b=function(){return{}};function BE(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=U(this.qc,this),this.a.onerror=U(this.Sb,this),this.a.onprogress=U(this.rc,this),this.a.ontimeout=U(this.vc,this)}e=BE.prototype,e.open=function(o,u,f){if(f!=null&&!f)throw Error("Only async requests are supported.");this.a.open(o,u)},e.send=function(o){if(o)if(typeof o=="string")this.a.send(o);else throw Error("Only string data is supported");else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(o){return o.toLowerCase()=="content-type"?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Uv(this,4)},e.Sb=function(){this.status=500,this.response=this.responseText="",Uv(this,4)},e.vc=function(){this.Sb()},e.rc=function(){this.status=200,Uv(this,1)};function Uv(o,u){o.readyState=u,o.onreadystatechange&&o.onreadystatechange()}e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function jv(o,u,f){this.reset(o,u,f,void 0,void 0)}jv.prototype.a=null,jv.prototype.reset=function(o,u,f,d,g){delete this.a};function Vv(o){this.f=o,this.b=this.c=this.a=null}function cc(o,u){this.name=o,this.value=u}cc.prototype.toString=function(){return this.name};var qE=new cc("SEVERE",1e3),Bv=new cc("WARNING",900),ZD=new cc("CONFIG",700),tL=new cc("FINE",500);function HE(o){return o.c?o.c:o.a?HE(o.a):(tn("Root logger has no level set."),null)}Vv.prototype.log=function(o,u,f){if(o.value>=HE(this).value)for(E(u)&&(u=u()),o=new jv(o,String(u),this.f),f&&(o.a=f),f=this;f;)f=f.a};var qv={},Lf=null;function Hv(o){Lf||(Lf=new Vv(""),qv[""]=Lf,Lf.c=ZD);var u;if(!(u=qv[o])){u=new Vv(o);var f=o.lastIndexOf("."),d=o.substr(f+1);f=Hv(o.substr(0,f)),f.b||(f.b={}),f.b[d]=u,u.a=f,qv[o]=u}return u}function hr(o,u){o&&o.log(tL,u,void 0)}function Mf(o){this.f=o}lt(Mf,uc),Mf.prototype.a=function(){return new Ff(this.f)},Mf.prototype.b=function(o){return function(){return o}}({});function Ff(o){bn.call(this),this.u=o,this.h=void 0,this.readyState=Gv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Hv("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}lt(Ff,bn);var Gv=0;e=Ff.prototype,e.open=function(o,u){if(this.readyState!=Gv)throw this.abort(),Error("Error reopening a connection");this.s=o,this.f=u,this.readyState=1,fc(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var u={headers:this.l,method:this.s,credentials:this.h,cache:void 0};o&&(u.body=o),this.u.fetch(new Request(this.f,u)).then(this.uc.bind(this),this.Ua.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,lc(this)),this.readyState=Gv},e.uc=function(o){this.a&&(this.g=o,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=o.headers,this.readyState=2,fc(this)),this.a&&(this.readyState=3,fc(this),this.a&&(this.responseType==="arraybuffer"?o.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):typeof l.ReadableStream<"u"&&"body"in o?(this.response=this.responseText="",this.c=o.body.getReader(),this.m=new TextDecoder,GE(this)):o.text().then(this.tc.bind(this),this.Ua.bind(this)))))};function GE(o){o.c.read().then(o.pc.bind(o)).catch(o.Ua.bind(o))}e.pc=function(o){if(this.a){var u=this.m.decode(o.value?o.value:new Uint8Array(0),{stream:!o.done});u&&(this.response=this.responseText+=u),o.done?lc(this):fc(this),this.readyState==3&&GE(this)}},e.tc=function(o){this.a&&(this.response=this.responseText=o,lc(this))},e.sc=function(o){this.a&&(this.response=o,lc(this))},e.Ua=function(o){var u=this.i;u&&u.log(Bv,"Failed to fetch url "+this.f,o instanceof Error?o:Error(o)),this.a&&lc(this)};function lc(o){o.readyState=4,o.g=null,o.c=null,o.m=null,fc(o)}e.setRequestHeader=function(o,u){this.l.append(o,u)},e.getResponseHeader=function(o){return this.b?this.b.get(o.toLowerCase())||"":((o=this.i)&&o.log(Bv,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var o=this.i;return o&&o.log(Bv,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}o=[];for(var u=this.b.entries(),f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function fc(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ff.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(o){this.h=o?"include":"same-origin"}});function hc(o){bn.call(this),this.headers=new ta,this.D=o||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=WE,this.u=this.S=!1}lt(hc,bn);var WE="";hc.prototype.b=Hv("goog.net.XhrIo");var eL=/^https?$/i,nL=["POST","PUT"];function rL(o,u,f,d,g){if(o.a)throw Error("[goog.net.XhrIo] Object is active with another request="+o.l+"; newUri="+u);f=f?f.toUpperCase():"GET",o.l=u,o.h="",o.R=f,o.J=!1,o.c=!0,o.a=o.D?o.D.a():Fv.a(),o.C=o.D?jE(o.D):jE(Fv),o.a.onreadystatechange=U(o.Vb,o);try{hr(o.b,Ii(o,"Opening Xhr")),o.O=!0,o.a.open(f,String(u),!0),o.O=!1}catch(w){hr(o.b,Ii(o,"Error opening Xhr: "+w.message)),$E(o,w);return}u=d||"";var _=new ta(o.headers);g&&cD(g,function(w,T){_.set(T,w)}),g=x(_.Y()),d=l.FormData&&u instanceof l.FormData,!L(nL,f)||g||d||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),_.forEach(function(w,T){this.a.setRequestHeader(T,w)},o),o.m&&(o.a.responseType=o.m),"withCredentials"in o.a&&o.a.withCredentials!==o.S&&(o.a.withCredentials=o.S);try{QE(o),0<o.g&&(o.u=iL(o.a),hr(o.b,Ii(o,"Will abort after "+o.g+"ms if incomplete, xhr2 "+o.u)),o.u?(o.a.timeout=o.g,o.a.ontimeout=U(o.Ma,o)):o.s=rv(o.Ma,o.g,o)),hr(o.b,Ii(o,"Sending request")),o.i=!0,o.a.send(u),o.i=!1}catch(w){hr(o.b,Ii(o,"Send error: "+w.message)),$E(o,w)}}function iL(o){return br&&h0(9)&&typeof o.timeout=="number"&&o.ontimeout!==void 0}function oL(o){return o.toLowerCase()=="content-type"}e=hc.prototype,e.Ma=function(){typeof c<"u"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",hr(this.b,Ii(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function $E(o,u){o.c=!1,o.a&&(o.f=!0,o.a.abort(),o.f=!1),o.h=u,zE(o),Uf(o)}function zE(o){o.J||(o.J=!0,o.dispatchEvent("complete"),o.dispatchEvent("error"))}e.abort=function(){this.a&&this.c&&(hr(this.b,Ii(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Uf(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Uf(this,!0)),hc.ab.Da.call(this)},e.Vb=function(){this.xa||(this.O||this.i||this.f?KE(this):this.Jc())},e.Jc=function(){KE(this)};function KE(o){if(o.c&&typeof c<"u"){if(o.C[1]&&pc(o)==4&&jf(o)==2)hr(o.b,Ii(o,"Local request error detected and ignored"));else if(o.i&&pc(o)==4)rv(o.Vb,0,o);else if(o.dispatchEvent("readystatechange"),pc(o)==4){hr(o.b,Ii(o,"Request complete")),o.c=!1;try{var u=jf(o);t:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var d;if(!(d=f)){var g;if(g=u===0){var _=String(o.l).match(B0)[1]||null;if(!_&&l.self&&l.self.location){var w=l.self.location.protocol;_=w.substr(0,w.length-1)}g=!eL.test(_?_.toLowerCase():"")}d=g}if(d)o.dispatchEvent("complete"),o.dispatchEvent("success");else{try{var T=2<pc(o)?o.a.statusText:""}catch(M){hr(o.b,"Can not get status: "+M.message),T=""}o.h=T+" ["+jf(o)+"]",zE(o)}}finally{Uf(o)}}}}function Uf(o,u){if(o.a){QE(o);var f=o.a,d=o.C[0]?m:null;o.a=null,o.C=null,u||o.dispatchEvent("ready");try{f.onreadystatechange=d}catch(g){(o=o.b)&&o.log(qE,"Problem encountered resetting onreadystatechange: "+g.message,void 0)}}}function QE(o){o.a&&o.u&&(o.a.ontimeout=null),o.s&&(l.clearTimeout(o.s),o.s=null)}function pc(o){return o.a?o.a.readyState:0}function jf(o){try{return 2<pc(o)?o.a.status:-1}catch{return-1}}function sL(o){try{return o.a?o.a.responseText:""}catch(u){return hr(o.b,"Can not get responseText: "+u.message),""}}e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case WE:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var o=this.b;return o&&o.log(qE,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(u){return hr(this.b,"Can not get response: "+u.message),null}};function Ii(o,u){return u+" ["+o.R+" "+o.l+" "+jf(o)+"]"}function es(o){var u=cL;this.g=[],this.u=u,this.s=o||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}es.prototype.cancel=function(o){if(this.a)this.c instanceof es&&this.c.cancel();else{if(this.b){var u=this.b;delete this.b,o?u.cancel(o):(u.l--,0>=u.l&&u.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(o=new vc,Vf(this),dc(this,!1,o))}},es.prototype.m=function(o,u){this.i=!1,dc(this,o,u)};function dc(o,u,f){o.a=!0,o.c=f,o.f=!u,XE(o)}function Vf(o){if(o.a){if(!o.v)throw new Bf;o.v=!1}}function aL(o,u){Wv(o,null,u,void 0)}function Wv(o,u,f,d){o.g.push([u,f,d]),o.a&&XE(o)}es.prototype.then=function(o,u,f){var d,g,_=new xt(function(w,T){d=w,g=T});return Wv(this,d,function(w){w instanceof vc?_.cancel():g(w)}),_.then(o,u,f)},es.prototype.$goog_Thenable=!0;function YE(o){return A(o.g,function(u){return E(u[1])})}function XE(o){if(o.h&&o.a&&YE(o)){var u=o.h,f=qf[u];f&&(l.clearTimeout(f.a),delete qf[u]),o.h=0}o.b&&(o.b.l--,delete o.b),u=o.c;for(var d=f=!1;o.g.length&&!o.i;){var g=o.g.shift(),_=g[0],w=g[1];if(g=g[2],_=o.f?w:_)try{var T=_.call(g||o.s,u);T!==void 0&&(o.f=o.f&&(T==u||T instanceof Error),o.c=u=T),(Ut(u)||typeof l.Promise=="function"&&u instanceof l.Promise)&&(d=!0,o.i=!0)}catch(M){u=M,o.f=!0,YE(o)||(f=!0)}}o.c=u,d&&(T=U(o.m,o,!0),d=U(o.m,o,!1),u instanceof es?(Wv(u,T,d),u.C=!0):u.then(T,d)),f&&(u=new JE(u),qf[u.a]=u,o.h=u.a)}function Bf(){fe.call(this)}lt(Bf,fe),Bf.prototype.message="Deferred has already fired",Bf.prototype.name="AlreadyCalledError";function vc(){fe.call(this)}lt(vc,fe),vc.prototype.message="Deferred was canceled",vc.prototype.name="CanceledError";function JE(o){this.a=l.setTimeout(U(this.c,this),0),this.b=o}JE.prototype.c=function(){throw delete qf[this.a],this.b};var qf={};function $v(o){var u={},f=u.document||document,d=t0(o).toString(),g=pf(document,"SCRIPT"),_={Wb:g,Ma:void 0},w=new es(_),T=null,M=u.timeout!=null?u.timeout:5e3;return 0<M&&(T=window.setTimeout(function(){Hf(g,!0);var q=new zv(fL,"Timeout reached for loading script "+d);Vf(w),dc(w,!1,q)},M),_.Ma=T),g.onload=g.onreadystatechange=function(){g.readyState&&g.readyState!="loaded"&&g.readyState!="complete"||(Hf(g,u.xd||!1,T),Vf(w),dc(w,!0,null))},g.onerror=function(){Hf(g,!0,T);var q=new zv(lL,"Error while loading script "+d);Vf(w),dc(w,!1,q)},_=u.attributes||{},Ln(_,{type:"text/javascript",charset:"UTF-8"}),d0(g,_),Vk(g,o),uL(f).appendChild(g),w}function uL(o){var u;return(u=(o||document).getElementsByTagName("HEAD"))&&u.length!=0?u[0]:o.documentElement}function cL(){if(this&&this.Wb){var o=this.Wb;o&&o.tagName=="SCRIPT"&&Hf(o,!0,this.Ma)}}function Hf(o,u,f){f!=null&&l.clearTimeout(f),o.onload=m,o.onerror=m,o.onreadystatechange=m,u&&window.setTimeout(function(){o&&o.parentNode&&o.parentNode.removeChild(o)},0)}var lL=0,fL=1;function zv(o,u){var f="Jsloader error (code #"+o+")";u&&(f+=": "+u),fe.call(this,f),this.code=o}lt(zv,fe);function Gf(o){this.f=o}lt(Gf,uc),Gf.prototype.a=function(){return new this.f},Gf.prototype.b=function(){return{}};function Tr(o,u,f){if(this.c=o,o=u||{},this.l=o.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=o.secureTokenTimeout||hL,this.g=De(o.secureTokenHeaders||pL),this.h=o.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=o.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=o.firebaseTimeout||dL,this.a=De(o.firebaseHeaders||vL),f&&(this.a["X-Client-Version"]=f,this.g["X-Client-Version"]=f),f=Qr()=="Node",f=l.XMLHttpRequest||f&&at.INTERNAL.node&&at.INTERNAL.node.XMLHttpRequest,!f&&!Er())throw new O("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Er()?this.f=new Mf(self):Z0()?this.f=new Gf(f):this.f=new Df,this.b=null}var Kv,Sr="idToken",hL=new Ji(3e4,6e4),pL={"Content-Type":"application/x-www-form-urlencoded"},dL=new Ji(3e4,6e4),vL={"Content-Type":"application/json"};function ZE(o,u){u?o.a["X-Firebase-Locale"]=u:delete o.a["X-Firebase-Locale"]}function ca(o,u){u&&(o.l=Qv("https://securetoken.googleapis.com/v1/token",u),o.h=Qv("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",u),o.i=Qv("https://identitytoolkit.googleapis.com/v2/",u))}function Qv(o,u){return o=Un(o),u=Un(u.url),o.f=o.a+o.f,Ku(o,u.c),o.a=u.a,Qu(o,u.g),o.toString()}function tI(o,u){u?(o.a["X-Client-Version"]=u,o.g["X-Client-Version"]=u):(delete o.a["X-Client-Version"],delete o.g["X-Client-Version"])}Tr.prototype.T=function(){return this.b};function eI(o,u,f,d,g,_,w){_D()||Er()?o=U(o.u,o):(Kv||(Kv=new xt(function(T,M){mL(T,M)})),o=U(o.s,o)),o(u,f,d,g,_,w)}Tr.prototype.u=function(o,u,f,d,g,_){if(Er()&&(typeof l.fetch>"u"||typeof l.Headers>"u"||typeof l.Request>"u"))throw new O("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var w=new hc(this.f);if(_){w.g=Math.max(0,_);var T=setTimeout(function(){w.dispatchEvent("timeout")},_)}U0(w,"complete",function(){T&&clearTimeout(T);var M=null;try{M=JSON.parse(sL(this))||null}catch{M=null}u&&u(M)}),nv(w,"ready",function(){T&&clearTimeout(T),x0(this)}),nv(w,"timeout",function(){T&&clearTimeout(T),x0(this),u&&u(null)}),rL(w,o,f,d,g)};var gL=new zr(cf,"https://apis.google.com/js/client.js?onload=%{onload}"),nI="__fcb"+Math.floor(1e6*Math.random()).toString();function mL(o,u){if(((window.gapi||{}).client||{}).request)o();else{l[nI]=function(){((window.gapi||{}).client||{}).request?o():u(Error("CORS_UNSUPPORTED"))};var f=Ud(gL,{onload:nI});aL($v(f),function(){u(Error("CORS_UNSUPPORTED"))})}}Tr.prototype.s=function(o,u,f,d,g){var _=this;Kv.then(function(){window.gapi.client.setApiKey(_.c);var w=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:o,method:f,body:d,headers:g,authType:"none",callback:function(T){window.gapi.auth.setToken(w),u&&u(T)}})}).o(function(w){u&&u({error:{message:w&&w.message||"CORS_UNSUPPORTED"}})})};function yL(o,u){return new xt(function(f,d){u.grant_type=="refresh_token"&&u.refresh_token||u.grant_type=="authorization_code"&&u.code?eI(o,o.l+"?key="+encodeURIComponent(o.c),function(g){g?g.error?d(rg(g)):g.access_token&&g.refresh_token?f(g):d(new O("internal-error")):d(new O("network-request-failed"))},"POST",H0(u).toString(),o.g,o.m.get()):d(new O("internal-error"))})}function rI(o,u,f,d,g,_,w){var T=Un(u+f);be(T,"key",o.c),w&&be(T,"cb",Wt().toString());var M=d=="GET";if(M)for(var q in g)g.hasOwnProperty(q)&&be(T,q,g[q]);return new xt(function(bt,$t){eI(o,T.toString(),function(Bt){Bt?Bt.error?$t(rg(Bt,_||{})):bt(Bt):$t(new O("network-request-failed"))},d,M?void 0:$0(nE(g)),o.a,o.v.get())})}function ns(o){if(o=o.email,typeof o!="string"||!ED.test(o))throw new O("invalid-email")}function iI(o){"email"in o&&ns(o)}function _L(o,u){return Pt(o,RL,{identifier:u,continueUri:If()?Ju():"http://localhost"}).then(function(f){return f.signinMethods||[]})}function wL(o){return Pt(o,BL,{}).then(function(u){return u.authorizedDomains||[]})}function jn(o){if(!o[Sr])throw o.mfaPendingCredential?new O("multi-factor-auth-required",null,De(o)):new O("internal-error")}function Yv(o){if(o.phoneNumber||o.temporaryProof){if(!o.phoneNumber||!o.temporaryProof)throw new O("internal-error")}else{if(!o.sessionInfo)throw new O("missing-verification-id");if(!o.code)throw new O("missing-verification-code")}}Tr.prototype.zb=function(){return Pt(this,WL,{})},Tr.prototype.Bb=function(o,u){return Pt(this,aI,{idToken:o,email:u})},Tr.prototype.Cb=function(o,u){return Pt(this,uI,{idToken:o,password:u})};var bL={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};e=Tr.prototype,e.Db=function(o,u){var f={idToken:o},d=[];return qu(bL,function(g,_){var w=u[_];w===null?d.push(g):_ in u&&(f[_]=w)}),d.length&&(f.deleteAttribute=d),Pt(this,aI,f)},e.vb=function(o,u){return o={requestType:"PASSWORD_RESET",email:o},Ln(o,u),Pt(this,VL,o)},e.wb=function(o,u){return o={requestType:"EMAIL_SIGNIN",email:o},Ln(o,u),Pt(this,FL,o)},e.ub=function(o,u){return o={requestType:"VERIFY_EMAIL",idToken:o},Ln(o,u),Pt(this,UL,o)},e.Eb=function(o,u,f){return o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:o,newEmail:u},Ln(o,f),Pt(this,jL,o)};function EL(o,u){return Pt(o,GL,u)}e.fb=function(o){return Pt(this,JL,o)};function IL(o,u){return Pt(o,$L,u).then(function(f){return f.phoneSessionInfo.sessionInfo})}function oI(o){if(!o.phoneVerificationInfo)throw new O("internal-error");if(!o.phoneVerificationInfo.sessionInfo)throw new O("missing-verification-id");if(!o.phoneVerificationInfo.code)throw new O("missing-verification-code")}function TL(o,u){return Pt(o,zL,u).then(function(f){return f.phoneResponseInfo.sessionInfo})}function SL(o,u,f){return Pt(o,xL,{idToken:u,deleteProvider:f})}function Xv(o){if(!o.requestUri||!o.sessionId&&!o.postBody&&!o.pendingToken)throw new O("internal-error")}function Jv(o,u){return u.oauthIdToken&&u.providerId&&u.providerId.indexOf("oidc.")==0&&!u.pendingToken&&(o.sessionId?u.nonce=o.sessionId:o.postBody&&(o=new $o(o.postBody),sv(o,"nonce")&&(u.nonce=o.get("nonce")))),u}function sI(o){var u=null;if(o.needConfirmation?(o.code="account-exists-with-different-credential",u=Pf(o)):o.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(o.code="credential-already-in-use",u=Pf(o)):o.errorMessage=="EMAIL_EXISTS"?(o.code="email-already-in-use",u=Pf(o)):o.errorMessage&&(u=lI(o.errorMessage)),u)throw u;jn(o)}function Zv(o,u){return u.returnIdpCredential=!0,Pt(o,KL,u)}function tg(o,u){return u.returnIdpCredential=!0,Pt(o,YL,u)}function eg(o,u){return u.returnIdpCredential=!0,u.autoCreate=!1,Pt(o,QL,u)}function ng(o){if(!o.oobCode)throw new O("invalid-action-code")}e.nb=function(o,u){return Pt(this,HL,{oobCode:o,newPassword:u})},e.Ra=function(o){return Pt(this,CL,{oobCode:o})},e.jb=function(o){return Pt(this,AL,{oobCode:o})};var AL={endpoint:"setAccountInfo",A:ng,Z:"email",B:!0},CL={endpoint:"resetPassword",A:ng,G:function(o){var u=o.requestType;if(!u||!o.email&&u!="EMAIL_SIGNIN"&&u!="VERIFY_AND_CHANGE_EMAIL")throw new O("internal-error")},B:!0},NL={endpoint:"signupNewUser",A:function(o){if(ns(o),!o.password)throw new O("weak-password")},G:jn,V:!0,B:!0},RL={endpoint:"createAuthUri",B:!0},OL={endpoint:"deleteAccount",N:["idToken"]},xL={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(o){if(!Array.isArray(o.deleteProvider))throw new O("internal-error")}},PL={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ns,G:jn,V:!0,B:!0},kL={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ns,G:jn,V:!0},DL={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:oI,G:jn,B:!0,Na:!0},LL={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:oI,G:jn,B:!0,Na:!0},ML={endpoint:"getAccountInfo"},FL={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(o){if(o.requestType!="EMAIL_SIGNIN")throw new O("internal-error");ns(o)},Z:"email",B:!0},UL={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(o){if(o.requestType!="VERIFY_EMAIL")throw new O("internal-error")},Z:"email",B:!0},jL={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(o){if(o.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new O("internal-error")},Z:"email",B:!0},VL={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(o){if(o.requestType!="PASSWORD_RESET")throw new O("internal-error");ns(o)},Z:"email",B:!0},BL={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},qL={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(o){if(!o.recaptchaSiteKey)throw new O("internal-error")}},HL={endpoint:"resetPassword",A:ng,Z:"email",B:!0},GL={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},aI={endpoint:"setAccountInfo",N:["idToken"],A:iI,V:!0},uI={endpoint:"setAccountInfo",N:["idToken"],A:function(o){if(iI(o),!o.password)throw new O("weak-password")},G:jn,V:!0},WL={endpoint:"signupNewUser",G:jn,V:!0,B:!0},$L={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(o){if(!o.phoneEnrollmentInfo)throw new O("internal-error");if(!o.phoneEnrollmentInfo.phoneNumber)throw new O("missing-phone-number");if(!o.phoneEnrollmentInfo.recaptchaToken)throw new O("missing-app-credential")},G:function(o){if(!o.phoneSessionInfo||!o.phoneSessionInfo.sessionInfo)throw new O("internal-error")},B:!0,Na:!0},zL={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(o){if(!o.phoneSignInInfo||!o.phoneSignInInfo.recaptchaToken)throw new O("missing-app-credential")},G:function(o){if(!o.phoneResponseInfo||!o.phoneResponseInfo.sessionInfo)throw new O("internal-error")},B:!0,Na:!0},KL={endpoint:"verifyAssertion",A:Xv,Ya:Jv,G:sI,V:!0,B:!0},QL={endpoint:"verifyAssertion",A:Xv,Ya:Jv,G:function(o){if(o.errorMessage&&o.errorMessage=="USER_NOT_FOUND")throw new O("user-not-found");if(o.errorMessage)throw lI(o.errorMessage);jn(o)},V:!0,B:!0},YL={endpoint:"verifyAssertion",A:function(o){if(Xv(o),!o.idToken)throw new O("internal-error")},Ya:Jv,G:sI,V:!0},XL={endpoint:"verifyCustomToken",A:function(o){if(!o.token)throw new O("invalid-custom-token")},G:jn,V:!0,B:!0},cI={endpoint:"verifyPassword",A:function(o){if(ns(o),!o.password)throw new O("wrong-password")},G:jn,V:!0,B:!0},JL={endpoint:"verifyPhoneNumber",A:Yv,G:jn,B:!0},ZL={endpoint:"verifyPhoneNumber",A:function(o){if(!o.idToken)throw new O("internal-error");Yv(o)},G:function(o){if(o.temporaryProof)throw o.code="credential-already-in-use",Pf(o);jn(o)}},tM={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:Yv,G:jn,B:!0},eM={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(o){if(!!o[Sr]^!!o.refreshToken)throw new O("internal-error")},B:!0,Na:!0};function Pt(o,u,f){if(!RD(f,u.N))return ae(new O("internal-error"));var d=!!u.Na,g=u.Ub||"POST",_;return gt(f).then(u.A).then(function(){return u.V&&(f.returnSecureToken=!0),u.B&&o.b&&typeof f.tenantId>"u"&&(f.tenantId=o.b),d?rI(o,o.i,u.endpoint,g,f,u.Hb,u.lb||!1):rI(o,o.h,u.endpoint,g,f,u.Hb,u.lb||!1)}).then(function(w){return _=w,u.Ya?u.Ya(f,_):_}).then(u.G).then(function(){if(!u.Z)return _;if(!(u.Z in _))throw new O("internal-error");return _[u.Z]})}function lI(o){return rg({error:{errors:[{message:o}],code:400,message:o}})}function rg(o,u){var f=(o.error&&o.error.errors&&o.error.errors[0]||{}).reason||"",d={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(f=d[f]?new O(d[f]):null)return f;f=o.error&&o.error.message||"",d={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},Ln(d,u||{}),u=(u=f.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<u.length?u[1]:void 0;for(var g in d)if(f.indexOf(g)===0)return new O(d[g],u);return!u&&o&&(u=tc(o)),new O("internal-error",u)}function nM(o){this.b=o,this.a=null,this.rb=rM(this)}function rM(o){return cM().then(function(){return new xt(function(u,f){ue("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:ue("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(d){function g(){clearTimeout(_),u()}o.a=d,o.a.restyle({setHideOnLeave:!1});var _=setTimeout(function(){f(Error("Network Error"))},uM.get());d.ping(g).then(g,function(){f(Error("Network Error"))})})})})}function iM(o,u){return o.rb.then(function(){return new xt(function(f){o.a.send(u.type,u,f,ue("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function oM(o,u){o.rb.then(function(){o.a.register("authEvent",u,ue("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var sM=new zr(cf,"https://apis.google.com/js/api.js?onload=%{onload}"),aM=new Ji(3e4,6e4),uM=new Ji(5e3,15e3),Wf=null;function cM(){return Wf||(Wf=new xt(function(o,u){function f(){iE(),ue("gapi.load")("gapi.iframes",{callback:o,ontimeout:function(){iE(),u(Error("Network Error"))},timeout:aM.get()})}if(ue("gapi.iframes.Iframe"))o();else if(ue("gapi.load"))f();else{var d="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[d]=function(){ue("gapi.load")?f():u(Error("Network Error"))},d=Ud(sM,{onload:d}),gt($v(d)).o(function(){u(Error("Network Error"))})}}).o(function(o){throw Wf=null,o}))}function fI(o,u,f,d){this.l=o,this.h=u,this.i=f,this.g=d,this.f=null,this.g?(o=Un(this.g.url),o=bf(o.c,o.a,o.g,"/emulator/auth/iframe")):o=bf("https",this.l,null,"/__/auth/iframe"),this.a=o,be(this.a,"apiKey",this.h),be(this.a,"appName",this.i),this.b=null,this.c=[]}fI.prototype.toString=function(){return this.f?be(this.a,"v",this.f):Kr(this.a.b,"v"),this.b?be(this.a,"eid",this.b):Kr(this.a.b,"eid"),this.c.length?be(this.a,"fw",this.c.join(",")):Kr(this.a.b,"fw"),this.a.toString()};function ig(o,u,f,d,g,_){this.u=o,this.s=u,this.c=f,this.m=d,this.v=_,this.i=this.g=this.l=null,this.a=g,this.h=this.f=null}ig.prototype.yb=function(o){return this.h=o,this},ig.prototype.toString=function(){if(this.v){var o=Un(this.v.url);o=bf(o.c,o.a,o.g,"/emulator/auth/handler")}else o=bf("https",this.u,null,"/__/auth/handler");if(be(o,"apiKey",this.s),be(o,"appName",this.c),be(o,"authType",this.m),this.a.isOAuthProvider){var u=this.a;try{var f=at.app(this.c).auth().la()}catch{f=null}u.ob=f,be(o,"providerId",this.a.providerId),f=this.a,u=nE(f.Ib);for(var d in u)u[d]=u[d].toString();d=f.Qc,u=De(u);for(var g=0;g<d.length;g++){var _=d[g];_ in u&&delete u[_]}f.pb&&f.ob&&!u[f.pb]&&(u[f.pb]=f.ob),we(u)||be(o,"customParameters",tc(u))}if(typeof this.a.Qb=="function"&&(f=this.a.Qb(),f.length&&be(o,"scopes",f.join(","))),this.l?be(o,"redirectUrl",this.l):Kr(o.b,"redirectUrl"),this.g?be(o,"eventId",this.g):Kr(o.b,"eventId"),this.i?be(o,"v",this.i):Kr(o.b,"v"),this.b)for(var w in this.b)this.b.hasOwnProperty(w)&&!lr(o,w)&&be(o,w,this.b[w]);return this.h?be(o,"tid",this.h):Kr(o.b,"tid"),this.f?be(o,"eid",this.f):Kr(o.b,"eid"),w=og(this.c),w.length&&be(o,"fw",w.join(",")),o.toString()};function og(o){try{return at.app(o).auth().Ga()}catch{return[]}}function hI(o,u,f,d,g,_){this.s=o,this.g=u,this.b=f,this.f=_,this.c=d||null,this.i=g||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function pI(o){var u=Ju();return wL(o).then(function(f){t:{var d=Un(u),g=d.c;d=d.a;for(var _=0;_<f.length;_++){var w=f[_],T=d,M=g;if(w.indexOf("chrome-extension://")==0?T=Un(w).a==T&&M=="chrome-extension":M!="http"&&M!="https"?T=!1:bD.test(w)?T=T==w:(w=w.split(".").join("\\."),T=new RegExp("^(.+\\."+w+"|"+w+")$","i").test(T)),T){f=!0;break t}}f=!1}if(!f)throw new Mv(Ju())})}function dI(o){return o.m||(o.m=Ef().then(function(){if(!o.u){var u=o.c,f=o.i,d=og(o.b),g=new fI(o.s,o.g,o.b,o.f);g.f=u,g.b=f,g.c=z(d||[]),o.u=g.toString()}o.v=new nM(o.u),lM(o)})),o.m}e=hI.prototype,e.Ob=function(o,u,f){var d=new O("popup-closed-by-user"),g=new O("web-storage-unsupported"),_=this,w=!1;return this.ma().then(function(){fM(_).then(function(T){T||(o&&zo(o),u(g),w=!0)})}).o(function(){}).then(function(){if(!w)return wD(o)}).then(function(){if(!w)return Zs(f).then(function(){u(d)})})},e.Xb=function(){var o=en();return!Zu(o)&&!rE(o)},e.Tb=function(){return!1},e.Mb=function(o,u,f,d,g,_,w,T){if(!o)return ae(new O("popup-blocked"));if(w&&!Zu())return this.ma().o(function(q){zo(o),g(q)}),d(),gt();this.a||(this.a=pI(vI(this)));var M=this;return this.a.then(function(){var q=M.ma().o(function(bt){throw zo(o),g(bt),bt});return d(),q}).then(function(){if(Dv(f),!w){var q=gc(M.s,M.g,M.b,u,f,null,_,M.c,void 0,M.i,T,M.f);Q0(q,o)}}).o(function(q){throw q.code=="auth/network-request-failed"&&(M.a=null),q})};function vI(o){return o.l||(o.C=o.c?ra(o.c,og(o.b)):null,o.l=new Tr(o.g,oe(o.i),o.C),o.f&&ca(o.l,o.f)),o.l}e.Nb=function(o,u,f,d){this.a||(this.a=pI(vI(this)));var g=this;return this.a.then(function(){Dv(u);var _=gc(g.s,g.g,g.b,o,u,Ju(),f,g.c,void 0,g.i,d,g.f);Q0(_)}).o(function(_){throw _.code=="auth/network-request-failed"&&(g.a=null),_})},e.ma=function(){var o=this;return dI(this).then(function(){return o.v.rb}).o(function(){throw o.a=null,new O("network-request-failed")})},e.$b=function(){return!0};function gc(o,u,f,d,g,_,w,T,M,q,bt,$t){return o=new ig(o,u,f,d,g,$t),o.l=_,o.g=w,o.i=T,o.b=De(M||null),o.f=q,o.yb(bt).toString()}function lM(o){if(!o.v)throw Error("IfcHandler must be initialized!");oM(o.v,function(u){var f={};if(u&&u.authEvent){var d=!1;for(u=UE(u.authEvent),f=0;f<o.h.length;f++)d=o.h[f](u)||d;return f={},f.status=d?"ACK":"ERROR",gt(f)}return f.status="ERROR",gt(f)})}function fM(o){var u={type:"webStorageSupport"};return dI(o).then(function(){return iM(o.v,u)}).then(function(f){if(f&&f.length&&typeof f[0].webStorageSupport<"u")return f[0].webStorageSupport;throw Error()})}e.Ea=function(o){this.h.push(o)},e.Sa=function(o){B(this.h,function(u){return u==o})};function gI(o){if(this.a=o||at.INTERNAL.reactNative&&at.INTERNAL.reactNative.AsyncStorage,!this.a)throw new O("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}e=gI.prototype,e.get=function(o){return gt(this.a.getItem(o)).then(function(u){return u&&oa(u)})},e.set=function(o,u){return gt(this.a.setItem(o,tc(u)))},e.U=function(o){return gt(this.a.removeItem(o))},e.ca=function(){},e.ia=function(){};function mI(o){this.b=o,this.a={},this.f=U(this.c,this)}var yI=[];function hM(){var o=Er()?self:null;if(H(yI,function(f){f.b==o&&(u=f)}),!u){var u=new mI(o);yI.push(u)}return u}mI.prototype.c=function(o){var u=o.data.eventType,f=o.data.eventId,d=this.a[u];if(d&&0<d.length){o.ports[0].postMessage({status:"ack",eventId:f,eventType:u,response:null});var g=[];H(d,function(_){g.push(gt().then(function(){return _(o.origin,o.data.data)}))}),E0(g).then(function(_){var w=[];H(_,function(T){w.push({fulfilled:T.Pb,value:T.value,reason:T.reason?T.reason.message:void 0})}),H(w,function(T){for(var M in T)typeof T[M]>"u"&&delete T[M]}),o.ports[0].postMessage({status:"done",eventId:f,eventType:u,response:w})})}};function _I(o,u,f){we(o.a)&&o.b.addEventListener("message",o.f),typeof o.a[u]>"u"&&(o.a[u]=[]),o.a[u].push(f)}function wI(o){this.a=o}wI.prototype.postMessage=function(o,u){this.a.postMessage(o,u)};function bI(o){this.c=o,this.b=!1,this.a=[]}function EI(o,u,f,d){var g,_=f||{},w,T,M,q=null;if(o.b)return ae(Error("connection_unavailable"));var bt=d?800:50,$t=typeof MessageChannel<"u"?new MessageChannel:null;return new xt(function(Bt,ze){$t?(g=Math.floor(Math.random()*Math.pow(10,20)).toString(),$t.port1.start(),T=setTimeout(function(){ze(Error("unsupported_event"))},bt),w=function(Ti){Ti.data.eventId===g&&(Ti.data.status==="ack"?(clearTimeout(T),M=setTimeout(function(){ze(Error("timeout"))},3e3)):Ti.data.status==="done"?(clearTimeout(M),typeof Ti.data.response<"u"?Bt(Ti.data.response):ze(Error("unknown_error"))):(clearTimeout(T),clearTimeout(M),ze(Error("invalid_response"))))},q={messageChannel:$t,onMessage:w},o.a.push(q),$t.port1.addEventListener("message",w),o.c.postMessage({eventType:u,eventId:g,data:_},[$t.port2])):ze(Error("connection_unavailable"))}).then(function(Bt){return sg(o,q),Bt}).o(function(Bt){throw sg(o,q),Bt})}function sg(o,u){if(u){var f=u.messageChannel,d=u.onMessage;f&&(f.port1.removeEventListener("message",d),f.port1.close()),B(o.a,function(g){return g==u})}}bI.prototype.close=function(){for(;0<this.a.length;)sg(this,this.a[0]);this.b=!0};function II(){if(!cg())throw new O("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var o=this;Er()&&self?(this.v=hM(),_I(this.v,"keyChanged",function(u,f){return AI(o).then(function(d){return 0<d.length&&H(o.a,function(g){g(d)}),{keyProcessed:L(d,f.key)}})}),_I(this.v,"ping",function(){return gt(["keyChanged"])})):CD().then(function(u){(o.h=u)&&(o.g=new bI(new wI(u)),EI(o.g,"ping",null,!0).then(function(f){f[0].fulfilled&&L(f[0].value,"keyChanged")&&(o.s=!0)}).o(function(){}))})}var ag;function pM(o){return new xt(function(u,f){var d=o.m.deleteDatabase("firebaseLocalStorageDb");d.onsuccess=function(){u()},d.onerror=function(g){f(Error(g.target.error))}})}function TI(o){return new xt(function(u,f){var d=o.m.open("firebaseLocalStorageDb",1);d.onerror=function(g){try{g.preventDefault()}catch{}f(Error(g.target.error))},d.onupgradeneeded=function(g){g=g.target.result;try{g.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(_){f(_)}},d.onsuccess=function(g){g=g.target.result,g.objectStoreNames.contains("firebaseLocalStorage")?u(g):pM(o).then(function(){return TI(o)}).then(function(_){u(_)}).o(function(_){f(_)})}})}function ug(o){return o.i||(o.i=TI(o)),o.i}function $f(o,u){function f(g,_){ug(o).then(u).then(g).o(function(w){if(3<++d)_(w);else return ug(o).then(function(T){return T.close(),o.i=void 0,f(g,_)}).o(function(T){_(T)})})}var d=0;return new xt(f)}function cg(){try{return!!l.indexedDB}catch{return!1}}function mc(o){return o.objectStore("firebaseLocalStorage")}function yc(o,u){return o.transaction(["firebaseLocalStorage"],u?"readwrite":"readonly")}function la(o){return new xt(function(u,f){o.onsuccess=function(d){d&&d.target?u(d.target.result):u()},o.onerror=function(d){f(d.target.error)}})}e=II.prototype,e.set=function(o,u){var f=this,d=!1;return $f(this,function(g){return g=mc(yc(g,!0)),la(g.get(o))}).then(function(g){return $f(f,function(_){if(_=mc(yc(_,!0)),g)return g.value=u,la(_.put(g));f.b++,d=!0;var w={};return w.fbase_key=o,w.value=u,la(_.add(w))})}).then(function(){return f.c[o]=u,SI(f,o)}).oa(function(){d&&f.b--})};function SI(o,u){return o.g&&o.h&&AD()===o.h?EI(o.g,"keyChanged",{key:u},o.s).then(function(){}).o(function(){}):gt()}e.get=function(o){return $f(this,function(u){return la(mc(yc(u,!1)).get(o))}).then(function(u){return u&&u.value})},e.U=function(o){var u=this,f=!1;return $f(this,function(d){return f=!0,u.b++,la(mc(yc(d,!0)).delete(o))}).then(function(){return delete u.c[o],SI(u,o)}).oa(function(){f&&u.b--})};function AI(o){return ug(o).then(function(u){var f=mc(yc(u,!1));return f.getAll?la(f.getAll()):new xt(function(d,g){var _=[],w=f.openCursor();w.onsuccess=function(T){(T=T.target.result)?(_.push(T.value),T.continue()):d(_)},w.onerror=function(T){g(T.target.error)}})}).then(function(u){var f={},d=[];if(o.b==0){for(d=0;d<u.length;d++)f[u[d].fbase_key]=u[d].value;d=Y0(o.c,f),o.c=f}return d})}e.ca=function(o){this.a.length==0&&dM(this),this.a.push(o)},e.ia=function(o){B(this.a,function(u){return u==o}),this.a.length==0&&CI(this)};function dM(o){function u(){o.f=setTimeout(function(){o.l=AI(o).then(function(f){0<f.length&&H(o.a,function(d){d(f)})}).then(function(){u()}).o(function(f){f.message!="STOP_EVENT"&&u()})},800)}CI(o),u()}function CI(o){o.l&&o.l.cancel("STOP_EVENT"),o.f&&(clearTimeout(o.f),o.f=null)}function NI(o){var u=this,f=null;this.a=[],this.type="indexedDB",this.c=o,this.b=gt().then(function(){if(cg()){var d=Qo(),g="__sak"+d;return ag||(ag=new II),f=ag,f.set(g,d).then(function(){return f.get(g)}).then(function(_){if(_!==d)throw Error("indexedDB not supported!");return f.U(g)}).then(function(){return f}).o(function(){return u.c})}return u.c}).then(function(d){return u.type=d.type,d.ca(function(g){H(u.a,function(_){_(g)})}),d})}e=NI.prototype,e.get=function(o){return this.b.then(function(u){return u.get(o)})},e.set=function(o,u){return this.b.then(function(f){return f.set(o,u)})},e.U=function(o){return this.b.then(function(u){return u.U(o)})},e.ca=function(o){this.a.push(o)},e.ia=function(o){B(this.a,function(u){return u==o})};function _c(){this.a={},this.type="inMemory"}e=_c.prototype,e.get=function(o){return gt(this.a[o])},e.set=function(o,u){return this.a[o]=u,gt()},e.U=function(o){return delete this.a[o],gt()},e.ca=function(){},e.ia=function(){};function zf(){if(!vM())throw Qr()=="Node"?new O("internal-error","The LocalStorage compatibility library was not found."):new O("web-storage-unsupported");this.a=RI()||at.INTERNAL.node.localStorage,this.type="localStorage"}function RI(){try{var o=l.localStorage,u=Qo();return o&&(o.setItem(u,"1"),o.removeItem(u)),o}catch{return null}}function vM(){var o=Qr()=="Node";if(o=RI()||o&&at.INTERNAL.node&&at.INTERNAL.node.localStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch{return!1}}e=zf.prototype,e.get=function(o){var u=this;return gt().then(function(){var f=u.a.getItem(o);return oa(f)})},e.set=function(o,u){var f=this;return gt().then(function(){var d=tc(u);d===null?f.U(o):f.a.setItem(o,d)})},e.U=function(o){var u=this;return gt().then(function(){u.a.removeItem(o)})},e.ca=function(o){l.window&&cr(l.window,"storage",o)},e.ia=function(o){l.window&&Yn(l.window,"storage",o)};function lg(){this.type="nullStorage"}e=lg.prototype,e.get=function(){return gt(null)},e.set=function(){return gt()},e.U=function(){return gt()},e.ca=function(){},e.ia=function(){};function fg(){if(!gM())throw Qr()=="Node"?new O("internal-error","The SessionStorage compatibility library was not found."):new O("web-storage-unsupported");this.a=OI()||at.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function OI(){try{var o=l.sessionStorage,u=Qo();return o&&(o.setItem(u,"1"),o.removeItem(u)),o}catch{return null}}function gM(){var o=Qr()=="Node";if(o=OI()||o&&at.INTERNAL.node&&at.INTERNAL.node.sessionStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch{return!1}}e=fg.prototype,e.get=function(o){var u=this;return gt().then(function(){var f=u.a.getItem(o);return oa(f)})},e.set=function(o,u){var f=this;return gt().then(function(){var d=tc(u);d===null?f.U(o):f.a.setItem(o,d)})},e.U=function(o){var u=this;return gt().then(function(){u.a.removeItem(o)})},e.ca=function(){},e.ia=function(){};function mM(){var o={};o.Browser=yM,o.Node=_M,o.ReactNative=wM,o.Worker=bM,this.a=o[Qr()]}var hg,yM={F:zf,bb:fg},_M={F:zf,bb:fg},wM={F:gI,bb:lg},bM={F:zf,bb:lg},fa={rd:"local",NONE:"none",td:"session"};function EM(o){var u=new O("invalid-persistence-type"),f=new O("unsupported-persistence-type");t:{for(d in fa)if(fa[d]==o){var d=!0;break t}d=!1}if(!d||typeof o!="string")throw u;switch(Qr()){case"ReactNative":if(o==="session")throw f;break;case"Node":if(o!=="none")throw f;break;case"Worker":if(o==="session"||!cg()&&o!=="none")throw f;break;default:if(!hv()&&o!=="none")throw f}}function xI(){var o=!!(!rE(en())&&lv()),u=Zu(),f=hv();this.m=o,this.h=u,this.l=f,this.a={},hg||(hg=new mM),o=hg;try{this.g=!uv()&&oE()||!l.indexedDB?new o.a.F:new NI(Er()?new _c:new o.a.F)}catch{this.g=new _c,this.h=!0}try{this.i=new o.a.bb}catch{this.i=new _c}this.v=new _c,this.f=U(this.Yb,this),this.b={}}var pg;function wc(){return pg||(pg=new xI),pg}function rs(o,u){switch(u){case"session":return o.i;case"none":return o.v;default:return o.g}}function ha(o,u){return"firebase:"+o.name+(u?":"+u:"")}function IM(o,u,f){var d=ha(u,f),g=rs(o,u.F);return o.get(u,f).then(function(_){var w=null;try{w=oa(l.localStorage.getItem(d))}catch{}if(w&&!_)return l.localStorage.removeItem(d),o.set(u,w,f);w&&_&&g.type!="localStorage"&&l.localStorage.removeItem(d)})}e=xI.prototype,e.get=function(o,u){return rs(this,o.F).get(ha(o,u))};function pa(o,u,f){return f=ha(u,f),u.F=="local"&&(o.b[f]=null),rs(o,u.F).U(f)}e.set=function(o,u,f){var d=ha(o,f),g=this,_=rs(this,o.F);return _.set(d,u).then(function(){return _.get(d)}).then(function(w){o.F=="local"&&(g.b[d]=w)})},e.addListener=function(o,u,f){o=ha(o,u),this.l&&(this.b[o]=l.localStorage.getItem(o)),we(this.a)&&(rs(this,"local").ca(this.f),this.h||(uv()||!oE())&&l.indexedDB||!this.l||TM(this)),this.a[o]||(this.a[o]=[]),this.a[o].push(f)},e.removeListener=function(o,u,f){o=ha(o,u),this.a[o]&&(B(this.a[o],function(d){return d==f}),this.a[o].length==0&&delete this.a[o]),we(this.a)&&(rs(this,"local").ia(this.f),dg(this))};function TM(o){dg(o),o.c=setInterval(function(){for(var u in o.a){var f=l.localStorage.getItem(u),d=o.b[u];f!=d&&(o.b[u]=f,f=new Go({type:"storage",key:u,target:window,oldValue:d,newValue:f,a:!0}),o.Yb(f))}},1e3)}function dg(o){o.c&&(clearInterval(o.c),o.c=null)}e.Yb=function(o){if(o&&o.g){var u=o.a.key;if(u==null)for(var f in this.a){var d=this.b[f];typeof d>"u"&&(d=null);var g=l.localStorage.getItem(f);g!==d&&(this.b[f]=g,this.mb(f))}else if(u.indexOf("firebase:")==0&&this.a[u]){if(typeof o.a.a<"u"?rs(this,"local").ia(this.f):dg(this),this.m){if(f=l.localStorage.getItem(u),d=o.a.newValue,d!==f)d!==null?l.localStorage.setItem(u,d):l.localStorage.removeItem(u);else if(this.b[u]===d&&typeof o.a.a>"u")return}var _=this;f=function(){(typeof o.a.a<"u"||_.b[u]!==l.localStorage.getItem(u))&&(_.b[u]=l.localStorage.getItem(u),_.mb(u))},br&&Qi&&Qi==10&&l.localStorage.getItem(u)!==o.a.newValue&&o.a.newValue!==o.a.oldValue?setTimeout(f,10):f()}}else H(o,U(this.mb,this))},e.mb=function(o){this.a[o]&&H(this.a[o],function(u){u()})};function SM(o){this.a=o,this.b=wc()}var vg={name:"authEvent",F:"local"};function AM(o){return o.b.get(vg,o.a).then(function(u){return UE(u)})}function CM(){this.a=wc()}function NM(){this.b=-1}function Kf(o,u){this.b=PI,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=o,this.h=u,this.l=l.Int32Array?new Int32Array(64):Array(64),Qf===void 0&&(l.Int32Array?Qf=new Int32Array(LI):Qf=LI),this.reset()}var Qf;lt(Kf,NM);for(var PI=64,RM=PI-1,kI=[],gg=0;gg<RM;gg++)kI[gg]=0;var DI=tt(128,kI);Kf.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):z(this.h)};function mg(o){for(var u=o.f,f=o.l,d=0,g=0;g<u.length;)f[d++]=u[g]<<24|u[g+1]<<16|u[g+2]<<8|u[g+3],g=4*d;for(u=16;64>u;u++){g=f[u-15]|0,d=f[u-2]|0;var _=(f[u-16]|0)+((g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3)|0,w=(f[u-7]|0)+((d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10)|0;f[u]=_+w|0}d=o.a[0]|0,g=o.a[1]|0;var T=o.a[2]|0,M=o.a[3]|0,q=o.a[4]|0,bt=o.a[5]|0,$t=o.a[6]|0;for(_=o.a[7]|0,u=0;64>u;u++){var Bt=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&g^d&T^g&T)|0;w=q&bt^~q&$t,_=_+((q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7))|0,w=w+(Qf[u]|0)|0,w=_+(w+(f[u]|0)|0)|0,_=$t,$t=bt,bt=q,q=M+w|0,M=T,T=g,g=d,d=w+Bt|0}o.a[0]=o.a[0]+d|0,o.a[1]=o.a[1]+g|0,o.a[2]=o.a[2]+T|0,o.a[3]=o.a[3]+M|0,o.a[4]=o.a[4]+q|0,o.a[5]=o.a[5]+bt|0,o.a[6]=o.a[6]+$t|0,o.a[7]=o.a[7]+_|0}function yg(o,u,f){f===void 0&&(f=u.length);var d=0,g=o.c;if(typeof u=="string")for(;d<f;)o.f[g++]=u.charCodeAt(d++),g==o.b&&(mg(o),g=0);else if(b(u))for(;d<f;){var _=u[d++];if(!(typeof _=="number"&&0<=_&&255>=_&&_==(_|0)))throw Error("message must be a byte array");o.f[g++]=_,g==o.b&&(mg(o),g=0)}else throw Error("message must be string or array");o.c=g,o.g+=f}var LI=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function MI(){Kf.call(this,8,OM)}lt(MI,Kf);var OM=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function FI(o,u,f,d,g,_){this.v=o,this.i=u,this.l=f,this.m=d||null,this.u=g||null,this.s=_,this.h=u+":"+f,this.C=new CM,this.g=new SM(this.h),this.f=null,this.b=[],this.a=this.c=null}function Yf(o){return new O("invalid-cordova-configuration",o)}e=FI.prototype,e.ma=function(){return this.Ia?this.Ia:this.Ia=ID().then(function(){if(typeof ue("universalLinks.subscribe",l)!="function")throw Yf("cordova-universal-links-plugin-fix is not installed");if(typeof ue("BuildInfo.packageName",l)>"u")throw Yf("cordova-plugin-buildinfo is not installed");if(typeof ue("cordova.plugins.browsertab.openUrl",l)!="function")throw Yf("cordova-plugin-browsertab is not installed");if(typeof ue("cordova.InAppBrowser.open",l)!="function")throw Yf("cordova-plugin-inappbrowser is not installed")},function(){throw new O("cordova-not-ready")})};function xM(){for(var o=20,u=[];0<o;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return u.join("")}function PM(o){var u=new MI;yg(u,o),o=[];var f=8*u.g;56>u.c?yg(u,DI,56-u.c):yg(u,DI,u.b-(u.c-56));for(var d=63;56<=d;d--)u.f[d]=f&255,f/=256;for(mg(u),d=f=0;d<u.i;d++)for(var g=24;0<=g;g-=8)o[f++]=u.a[d]>>g&255;return HD(o)}e.Ob=function(o,u){return u(new O("operation-not-supported-in-this-environment")),gt()},e.Mb=function(){return ae(new O("operation-not-supported-in-this-environment"))},e.$b=function(){return!1},e.Xb=function(){return!0},e.Tb=function(){return!0},e.Nb=function(o,u,f,d){if(this.c)return ae(new O("redirect-operation-pending"));var g=this,_=l.document,w=null,T=null,M=null,q=null;return this.c=gt().then(function(){return Dv(u),jI(g)}).then(function(){return kM(g,o,u,f,d)}).then(function(){return new xt(function(bt,$t){T=function(){var Bt=ue("cordova.plugins.browsertab.close",l);return bt(),typeof Bt=="function"&&Bt(),g.a&&typeof g.a.close=="function"&&(g.a.close(),g.a=null),!1},g.Ea(T),M=function(){w||(w=Zs(2e3).then(function(){$t(new O("redirect-cancelled-by-user"))}))},q=function(){pv()&&M()},_.addEventListener("resume",M,!1),en().toLowerCase().match(/android/)||_.addEventListener("visibilitychange",q,!1)}).o(function(bt){return _g(g).then(function(){throw bt})})}).oa(function(){M&&_.removeEventListener("resume",M,!1),q&&_.removeEventListener("visibilitychange",q,!1),w&&w.cancel(),T&&g.Sa(T),g.c=null})};function kM(o,u,f,d,g){var _=xM(),w=new Ir(u,d,null,_,new O("no-auth-event"),null,g),T=ue("BuildInfo.packageName",l);if(typeof T!="string")throw new O("invalid-cordova-configuration");var M=ue("BuildInfo.displayName",l),q={};if(en().toLowerCase().match(/iphone|ipad|ipod/))q.ibi=T;else if(en().toLowerCase().match(/android/))q.apn=T;else return ae(new O("operation-not-supported-in-this-environment"));M&&(q.appDisplayName=M),_=PM(_),q.sessionId=_;var bt=gc(o.v,o.i,o.l,u,f,null,d,o.m,q,o.u,g,o.s);return o.ma().then(function(){var $t=o.h;return o.C.a.set(vg,w.w(),$t)}).then(function(){var $t=ue("cordova.plugins.browsertab.isAvailable",l);if(typeof $t!="function")throw new O("invalid-cordova-configuration");var Bt=null;$t(function(ze){if(ze){if(Bt=ue("cordova.plugins.browsertab.openUrl",l),typeof Bt!="function")throw new O("invalid-cordova-configuration");Bt(bt)}else{if(Bt=ue("cordova.InAppBrowser.open",l),typeof Bt!="function")throw new O("invalid-cordova-configuration");ze=en(),o.a=Bt(bt,ze.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||ze.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function UI(o,u){for(var f=0;f<o.b.length;f++)try{o.b[f](u)}catch{}}function jI(o){return o.f||(o.f=o.ma().then(function(){return new xt(function(u){function f(d){return u(d),o.Sa(f),!1}o.Ea(f),DM(o)})})),o.f}function _g(o){var u=null;return AM(o.g).then(function(f){return u=f,f=o.g,pa(f.b,vg,f.a)}).then(function(){return u})}function DM(o){function u(w){d=!0,g&&g.cancel(),_g(o).then(function(T){var M=f;if(T&&w&&w.url){var q=null;M=OE(w.url),M.indexOf("/__/auth/callback")!=-1&&(q=Un(M),q=oa(lr(q,"firebaseError")||null),q=(q=typeof q=="object"?Wr(q):null)?new Ir(T.c,T.b,null,null,q,null,T.T()):new Ir(T.c,T.b,M,T.f,null,null,T.T())),M=q||f}UI(o,M)})}var f=new Ir("unknown",null,null,null,new O("no-auth-event")),d=!1,g=Zs(500).then(function(){return _g(o).then(function(){d||UI(o,f)})}),_=l.handleOpenURL;l.handleOpenURL=function(w){if(w.toLowerCase().indexOf(ue("BuildInfo.packageName",l).toLowerCase()+"://")==0&&u({url:w}),typeof _=="function")try{_(w)}catch(T){console.error(T)}},Lv||(Lv=new XD),JD(u)}e.Ea=function(o){this.b.push(o),jI(this).o(function(u){u.code==="auth/invalid-cordova-configuration"&&(u=new Ir("unknown",null,null,null,new O("no-auth-event")),o(u))})},e.Sa=function(o){B(this.b,function(u){return u==o})};function LM(o){this.a=o,this.b=wc()}var wg={name:"pendingRedirect",F:"session"};function MM(o){return o.b.set(wg,"pending",o.a)}function bg(o){return pa(o.b,wg,o.a)}function FM(o){return o.b.get(wg,o.a).then(function(u){return u=="pending"})}function Xf(o,u,f,d){this.i={},this.u=0,this.D=o,this.v=u,this.m=f,this.J=d,this.h=[],this.f=!1,this.l=U(this.s,this),this.b=new Jf,this.C=new XI,this.g=new LM(zI(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=VI(this.D,this.v,this.m,Ft,this.J)}function VI(o,u,f,d,g){var _=at.SDK_VERSION||null;return cv()?new FI(o,u,f,_,d,g):new hI(o,u,f,_,d,g)}Xf.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=VI(this.D,this.v,this.m,null,this.J),this.i={}};function BI(o){o.f||(o.f=!0,o.a.Ea(o.l));var u=o.a;return o.a.ma().o(function(f){throw o.a==u&&o.reset(),f})}function qI(o){o.a.Xb()&&BI(o).o(function(u){var f=new Ir("unknown",null,null,null,new O("operation-not-supported-in-this-environment"));Ig(u)&&o.s(f)}),o.a.Tb()||QI(o.b)}function Eg(o,u){L(o.h,u)||o.h.push(u),o.f||FM(o.g).then(function(f){f?bg(o.g).then(function(){BI(o).o(function(d){var g=new Ir("unknown",null,null,null,new O("operation-not-supported-in-this-environment"));Ig(d)&&o.s(g)})}):qI(o)}).o(function(){qI(o)})}function HI(o,u){B(o.h,function(f){return f==u})}Xf.prototype.s=function(o){if(!o)throw new O("invalid-auth-event");if(6e5<=Wt()-this.u&&(this.i={},this.u=0),o&&o.getUid()&&this.i.hasOwnProperty(o.getUid()))return!1;for(var u=!1,f=0;f<this.h.length;f++){var d=this.h[f];if(d.Fb(o.c,o.b)){(u=this.c[o.c])&&(u.h(o,d),o&&(o.f||o.b)&&(this.i[o.getUid()]=!0,this.u=Wt())),u=!0;break}}return QI(this.b),u};var UM=new Ji(2e3,1e4),jM=new Ji(3e4,6e4);Xf.prototype.qa=function(){return this.b.qa()};function GI(o,u,f,d,g,_,w){return o.a.Mb(u,f,d,function(){o.f||(o.f=!0,o.a.Ea(o.l))},function(){o.reset()},g,_,w)}function Ig(o){return!!(o&&o.code=="auth/cordova-not-ready")}function WI(o,u,f,d,g){var _;return MM(o.g).then(function(){return o.a.Nb(u,f,d,g).o(function(w){if(Ig(w))throw new O("operation-not-supported-in-this-environment");return _=w,bg(o.g).then(function(){throw _})}).then(function(){return o.a.$b()?new xt(function(){}):bg(o.g).then(function(){return o.qa()}).then(function(){}).o(function(){})})})}function $I(o,u,f,d,g){return o.a.Ob(d,function(_){u.na(f,null,_,g)},UM.get())}var Tg={};function zI(o,u,f){return o=o+":"+u,f&&(o=o+":"+f.url),o}function KI(o,u,f,d){var g=zI(u,f,d);return Tg[g]||(Tg[g]=new Xf(o,u,f,d)),Tg[g]}function Jf(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}Jf.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Jf.prototype.h=function(o,u){if(o){this.reset(),this.g=!0;var f=o.c,d=o.b,g=o.a&&o.a.code=="auth/web-storage-unsupported",_=o.a&&o.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!g&&!_),f!="unknown"||g||_?o.a?(is(this,!0,null,o.a),gt()):u.Fa(f,d)?VM(this,o,u):ae(new O("invalid-auth-event")):(is(this,!1,null,null),gt())}else ae(new O("invalid-auth-event"))};function QI(o){o.g||(o.g=!0,is(o,!1,null,null))}function Zf(o){o.g&&!o.i&&is(o,!1,null,null)}function VM(o,u,f){f=f.Fa(u.c,u.b);var d=u.g,g=u.f,_=u.i,w=u.T(),T=!!u.c.match(/Redirect$/);f(d,g,w,_).then(function(M){is(o,T,M,null)}).o(function(M){is(o,T,null,M)})}function BM(o,u){if(o.b=function(){return ae(u)},o.c.length)for(var f=0;f<o.c.length;f++)o.c[f](u)}function YI(o,u){if(o.b=function(){return gt(u)},o.f.length)for(var f=0;f<o.f.length;f++)o.f[f](u)}function is(o,u,f,d){u?d?BM(o,d):YI(o,f):YI(o,{user:null}),o.f=[],o.c=[]}Jf.prototype.qa=function(){var o=this;return new xt(function(u,f){o.b?o.b().then(u,f):(o.f.push(u),o.c.push(f),qM(o))})};function qM(o){var u=new O("timeout");o.a&&o.a.cancel(),o.a=Zs(jM.get()).then(function(){o.b||(o.g=!0,is(o,!0,null,u))})}function XI(){}XI.prototype.h=function(o,u){if(o){var f=o.c,d=o.b;o.a?(u.na(o.c,null,o.a,o.b),gt()):u.Fa(f,d)?HM(o,u):ae(new O("invalid-auth-event"))}else ae(new O("invalid-auth-event"))};function HM(o,u){var f=o.b,d=o.c;u.Fa(d,f)(o.g,o.f,o.T(),o.i).then(function(g){u.na(d,g,null,f)}).o(function(g){u.na(d,null,g,f)})}function JI(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(o){this.ib=o},enumerable:!1})}function Sg(o,u){this.a=u,it(this,"verificationId",o)}Sg.prototype.confirm=function(o){return o=FE(this.verificationId,o),this.a(o)};function Ag(o,u,f,d){return new Ei(o).fb(u,f).then(function(g){return new Sg(g,d)})}function GM(o){var u=EE(o);if(!(u&&u.exp&&u.auth_time&&u.iat))throw new O("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");En(this,{token:o,expirationTime:ec(1e3*u.exp),authTime:ec(1e3*u.auth_time),issuedAtTime:ec(1e3*u.iat),signInProvider:u.firebase&&u.firebase.sign_in_provider?u.firebase.sign_in_provider:null,signInSecondFactor:u.firebase&&u.firebase.sign_in_second_factor?u.firebase.sign_in_second_factor:null,claims:u})}function Cg(o,u,f){var d=u&&u[tT];if(!d)throw new O("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=o,this.f=De(u),this.g=f,this.c=new Of(null,d),this.b=[];var g=this;H(u[ZI]||[],function(_){(_=_v(_))&&g.b.push(_)}),it(this,"auth",this.a),it(this,"session",this.c),it(this,"hints",this.b)}var ZI="mfaInfo",tT="mfaPendingCredential";Cg.prototype.Rc=function(o){var u=this;return o.sb(this.a.a,this.c).then(function(f){var d=De(u.f);return delete d[ZI],delete d[tT],Ln(d,f),u.g(d)})};function Ng(o,u,f,d){O.call(this,"multi-factor-auth-required",d,u),this.b=new Cg(o,u,f),it(this,"resolver",this.b)}lt(Ng,O);function eT(o,u,f){if(o&&I(o.serverResponse)&&o.code==="auth/multi-factor-auth-required")try{return new Ng(u,o.serverResponse,f,o.message)}catch{}return null}function nT(){}nT.prototype.sb=function(o,u,f){return u.type==oc?WM(this,o,u,f):$M(this,o,u)};function WM(o,u,f,d){return f.Ha().then(function(g){return g={idToken:g},typeof d<"u"&&(g.displayName=d),Ln(g,{phoneVerificationInfo:sc(o.a)}),Pt(u,DL,g)})}function $M(o,u,f){return f.Ha().then(function(d){return d={mfaPendingCredential:d},Ln(d,{phoneVerificationInfo:sc(o.a)}),Pt(u,LL,d)})}function Rg(o){it(this,"factorId",o.fa),this.a=o}lt(Rg,nT);function rT(o){if(Rg.call(this,o),this.a.fa!=Ei.PROVIDER_ID)throw new O("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}lt(rT,Rg);function da(o,u){Fn.call(this,o);for(var f in u)this[f]=u[f]}lt(da,Fn);function Og(o,u){this.a=o,this.b=[],this.c=U(this.yc,this),cr(this.a,"userReloaded",this.c);var f=[];u&&u.multiFactor&&u.multiFactor.enrolledFactors&&H(u.multiFactor.enrolledFactors,function(d){var g=null,_={};if(d){d.uid&&(_[bv]=d.uid),d.displayName&&(_[aE]=d.displayName),d.enrollmentTime&&(_[wv]=new Date(d.enrollmentTime).toISOString()),d.phoneNumber&&(_[Ev]=d.phoneNumber);try{g=new nc(_)}catch{}d=g}else d=null;d&&f.push(d)}),th(this,f)}function zM(o){var u=[];return H(o.mfaInfo||[],function(f){(f=_v(f))&&u.push(f)}),u}e=Og.prototype,e.yc=function(o){th(this,zM(o.hd))};function th(o,u){o.b=u,it(o,"enrolledFactors",u)}e.Rb=function(){return this.a.I().then(function(o){return new Of(o,null)})},e.fc=function(o,u){var f=this,d=this.a.a;return this.Rb().then(function(g){return o.sb(d,g,u)}).then(function(g){return Jr(f.a,g),f.a.reload()})},e.bd=function(o){var u=this,f=typeof o=="string"?o:o.uid,d=this.a.a;return this.a.I().then(function(g){return Pt(d,eM,{idToken:g,mfaEnrollmentId:f})}).then(function(g){var _=Vt(u.b,function(w){return w.uid!=f});return th(u,_),Jr(u.a,g),u.a.reload().o(function(w){if(w.code!="auth/user-token-expired")throw w})})},e.w=function(){return{multiFactor:{enrolledFactors:S(this.b,function(o){return o.w()})}}};function xg(o,u,f){if(this.h=o,this.i=u,this.g=f,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}xg.prototype.start=function(){this.a=this.c,Pg(this,!0)};function KM(o,u){return u?(o.a=o.c,o.g()):(u=o.a,o.a*=2,o.a>o.f&&(o.a=o.f),u)}function Pg(o,u){o.stop(),o.b=Zs(KM(o,u)).then(function(){return SD()}).then(function(){return o.h()}).then(function(){Pg(o,!0)}).o(function(f){o.i(f)&&Pg(o,!1)})}xg.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function kg(o){this.f=o,this.b=this.a=null,this.c=Date.now()}kg.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function iT(o,u){typeof u>"u"&&(o.b?(u=o.b,u=u.a-u.g):u=0),o.c=Date.now()+1e3*u}function oT(o,u){o.b=Nf(u[Sr]||""),o.a=u.refreshToken,u=u.expiresIn,iT(o,typeof u<"u"?Number(u):void 0)}function QM(o,u){o.b=u.b,o.a=u.a,o.c=u.c}function YM(o,u){return yL(o.f,u).then(function(f){return o.b=Nf(f.access_token),o.a=f.refresh_token,iT(o,f.expires_in),{accessToken:o.b.toString(),refreshToken:o.a}}).o(function(f){throw f.code=="auth/user-token-expired"&&(o.a=null),f})}kg.prototype.getToken=function(o){return o=!!o,this.b&&!this.a?ae(new O("user-token-expired")):o||!this.b||Date.now()>this.c-3e4?this.a?YM(this,{grant_type:"refresh_token",refresh_token:this.a}):gt(null):gt({accessToken:this.b.toString(),refreshToken:this.a})};function eh(o,u){this.a=o||null,this.b=u||null,En(this,{lastSignInTime:ec(u||null),creationTime:ec(o||null)})}function XM(o){return new eh(o.a,o.b)}eh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function JM(o,u,f,d,g,_){En(this,{uid:o,displayName:d||null,photoURL:g||null,email:f||null,phoneNumber:_||null,providerId:u})}function Jn(o,u,f){this.J=[],this.l=o.apiKey,this.m=o.appName,this.s=o.authDomain||null;var d=at.SDK_VERSION?ra(at.SDK_VERSION):null;this.a=new Tr(this.l,oe(Ft),d),o.emulatorConfig&&ca(this.a,o.emulatorConfig),this.b=new kg(this.a),jg(this,u[Sr]),oT(this.b,u),it(this,"refreshToken",this.b.a),aT(this,f||{}),bn.call(this),this.R=!1,this.s&&Ko()&&(this.i=KI(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=ZM(this),this.aa=U(this.hb,this);var g=this;this.ya=null,this.Oa=function(_){g.wa(_.h)},this.ja=null,this.Aa=function(_){ca(g.a,_.c)},this.X=null,this.$=[],this.Ba=function(_){bc(g,_.f)},this.ba=null,this.O=new Og(this,f),it(this,"multiFactor",this.O)}lt(Jn,bn),Jn.prototype.wa=function(o){this.ya=o,ZE(this.a,o)},Jn.prototype.la=function(){return this.ya};function Dg(o,u){o.ja&&Yn(o.ja,"languageCodeChanged",o.Oa),(o.ja=u)&&cr(u,"languageCodeChanged",o.Oa)}function Lg(o,u){o.X&&Yn(o.X,"emulatorConfigChanged",o.Aa),(o.X=u)&&cr(u,"emulatorConfigChanged",o.Aa)}function bc(o,u){o.$=u,tI(o.a,at.SDK_VERSION?ra(at.SDK_VERSION,o.$):null)}Jn.prototype.Ga=function(){return z(this.$)};function Mg(o,u){o.ba&&Yn(o.ba,"frameworkChanged",o.Ba),(o.ba=u)&&cr(u,"frameworkChanged",o.Ba)}Jn.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())};function Fg(o){try{return at.app(o.m).auth()}catch{throw new O("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+o.m+"'!")}}function ZM(o){return new xg(function(){return o.I(!0)},function(u){return!!(u&&u.code=="auth/network-request-failed")},function(){var u=o.b.c-Date.now()-3e5;return 0<u?u:0})}function sT(o){o.D||o.u.b||(o.u.start(),Yn(o,"tokenChanged",o.aa),cr(o,"tokenChanged",o.aa))}function Ug(o){Yn(o,"tokenChanged",o.aa),o.u.stop()}function jg(o,u){o.za=u,it(o,"_lat",u)}function tF(o,u){B(o.S,function(f){return f==u})}function os(o){for(var u=[],f=0;f<o.S.length;f++)u.push(o.S[f](o));return E0(u).then(function(){return o})}function Ec(o){o.i&&!o.R&&(o.R=!0,Eg(o.i,o))}function aT(o,u){En(o,{uid:u.uid,displayName:u.displayName||null,photoURL:u.photoURL||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,isAnonymous:u.isAnonymous||!1,tenantId:u.tenantId||null,metadata:new eh(u.createdAt,u.lastLoginAt),providerData:[]}),o.a.b=o.tenantId}it(Jn.prototype,"providerId","firebase");function uT(){}function Vg(o){return gt().then(function(){if(o.D)throw new O("app-deleted")})}function Bg(o){return S(o.providerData,function(u){return u.providerId})}function qg(o,u){u&&(cT(o,u.providerId),o.providerData.push(u))}function cT(o,u){B(o.providerData,function(f){return f.providerId==u})}function eo(o,u,f){(u!="uid"||f)&&o.hasOwnProperty(u)&&it(o,u,f)}function nh(o,u){o!=u&&(En(o,{uid:u.uid,displayName:u.displayName,photoURL:u.photoURL,email:u.email,emailVerified:u.emailVerified,phoneNumber:u.phoneNumber,isAnonymous:u.isAnonymous,tenantId:u.tenantId,providerData:[]}),u.metadata?it(o,"metadata",XM(u.metadata)):it(o,"metadata",new eh),H(u.providerData,function(f){qg(o,f)}),QM(o.b,u.b),it(o,"refreshToken",o.b.a),th(o.O,u.O.b))}e=Jn.prototype,e.reload=function(){var o=this;return Le(this,Vg(this).then(function(){return Hg(o).then(function(){return os(o)}).then(uT)}))};function Hg(o){return o.I().then(function(u){var f=o.isAnonymous;return eF(o,u).then(function(){return f||eo(o,"isAnonymous",!1),u})})}e.oc=function(o){return this.I(o).then(function(u){return new GM(u)})},e.I=function(o){var u=this;return Le(this,Vg(this).then(function(){return u.b.getToken(o)}).then(function(f){if(!f)throw new O("internal-error");return f.accessToken!=u.za&&(jg(u,f.accessToken),u.dispatchEvent(new da("tokenChanged"))),eo(u,"refreshToken",f.refreshToken),f.accessToken}))};function Jr(o,u){u[Sr]&&o.za!=u[Sr]&&(oT(o.b,u),o.dispatchEvent(new da("tokenChanged")),jg(o,u[Sr]),eo(o,"refreshToken",o.b.a))}function eF(o,u){return Pt(o.a,ML,{idToken:u}).then(U(o.Kc,o))}e.Kc=function(o){if(o=o.users,!o||!o.length)throw new O("internal-error");o=o[0],aT(this,{uid:o.localId,displayName:o.displayName,photoURL:o.photoUrl,email:o.email,emailVerified:!!o.emailVerified,phoneNumber:o.phoneNumber,lastLoginAt:o.lastLoginAt,createdAt:o.createdAt,tenantId:o.tenantId});for(var u=nF(o),f=0;f<u.length;f++)qg(this,u[f]);eo(this,"isAnonymous",!(this.email&&o.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new da("userReloaded",{hd:o}))};function nF(o){return(o=o.providerUserInfo)&&o.length?S(o,function(u){return new JM(u.rawId,u.providerId,u.email,u.displayName,u.photoUrl,u.phoneNumber)}):[]}e.Lc=function(o){return dv("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(o)},e.tb=function(o){var u=this,f=null;return Le(this,o.c(this.a,this.uid).then(function(d){return Jr(u,d),f=Ic(u,d,"reauthenticate"),u.h=null,u.reload()}).then(function(){return f}),!0)};function rh(o,u){return Hg(o).then(function(){if(L(Bg(o),u))return os(o).then(function(){throw new O("provider-already-linked")})})}e.Cc=function(o){return dv("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(o)},e.qb=function(o){var u=this,f=null;return Le(this,rh(this,o.providerId).then(function(){return u.I()}).then(function(d){return o.b(u.a,d)}).then(function(d){return f=Ic(u,d,"link"),lT(u,d)}).then(function(){return f}))},e.Dc=function(o,u){var f=this;return Le(this,rh(this,"phone").then(function(){return Ag(Fg(f),o,u,U(f.qb,f))}))},e.Mc=function(o,u){var f=this;return Le(this,gt().then(function(){return Ag(Fg(f),o,u,U(f.tb,f))}),!0)};function Ic(o,u,f){var d=kv(u);return u=TE(u),Yr({user:o,credential:d,additionalUserInfo:u,operationType:f})}function lT(o,u){return Jr(o,u),o.reload().then(function(){return o})}e.Bb=function(o){var u=this;return Le(this,this.I().then(function(f){return u.a.Bb(f,o)}).then(function(f){return Jr(u,f),u.reload()}))},e.ed=function(o){var u=this;return Le(this,this.I().then(function(f){return o.b(u.a,f)}).then(function(f){return Jr(u,f),u.reload()}))},e.Cb=function(o){var u=this;return Le(this,this.I().then(function(f){return u.a.Cb(f,o)}).then(function(f){return Jr(u,f),u.reload()}))},e.Db=function(o){if(o.displayName===void 0&&o.photoURL===void 0)return Vg(this);var u=this;return Le(this,this.I().then(function(f){return u.a.Db(f,{displayName:o.displayName,photoUrl:o.photoURL})}).then(function(f){return Jr(u,f),eo(u,"displayName",f.displayName||null),eo(u,"photoURL",f.photoUrl||null),H(u.providerData,function(d){d.providerId==="password"&&(it(d,"displayName",u.displayName),it(d,"photoURL",u.photoURL))}),os(u)}).then(uT))},e.cd=function(o){var u=this;return Le(this,Hg(this).then(function(f){return L(Bg(u),o)?SL(u.a,f,[o]).then(function(d){var g={};return H(d.providerUserInfo||[],function(_){g[_.providerId]=!0}),H(Bg(u),function(_){g[_]||cT(u,_)}),g[Ei.PROVIDER_ID]||it(u,"phoneNumber",null),os(u)}):os(u).then(function(){throw new O("no-such-provider")})}))},e.delete=function(){var o=this;return Le(this,this.I().then(function(u){return Pt(o.a,OL,{idToken:u})}).then(function(){o.dispatchEvent(new da("userDeleted"))})).then(function(){for(var u=0;u<o.J.length;u++)o.J[u].cancel("app-deleted");Dg(o,null),Lg(o,null),Mg(o,null),o.J=[],o.D=!0,Ug(o),it(o,"refreshToken",null),o.i&&HI(o.i,o)})},e.Fb=function(o,u){return!!(o=="linkViaPopup"&&(this.g||null)==u&&this.f||o=="reauthViaPopup"&&(this.g||null)==u&&this.f||o=="linkViaRedirect"&&(this.ga||null)==u||o=="reauthViaRedirect"&&(this.ga||null)==u)},e.na=function(o,u,f,d){o!="linkViaPopup"&&o!="reauthViaPopup"||d!=(this.g||null)||(f&&this.C?this.C(f):u&&!f&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,u){return o=="linkViaPopup"&&u==(this.g||null)?U(this.Kb,this):o=="reauthViaPopup"&&u==(this.g||null)?U(this.Lb,this):o=="linkViaRedirect"&&(this.ga||null)==u?U(this.Kb,this):o=="reauthViaRedirect"&&(this.ga||null)==u?U(this.Lb,this):null},e.Ec=function(o){var u=this;return fT(this,"linkViaPopup",o,function(){return rh(u,o.providerId).then(function(){return os(u)})},!1)},e.Nc=function(o){return fT(this,"reauthViaPopup",o,function(){return gt()},!0)};function fT(o,u,f,d,g){if(!Ko())return ae(new O("operation-not-supported-in-this-environment"));if(o.h&&!g)return ae(o.h);var _=Cv(f.providerId),w=Qo(o.uid+":::"),T=null;(!Zu()||lv())&&o.s&&f.isOAuthProvider&&(T=gc(o.s,o.l,o.m,u,f,null,w,at.SDK_VERSION||null,null,null,o.tenantId));var M=J0(T,_&&_.ua,_&&_.ta);return d=d().then(function(){if(pT(o),!g)return o.I().then(function(){})}).then(function(){return GI(o.i,M,u,f,w,!!T,o.tenantId)}).then(function(){return new xt(function(q,bt){o.na(u,null,new O("cancelled-popup-request"),o.g||null),o.f=q,o.C=bt,o.g=w,o.c=$I(o.i,o,u,M,w)})}).then(function(q){return M&&zo(M),q?Yr(q):null}).o(function(q){throw M&&zo(M),q}),Le(o,d,g)}e.Fc=function(o){var u=this;return hT(this,"linkViaRedirect",o,function(){return rh(u,o.providerId)},!1)},e.Oc=function(o){return hT(this,"reauthViaRedirect",o,function(){return gt()},!0)};function hT(o,u,f,d,g){if(!Ko())return ae(new O("operation-not-supported-in-this-environment"));if(o.h&&!g)return ae(o.h);var _=null,w=Qo(o.uid+":::");return d=d().then(function(){if(pT(o),!g)return o.I().then(function(){})}).then(function(){return o.ga=w,os(o)}).then(function(T){return o.ha&&(T=o.ha,T=T.b.set(Gg,o.w(),T.a)),T}).then(function(){return WI(o.i,u,f,w,o.tenantId)}).o(function(T){if(_=T,o.ha)return vT(o.ha);throw _}).then(function(){if(_)throw _}),Le(o,d,g)}function pT(o){if(!o.i||!o.R)throw o.i&&!o.R?new O("internal-error"):new O("auth-domain-config-required")}e.Kb=function(o,u,f,d){var g=this;this.c&&(this.c.cancel(),this.c=null);var _=null;return f=this.I().then(function(w){return tg(g.a,{requestUri:o,postBody:d,sessionId:u,idToken:w})}).then(function(w){return _=Ic(g,w,"link"),lT(g,w)}).then(function(){return _}),Le(this,f)},e.Lb=function(o,u,f,d){var g=this;this.c&&(this.c.cancel(),this.c=null);var _=null,w=gt().then(function(){return aa(eg(g.a,{requestUri:o,sessionId:u,postBody:d,tenantId:f}),g.uid)}).then(function(T){return _=Ic(g,T,"reauthenticate"),Jr(g,T),g.h=null,g.reload()}).then(function(){return _});return Le(this,w,!0)},e.ub=function(o){var u=this,f=null;return Le(this,this.I().then(function(d){return f=d,typeof o>"u"||we(o)?{}:Af(new Sf(o))}).then(function(d){return u.a.ub(f,d)}).then(function(d){if(u.email!=d)return u.reload()}).then(function(){}))},e.Eb=function(o,u){var f=this,d=null;return Le(this,this.I().then(function(g){return d=g,typeof u>"u"||we(u)?{}:Af(new Sf(u))}).then(function(g){return f.a.Eb(d,o,g)}).then(function(g){if(f.email!=g)return f.reload()}).then(function(){}))};function Le(o,u,f){var d=rF(o,u,f);return o.J.push(d),d.oa(function(){V(o.J,d)}),d.o(function(g){var _=null;throw g&&g.code==="auth/multi-factor-auth-required"&&(_=eT(g.w(),Fg(o),U(o.jc,o))),_||g})}e.jc=function(o){var u=null,f=this;return o=aa(gt(o),f.uid).then(function(d){return u=Ic(f,d,"reauthenticate"),Jr(f,d),f.h=null,f.reload()}).then(function(){return u}),Le(this,o,!0)};function rF(o,u,f){return o.h&&!f?(u.cancel(),ae(o.h)):u.o(function(d){throw!d||d.code!="auth/user-disabled"&&d.code!="auth/user-token-expired"||(o.h||o.dispatchEvent(new da("userInvalidated")),o.h=d),d})}e.toJSON=function(){return this.w()},e.w=function(){var o={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&Ln(o,this.metadata.w()),H(this.providerData,function(u){o.providerData.push(ND(u))}),Ln(o,this.O.w()),o};function dT(o){if(!o.apiKey)return null;var u={apiKey:o.apiKey,authDomain:o.authDomain,appName:o.appName,emulatorConfig:o.emulatorConfig},f={};if(o.stsTokenManager&&o.stsTokenManager.accessToken){f[Sr]=o.stsTokenManager.accessToken,f.refreshToken=o.stsTokenManager.refreshToken||null;var d=o.stsTokenManager.expirationTime;d&&(f.expiresIn=(d-Date.now())/1e3)}else return null;var g=new Jn(u,f,o);return o.providerData&&H(o.providerData,function(_){_&&qg(g,Yr(_))}),o.redirectEventId&&(g.ga=o.redirectEventId),g}function iF(o,u,f,d){var g=new Jn(o,u);return f&&(g.ha=f),d&&bc(g,d),g.reload().then(function(){return g})}function oF(o,u,f,d){var g=o.b,_={};return _[Sr]=g.b&&g.b.toString(),_.refreshToken=g.a,u=new Jn(u||{apiKey:o.l,authDomain:o.s,appName:o.m},_),f&&(u.ha=f),d&&bc(u,d),nh(u,o),u}function sF(o){this.a=o,this.b=wc()}var Gg={name:"redirectUser",F:"session"};function vT(o){return pa(o.b,Gg,o.a)}function aF(o,u){return o.b.get(Gg,o.a).then(function(f){return f&&u&&(f.authDomain=u),dT(f||{})})}function Wg(o){this.a=o,this.b=wc(),this.c=null,this.f=uF(this),this.b.addListener(Zr("local"),this.a,U(this.g,this))}Wg.prototype.g=function(){var o=this,u=Zr("local");va(this,function(){return gt().then(function(){return o.c&&o.c.F!="local"?o.b.get(u,o.a):null}).then(function(f){if(f)return $g(o,"local").then(function(){o.c=u})})})};function $g(o,u){var f=[],d;for(d in fa)fa[d]!==u&&f.push(pa(o.b,Zr(fa[d]),o.a));return f.push(pa(o.b,zg,o.a)),Xk(f)}function uF(o){var u=Zr("local"),f=Zr("session"),d=Zr("none");return IM(o.b,u,o.a).then(function(){return o.b.get(f,o.a)}).then(function(g){return g?f:o.b.get(d,o.a).then(function(_){return _?d:o.b.get(u,o.a).then(function(w){return w?u:o.b.get(zg,o.a).then(function(T){return T?Zr(T):u})})})}).then(function(g){return o.c=g,$g(o,g.F)}).o(function(){o.c||(o.c=u)})}var zg={name:"persistence",F:"session"};function Zr(o){return{name:"authUser",F:o}}Wg.prototype.xb=function(o){var u=null,f=this;return EM(o),va(this,function(){return o!=f.c.F?f.b.get(f.c,f.a).then(function(d){return u=d,$g(f,o)}).then(function(){if(f.c=Zr(o),u)return f.b.set(f.c,u,f.a)}):gt()})};function cF(o){return va(o,function(){return o.b.set(zg,o.c.F,o.a)})}function gT(o,u){return va(o,function(){return o.b.set(o.c,u.w(),o.a)})}function mT(o){return va(o,function(){return pa(o.b,o.c,o.a)})}function yT(o,u,f){return va(o,function(){return o.b.get(o.c,o.a).then(function(d){return d&&u&&(d.authDomain=u),d&&f&&(d.emulatorConfig=f),dT(d||{})})})}function va(o,u){return o.f=o.f.then(u,u),o.f}function Ar(o){if(this.l=!1,it(this,"settings",new JI),it(this,"app",o),Xt(this).options&&Xt(this).options.apiKey)o=at.SDK_VERSION?ra(at.SDK_VERSION):null,this.a=new Tr(Xt(this).options&&Xt(this).options.apiKey,oe(Ft),o);else throw new O("invalid-api-key");this.R=[],this.s=[],this.O=[],this.hb=at.INTERNAL.createSubscribe(U(this.zc,this)),this.X=void 0,this.bc=at.INTERNAL.createSubscribe(U(this.Ac,this)),ga(this,null),this.i=new Wg(Xt(this).options.apiKey+":"+Xt(this).name),this.D=new sF(Xt(this).options.apiKey+":"+Xt(this).name),this.$=ge(this,vF(this)),this.h=ge(this,gF(this)),this.ba=!1,this.ja=U(this.Zc,this),this.Ba=U(this.da,this),this.ya=U(this.mc,this),this.za=U(this.wc,this),this.Aa=U(this.xc,this),this.b=null,hF(this),this.INTERNAL={},this.INTERNAL.delete=U(this.delete,this),this.INTERNAL.logFramework=U(this.Gc,this),this.u=0,bn.call(this),fF(this),this.J=[],this.P=null}lt(Ar,bn);function _T(o){Fn.call(this,"languageCodeChanged"),this.h=o}lt(_T,Fn);function wT(o){Fn.call(this,"emulatorConfigChanged"),this.c=o}lt(wT,Fn);function bT(o){Fn.call(this,"frameworkChanged"),this.f=o}lt(bT,Fn),e=Ar.prototype,e.xb=function(o){return o=this.i.xb(o),ge(this,o)},e.wa=function(o){this.aa===o||this.l||(this.aa=o,ZE(this.a,this.aa),this.dispatchEvent(new _T(this.la())))},e.la=function(){return this.aa},e.fd=function(){var o=l.navigator;this.wa(o&&(o.languages&&o.languages[0]||o.language||o.userLanguage)||null)},e.gd=function(o,u){if(!this.P){if(!/^https?:\/\//.test(o))throw new O("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");u=u?!!u.disableWarnings:!1,lF(u),this.P={url:o,ec:u},this.settings.ib=!0,ca(this.a,this.P),this.dispatchEvent(new wT(this.P))}};function lF(o){typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!o&&Ef().then(function(){var u=l.document.createElement("div");u.innerText="Running in emulator mode. Do not use with production credentials.",u.style.position="fixed",u.style.width="100%",u.style.backgroundColor="#ffffff",u.style.border=".1em solid #000000",u.style.color="#ff0000",u.style.bottom="0px",u.style.left="0px",u.style.margin="0px",u.style.zIndex=1e4,u.style.textAlign="center",u.classList.add("firebase-emulator-warning"),l.document.body.appendChild(u)})}e.Gc=function(o){this.J.push(o),tI(this.a,at.SDK_VERSION?ra(at.SDK_VERSION,this.J):null),this.dispatchEvent(new bT(this.J))},e.Ga=function(){return z(this.J)},e.yb=function(o){this.S===o||this.l||(this.S=o,this.a.b=this.S)},e.T=function(){return this.S};function fF(o){Object.defineProperty(o,"lc",{get:function(){return this.la()},set:function(u){this.wa(u)},enumerable:!1}),o.aa=null,Object.defineProperty(o,"ti",{get:function(){return this.T()},set:function(u){this.yb(u)},enumerable:!1}),o.S=null,Object.defineProperty(o,"emulatorConfig",{get:function(){if(this.P){var u=Un(this.P.url);u=Yr({protocol:u.c,host:u.a,port:u.g,options:Yr({disableWarnings:this.P.ec})})}else u=null;return u},enumerable:!1})}e.toJSON=function(){return{apiKey:Xt(this).options.apiKey,authDomain:Xt(this).options.authDomain,appName:Xt(this).name,currentUser:St(this)&&St(this).w()}};function Kg(o){return o.Oa||ae(new O("auth-domain-config-required"))}function hF(o){var u=Xt(o).options.authDomain,f=Xt(o).options.apiKey;u&&Ko()&&(o.Oa=o.$.then(function(){if(!o.l){if(o.b=KI(u,f,Xt(o).name,o.P),Eg(o.b,o),St(o)&&Ec(St(o)),o.m){Ec(o.m);var d=o.m;d.wa(o.la()),Dg(d,o),d=o.m,bc(d,o.J),Mg(d,o),d=o.m,ca(d.a,o.P),Lg(d,o),o.m=null}return o.b}}))}e.Fb=function(o,u){switch(o){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==u&&!!this.f;default:return!1}},e.na=function(o,u,f,d){o=="signInViaPopup"&&this.g==d&&(f&&this.C?this.C(f):u&&!f&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,u){return o=="signInViaRedirect"||o=="signInViaPopup"&&this.g==u&&this.f?U(this.ic,this):null},e.ic=function(o,u,f,d){var g=this,_={requestUri:o,postBody:d,sessionId:u,tenantId:f};return this.c&&(this.c.cancel(),this.c=null),g.$.then(function(){return ss(g,Zv(g.a,_))})},e.Xc=function(o){if(!Ko())return ae(new O("operation-not-supported-in-this-environment"));var u=this,f=Cv(o.providerId),d=Qo(),g=null;(!Zu()||lv())&&Xt(this).options.authDomain&&o.isOAuthProvider&&(g=gc(Xt(this).options.authDomain,Xt(this).options.apiKey,Xt(this).name,"signInViaPopup",o,null,d,at.SDK_VERSION||null,null,null,this.T(),this.P));var _=J0(g,f&&f.ua,f&&f.ta);return f=Kg(this).then(function(w){return GI(w,_,"signInViaPopup",o,d,!!g,u.T())}).then(function(){return new xt(function(w,T){u.na("signInViaPopup",null,new O("cancelled-popup-request"),u.g),u.f=w,u.C=T,u.g=d,u.c=$I(u.b,u,"signInViaPopup",_,d)})}).then(function(w){return _&&zo(_),w?Yr(w):null}).o(function(w){throw _&&zo(_),w}),ge(this,f)},e.Yc=function(o){if(!Ko())return ae(new O("operation-not-supported-in-this-environment"));var u=this,f=Kg(this).then(function(){return cF(u.i)}).then(function(){return WI(u.b,"signInViaRedirect",o,void 0,u.T())});return ge(this,f)};function ET(o){if(!Ko())return ae(new O("operation-not-supported-in-this-environment"));var u=Kg(o).then(function(){return o.b.qa()}).then(function(f){return f?Yr(f):null});return ge(o,u)}e.qa=function(){var o=this;return ET(this).then(function(u){return o.b&&Zf(o.b.b),u}).o(function(u){throw o.b&&Zf(o.b.b),u})},e.dd=function(o){if(!o)return ae(new O("null-user"));if(this.S!=o.tenantId)return ae(new O("tenant-id-mismatch"));var u=this,f={};f.apiKey=Xt(this).options.apiKey,f.authDomain=Xt(this).options.authDomain,f.appName=Xt(this).name;var d=oF(o,f,u.D,u.Ga());return ge(this,this.h.then(function(){if(Xt(u).options.apiKey!=o.l)return d.reload()}).then(function(){return St(u)&&o.uid==St(u).uid?(nh(St(u),o),u.da(o)):(ga(u,d),Ec(d),u.da(d))}).then(function(){Tc(u)}))};function pF(o,u){var f={};return f.apiKey=Xt(o).options.apiKey,f.authDomain=Xt(o).options.authDomain,f.appName=Xt(o).name,o.P&&(f.emulatorConfig=o.P),o.$.then(function(){return iF(f,u,o.D,o.Ga())}).then(function(d){return St(o)&&d.uid==St(o).uid?(nh(St(o),d),o.da(d)):(ga(o,d),Ec(d),o.da(d))}).then(function(){Tc(o)})}function ga(o,u){St(o)&&(tF(St(o),o.Ba),Yn(St(o),"tokenChanged",o.ya),Yn(St(o),"userDeleted",o.za),Yn(St(o),"userInvalidated",o.Aa),Ug(St(o))),u&&(u.S.push(o.Ba),cr(u,"tokenChanged",o.ya),cr(u,"userDeleted",o.za),cr(u,"userInvalidated",o.Aa),0<o.u&&sT(u)),it(o,"currentUser",u),u&&(u.wa(o.la()),Dg(u,o),bc(u,o.J),Mg(u,o),ca(u.a,o.P),Lg(u,o))}e.Ab=function(){var o=this,u=this.h.then(function(){return o.b&&Zf(o.b.b),St(o)?(ga(o,null),mT(o.i).then(function(){Tc(o)})):gt()});return ge(this,u)};function dF(o){var u=aF(o.D,Xt(o).options.authDomain).then(function(f){return(o.m=f)&&(f.ha=o.D),vT(o.D)});return ge(o,u)}function vF(o){var u=Xt(o).options.authDomain,f=dF(o).then(function(){return yT(o.i,u,o.P)}).then(function(d){return d?(d.ha=o.D,o.m&&(o.m.ga||null)==(d.ga||null)?d:d.reload().then(function(){return gT(o.i,d).then(function(){return d})}).o(function(g){return g.code=="auth/network-request-failed"?d:mT(o.i)})):null}).then(function(d){ga(o,d||null)});return ge(o,f)}function gF(o){return o.$.then(function(){return ET(o)}).o(function(){}).then(function(){if(!o.l)return o.ja()}).o(function(){}).then(function(){if(!o.l){o.ba=!0;var u=o.i;u.b.addListener(Zr("local"),u.a,o.ja)}})}e.Zc=function(){var o=this;return yT(this.i,Xt(this).options.authDomain).then(function(u){if(!o.l){var f;if(f=St(o)&&u){f=St(o).uid;var d=u.uid;f=f==null||f===""||d===void 0||d===null||d===""?!1:f==d}if(f)return nh(St(o),u),St(o).I();(St(o)||u)&&(ga(o,u),u&&(Ec(u),u.ha=o.D),o.b&&Eg(o.b,o),Tc(o))}})},e.da=function(o){return gT(this.i,o)},e.mc=function(){Tc(this),this.da(St(this))},e.wc=function(){this.Ab()},e.xc=function(){this.Ab()};function ss(o,u){var f=null,d=null;return ge(o,u.then(function(g){return f=kv(g),d=TE(g),pF(o,g)},function(g){var _=null;throw g&&g.code==="auth/multi-factor-auth-required"&&(_=eT(g.w(),o,U(o.kc,o))),_||g}).then(function(){return Yr({user:St(o),credential:f,additionalUserInfo:d,operationType:"signIn"})}))}e.kc=function(o){var u=this;return this.h.then(function(){return ss(u,gt(o))})},e.zc=function(o){var u=this;this.addAuthTokenListener(function(){o.next(St(u))})},e.Ac=function(o){var u=this;mF(this,function(){o.next(St(u))})},e.Ic=function(o,u,f){var d=this;return this.ba&&Promise.resolve().then(function(){typeof o=="function"?o(St(d)):typeof o.next=="function"&&o.next(St(d))}),this.hb(o,u,f)},e.Hc=function(o,u,f){var d=this;return this.ba&&Promise.resolve().then(function(){d.X=d.getUid(),typeof o=="function"?o(St(d)):typeof o.next=="function"&&o.next(St(d))}),this.bc(o,u,f)},e.nc=function(o){var u=this,f=this.h.then(function(){return St(u)?St(u).I(o).then(function(d){return{accessToken:d}}):null});return ge(this,f)},e.Tc=function(o){var u=this;return this.h.then(function(){return ss(u,Pt(u.a,XL,{token:o}))}).then(function(f){var d=f.user;return eo(d,"isAnonymous",!1),u.da(d),f})},e.Uc=function(o,u){var f=this;return this.h.then(function(){return ss(f,Pt(f.a,cI,{email:o,password:u}))})},e.dc=function(o,u){var f=this;return this.h.then(function(){return ss(f,Pt(f.a,NL,{email:o,password:u}))})},e.$a=function(o){var u=this;return this.h.then(function(){return ss(u,o.ka(u.a))})},e.Sc=function(o){return dv("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(o)},e.zb=function(){var o=this;return this.h.then(function(){var u=St(o);if(u&&u.isAnonymous){var f=Yr({providerId:null,isNewUser:!1});return Yr({user:u,credential:null,additionalUserInfo:f,operationType:"signIn"})}return ss(o,o.a.zb()).then(function(d){var g=d.user;return eo(g,"isAnonymous",!0),o.da(g),d})})};function Xt(o){return o.app}function St(o){return o.currentUser}e.getUid=function(){return St(this)&&St(this).uid||null};function ih(o){return St(o)&&St(o)._lat||null}function Tc(o){if(o.ba){for(var u=0;u<o.s.length;u++)o.s[u]&&o.s[u](ih(o));if(o.X!==o.getUid()&&o.O.length)for(o.X=o.getUid(),u=0;u<o.O.length;u++)o.O[u]&&o.O[u](ih(o))}}e.cc=function(o){this.addAuthTokenListener(o),this.u++,0<this.u&&St(this)&&sT(St(this))},e.Pc=function(o){var u=this;H(this.s,function(f){f==o&&u.u--}),0>this.u&&(this.u=0),this.u==0&&St(this)&&Ug(St(this)),this.removeAuthTokenListener(o)},e.addAuthTokenListener=function(o){var u=this;this.s.push(o),ge(this,this.h.then(function(){u.l||L(u.s,o)&&o(ih(u))}))},e.removeAuthTokenListener=function(o){B(this.s,function(u){return u==o})};function mF(o,u){o.O.push(u),ge(o,o.h.then(function(){!o.l&&L(o.O,u)&&o.X!==o.getUid()&&(o.X=o.getUid(),u(ih(o)))}))}e.delete=function(){this.l=!0;for(var o=0;o<this.R.length;o++)this.R[o].cancel("app-deleted");return this.R=[],this.i&&(o=this.i,o.b.removeListener(Zr("local"),o.a,this.ja)),this.b&&(HI(this.b,this),Zf(this.b.b)),Promise.resolve()};function ge(o,u){return o.R.push(u),u.oa(function(){V(o.R,u)}),u}e.hc=function(o){return ge(this,_L(this.a,o))},e.Bc=function(o){return!!Pv(o)},e.wb=function(o,u){var f=this;return ge(this,gt().then(function(){var d=new Sf(u);if(!d.c)throw new O("argument-error",Sv+" must be true when sending sign in link to email");return Af(d)}).then(function(d){return f.a.wb(o,d)}).then(function(){}))},e.jd=function(o){return this.Ra(o).then(function(u){return u.data.email})},e.nb=function(o,u){return ge(this,this.a.nb(o,u).then(function(){}))},e.Ra=function(o){return ge(this,this.a.Ra(o).then(function(u){return new OD(u)}))},e.jb=function(o){return ge(this,this.a.jb(o).then(function(){}))},e.vb=function(o,u){var f=this;return ge(this,gt().then(function(){return typeof u>"u"||we(u)?{}:Af(new Sf(u))}).then(function(d){return f.a.vb(o,d)}).then(function(){}))},e.Wc=function(o,u){return ge(this,Ag(this,o,u,U(this.$a,this)))},e.Vc=function(o,u){var f=this;return ge(this,gt().then(function(){var d=u||Ju(),g=ME(o,d);if(d=Pv(d),!d)throw new O("argument-error","Invalid email link!");if(d.tenantId!==f.T())throw new O("tenant-id-mismatch");return f.$a(g)}))};function Sc(){}Sc.prototype.render=function(){},Sc.prototype.reset=function(){},Sc.prototype.getResponse=function(){},Sc.prototype.execute=function(){};function ma(){this.a={},this.b=1e12}var Qg=null;ma.prototype.render=function(o,u){return this.a[this.b.toString()]=new oh(o,u),this.b++},ma.prototype.reset=function(o){var u=Yg(this,o);o=IT(o),u&&o&&(u.delete(),delete this.a[o])},ma.prototype.getResponse=function(o){return(o=Yg(this,o))?o.getResponse():null},ma.prototype.execute=function(o){(o=Yg(this,o))&&o.execute()};function Yg(o,u){return(u=IT(u))&&o.a[u]||null}function IT(o){return(o=typeof o>"u"?1e12:o)?o.toString():null}function oh(o,u){this.g=!1,this.c=u,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=Wu(o);var f=this;this.i=function(){f.execute()},this.h?this.execute():cr(this.f,"click",this.i)}oh.prototype.getResponse=function(){return Xg(this),this.b},oh.prototype.execute=function(){Xg(this);var o=this;this.a||(this.a=setTimeout(function(){o.b=TD();var u=o.c.callback,f=o.c["expired-callback"];if(u)try{u(o.b)}catch{}o.a=setTimeout(function(){if(o.a=null,o.b=null,f)try{f()}catch{}o.h&&o.execute()},6e4)},500))},oh.prototype.delete=function(){Xg(this),this.g=!0,clearTimeout(this.a),this.a=null,Yn(this.f,"click",this.i)};function Xg(o){if(o.g)throw Error("reCAPTCHA mock was already deleted!")}function Jg(){}it(Jg,"FACTOR_ID","phone");function Zg(){}Zg.prototype.g=function(){return Qg||(Qg=new ma),gt(Qg)},Zg.prototype.c=function(){};var tm=null;function em(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var yF=new zr(cf,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),_F=new Ji(3e4,6e4);em.prototype.g=function(o){var u=this;return new xt(function(f,d){var g=setTimeout(function(){d(new O("network-request-failed"))},_F.get());if(!l.grecaptcha||o!==u.f&&!u.b){l[u.a]=function(){if(l.grecaptcha){u.f=o;var w=l.grecaptcha.render;l.grecaptcha.render=function(T,M){return T=w(T,M),u.b++,T},clearTimeout(g),f(l.grecaptcha)}else clearTimeout(g),d(new O("internal-error"));delete l[u.a]};var _=Ud(yF,{onload:u.a,hl:o||""});gt($v(_)).o(function(){clearTimeout(g),d(new O("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(g),f(l.grecaptcha)})},em.prototype.c=function(){this.b--};var nm=null;function rm(o,u,f,d,g,_,w){if(it(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=u,this.g=null,w?(tm||(tm=new Zg),w=tm):(nm||(nm=new em),w=nm),this.m=w,this.a=f||{theme:"light",type:"image"},this.h=[],this.a[AT])throw new O("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[wF]==="invisible",!l.document)throw new O("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Wu(u)||!this.i&&Wu(u).hasChildNodes())throw new O("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Tr(o,_||null,g||null),this.u=d||function(){return null};var T=this;this.l=[];var M=this.a[TT];this.a[TT]=function(bt){if(CT(T,bt),typeof M=="function")M(bt);else if(typeof M=="string"){var $t=ue(M,l);typeof $t=="function"&&$t(bt)}};var q=this.a[ST];this.a[ST]=function(){if(CT(T,null),typeof q=="function")q();else if(typeof q=="string"){var bt=ue(q,l);typeof bt=="function"&&bt()}}}var TT="callback",ST="expired-callback",AT="sitekey",wF="size";function CT(o,u){for(var f=0;f<o.l.length;f++)try{o.l[f](u)}catch{}}function bF(o,u){B(o.l,function(f){return f==u})}function im(o,u){return o.h.push(u),u.oa(function(){V(o.h,u)}),u}e=rm.prototype,e.Ia=function(){var o=this;return this.f?this.f:this.f=im(this,gt().then(function(){if(If()&&!Er())return Ef();throw new O("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return o.m.g(o.u())}).then(function(u){return o.g=u,Pt(o.s,qL,{})}).then(function(u){o.a[AT]=u.recaptchaSiteKey}).o(function(u){throw o.f=null,u}))},e.render=function(){sh(this);var o=this;return im(this,this.Ia().then(function(){if(o.c===null){var u=o.v;if(!o.i){var f=Wu(u);u=zk("DIV"),f.appendChild(u)}o.c=o.g.render(u,o.a)}return o.c}))},e.verify=function(){sh(this);var o=this;return im(this,this.render().then(function(u){return new xt(function(f){var d=o.g.getResponse(u);if(d)f(d);else{var g=function(_){_&&(bF(o,g),f(_))};o.l.push(g),o.i&&o.g.execute(o.c)}})}))},e.reset=function(){sh(this),this.c!==null&&this.g.reset(this.c)};function sh(o){if(o.D)throw new O("internal-error","RecaptchaVerifier instance has been destroyed.")}e.clear=function(){sh(this),this.D=!0,this.m.c();for(var o=0;o<this.h.length;o++)this.h[o].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){o=Wu(this.v);for(var u;u=o.firstChild;)o.removeChild(u)}};function om(o,u,f){var d=!1;try{this.b=f||at.app()}catch{throw new O("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)f=this.b.options.apiKey;else throw new O("invalid-api-key");var g=this,_=null;try{_=this.b.auth().Ga()}catch{}try{d=this.b.auth().settings.appVerificationDisabledForTesting}catch{}_=at.SDK_VERSION?ra(at.SDK_VERSION,_):null,rm.call(this,f,o,u,function(){try{var w=g.b.auth().la()}catch{w=null}return w},_,oe(Ft),d)}lt(om,rm);function NT(o,u,f,d){t:{f=Array.prototype.slice.call(f);for(var g=0,_=!1,w=0;w<u.length;w++)if(u[w].optional)_=!0;else{if(_)throw new O("internal-error","Argument validator encountered a required argument after an optional argument.");g++}if(_=u.length,f.length<g||_<f.length)d="Expected "+(g==_?g==1?"1 argument":g+" arguments":g+"-"+_+" arguments")+" but got "+f.length+".";else{for(g=0;g<f.length;g++)if(_=u[g].optional&&f[g]===void 0,!u[g].M(f[g])&&!_){if(u=u[g],0>g||g>=RT.length)throw new O("internal-error","Argument validator received an unsupported number of arguments.");f=RT[g],d=(d?"":f+" argument ")+(u.name?'"'+u.name+'" ':"")+"must be "+u.K+".";break t}d=null}}if(d)throw new O("argument-error",o+" failed: "+d)}var RT="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function rt(o,u){return{name:o||"",K:"a valid string",optional:!!u,M:function(f){return typeof f=="string"}}}function sm(o,u){return{name:o||"",K:"a boolean",optional:!!u,M:function(f){return typeof f=="boolean"}}}function Ne(o,u){return{name:o||"",K:"a valid object",optional:!!u,M:I}}function ya(o,u){return{name:o||"",K:"a function",optional:!!u,M:function(f){return typeof f=="function"}}}function ti(o,u){return{name:o||"",K:"null",optional:!!u,M:function(f){return f===null}}}function EF(){return{name:"",K:"an HTML element",optional:!1,M:function(o){return!!(o&&o instanceof Element)}}}function IF(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(o){return!!(o&&o instanceof Ar)}}}function TF(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(o){return!!(o&&o instanceof at.app.App)}}}function no(o){return{name:o?o+"Credential":"credential",K:o?"a valid "+o+" credential":"a valid credential",optional:!1,M:function(u){if(!u)return!1;var f=!o||u.providerId===o;return!(!u.ka||!f)}}}function OT(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(o){return o?!!o.sb:!1}}}function _a(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(o){return!!(o&&o.providerId&&o.hasOwnProperty&&o.hasOwnProperty("isOAuthProvider"))}}}function am(o,u){return I(o)&&typeof o.type=="string"&&o.type===u&&typeof o.Ha=="function"}function xT(o){return I(o)&&typeof o.uid=="string"}function ah(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(o){return!(!o||typeof o.type!="string"||typeof o.verify!="function")}}}function Ee(o,u,f,d){return{name:f||"",K:o.K+" or "+u.K,optional:!!d,M:function(g){return o.M(g)||u.M(g)}}}function he(o,u){for(var f in u){var d=u[f].name;o[d]=kT(d,o[f],u[f].j)}}function PT(o,u){for(var f in u){var d=u[f].name;d!==f&&Object.defineProperty(o,d,{get:_t(function(g){return this[g]},f),set:_t(function(g,_,w,T){NT(g,[w],[T],!0),this[_]=T},d,f,u[f].kb),enumerable:!0})}}function Ie(o,u,f,d){o[u]=kT(u,f,d)}function kT(o,u,f){function d(){var w=Array.prototype.slice.call(arguments);return NT(g,f,w),u.apply(this,w)}if(!f)return u;var g=SF(o),_;for(_ in u)d[_]=u[_];for(_ in u.prototype)d.prototype[_]=u.prototype[_];return d}function SF(o){return o=o.split("."),o[o.length-1]}he(Ar.prototype,{jb:{name:"applyActionCode",j:[rt("code")]},Ra:{name:"checkActionCode",j:[rt("code")]},nb:{name:"confirmPasswordReset",j:[rt("code"),rt("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[rt("email"),rt("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[rt("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[rt("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Ee(Ne(),ya(),"nextOrObserver"),ya("opt_error",!0),ya("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Ee(Ne(),ya(),"nextOrObserver"),ya("opt_error",!0),ya("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[rt("email"),Ee(Ne("opt_actionCodeSettings",!0),ti(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[rt("email"),Ne("actionCodeSettings")]},xb:{name:"setPersistence",j:[rt("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[no()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[no()]},Tc:{name:"signInWithCustomToken",j:[rt("token")]},Uc:{name:"signInWithEmailAndPassword",j:[rt("email"),rt("password")]},Vc:{name:"signInWithEmailLink",j:[rt("email"),rt("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[rt("phoneNumber"),ah()]},Xc:{name:"signInWithPopup",j:[_a()]},Yc:{name:"signInWithRedirect",j:[_a()]},dd:{name:"updateCurrentUser",j:[Ee(function(o){return{name:"user",K:"an instance of Firebase User",optional:!!o,M:function(u){return!!(u&&u instanceof Jn)}}}(),ti(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[rt(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[rt("url"),Ne("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[rt("code")]}}),PT(Ar.prototype,{lc:{name:"languageCode",kb:Ee(rt(),ti(),"languageCode")},ti:{name:"tenantId",kb:Ee(rt(),ti(),"tenantId")}}),Ar.Persistence=fa,Ar.Persistence.LOCAL="local",Ar.Persistence.SESSION="session",Ar.Persistence.NONE="none",he(Jn.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[sm("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[sm("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[no()]},qb:{name:"linkWithCredential",j:[no()]},Dc:{name:"linkWithPhoneNumber",j:[rt("phoneNumber"),ah()]},Ec:{name:"linkWithPopup",j:[_a()]},Fc:{name:"linkWithRedirect",j:[_a()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[no()]},tb:{name:"reauthenticateWithCredential",j:[no()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[rt("phoneNumber"),ah()]},Nc:{name:"reauthenticateWithPopup",j:[_a()]},Oc:{name:"reauthenticateWithRedirect",j:[_a()]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Ee(Ne("opt_actionCodeSettings",!0),ti(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[rt(null,!0)]},cd:{name:"unlink",j:[rt("provider")]},Bb:{name:"updateEmail",j:[rt("email")]},Cb:{name:"updatePassword",j:[rt("password")]},ed:{name:"updatePhoneNumber",j:[no("phone")]},Db:{name:"updateProfile",j:[Ne("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[rt("email"),Ee(Ne("opt_actionCodeSettings",!0),ti(null,!0),"opt_actionCodeSettings",!0)]}}),he(ma.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),he(Sc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),he(xt.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),PT(JI.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:sm("appVerificationDisabledForTesting")}}),he(Sg.prototype,{confirm:{name:"confirm",j:[rt("verificationCode")]}}),Ie(sa,"fromJSON",function(o){o=typeof o=="string"?JSON.parse(o):o;for(var u,f=[KD,QD,YD,zD],d=0;d<f.length;d++)if(u=f[d](o))return u;return null},[Ee(rt(),Ne(),"json")]),Ie(fr,"credential",function(o,u){return new Zi(o,u)},[rt("email"),rt("password")]),he(Zi.prototype,{w:{name:"toJSON",j:[rt(null,!0)]}}),he(Jo.prototype,{Ca:{name:"addScope",j:[rt("scope")]},Ka:{name:"setCustomParameters",j:[Ne("customOAuthParameters")]}}),Ie(Jo,"credential",PE,[Ee(rt(),Ne(),"token")]),Ie(fr,"credentialWithLink",ME,[rt("email"),rt("emailLink")]),he(Zo.prototype,{Ca:{name:"addScope",j:[rt("scope")]},Ka:{name:"setCustomParameters",j:[Ne("customOAuthParameters")]}}),Ie(Zo,"credential",kE,[Ee(rt(),Ne(),"token")]),he(ts.prototype,{Ca:{name:"addScope",j:[rt("scope")]},Ka:{name:"setCustomParameters",j:[Ne("customOAuthParameters")]}}),Ie(ts,"credential",DE,[Ee(rt(),Ee(Ne(),ti()),"idToken"),Ee(rt(),ti(),"accessToken",!0)]),he(ua.prototype,{Ka:{name:"setCustomParameters",j:[Ne("customOAuthParameters")]}}),Ie(ua,"credential",LE,[Ee(rt(),Ne(),"token"),rt("secret",!0)]),he(Xn.prototype,{Ca:{name:"addScope",j:[rt("scope")]},credential:{name:"credential",j:[Ee(rt(),Ee(Ne(),ti()),"optionsOrIdToken"),Ee(rt(),ti(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Ne("customOAuthParameters")]}}),he(bi.prototype,{w:{name:"toJSON",j:[rt(null,!0)]}}),he(Yo.prototype,{w:{name:"toJSON",j:[rt(null,!0)]}}),Ie(Ei,"credential",FE,[rt("verificationId"),rt("verificationCode")]),he(Ei.prototype,{fb:{name:"verifyPhoneNumber",j:[Ee(rt(),function(o,u){return{name:o||"phoneInfoOptions",K:"valid phone info options",optional:!!u,M:function(f){return f?f.session&&f.phoneNumber?am(f.session,oc)&&typeof f.phoneNumber=="string":f.session&&f.multiFactorHint?am(f.session,xf)&&xT(f.multiFactorHint):f.session&&f.multiFactorUid?am(f.session,xf)&&typeof f.multiFactorUid=="string":f.phoneNumber?typeof f.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),ah()]}}),he(to.prototype,{w:{name:"toJSON",j:[rt(null,!0)]}}),he(O.prototype,{toJSON:{name:"toJSON",j:[rt(null,!0)]}}),he(ac.prototype,{toJSON:{name:"toJSON",j:[rt(null,!0)]}}),he(Mv.prototype,{toJSON:{name:"toJSON",j:[rt(null,!0)]}}),he(Ng.prototype,{toJSON:{name:"toJSON",j:[rt(null,!0)]}}),he(Cg.prototype,{Rc:{name:"resolveSignIn",j:[OT()]}}),he(Og.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[OT(),rt("displayName",!0)]},bd:{name:"unenroll",j:[Ee({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:xT},rt(),"multiFactorInfoIdentifier")]}}),he(om.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Ie(Tv,"parseLink",dE,[rt("link")]),Ie(Jg,"assertion",function(o){return new rT(o)},[no("phone")]),function(){if(typeof at<"u"&&at.INTERNAL&&at.INTERNAL.registerComponent){var o={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Tf,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Iv,VERIFY_AND_CHANGE_EMAIL:rc,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Ar,AuthCredential:sa,Error:O};Ie(o,"EmailAuthProvider",fr,[]),Ie(o,"FacebookAuthProvider",Jo,[]),Ie(o,"GithubAuthProvider",Zo,[]),Ie(o,"GoogleAuthProvider",ts,[]),Ie(o,"TwitterAuthProvider",ua,[]),Ie(o,"OAuthProvider",Xn,[rt("providerId")]),Ie(o,"SAMLAuthProvider",xE,[rt("providerId")]),Ie(o,"PhoneAuthProvider",Ei,[IF()]),Ie(o,"RecaptchaVerifier",om,[Ee(rt(),EF(),"recaptchaContainer"),Ne("recaptchaParameters",!0),TF()]),Ie(o,"ActionCodeURL",Tv,[]),Ie(o,"PhoneMultiFactorGenerator",Jg,[]),at.INTERNAL.registerComponent({name:"auth",instanceFactory:function(u){return u=u.getProvider("app").getImmediate(),new Ar(u)},multipleInstances:!1,serviceProps:o,instantiationMode:"LAZY",type:"PUBLIC"}),at.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(u){return u=u.getProvider("auth").getImmediate(),{getUid:U(u.getUid,u),getToken:U(u.nc,u),addAuthTokenListener:U(u.cc,u),removeAuthTokenListener:U(u.Pc,u)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),at.registerVersion("@firebase/auth","0.16.3"),at.INTERNAL.extendNamespace({User:Jn})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e3=function(){function e(t){this.domStorage_=t,this.prefix_="firebase:"}return e.prototype.set=function(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ue(n))},e.prototype.get=function(t){var n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:ll(n)},e.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},e.prototype.prefixedName_=function(t){return this.prefix_+t},e.prototype.toString=function(){return this.domStorage_.toString()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var n3=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n},e.prototype.get=function(t){return $n(this.cache_,t)?this.cache_[t]:null},e.prototype.remove=function(t){delete this.cache_[t]},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kN=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new e3(t)}}catch{}return new n3},gs=kN("localStorage"),Ry=kN("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ha=new Cu("@firebase/database"),DN=function(){var e=1;return function(){return e++}}(),LN=function(e){var t=I4(e),n=new _4;n.update(t);var r=n.digest();return B_.encodeByteArray(r)},Ul=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?n+=Ul.apply(null,i):typeof i=="object"?n+=Ue(i):n+=i,n+=" "}return n},Is=null,kS=!0,MN=function(e,t){K(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(Ha.logLevel=Rt.VERBOSE,Is=Ha.log.bind(Ha),t&&Ry.set("logging_enabled",!0)):typeof e=="function"?Is=e:(Is=null,Ry.remove("logging_enabled"))},sn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(kS===!0&&(kS=!1,Is===null&&Ry.get("logging_enabled")===!0&&MN(!0)),Is){var n=Ul.apply(null,e);Is(n)}},jl=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];sn.apply(void 0,Wi([e],t))}},Oy=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+Ul.apply(void 0,Wi(e));Ha.error(n)},si=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+Ul.apply(void 0,Wi(e));throw Ha.error(n),new Error(n)},vn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+Ul.apply(void 0,Wi(e));Ha.warn(n)},r3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&vn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Jp=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},i3=function(e){if(document.readyState==="complete")e();else{var t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ji="[MIN_NAME]",hi="[MAX_NAME]",Vs=function(e,t){if(e===t)return 0;if(e===ji||t===hi)return-1;if(t===ji||e===hi)return 1;var n=ep(e),r=ep(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1},o3=function(e,t){return e===t?0:e<t?-1:1},Nc=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ue(t))},K_=function(e){if(typeof e!="object"||e===null)return Ue(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)i!==0&&(r+=","),r+=Ue(t[i]),r+=":",r+=K_(e[t[i]]);return r+="}",r},FN=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function je(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var UN=function(e){K(!Jp(e),"Invalid JSON number");var t=11,n=52,r=(1<<t-1)-1,i,s,a,c,l;e===0?(s=0,a=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(e)/Math.LN2),r),s=c+r,a=Math.round(e*Math.pow(2,n-c)-Math.pow(2,n))):(s=0,a=Math.round(e/Math.pow(2,1-r-n))));var h=[];for(l=n;l;l-=1)h.push(a%2?1:0),a=Math.floor(a/2);for(l=t;l;l-=1)h.push(s%2?1:0),s=Math.floor(s/2);h.push(i?1:0),h.reverse();var p=h.join(""),v="";for(l=0;l<64;l+=8){var m=parseInt(p.substr(l,8),2).toString(16);m.length===1&&(m="0"+m),v=v+m}return v.toLowerCase()},s3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},a3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},u3=function(e,t){var n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r},c3=new RegExp("^-?(0*)\\d{1,10}$"),jN=-2147483648,Q_=2147483647,ep=function(e){if(c3.test(e)){var t=Number(e);if(t>=jN&&t<=Q_)return t}return null},Da=function(e){try{e()}catch(t){setTimeout(function(){var n=t.stack||"";throw vn("Exception was thrown by user callback.",n),t},Math.floor(0))}},l3=function(){var e=typeof window=="object"&&window.navigator&&window.navigator.userAgent||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},zc=function(e,t){var n=setTimeout(e,t);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et=function(){function e(t,n){if(n===void 0){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!1,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var t="",n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"},e.prototype.toUrlEncodedString=function(){for(var t="",n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(this.pieces_[n])));return t||"/"},e.prototype.slice=function(t){return t===void 0&&(t=0),this.pieces_.slice(this.pieceNum_+t)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)},e.prototype.child=function(t){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(t instanceof e)for(var r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else for(var i=t.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var r=t.getFront(),i=n.getFront();if(r===null)return n;if(r===i)return e.relativePath(t.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")},e.comparePaths=function(t,n){for(var r=t.slice(),i=n.slice(),s=0;s<r.length&&s<i.length;s++){var a=Vs(r[s],i[s]);if(a!==0)return a}return r.length===i.length?0:r.length<i.length?-1:1},e.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var n=this.pieceNum_,r=t.pieceNum_;n<=this.pieces_.length;n++,r++)if(this.pieces_[n]!==t.pieces_[r])return!1;return!0},e.prototype.contains=function(t){var n=this.pieceNum_,r=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;n<this.pieces_.length;){if(this.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0},e}(),f3=function(){function e(t,n){this.errorPrefix_=n,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Mh(this.parts_[r]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),e.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Mh(t),this.checkValid_()},e.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Mh(t),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return this.parts_.length===0?"":"in property '"+this.parts_.join(".")+"'"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y_="5",VN="v",BN="s",qN="r",HN="f",GN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,WN="ls",h3="p",$N="websocket",zN="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X_=function(){function e(t,n,r,i,s,a,c){s===void 0&&(s=!1),a===void 0&&(a=""),c===void 0&&(c=!1),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=c,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=gs.get("host:"+t)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},e.prototype.isCacheableHost=function(){return this.internalHost.substr(0,2)==="s-"},e.prototype.isDemoHost=function(){return this.domain==="firebaseio-demo.com"},e.prototype.isCustomHost=function(){return this.domain!=="firebaseio.com"&&this.domain!=="firebaseio-demo.com"},e.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&gs.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(t,n){K(typeof t=="string","typeof type must == string"),K(typeof n=="object","typeof params must == object");var r;if(t===$N)r=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else if(t===zN)r=(this.secure?"https://":"http://")+this.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);this.needsQueryParam()&&(n.ns=this.namespace);var i=[];return je(n,function(s,a){i.push(s+"="+a)}),r+i.join("&")},e.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},e.prototype.toURLString=function(){var t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+n},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p3(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function d3(e){var t,n,r={};e.charAt(0)==="?"&&(e=e.substring(1));try{for(var i=Te(e.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(a.length!==0){var c=a.split("=");c.length===2?r[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):vn("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}var xy=function(e,t){var n=v3(e),r=n.namespace;n.domain==="firebase.com"&&si(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&si("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||r3();var i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new X_(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new et(n.pathString)}},v3=function(e){var t="",n="",r="",i="",s="",a=!0,c="https",l=443;if(typeof e=="string"){var h=e.indexOf("//");h>=0&&(c=e.substring(0,h-1),e=e.substring(h+2));var p=e.indexOf("/");p===-1&&(p=e.length);var v=e.indexOf("?");v===-1&&(v=e.length),t=e.substring(0,Math.min(p,v)),p<v&&(i=p3(e.substring(p,v)));var m=d3(e.substring(Math.min(e.length,v)));h=t.indexOf(":"),h>=0?(a=c==="https"||c==="wss",l=parseInt(t.substring(h+1),10)):h=t.length;var y=t.slice(0,h);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{var b=t.indexOf(".");r=t.substring(0,b).toLowerCase(),n=t.substring(b+1),s=r}"ns"in m&&(s=m.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:c,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var g3=/[\[\].#$\/\u0000-\u001F\u007F]/,m3=/[\[\].#$\u0000-\u001F\u007F]/,_m=10*1024*1024,Zp=function(e){return typeof e=="string"&&e.length!==0&&!g3.test(e)},KN=function(e){return typeof e=="string"&&e.length!==0&&!m3.test(e)},y3=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),KN(e)},fl=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Jp(e)||e&&typeof e=="object"&&$n(e,".sv")},oi=function(e,t,n,r,i){i&&n===void 0||hl(yr(e,t,i),n,r)},hl=function(e,t,n){var r=n instanceof et?new f3(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+r.toErrorString());if(typeof t=="function")throw new Error(e+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(Jp(t))throw new Error(e+"contains "+t.toString()+" "+r.toErrorString());if(typeof t=="string"&&t.length>_m/3&&Mh(t)>_m)throw new Error(e+"contains a string greater than "+_m+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){var i=!1,s=!1;if(je(t,function(a,c){if(a===".value")i=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!Zp(a)))throw new Error(e+" contains an invalid key ("+a+") "+r.toErrorString()+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);r.push(a),hl(e,c,r),r.pop()}),i&&s)throw new Error(e+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},_3=function(e,t){var n,r;for(n=0;n<t.length;n++){r=t[n];for(var i=r.slice(),s=0;s<i.length;s++)if(!(i[s]===".priority"&&s===i.length-1)){if(!Zp(i[s]))throw new Error(e+"contains an invalid key ("+i[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(et.comparePaths);var a=null;for(n=0;n<t.length;n++){if(r=t[n],a!==null&&a.contains(r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},QN=function(e,t,n,r,i){if(!(i&&n===void 0)){var s=yr(e,t,i);if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];je(n,function(c,l){var h=new et(c);if(hl(s,l,r.child(h)),h.getBack()===".priority"&&!fl(l))throw new Error(s+"contains an invalid value for '"+h.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(h)}),_3(s,a)}},Py=function(e,t,n,r){if(!(r&&n===void 0)){if(Jp(n))throw new Error(yr(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fl(n))throw new Error(yr(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},wm=function(e,t,n,r){if(!(r&&n===void 0))switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(yr(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Rc=function(e,t,n,r){if(!(r&&n===void 0)&&!Zp(n))throw new Error(yr(e,t,r)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},pl=function(e,t,n,r){if(!(r&&n===void 0)&&!KN(n))throw new Error(yr(e,t,r)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},w3=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),pl(e,t,n,r)},pr=function(e,t){if(t.getFront()===".info")throw new Error(e+" failed = Can't modify data under /.info/")},YN=function(e,t,n){var r=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!Zp(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!y3(r))throw new Error(yr(e,t,!1)+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},b3=function(e,t,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(yr(e,t,r)+"must be a boolean.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E3=function(){function e(t,n){this.repo_=t,this.path_=n}return e.prototype.cancel=function(t){mt("OnDisconnect.cancel",0,1,arguments.length),Qe("OnDisconnect.cancel",1,t,!0);var n=new Bn;return this.repo_.onDisconnectCancel(this.path_,n.wrapCallback(t)),n.promise},e.prototype.remove=function(t){mt("OnDisconnect.remove",0,1,arguments.length),pr("OnDisconnect.remove",this.path_),Qe("OnDisconnect.remove",1,t,!0);var n=new Bn;return this.repo_.onDisconnectSet(this.path_,null,n.wrapCallback(t)),n.promise},e.prototype.set=function(t,n){mt("OnDisconnect.set",1,2,arguments.length),pr("OnDisconnect.set",this.path_),oi("OnDisconnect.set",1,t,this.path_,!1),Qe("OnDisconnect.set",2,n,!0);var r=new Bn;return this.repo_.onDisconnectSet(this.path_,t,r.wrapCallback(n)),r.promise},e.prototype.setWithPriority=function(t,n,r){mt("OnDisconnect.setWithPriority",2,3,arguments.length),pr("OnDisconnect.setWithPriority",this.path_),oi("OnDisconnect.setWithPriority",1,t,this.path_,!1),Py("OnDisconnect.setWithPriority",2,n,!1),Qe("OnDisconnect.setWithPriority",3,r,!0);var i=new Bn;return this.repo_.onDisconnectSetWithPriority(this.path_,t,n,i.wrapCallback(r)),i.promise},e.prototype.update=function(t,n){if(mt("OnDisconnect.update",1,2,arguments.length),pr("OnDisconnect.update",this.path_),Array.isArray(t)){for(var r={},i=0;i<t.length;++i)r[""+i]=t[i];t=r,vn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}QN("OnDisconnect.update",1,t,this.path_,!1),Qe("OnDisconnect.update",2,n,!0);var s=new Bn;return this.repo_.onDisconnectUpdate(this.path_,t,s.wrapCallback(n)),s.promise},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I3=function(){function e(t,n){this.committed=t,this.snapshot=n}return e.prototype.toJSON=function(){return mt("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ky="-",XN="z",JN=786,T3=function(){var e=0,t=[];return function(n){var r=n===e;e=n;var i,s=new Array(8);for(i=7;i>=0;i--)s[i]=tu.charAt(n%64),n=Math.floor(n/64);K(n===0,"Cannot push at time == 0");var a=s.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)a+=tu.charAt(t[i]);return K(a.length===20,"nextPushId: Length should be 20."),a}}(),DS=function(e){if(e===""+Q_)return ky;var t=ep(e);if(t!=null)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<JN)return n.push(ky),n.join("");for(var i=n.length-1;i>=0&&n[i]===XN;)i--;if(i===-1)return hi;var s=n[i],a=tu.charAt(tu.indexOf(s)+1);return n[i]=a,n.slice(0,i+1).join("")},LS=function(e){if(e===""+jN)return ji;var t=ep(e);if(t!=null)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return n[n.length-1]===ky?n.length===1?""+Q_:(delete n[n.length-1],n.join("")):(n[n.length-1]=tu.charAt(tu.indexOf(n[n.length-1])-1),n.join("")+XN.repeat(JN-n.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt=function(){function e(t,n){this.name=t,this.node=n}return e.Wrap=function(t,n){return new e(t,n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var td=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(t,n){var r=new Dt(ji,t),i=new Dt(ji,n);return this.compare(r,i)!==0},e.prototype.minPost=function(){return Dt.MIN},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dh,ZN=function(e){J(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return dh},set:function(n){dh=n},enumerable:!1,configurable:!0}),t.prototype.compare=function(n,r){return Vs(n.name,r.name)},t.prototype.isDefinedOn=function(n){throw Su("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(n,r){return!1},t.prototype.minPost=function(){return Dt.MIN},t.prototype.maxPost=function(){return new Dt(hi,dh)},t.prototype.makePost=function(n,r){return K(typeof n=="string","KeyIndex indexValue must always be a string."),new Dt(n,dh)},t.prototype.toString=function(){return".key"},t}(td),ui=new ZN;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dy;function S3(e){Dy=e}var tR=function(e){return typeof e=="number"?"number:"+UN(e):"string:"+e},eR=function(e){if(e.isLeafNode()){var t=e.val();K(typeof t=="string"||typeof t=="number"||typeof t=="object"&&$n(t,".sv"),"Priority must be a string or number.")}else K(e===Dy||e.isEmpty(),"priority of unexpected type.");K(e===Dy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MS,eu=function(){function e(t,n){n===void 0&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),eR(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return MS},set:function(t){MS=t},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return t===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:t.getFront()===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(t,n){return null},e.prototype.updateImmediateChild=function(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=t.getFront();return r===null?n:n.isEmpty()&&r!==".priority"?this:(K(r!==".priority"||t.getLength()===1,".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(t,n){return!1},e.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+tR(this.priorityNode_.val())+":");var n=typeof this.value_;t+=n+":",n==="number"?t+=UN(this.value_):t+=this.value_,this.lazyHash_=LN(t)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(K(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(r);return K(i>=0,"Unknown leaf type: "+n),K(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nR,rR;function A3(e){nR=e}function C3(e){rR=e}var N3=function(e){J(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var i=n.node.getPriority(),s=r.node.getPriority(),a=i.compareTo(s);return a===0?Vs(n.name,r.name):a},t.prototype.isDefinedOn=function(n){return!n.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(n,r){return!n.getPriority().equals(r.getPriority())},t.prototype.minPost=function(){return Dt.MIN},t.prototype.maxPost=function(){return new Dt(hi,new eu("[PRIORITY-POST]",rR))},t.prototype.makePost=function(n,r){var i=nR(n);return new Dt(r,new eu("[PRIORITY-POST]",i))},t.prototype.toString=function(){return".priority"},t}(td),Jt=new N3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vh=function(){function e(t,n,r,i,s){s===void 0&&(s=null),this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];for(var a=1;!t.isEmpty();)if(t=t,a=n?r(t.key,n):1,i&&(a*=-1),a<0)this.isReverse_?t=t.left:t=t.right;else if(a===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}return e.prototype.getNext=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},e}(),Or=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??xi.EMPTY_NODE,this.right=s??xi.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,s=r(t,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return xi.EMPTY_NODE;var t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},e.prototype.remove=function(t,n){var r,i;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return xi.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},e.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},e.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),R3=function(){function e(){}return e.prototype.copy=function(t,n,r,i,s){return this},e.prototype.insert=function(t,n,r){return new Or(t,n,null)},e.prototype.remove=function(t,n){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),xi=function(){function e(t,n){n===void 0&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Or.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Or.BLACK,null,null))},e.prototype.get=function(t){for(var n,r=this.root_;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null},e.prototype.getPredecessorKey=function(t){for(var n,r=this.root_,i=null;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},e.prototype.getIterator=function(t){return new vh(this.root_,null,this.comparator_,!1,t)},e.prototype.getIteratorFrom=function(t,n){return new vh(this.root_,t,this.comparator_,!1,n)},e.prototype.getReverseIteratorFrom=function(t,n){return new vh(this.root_,t,this.comparator_,!0,n)},e.prototype.getReverseIterator=function(t){return new vh(this.root_,null,this.comparator_,!0,t)},e.EMPTY_NODE=new R3,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O3=Math.log(2),x3=function(){function e(t){var n=function(s){return parseInt(Math.log(s)/O3,10)},r=function(s){return parseInt(Array(s+1).join("1"),2)};this.count=n(t+1),this.current_=this.count-1;var i=r(this.count);this.bits_=t+1&i}return e.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},e}(),np=function(e,t,n,r){e.sort(t);var i=function(l,h){var p=h-l,v,m;if(p===0)return null;if(p===1)return v=e[l],m=n?n(v):v,new Or(m,v.node,Or.BLACK,null,null);var y=parseInt(p/2,10)+l,b=i(l,y),E=i(y+1,h);return v=e[y],m=n?n(v):v,new Or(m,v.node,Or.BLACK,b,E)},s=function(l){for(var h=null,p=null,v=e.length,m=function(C,P){var D=v-C,F=v;v-=C;var Q=i(D+1,F),U=e[D],_t=n?n(U):U;y(new Or(_t,U.node,P,null,Q))},y=function(C){h?(h.left=C,h=C):(p=C,h=C)},b=0;b<l.count;++b){var E=l.nextBitIsOne(),I=Math.pow(2,l.count-(b+1));E?m(I,Or.BLACK):(m(I,Or.BLACK),m(I,Or.RED))}return p},a=new x3(e.length),c=s(a);return new xi(r||t,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bm,Ea={},rp=function(){function e(t,n){this.indexes_=t,this.indexSet_=n}return Object.defineProperty(e,"Default",{get:function(){return K(Ea&&Jt,"ChildrenNode.ts has not been loaded"),bm=bm||new e({".priority":Ea},{".priority":Jt}),bm},enumerable:!1,configurable:!0}),e.prototype.get=function(t){var n=kr(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof xi?n:null},e.prototype.hasIndex=function(t){return $n(this.indexSet_,t.toString())},e.prototype.addIndex=function(t,n){K(t!==ui,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,s=n.getIterator(Dt.Wrap),a=s.getNext();a;)i=i||t.isDefinedOn(a.node),r.push(a),a=s.getNext();var c;i?c=np(r,t.getCompare()):c=Ea;var l=t.toString(),h=ee({},this.indexSet_);h[l]=t;var p=ee({},this.indexes_);return p[l]=c,new e(p,h)},e.prototype.addToIndexes=function(t,n){var r=this,i=Zh(this.indexes_,function(s,a){var c=kr(r.indexSet_,a);if(K(c,"Missing index implementation for "+a),s===Ea)if(c.isDefinedOn(t.node)){for(var l=[],h=n.getIterator(Dt.Wrap),p=h.getNext();p;)p.name!==t.name&&l.push(p),p=h.getNext();return l.push(t),np(l,c.getCompare())}else return Ea;else{var v=n.get(t.name),m=s;return v&&(m=m.remove(new Dt(t.name,v))),m.insert(t,t.node)}});return new e(i,this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){var r=Zh(this.indexes_,function(i){if(i===Ea)return i;var s=n.get(t.name);return s?i.remove(new Dt(t.name,s)):i});return new e(r,this.indexSet_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P3(e,t){return Vs(e.name,t.name)}function J_(e,t){return Vs(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oc,It=function(){function e(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&eR(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Oc||(Oc=new e(new xi(J_),null,rp.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Oc},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(t){if(t===".priority")return this.getPriority();var n=this.children_.get(t);return n===null?Oc:n},e.prototype.getChild=function(t){var n=t.getFront();return n===null?this:this.getImmediateChild(n).getChild(t.popFront())},e.prototype.hasChild=function(t){return this.children_.get(t)!==null},e.prototype.updateImmediateChild=function(t,n){if(K(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);var r=new Dt(t,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Oc:this.priorityNode_;return new e(i,a,s)},e.prototype.updateChild=function(t,n){var r=t.getFront();if(r===null)return n;K(t.getFront()!==".priority"||t.getLength()===1,".priority must be the last token in a path");var i=this.getImmediateChild(r).updateChild(t.popFront(),n);return this.updateImmediateChild(r,i)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,s=!0;if(this.forEachChild(Jt,function(l,h){n[l]=h.val(t),r++,s&&e.INTEGER_REGEXP_.test(l)?i=Math.max(i,Number(l)):s=!1}),!t&&s&&i<2*r){var a=[];for(var c in n)a[c]=n[c];return a}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.getPriority().isEmpty()||(t+="priority:"+tR(this.getPriority().val())+":"),this.forEachChild(Jt,function(n,r){var i=r.hash();i!==""&&(t+=":"+n+":"+i)}),this.lazyHash_=t===""?"":LN(t)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(t,n,r){var i=this.resolveIndex_(r);if(i){var s=i.getPredecessorKey(new Dt(t,n));return s?s.name:null}else return this.children_.getPredecessorKey(t)},e.prototype.getFirstChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.minKey();return r&&r.name}else return this.children_.minKey()},e.prototype.getFirstChild=function(t){var n=this.getFirstChildName(t);return n?new Dt(n,this.children_.get(n)):null},e.prototype.getLastChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.maxKey();return r&&r.name}else return this.children_.maxKey()},e.prototype.getLastChild=function(t){var n=this.getLastChildName(t);return n?new Dt(n,this.children_.get(n)):null},e.prototype.forEachChild=function(t,n){var r=this.resolveIndex_(t);return r?r.inorderTraversal(function(i){return n(i.name,i.node)}):this.children_.inorderTraversal(n)},e.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},e.prototype.getIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,function(a){return a});for(var i=this.children_.getIteratorFrom(t.name,Dt.Wrap),s=i.peek();s!=null&&n.compare(s,t)<0;)i.getNext(),s=i.peek();return i},e.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},e.prototype.getReverseIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,function(a){return a});for(var i=this.children_.getReverseIteratorFrom(t.name,Dt.Wrap),s=i.peek();s!=null&&n.compare(s,t)>0;)i.getNext(),s=i.peek();return i},e.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Vl?-1:0},e.prototype.withIndex=function(t){if(t===ui||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(t){return t===ui||this.indexMap_.hasIndex(t)},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){for(var r=this.getIterator(Jt),i=n.getIterator(Jt),s=r.getNext(),a=i.getNext();s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=i.getNext()}return s===null&&a===null}else return!1;else return!1},e.prototype.resolveIndex_=function(t){return t===ui?null:this.indexMap_.get(t.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),k3=function(e){J(t,e);function t(){return e.call(this,new xi(J_),It.EMPTY_NODE,rp.Default)||this}return t.prototype.compareTo=function(n){return n===this?0:1},t.prototype.equals=function(n){return n===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(n){return It.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(It),Vl=new k3;Object.defineProperties(Dt,{MIN:{value:new Dt(ji,It.EMPTY_NODE)},MAX:{value:new Dt(hi,Vl)}});ZN.__EMPTY_NODE=It.EMPTY_NODE;eu.__childrenNodeConstructor=It;S3(Vl);C3(Vl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var D3=!0;function pe(e,t){if(t===void 0&&(t=null),e===null)return It.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),K(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){var n=e;return new eu(n,pe(t))}if(!(e instanceof Array)&&D3){var r=[],i=!1,s=e;if(je(s,function(h,p){if(h.substring(0,1)!=="."){var v=pe(p);v.isEmpty()||(i=i||!v.getPriority().isEmpty(),r.push(new Dt(h,v)))}}),r.length===0)return It.EMPTY_NODE;var a=np(r,P3,function(h){return h.name},J_);if(i){var c=np(r,Jt.getCompare());return new It(a,pe(t),new rp({".priority":c},{".priority":Jt}))}else return new It(a,pe(t),rp.Default)}else{var l=It.EMPTY_NODE;return je(e,function(h,p){if($n(e,h)&&h.substring(0,1)!=="."){var v=pe(p);(v.isLeafNode()||!v.isEmpty())&&(l=l.updateImmediateChild(h,v))}}),l.updatePriority(pe(t))}}A3(pe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L3=function(e){J(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var i=n.node.compareTo(r.node);return i===0?Vs(n.name,r.name):i},t.prototype.isDefinedOn=function(n){return!0},t.prototype.indexedValueChanged=function(n,r){return!n.equals(r)},t.prototype.minPost=function(){return Dt.MIN},t.prototype.maxPost=function(){return Dt.MAX},t.prototype.makePost=function(n,r){var i=pe(n);return new Dt(r,i)},t.prototype.toString=function(){return".value"},t}(td),Ly=new L3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var My=function(e){J(t,e);function t(n){var r=e.call(this)||this;return r.indexPath_=n,K(!n.isEmpty()&&n.getFront()!==".priority","Can't create PathIndex with empty path or .priority key"),r}return t.prototype.extractChild=function(n){return n.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(n){return!n.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(n,r){var i=this.extractChild(n.node),s=this.extractChild(r.node),a=i.compareTo(s);return a===0?Vs(n.name,r.name):a},t.prototype.makePost=function(n,r){var i=pe(n),s=It.EMPTY_NODE.updateChild(this.indexPath_,i);return new Dt(r,s)},t.prototype.maxPost=function(){var n=It.EMPTY_NODE.updateChild(this.indexPath_,Vl);return new Dt(hi,n)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(td);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vo=function(){function e(t,n,r){this.node_=t,this.ref_=n,this.index_=r}return e.prototype.val=function(){return mt("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return mt("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return mt("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return mt("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){mt("DataSnapshot.child",0,1,arguments.length),t=String(t),pl("DataSnapshot.child",1,t,!1);var n=new et(t),r=this.ref_.child(n);return new e(this.node_.getChild(n),r,Jt)},e.prototype.hasChild=function(t){mt("DataSnapshot.hasChild",1,1,arguments.length),pl("DataSnapshot.hasChild",1,t,!1);var n=new et(t);return!this.node_.getChild(n).isEmpty()},e.prototype.getPriority=function(){return mt("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;if(mt("DataSnapshot.forEach",1,1,arguments.length),Qe("DataSnapshot.forEach",1,t,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(i,s){return t(new e(s,n.ref_.child(i),Jt))})},e.prototype.hasChildren=function(){return mt("DataSnapshot.hasChildren",0,0,arguments.length),this.node_.isLeafNode()?!1:!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return mt("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return mt("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iR=function(){function e(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return e.prototype.getPath=function(){var t=this.snapshot.getRef();return this.eventType==="value"?t.path:t.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Ue(this.snapshot.exportVal())},e}(),oR=function(){function e(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FS=function(){function e(t,n,r){this.callback_=t,this.cancelCallback_=n,this.context_=r}return e.prototype.respondsTo=function(t){return t==="value"},e.prototype.createEvent=function(t,n){var r=n.getQueryParams().getIndex();return new iR("value",this,new vo(t.snapshotNode,n.getRef(),r))},e.prototype.getEventRunner=function(t){var n=this.context_;if(t.getEventType()==="cancel"){K(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var r=this.cancelCallback_;return function(){r.call(n,t.error)}}else{var i=this.callback_;return function(){i.call(n,t.snapshot)}}},e.prototype.createCancelEvent=function(t,n){return this.cancelCallback_?new oR(this,t,n):null},e.prototype.matches=function(t){return t instanceof e?!t.callback_||!this.callback_?!0:t.callback_===this.callback_&&t.context_===this.context_:!1},e.prototype.hasAnyCallback=function(){return this.callback_!==null},e}(),US=function(){function e(t,n,r){this.callbacks_=t,this.cancelCallback_=n,this.context_=r}return e.prototype.respondsTo=function(t){var n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,$n(this.callbacks_,n)},e.prototype.createCancelEvent=function(t,n){return this.cancelCallback_?new oR(this,t,n):null},e.prototype.createEvent=function(t,n){K(t.childName!=null,"Child events should have a childName.");var r=n.getRef().child(t.childName),i=n.getQueryParams().getIndex();return new iR(t.type,this,new vo(t.snapshotNode,r,i),t.prevName)},e.prototype.getEventRunner=function(t){var n=this.context_;if(t.getEventType()==="cancel"){K(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var r=this.cancelCallback_;return function(){r.call(n,t.error)}}else{var i=this.callbacks_[t.eventType];return function(){i.call(n,t.snapshot,t.prevName)}}},e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var r=Object.keys(t.callbacks_),i=Object.keys(this.callbacks_),s=r.length,a=i.length;if(s===a)if(s===1){var c=r[0],l=i[0];return l===c&&(!t.callbacks_[c]||!this.callbacks_[l]||t.callbacks_[c]===this.callbacks_[l])}else return i.every(function(h){return t.callbacks_[h]===n.callbacks_[h]})}}return!1},e.prototype.hasAnyCallback=function(){return this.callbacks_!==null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Em,Z_=function(){function e(t,n,r,i){this.repo=t,this.path=n,this.queryParams_=r,this.orderByCalled_=i}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return K(Em,"Reference.ts has not been loaded"),Em},set:function(t){Em=t},enumerable:!1,configurable:!0}),e.validateQueryEndpoints_=function(t){var n=null,r=null;if(t.hasStart()&&(n=t.getIndexStartValue()),t.hasEnd()&&(r=t.getIndexEndValue()),t.getIndex()===ui){var i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){var a=t.getIndexStartName();if(a!==ji)throw new Error(i);if(typeof n!="string")throw new Error(s)}if(t.hasEnd()){var c=t.getIndexEndName();if(c!==hi)throw new Error(i);if(typeof r!="string")throw new Error(s)}}else if(t.getIndex()===Jt){if(n!=null&&!fl(n)||r!=null&&!fl(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(K(t.getIndex()instanceof My||t.getIndex()===Ly,"unknown index type."),n!=null&&typeof n=="object"||r!=null&&typeof r=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},e.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(t){if(this.orderByCalled_===!0)throw new Error(t+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return mt("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,i){mt("Query.on",2,4,arguments.length),wm("Query.on",1,t,!1),Qe("Query.on",2,n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i);if(t==="value")this.onValueEvent(n,s.cancel,s.context);else{var a={};a[t]=n,this.onChildEvent(a,s.cancel,s.context)}return n},e.prototype.onValueEvent=function(t,n,r){var i=new FS(t,n||null,r||null);this.repo.addEventCallbackForQuery(this,i)},e.prototype.onChildEvent=function(t,n,r){var i=new US(t,n,r);this.repo.addEventCallbackForQuery(this,i)},e.prototype.off=function(t,n,r){mt("Query.off",0,3,arguments.length),wm("Query.off",1,t,!0),Qe("Query.off",2,n,!0),xS("Query.off",3,r,!0);var i=null,s=null;if(t==="value"){var a=n||null;i=new FS(a,null,r||null)}else t&&(n&&(s={},s[t]=n),i=new US(s,null,r||null));this.repo.removeEventCallbackForQuery(this,i)},e.prototype.get=function(){return this.repo.getValue(this)},e.prototype.once=function(t,n,r,i){var s=this;mt("Query.once",1,4,arguments.length),wm("Query.once",1,t,!1),Qe("Query.once",2,n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),c=!0,l=new Bn;l.promise.catch(function(){});var h=function(p){c&&(c=!1,s.off(t,h),n&&n.bind(a.context)(p),l.resolve(p))};return this.on(t,h,function(p){s.off(t,h),a.cancel&&a.cancel.bind(a.context)(p),l.reject(p)}),l.promise},e.prototype.limitToFirst=function(t){if(mt("Query.limitToFirst",1,1,arguments.length),typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(mt("Query.limitToLast",1,1,arguments.length),typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(mt("Query.orderByChild",1,1,arguments.length),t==="$key")throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if(t==="$priority")throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if(t==="$value")throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');pl("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new et(t);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new My(n),i=this.queryParams_.orderBy(r);return e.validateQueryEndpoints_(i),new e(this.repo,this.path,i,!0)},e.prototype.orderByKey=function(){mt("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(ui);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){mt("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Jt);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){mt("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(Ly);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){t===void 0&&(t=null),mt("Query.startAt",0,2,arguments.length),oi("Query.startAt",1,t,this.path,!0),Rc("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return t===void 0&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.startAfter=function(t,n){t===void 0&&(t=null),mt("Query.startAfter",0,2,arguments.length),oi("Query.startAfter",1,t,this.path,!1),Rc("Query.startAfter",2,n,!0);var r=this.queryParams_.startAfter(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){t===void 0&&(t=null),mt("Query.endAt",0,2,arguments.length),oi("Query.endAt",1,t,this.path,!0),Rc("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endBefore=function(t,n){t===void 0&&(t=null),mt("Query.endBefore",0,2,arguments.length),oi("Query.endBefore",1,t,this.path,!1),Rc("Query.endBefore",2,n,!0);var r=this.queryParams_.endBefore(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(t,n){if(mt("Query.equalTo",1,2,arguments.length),oi("Query.equalTo",1,t,this.path,!1),Rc("Query.equalTo",2,n,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,n).endAt(t,n)},e.prototype.toString=function(){return mt("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return mt("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var t=this.queryObject(),n=K_(t);return n==="{}"?"default":n},e.prototype.isEqual=function(t){if(mt("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===t.repo,i=this.path.equals(t.path),s=this.queryIdentifier()===t.queryIdentifier();return r&&i&&s},e.getCancelAndContextArgs_=function(t,n,r){var i={cancel:null,context:null};if(n&&r)i.cancel=n,Qe(t,3,i.cancel,!0),i.context=r,xS(t,4,i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(yr(t,3,!0)+" must either be a cancel callback or a context object.");return i},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var M3=function(){function e(t){this.node_=t}return e.prototype.getImmediateChild=function(t){var n=this.node_.getImmediateChild(t);return new e(n)},e.prototype.node=function(){return this.node_},e}(),F3=function(){function e(t,n){this.syncTree_=t,this.path_=n}return e.prototype.getImmediateChild=function(t){var n=this.path_.child(t);return new e(this.syncTree_,n)},e.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},e}(),U3=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},jS=function(e,t,n){if(!e||typeof e!="object")return e;if(K(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return j3(e[".sv"],t,n);if(typeof e[".sv"]=="object")return V3(e[".sv"],t);K(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},j3=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:K(!1,"Unexpected server value: "+e)}},V3=function(e,t,n){e.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;typeof r!="number"&&K(!1,"Unexpected increment value: "+r);var i=t.node();if(K(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i,a=s.getValue();return typeof a!="number"?r:a+r},VS=function(e,t,n,r){return tw(t,new F3(n,e),r)},Im=function(e,t,n){return tw(e,new M3(t),n)};function tw(e,t,n){var r=e.getPriority().val(),i=jS(r,t.getImmediateChild(".priority"),n),s;if(e.isLeafNode()){var a=e,c=jS(a.getValue(),t,n);return c!==a.getValue()||i!==a.getPriority().val()?new eu(c,pe(i)):e}else{var l=e;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new eu(i))),l.forEachChild(Jt,function(h,p){var v=tw(p,t.getImmediateChild(h),n);v!==p&&(s=s.updateImmediateChild(h,v))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tm=function(){function e(){this.value=null,this.children=new Map}return e.prototype.find=function(t){if(this.value!=null)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var n=t.getFront();if(t=t.popFront(),this.children.has(n)){var r=this.children.get(n);return r.find(t)}else return null}else return null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value=n,this.children.clear();else if(this.value!==null)this.value=this.value.updateChild(t,n);else{var r=t.getFront();this.children.has(r)||this.children.set(r,new e);var i=this.children.get(r);t=t.popFront(),i.remember(t,n)}},e.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(this.value!==null){if(this.value.isLeafNode())return!1;var n=this.value;this.value=null;var r=this;return n.forEachChild(Jt,function(a,c){r.remember(new et(a),c)}),this.forget(t)}else if(this.children.size>0){var i=t.getFront();if(t=t.popFront(),this.children.has(i)){var s=this.children.get(i).forget(t);s&&this.children.delete(i)}return this.children.size===0}else return!0},e.prototype.forEachTree=function(t,n){this.value!==null?n(t,this.value):this.forEachChild(function(r,i){var s=new et(t.toString()+"/"+r);i.forEachTree(s,n)})},e.prototype.forEachChild=function(t){this.children.forEach(function(n,r){t(r,n)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dr;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Dr||(Dr={}));var Ci=function(){function e(t,n,r,i){this.fromUser=t,this.fromServer=n,this.queryId=r,this.tagged=i,K(!i||n,"Tagged queries must be from server.")}return e.user=function(){return new e(!0,!1,null,!1)},e.server=function(){return new e(!1,!0,null,!1)},e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B3=function(){function e(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Dr.ACK_USER_WRITE,this.source=Ci.user()}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new et(t));return new e(et.Empty,n,this.revert)}else return K(this.path.getFront()===t,"operationForChild called for unrelated child."),new e(this.path.popFront(),this.affectedTree,this.revert)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sm,q3=function(){return Sm||(Sm=new xi(o3)),Sm},nr=function(){function e(t,n){n===void 0&&(n=q3()),this.value=t,this.children=n}return e.fromObject=function(t){var n=new e(null);return je(t,function(r,i){n=n.set(new et(r),i)}),n},e.prototype.isEmpty=function(){return this.value===null&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(t,n){if(this.value!=null&&n(this.value))return{path:et.Empty,value:this.value};if(t.isEmpty())return null;var r=t.getFront(),i=this.children.get(r);if(i!==null){var s=i.findRootMostMatchingPathAndValue(t.popFront(),n);if(s!=null){var a=new et(r).child(s.path);return{path:a,value:s.value}}else return null}else return null},e.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),r=this.children.get(n);return r!==null?r.subtree(t.popFront()):new e(null)},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var r=t.getFront(),i=this.children.get(r)||new e(null),s=i.set(t.popFront(),n),a=this.children.insert(r,s);return new e(this.value,a)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?new e(null):new e(null,this.children);var n=t.getFront(),r=this.children.get(n);if(r){var i=r.remove(t.popFront()),s=void 0;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new e(null):new e(this.value,s)}else return this},e.prototype.get=function(t){if(t.isEmpty())return this.value;var n=t.getFront(),r=this.children.get(n);return r?r.get(t.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var r=t.getFront(),i=this.children.get(r)||new e(null),s=i.setTree(t.popFront(),n),a=void 0;return s.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,s),new e(this.value,a)},e.prototype.fold=function(t){return this.fold_(et.Empty,t)},e.prototype.fold_=function(t,n){var r={};return this.children.inorderTraversal(function(i,s){r[i]=s.fold_(t.child(i),n)}),n(t,this.value,r)},e.prototype.findOnPath=function(t,n){return this.findOnPath_(t,et.Empty,n)},e.prototype.findOnPath_=function(t,n,r){var i=this.value?r(n,this.value):!1;if(i)return i;if(t.isEmpty())return null;var s=t.getFront(),a=this.children.get(s);return a?a.findOnPath_(t.popFront(),n.child(s),r):null},e.prototype.foreachOnPath=function(t,n){return this.foreachOnPath_(t,et.Empty,n)},e.prototype.foreachOnPath_=function(t,n,r){if(t.isEmpty())return this;this.value&&r(n,this.value);var i=t.getFront(),s=this.children.get(i);return s?s.foreachOnPath_(t.popFront(),n.child(i),r):new e(null)},e.prototype.foreach=function(t){this.foreach_(et.Empty,t)},e.prototype.foreach_=function(t,n){this.children.inorderTraversal(function(r,i){i.foreach_(t.child(r),n)}),this.value&&n(t,this.value)},e.prototype.foreachChild=function(t){this.children.inorderTraversal(function(n,r){r.value&&t(n,r.value)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BS=function(){function e(t,n){this.source=t,this.path=n,this.type=Dr.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,et.Empty):new e(this.source,this.path.popFront())},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uh=function(){function e(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Dr.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,et.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Am=function(){function e(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Dr.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new et(t));return n.isEmpty()?null:n.value?new Uh(this.source,et.Empty,n.value):new e(this.source,et.Empty,n)}else return K(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var No=function(){function e(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var n=t.getFront();return this.isCompleteForChild(n)},e.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},e.prototype.getNode=function(){return this.node_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sR=function(){function e(t,n){this.eventCache_=t,this.serverCache_=n}return e.prototype.updateEventSnap=function(t,n,r){return new e(new No(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new No(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(e){return{type:"value",snapshotNode:e}}function nu(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function dl(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function vl(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function H3(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ew=function(){function e(t){this.index_=t}return e.prototype.updateChild=function(t,n,r,i,s,a){K(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var c=t.getImmediateChild(n);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?t.hasChild(n)?a.trackChildChange(dl(n,c)):K(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?a.trackChildChange(nu(n,r)):a.trackChildChange(vl(n,r,c))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)},e.prototype.updateFullNode=function(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(Jt,function(i,s){n.hasChild(i)||r.trackChildChange(dl(i,s))}),n.isLeafNode()||n.forEachChild(Jt,function(i,s){if(t.hasChild(i)){var a=t.getImmediateChild(i);a.equals(s)||r.trackChildChange(vl(i,s,a))}else r.trackChildChange(nu(i,s))})),n.withIndex(this.index_)},e.prototype.updatePriority=function(t,n){return t.isEmpty()?It.EMPTY_NODE:t.updatePriority(n)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G3=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(t){var n=t.type,r=t.childName;K(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),K(r!==".priority","Only non-priority child changes can be tracked.");var i=this.changeMap.get(r);if(i){var s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,vl(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,dl(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,nu(r,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,vl(r,t.snapshotNode,i.oldSnap));else throw Su("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W3=function(){function e(){}return e.prototype.getCompleteChild=function(t){return null},e.prototype.getChildAfterChild=function(t,n,r){return null},e}(),qS=new W3,Cm=function(){function e(t,n,r){r===void 0&&(r=null),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return e.prototype.getCompleteChild=function(t){var n=this.viewCache_.getEventCache();if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);var r=this.optCompleteServerCache_!=null?new No(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,r)},e.prototype.getChildAfterChild=function(t,n,r){var i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),s=this.writes_.calcIndexedSlice(i,n,1,r,t);return s.length===0?null:s[0]},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $3=function(){function e(t,n){this.viewCache=t,this.changes=n}return e}(),z3=function(){function e(t){this.filter_=t}return e.prototype.assertIndexed=function(t){K(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),K(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,r,i){var s=new G3,a,c;if(n.type===Dr.OVERWRITE){var l=n;l.source.fromUser?a=this.applyUserOverwrite_(t,l.path,l.snap,r,i,s):(K(l.source.fromServer,"Unknown source."),c=l.source.tagged||t.getServerCache().isFiltered()&&!l.path.isEmpty(),a=this.applyServerOverwrite_(t,l.path,l.snap,r,i,c,s))}else if(n.type===Dr.MERGE){var h=n;h.source.fromUser?a=this.applyUserMerge_(t,h.path,h.children,r,i,s):(K(h.source.fromServer,"Unknown source."),c=h.source.tagged||t.getServerCache().isFiltered(),a=this.applyServerMerge_(t,h.path,h.children,r,i,c,s))}else if(n.type===Dr.ACK_USER_WRITE){var p=n;p.revert?a=this.revertUserWrite_(t,p.path,r,i,s):a=this.ackUserWrite_(t,p.path,p.affectedTree,r,i,s)}else if(n.type===Dr.LISTEN_COMPLETE)a=this.listenComplete_(t,n.path,r,s);else throw Su("Unknown operation type: "+n.type);var v=s.getChanges();return e.maybeAddValueEvent_(t,a,v),new $3(a,v)},e.maybeAddValueEvent_=function(t,n,r){var i=n.getEventCache();if(i.isFullyInitialized()){var s=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=t.getCompleteEventSnap();(r.length>0||!t.getEventCache().isFullyInitialized()||s&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&r.push(aR(n.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(t,n,r,i,s){var a=t.getEventCache();if(r.shadowingWrite(n)!=null)return t;var c=void 0,l=void 0;if(n.isEmpty())if(K(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var h=t.getCompleteServerSnap(),p=h instanceof It?h:It.EMPTY_NODE,v=r.calcCompleteEventChildren(p);c=this.filter_.updateFullNode(t.getEventCache().getNode(),v,s)}else{var m=r.calcCompleteEventCache(t.getCompleteServerSnap());c=this.filter_.updateFullNode(t.getEventCache().getNode(),m,s)}else{var y=n.getFront();if(y===".priority"){K(n.getLength()===1,"Can't have a priority with additional path components");var b=a.getNode();l=t.getServerCache().getNode();var E=r.calcEventCacheAfterServerOverwrite(n,b,l);E!=null?c=this.filter_.updatePriority(b,E):c=a.getNode()}else{var I=n.popFront(),C=void 0;if(a.isCompleteForChild(y)){l=t.getServerCache().getNode();var P=r.calcEventCacheAfterServerOverwrite(n,a.getNode(),l);P!=null?C=a.getNode().getImmediateChild(y).updateChild(I,P):C=a.getNode().getImmediateChild(y)}else C=r.calcCompleteChild(y,t.getServerCache());C!=null?c=this.filter_.updateChild(a.getNode(),y,C,I,i,s):c=a.getNode()}}return t.updateEventSnap(c,a.isFullyInitialized()||n.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(t,n,r,i,s,a,c){var l=t.getServerCache(),h,p=a?this.filter_:this.filter_.getIndexedFilter();if(n.isEmpty())h=p.updateFullNode(l.getNode(),r,null);else if(p.filtersNodes()&&!l.isFiltered()){var v=l.getNode().updateChild(n,r);h=p.updateFullNode(l.getNode(),v,null)}else{var m=n.getFront();if(!l.isCompleteForPath(n)&&n.getLength()>1)return t;var y=n.popFront(),b=l.getNode().getImmediateChild(m),E=b.updateChild(y,r);m===".priority"?h=p.updatePriority(l.getNode(),E):h=p.updateChild(l.getNode(),m,E,y,qS,null)}var I=t.updateServerSnap(h,l.isFullyInitialized()||n.isEmpty(),p.filtersNodes()),C=new Cm(i,I,s);return this.generateEventCacheAfterServerEvent_(I,n,i,C,c)},e.prototype.applyUserOverwrite_=function(t,n,r,i,s,a){var c=t.getEventCache(),l,h,p=new Cm(i,t,s);if(n.isEmpty())h=this.filter_.updateFullNode(t.getEventCache().getNode(),r,a),l=t.updateEventSnap(h,!0,this.filter_.filtersNodes());else{var v=n.getFront();if(v===".priority")h=this.filter_.updatePriority(t.getEventCache().getNode(),r),l=t.updateEventSnap(h,c.isFullyInitialized(),c.isFiltered());else{var m=n.popFront(),y=c.getNode().getImmediateChild(v),b=void 0;if(m.isEmpty())b=r;else{var E=p.getCompleteChild(v);E!=null?m.getBack()===".priority"&&E.getChild(m.parent()).isEmpty()?b=E:b=E.updateChild(m,r):b=It.EMPTY_NODE}if(y.equals(b))l=t;else{var I=this.filter_.updateChild(c.getNode(),v,b,m,p,a);l=t.updateEventSnap(I,c.isFullyInitialized(),this.filter_.filtersNodes())}}}return l},e.cacheHasChild_=function(t,n){return t.getEventCache().isCompleteForChild(n)},e.prototype.applyUserMerge_=function(t,n,r,i,s,a){var c=this,l=t;return r.foreach(function(h,p){var v=n.child(h);e.cacheHasChild_(t,v.getFront())&&(l=c.applyUserOverwrite_(l,v,p,i,s,a))}),r.foreach(function(h,p){var v=n.child(h);e.cacheHasChild_(t,v.getFront())||(l=c.applyUserOverwrite_(l,v,p,i,s,a))}),l},e.prototype.applyMerge_=function(t,n){return n.foreach(function(r,i){t=t.updateChild(r,i)}),t},e.prototype.applyServerMerge_=function(t,n,r,i,s,a,c){var l=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var h=t,p;n.isEmpty()?p=r:p=new nr(null).setTree(n,r);var v=t.getServerCache().getNode();return p.children.inorderTraversal(function(m,y){if(v.hasChild(m)){var b=t.getServerCache().getNode().getImmediateChild(m),E=l.applyMerge_(b,y);h=l.applyServerOverwrite_(h,new et(m),E,i,s,a,c)}}),p.children.inorderTraversal(function(m,y){var b=!t.getServerCache().isCompleteForChild(m)&&y.value==null;if(!v.hasChild(m)&&!b){var E=t.getServerCache().getNode().getImmediateChild(m),I=l.applyMerge_(E,y);h=l.applyServerOverwrite_(h,new et(m),I,i,s,a,c)}}),h},e.prototype.ackUserWrite_=function(t,n,r,i,s,a){if(i.shadowingWrite(n)!=null)return t;var c=t.getServerCache().isFiltered(),l=t.getServerCache();if(r.value!=null){if(n.isEmpty()&&l.isFullyInitialized()||l.isCompleteForPath(n))return this.applyServerOverwrite_(t,n,l.getNode().getChild(n),i,s,c,a);if(n.isEmpty()){var h=new nr(null);return l.getNode().forEachChild(ui,function(v,m){h=h.set(new et(v),m)}),this.applyServerMerge_(t,n,h,i,s,c,a)}else return t}else{var p=new nr(null);return r.foreach(function(v,m){var y=n.child(v);l.isCompleteForPath(y)&&(p=p.set(v,l.getNode().getChild(y)))}),this.applyServerMerge_(t,n,p,i,s,c,a)}},e.prototype.listenComplete_=function(t,n,r,i){var s=t.getServerCache(),a=t.updateServerSnap(s.getNode(),s.isFullyInitialized()||n.isEmpty(),s.isFiltered());return this.generateEventCacheAfterServerEvent_(a,n,r,qS,i)},e.prototype.revertUserWrite_=function(t,n,r,i,s){var a;if(r.shadowingWrite(n)!=null)return t;var c=new Cm(r,t,i),l=t.getEventCache().getNode(),h=void 0;if(n.isEmpty()||n.getFront()===".priority"){var p=void 0;if(t.getServerCache().isFullyInitialized())p=r.calcCompleteEventCache(t.getCompleteServerSnap());else{var v=t.getServerCache().getNode();K(v instanceof It,"serverChildren would be complete if leaf node"),p=r.calcCompleteEventChildren(v)}p=p,h=this.filter_.updateFullNode(l,p,s)}else{var m=n.getFront(),y=r.calcCompleteChild(m,t.getServerCache());y==null&&t.getServerCache().isCompleteForChild(m)&&(y=l.getImmediateChild(m)),y!=null?h=this.filter_.updateChild(l,m,y,n.popFront(),c,s):t.getEventCache().getNode().hasChild(m)?h=this.filter_.updateChild(l,m,It.EMPTY_NODE,n.popFront(),c,s):h=l,h.isEmpty()&&t.getServerCache().isFullyInitialized()&&(a=r.calcCompleteEventCache(t.getCompleteServerSnap()),a.isLeafNode()&&(h=this.filter_.updateFullNode(h,a,s)))}return a=t.getServerCache().isFullyInitialized()||r.shadowingWrite(et.Empty)!=null,t.updateEventSnap(h,a,this.filter_.filtersNodes())},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K3=function(){function e(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(t,n,r){var i=this,s=[],a=[];return t.forEach(function(c){c.type==="child_changed"&&i.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(H3(c.childName,c.snapshotNode))}),this.generateEventsForType_(s,"child_removed",t,r,n),this.generateEventsForType_(s,"child_added",t,r,n),this.generateEventsForType_(s,"child_moved",a,r,n),this.generateEventsForType_(s,"child_changed",t,r,n),this.generateEventsForType_(s,"value",t,r,n),s},e.prototype.generateEventsForType_=function(t,n,r,i,s){var a=this,c=r.filter(function(l){return l.type===n});c.sort(this.compareChanges_.bind(this)),c.forEach(function(l){var h=a.materializeSingleChange_(l,s);i.forEach(function(p){p.respondsTo(l.type)&&t.push(p.createEvent(h,a.query_))})})},e.prototype.materializeSingleChange_=function(t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},e.prototype.compareChanges_=function(t,n){if(t.childName==null||n.childName==null)throw Su("Should only compare child_ events.");var r=new Dt(t.childName,t.snapshotNode),i=new Dt(n.childName,n.snapshotNode);return this.index_.compare(r,i)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Q3=function(){function e(t,n){this.query_=t,this.eventRegistrations_=[];var r=this.query_.getQueryParams(),i=new ew(r.getIndex()),s=r.getNodeFilter();this.processor_=new z3(s);var a=n.getServerCache(),c=n.getEventCache(),l=i.updateFullNode(It.EMPTY_NODE,a.getNode(),null),h=s.updateFullNode(It.EMPTY_NODE,c.getNode(),null),p=new No(l,a.isFullyInitialized(),i.filtersNodes()),v=new No(h,c.isFullyInitialized(),s.filtersNodes());this.viewCache_=new sR(v,p),this.eventGenerator_=new K3(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},e.prototype.getCompleteServerCache=function(t){var n=this.viewCache_.getCompleteServerSnap();return n&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!n.getImmediateChild(t.getFront()).isEmpty())?n.getChild(t):null},e.prototype.isEmpty=function(){return this.eventRegistrations_.length===0},e.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},e.prototype.removeEventRegistration=function(t,n){var r=[];if(n){K(t==null,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(l){var h=l.createCancelEvent(n,i);h&&r.push(h)})}if(t){for(var s=[],a=0;a<this.eventRegistrations_.length;++a){var c=this.eventRegistrations_[a];if(!c.matches(t))s.push(c);else if(t.hasAnyCallback()){s=s.concat(this.eventRegistrations_.slice(a+1));break}}this.eventRegistrations_=s}else this.eventRegistrations_=[];return r},e.prototype.applyOperation=function(t,n,r){t.type===Dr.MERGE&&t.source.queryId!==null&&(K(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),K(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var i=this.viewCache_,s=this.processor_.applyOperation(i,t,n,r);return this.processor_.assertIndexed(s.viewCache),K(s.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=s.viewCache,this.generateEventsForChanges_(s.changes,s.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(t){var n=this.viewCache_.getEventCache(),r=[];if(!n.getNode().isLeafNode()){var i=n.getNode();i.forEachChild(Jt,function(s,a){r.push(nu(s,a))})}return n.isFullyInitialized()&&r.push(aR(n.getNode())),this.generateEventsForChanges_(r,n.getNode(),t)},e.prototype.generateEventsForChanges_=function(t,n,r){var i=r?[r]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,n,i)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gh,Fy=function(){function e(){this.views=new Map}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return K(gh,"Reference.ts has not been loaded"),gh},set:function(t){K(!gh,"__referenceConstructor has already been defined"),gh=t},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return this.views.size===0},e.prototype.applyOperation=function(t,n,r){var i,s,a=t.source.queryId;if(a!==null){var c=this.views.get(a);return K(c!=null,"SyncTree gave us an op for an invalid query."),c.applyOperation(t,n,r)}else{var l=[];try{for(var h=Te(this.views.values()),p=h.next();!p.done;p=h.next()){var c=p.value;l=l.concat(c.applyOperation(t,n,r))}}catch(v){i={error:v}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}},e.prototype.getView=function(t,n,r,i){var s=t.queryIdentifier(),a=this.views.get(s);if(!a){var c=n.calcCompleteEventCache(i?r:null),l=!1;c?l=!0:r instanceof It?(c=n.calcCompleteEventChildren(r),l=!1):(c=It.EMPTY_NODE,l=!1);var h=new sR(new No(c,l,!1),new No(r,i,!1));return new Q3(t,h)}return a},e.prototype.addEventRegistration=function(t,n,r,i,s){var a=this.getView(t,r,i,s);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),a),a.addEventRegistration(n),a.getInitialEvents(n)},e.prototype.removeEventRegistration=function(t,n,r){var i,s,a=t.queryIdentifier(),c=[],l=[],h=this.hasCompleteView();if(a==="default")try{for(var p=Te(this.views.entries()),v=p.next();!v.done;v=p.next()){var m=ul(v.value,2),y=m[0],b=m[1];l=l.concat(b.removeEventRegistration(n,r)),b.isEmpty()&&(this.views.delete(y),b.getQuery().getQueryParams().loadsAllData()||c.push(b.getQuery()))}}catch(E){i={error:E}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}else{var b=this.views.get(a);b&&(l=l.concat(b.removeEventRegistration(n,r)),b.isEmpty()&&(this.views.delete(a),b.getQuery().getQueryParams().loadsAllData()||c.push(b.getQuery())))}return h&&!this.hasCompleteView()&&c.push(new e.__referenceConstructor(t.repo,t.path)),{removed:c,events:l}},e.prototype.getQueryViews=function(){var t,n,r=[];try{for(var i=Te(this.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.getQuery().getQueryParams().loadsAllData()||r.push(a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.getCompleteServerCache=function(t){var n,r,i=null;try{for(var s=Te(this.views.values()),a=s.next();!a.done;a=s.next()){var c=a.value;i=i||c.getCompleteServerCache(t)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},e.prototype.viewForQuery=function(t){var n=t.getQueryParams();if(n.loadsAllData())return this.getCompleteView();var r=t.queryIdentifier();return this.views.get(r)},e.prototype.viewExistsForQuery=function(t){return this.viewForQuery(t)!=null},e.prototype.hasCompleteView=function(){return this.getCompleteView()!=null},e.prototype.getCompleteView=function(){var t,n;try{for(var r=Te(this.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.getQuery().getQueryParams().loadsAllData())return s}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Di=function(){function e(t){this.writeTree_=t}return e.empty=function(){return new e(new nr(null))},e}();function Fc(e,t,n){if(t.isEmpty())return new Di(new nr(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){var i=r.path,s=r.value,a=et.relativePath(i,t);return s=s.updateChild(a,n),new Di(e.writeTree_.set(i,s))}else{var c=new nr(n),l=e.writeTree_.setTree(t,c);return new Di(l)}}function Nm(e,t,n){var r=e;return je(n,function(i,s){r=Fc(r,t.child(i),s)}),r}function HS(e,t){if(t.isEmpty())return Di.empty();var n=e.writeTree_.setTree(t,new nr(null));return new Di(n)}function Rm(e,t){return ho(e,t)!=null}function ho(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(et.relativePath(n.path,t)):null}function GS(e){var t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Jt,function(r,i){t.push(new Dt(r,i))}):e.writeTree_.children.inorderTraversal(function(r,i){i.value!=null&&t.push(new Dt(r,i.value))}),t}function so(e,t){if(t.isEmpty())return e;var n=ho(e,t);return n!=null?new Di(new nr(n)):new Di(e.writeTree_.subtree(t))}function Om(e){return e.writeTree_.isEmpty()}function Ia(e,t){return uR(et.Empty,e.writeTree_,t)}function uR(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal(function(i,s){i===".priority"?(K(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=uR(e.child(i),s,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(e.child(".priority"),r)),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y3=function(){function e(){this.visibleWrites_=Di.empty(),this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(t){return new X3(t,this)},e.prototype.addOverwrite=function(t,n,r,i){K(r>this.lastWriteId_,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),this.allWrites_.push({path:t,snap:n,writeId:r,visible:i}),i&&(this.visibleWrites_=Fc(this.visibleWrites_,t,n)),this.lastWriteId_=r},e.prototype.addMerge=function(t,n,r){K(r>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:n,writeId:r,visible:!0}),this.visibleWrites_=Nm(this.visibleWrites_,t,n),this.lastWriteId_=r},e.prototype.getWrite=function(t){for(var n=0;n<this.allWrites_.length;n++){var r=this.allWrites_[n];if(r.writeId===t)return r}return null},e.prototype.removeWrite=function(t){var n=this,r=this.allWrites_.findIndex(function(p){return p.writeId===t});K(r>=0,"removeWrite called with nonexistent writeId.");var i=this.allWrites_[r];this.allWrites_.splice(r,1);for(var s=i.visible,a=!1,c=this.allWrites_.length-1;s&&c>=0;){var l=this.allWrites_[c];l.visible&&(c>=r&&this.recordContainsPath_(l,i.path)?s=!1:i.path.contains(l.path)&&(a=!0)),c--}if(s){if(a)return this.resetTree_(),!0;if(i.snap)this.visibleWrites_=HS(this.visibleWrites_,i.path);else{var h=i.children;je(h,function(p){n.visibleWrites_=HS(n.visibleWrites_,i.path.child(p))})}return!0}else return!1},e.prototype.getCompleteWriteData=function(t){return ho(this.visibleWrites_,t)},e.prototype.calcCompleteEventCache=function(t,n,r,i){if(!r&&!i){var s=ho(this.visibleWrites_,t);if(s!=null)return s;var a=so(this.visibleWrites_,t);if(Om(a))return n;if(n==null&&!Rm(a,et.Empty))return null;var c=n||It.EMPTY_NODE;return Ia(a,c)}else{var l=so(this.visibleWrites_,t);if(!i&&Om(l))return n;if(!i&&n==null&&!Rm(l,et.Empty))return null;var h=function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(m.path.contains(t)||t.contains(m.path))},p=e.layerTree_(this.allWrites_,h,t),c=n||It.EMPTY_NODE;return Ia(p,c)}},e.prototype.calcCompleteEventChildren=function(t,n){var r=It.EMPTY_NODE,i=ho(this.visibleWrites_,t);if(i)return i.isLeafNode()||i.forEachChild(Jt,function(c,l){r=r.updateImmediateChild(c,l)}),r;if(n){var s=so(this.visibleWrites_,t);return n.forEachChild(Jt,function(c,l){var h=Ia(so(s,new et(c)),l);r=r.updateImmediateChild(c,h)}),GS(s).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}else{var a=so(this.visibleWrites_,t);return GS(a).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}},e.prototype.calcEventCacheAfterServerOverwrite=function(t,n,r,i){K(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=t.child(n);if(Rm(this.visibleWrites_,s))return null;var a=so(this.visibleWrites_,s);return Om(a)?i.getChild(n):Ia(a,i.getChild(n))},e.prototype.calcCompleteChild=function(t,n,r){var i=t.child(n),s=ho(this.visibleWrites_,i);if(s!=null)return s;if(r.isCompleteForChild(n)){var a=so(this.visibleWrites_,i);return Ia(a,r.getNode().getImmediateChild(n))}else return null},e.prototype.shadowingWrite=function(t){return ho(this.visibleWrites_,t)},e.prototype.calcIndexedSlice=function(t,n,r,i,s,a){var c,l=so(this.visibleWrites_,t),h=ho(l,et.Empty);if(h!=null)c=h;else if(n!=null)c=Ia(l,n);else return[];if(c=c.withIndex(a),!c.isEmpty()&&!c.isLeafNode()){for(var p=[],v=a.getCompare(),m=s?c.getReverseIteratorFrom(r,a):c.getIteratorFrom(r,a),y=m.getNext();y&&p.length<i;)v(y,r)!==0&&p.push(y),y=m.getNext();return p}else return[]},e.prototype.recordContainsPath_=function(t,n){if(t.snap)return t.path.contains(n);for(var r in t.children)if(t.children.hasOwnProperty(r)&&t.path.child(r).contains(n))return!0;return!1},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,et.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},e.DefaultFilter_=function(t){return t.visible},e.layerTree_=function(t,n,r){for(var i=Di.empty(),s=0;s<t.length;++s){var a=t[s];if(n(a)){var c=a.path,l=void 0;if(a.snap)r.contains(c)?(l=et.relativePath(r,c),i=Fc(i,l,a.snap)):c.contains(r)&&(l=et.relativePath(c,r),i=Fc(i,et.Empty,a.snap.getChild(l)));else if(a.children){if(r.contains(c))l=et.relativePath(r,c),i=Nm(i,l,a.children);else if(c.contains(r))if(l=et.relativePath(c,r),l.isEmpty())i=Nm(i,et.Empty,a.children);else{var h=kr(a.children,l.getFront());if(h){var p=h.getChild(l.popFront());i=Fc(i,et.Empty,p)}}}else throw Su("WriteRecord should have .snap or .children")}}return i},e}(),X3=function(){function e(t,n){this.treePath_=t,this.writeTree_=n}return e.prototype.calcCompleteEventCache=function(t,n,r){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,n,r)},e.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},e.prototype.calcEventCacheAfterServerOverwrite=function(t,n,r){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,n,r)},e.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},e.prototype.calcIndexedSlice=function(t,n,r,i,s){return this.writeTree_.calcIndexedSlice(this.treePath_,t,n,r,i,s)},e.prototype.calcCompleteChild=function(t,n){return this.writeTree_.calcCompleteChild(this.treePath_,t,n)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var WS=function(){function e(t){this.listenProvider_=t,this.syncPointTree_=new nr(null),this.pendingWriteTree_=new Y3,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e.prototype.applyUserOverwrite=function(t,n,r,i){return this.pendingWriteTree_.addOverwrite(t,n,r,i),i?this.applyOperationToSyncPoints_(new Uh(Ci.user(),t,n)):[]},e.prototype.applyUserMerge=function(t,n,r){this.pendingWriteTree_.addMerge(t,n,r);var i=nr.fromObject(n);return this.applyOperationToSyncPoints_(new Am(Ci.user(),t,i))},e.prototype.ackUserWrite=function(t,n){n===void 0&&(n=!1);var r=this.pendingWriteTree_.getWrite(t),i=this.pendingWriteTree_.removeWrite(t);if(i){var s=new nr(null);return r.snap!=null?s=s.set(et.Empty,!0):je(r.children,function(a){s=s.set(new et(a),!0)}),this.applyOperationToSyncPoints_(new B3(r.path,s,n))}else return[]},e.prototype.applyServerOverwrite=function(t,n){return this.applyOperationToSyncPoints_(new Uh(Ci.server(),t,n))},e.prototype.applyServerMerge=function(t,n){var r=nr.fromObject(n);return this.applyOperationToSyncPoints_(new Am(Ci.server(),t,r))},e.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new BS(Ci.server(),t))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){var i=this.queryKeyForTag_(r);if(i!=null){var s=e.parseQueryKey_(i),a=s.path,c=s.queryId,l=et.relativePath(a,t),h=new Uh(Ci.forServerTaggedQuery(c),l,n);return this.applyTaggedOperation_(a,h)}else return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var i=this.queryKeyForTag_(r);if(i){var s=e.parseQueryKey_(i),a=s.path,c=s.queryId,l=et.relativePath(a,t),h=nr.fromObject(n),p=new Am(Ci.forServerTaggedQuery(c),l,h);return this.applyTaggedOperation_(a,p)}else return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n);if(r){var i=e.parseQueryKey_(r),s=i.path,a=i.queryId,c=et.relativePath(s,t),l=new BS(Ci.forServerTaggedQuery(a),c);return this.applyTaggedOperation_(s,l)}else return[]},e.prototype.addEventRegistration=function(t,n){var r=t.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(E,I){var C=et.relativePath(E,r);i=i||I.getCompleteServerCache(C),s=s||I.hasCompleteView()});var a=this.syncPointTree_.get(r);a?(s=s||a.hasCompleteView(),i=i||a.getCompleteServerCache(et.Empty)):(a=new Fy,this.syncPointTree_=this.syncPointTree_.set(r,a));var c;if(i!=null)c=!0;else{c=!1,i=It.EMPTY_NODE;var l=this.syncPointTree_.subtree(r);l.foreachChild(function(E,I){var C=I.getCompleteServerCache(et.Empty);C&&(i=i.updateImmediateChild(E,C))})}var h=a.viewExistsForQuery(t);if(!h&&!t.getQueryParams().loadsAllData()){var p=e.makeQueryKey_(t);K(!this.queryToTagMap.has(p),"View does not exist, but we have a tag");var v=e.getNextQueryTag_();this.queryToTagMap.set(p,v),this.tagToQueryMap.set(v,p)}var m=this.pendingWriteTree_.childWrites(r),y=a.addEventRegistration(t,n,m,i,c);if(!h&&!s){var b=a.viewForQuery(t);y=y.concat(this.setupListener_(t,b))}return y},e.prototype.removeEventRegistration=function(t,n,r){var i=this,s=t.path,a=this.syncPointTree_.get(s),c=[];if(a&&(t.queryIdentifier()==="default"||a.viewExistsForQuery(t))){var l=a.removeEventRegistration(t,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(s));var h=l.removed;c=l.events;var p=h.findIndex(function(D){return D.getQueryParams().loadsAllData()})!==-1,v=this.syncPointTree_.findOnPath(s,function(D,F){return F.hasCompleteView()});if(p&&!v){var m=this.syncPointTree_.subtree(s);if(!m.isEmpty())for(var y=this.collectDistinctViewsForSubTree_(m),b=0;b<y.length;++b){var E=y[b],I=E.getQuery(),C=this.createListenerForView_(E);this.listenProvider_.startListening(e.queryForListening_(I),this.tagForQuery_(I),C.hashFn,C.onComplete)}}if(!v&&h.length>0&&!r)if(p){var P=null;this.listenProvider_.stopListening(e.queryForListening_(t),P)}else h.forEach(function(D){var F=i.queryToTagMap.get(e.makeQueryKey_(D));i.listenProvider_.stopListening(e.queryForListening_(D),F)});this.removeTags_(h)}return c},e.prototype.calcCompleteEventCache=function(t,n){var r=!0,i=this.pendingWriteTree_,s=this.syncPointTree_.findOnPath(t,function(a,c){var l=et.relativePath(a,t),h=c.getCompleteServerCache(l);if(h)return h});return i.calcCompleteEventCache(t,s,n,r)},e.prototype.getServerValue=function(t){var n=t.path,r=null;this.syncPointTree_.foreachOnPath(n,function(h,p){var v=et.relativePath(h,n);r=r||p.getCompleteServerCache(v)});var i=this.syncPointTree_.get(n);i?r=r||i.getCompleteServerCache(et.Empty):(i=new Fy,this.syncPointTree_=this.syncPointTree_.set(n,i));var s=r!=null,a=s?new No(r,!0,!1):null,c=this.pendingWriteTree_.childWrites(t.path),l=i.getView(t,c,s?a.getNode():It.EMPTY_NODE,s);return l.getCompleteNode()},e.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(n,r,i){if(r&&r.hasCompleteView()){var s=r.getCompleteView();return[s]}else{var a=[];return r&&(a=r.getQueryViews()),je(i,function(c,l){a=a.concat(l)}),a}})},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var i=e.makeQueryKey_(r),s=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(s)}}},e.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},e.prototype.setupListener_=function(t,n){var r=t.path,i=this.tagForQuery_(t),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(e.queryForListening_(t),i,s.hashFn,s.onComplete),c=this.syncPointTree_.subtree(r);if(i)K(!c.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var l=c.fold(function(v,m,y){if(!v.isEmpty()&&m&&m.hasCompleteView())return[m.getCompleteView().getQuery()];var b=[];return m&&(b=b.concat(m.getQueryViews().map(function(E){return E.getQuery()}))),je(y,function(E,I){b=b.concat(I)}),b}),h=0;h<l.length;++h){var p=l[h];this.listenProvider_.stopListening(e.queryForListening_(p),this.tagForQuery_(p))}return a},e.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){var s=t.getServerCache()||It.EMPTY_NODE;return s.hash()},onComplete:function(s){if(s==="ok")return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var a=u3(s,r);return n.removeEventRegistration(r,null,a)}}},e.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},e.parseQueryKey_=function(t){var n=t.indexOf("$");return K(n!==-1&&n<t.length-1,"Bad queryKey."),{queryId:t.substr(n+1),path:new et(t.substr(0,n))}},e.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return this.queryToTagMap.get(n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(t,n){var r=this.syncPointTree_.get(t);K(r,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(t);return r.applyOperation(n,i,null)},e.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(et.Empty))},e.prototype.applyOperationHelper_=function(t,n,r,i){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,n,r,i);var s=n.get(et.Empty);r==null&&s!=null&&(r=s.getCompleteServerCache(et.Empty));var a=[],c=t.path.getFront(),l=t.operationForChild(c),h=n.children.get(c);if(h&&l){var p=r?r.getImmediateChild(c):null,v=i.child(c);a=a.concat(this.applyOperationHelper_(l,h,p,v))}return s&&(a=a.concat(s.applyOperation(t,i,r))),a},e.prototype.applyOperationDescendantsHelper_=function(t,n,r,i){var s=this,a=n.get(et.Empty);r==null&&a!=null&&(r=a.getCompleteServerCache(et.Empty));var c=[];return n.children.inorderTraversal(function(l,h){var p=r?r.getImmediateChild(l):null,v=i.child(l),m=t.operationForChild(l);m&&(c=c.concat(s.applyOperationDescendantsHelper_(m,h,p,v)))}),a&&(c=c.concat(a.applyOperation(t,i,r))),c},e.nextQueryTag_=1,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J3=function(){function e(){this.rootNode_=It.EMPTY_NODE}return e.prototype.getNode=function(t){return this.rootNode_.getChild(t)},e.prototype.updateSnapshot=function(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Z3=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(t,n){n===void 0&&(n=1),$n(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n},e.prototype.get=function(){return IN(this.counters_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ip=function(){function e(){}return e.getCollection=function(t){var n=t.toString();return this.collections_[n]||(this.collections_[n]=new Z3),this.collections_[n]},e.getOrCreateReporter=function(t,n){var r=t.toString();return this.reporters_[r]||(this.reporters_[r]=n()),this.reporters_[r]},e.collections_={},e.reporters_={},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cR=function(){function e(t){this.collection_=t,this.last_=null}return e.prototype.get=function(){var t=this.collection_.get(),n=ee({},t);return this.last_&&je(this.last_,function(r,i){n[r]=n[r]-i}),this.last_=t,n},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $S=10*1e3,tB=30*1e3,eB=5*60*1e3,nB=function(){function e(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new cR(t);var r=$S+(tB-$S)*Math.random();zc(this.reportStats_.bind(this),Math.floor(r))}return e.prototype.includeStat=function(t){this.statsToReport_[t]=!0},e.prototype.reportStats_=function(){var t=this,n=this.statsListener_.get(),r={},i=!1;je(n,function(s,a){a>0&&$n(t.statsToReport_,s)&&(r[s]=a,i=!0)}),i&&this.server_.reportStats(r),zc(this.reportStats_.bind(this),Math.floor(Math.random()*2*eB))},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rB=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(t){for(var n=null,r=0;r<t.length;r++){var i=t[r],s=i.getPath();n!==null&&!s.equals(n.getPath())&&(this.eventLists_.push(n),n=null),n===null&&(n=new iB(s)),n.add(i)}n&&this.eventLists_.push(n)},e.prototype.raiseEventsAtPath=function(t,n){this.queueEvents(n),this.raiseQueuedEventsMatchingPredicate_(function(r){return r.equals(t)})},e.prototype.raiseEventsForChangedPath=function(t,n){this.queueEvents(n),this.raiseQueuedEventsMatchingPredicate_(function(r){return r.contains(t)||t.contains(r)})},e.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var n=!0,r=0;r<this.eventLists_.length;r++){var i=this.eventLists_[r];if(i){var s=i.getPath();t(s)?(this.eventLists_[r].raise(),this.eventLists_[r]=null):n=!1}}n&&(this.eventLists_=[]),this.recursionDepth_--},e}(),iB=function(){function e(t){this.path_=t,this.events_=[]}return e.prototype.add=function(t){this.events_.push(t)},e.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var n=this.events_[t];if(n!==null){this.events_[t]=null;var r=n.getEventRunner();Is&&sn("event: "+n.toString()),Da(r)}}},e.prototype.getPath=function(){return this.path_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lR=function(){function e(t){this.allowedEvents_=t,this.listeners_={},K(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(Array.isArray(this.listeners_[t]))for(var i=Wi(this.listeners_[t]),s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)},e.prototype.on=function(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});var i=this.getInitialEvent(t);i&&n.apply(r,i)},e.prototype.off=function(t,n,r){this.validateEventType_(t);for(var i=this.listeners_[t]||[],s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}},e.prototype.validateEventType_=function(t){K(this.allowedEvents_.find(function(n){return n===t}),"Unknown event: "+t)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oB=function(e){J(t,e);function t(){var n=e.call(this,["visible"])||this,r,i;return typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",r="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",r="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",r="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",r="webkitHidden")),n.visible_=!0,i&&document.addEventListener(i,function(){var s=!document[r];s!==n.visible_&&(n.visible_=s,n.trigger("visible",s))},!1),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return K(n==="visible","Unknown event type: "+n),[this.visible_]},t}(lR);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zS=function(e){J(t,e);function t(){var n=e.call(this,["online"])||this;return n.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!q_()&&(window.addEventListener("online",function(){n.online_||(n.online_=!0,n.trigger("online",!0))},!1),window.addEventListener("offline",function(){n.online_&&(n.online_=!1,n.trigger("online",!1))},!1)),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return K(n==="online","Unknown event type: "+n),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(lR);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sB=function(){function e(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(t,n){var r=this;this.pendingResponses[t]=n;for(var i=function(){var c=s.pendingResponses[s.currentResponseNum];delete s.pendingResponses[s.currentResponseNum];for(var l=function(p){c[p]&&Da(function(){r.onMessage_(c[p])})},h=0;h<c.length;++h)l(h);if(s.currentResponseNum===s.closeAfterResponse)return s.onClose&&(s.onClose(),s.onClose=null),"break";s.currentResponseNum++},s=this;this.pendingResponses[this.currentResponseNum];){var a=i();if(a==="break")break}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KS="start",aB="close",uB="pLPCommand",cB="pRTLPCB",fR="id",hR="pw",pR="ser",lB="cb",fB="seg",hB="ts",pB="d",dB="dframe",dR=1870,vR=30,vB=dR-vR,gB=25e3,mB=3e4,nw=function(){function e(t,n,r,i,s){this.connId=t,this.repoInfo=n,this.applicationId=r,this.transportSessionId=i,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jl(t),this.stats_=ip.getCollection(n),this.urlFn=function(a){return n.connectionURL(zN,a)}}return e.prototype.open=function(t,n){var r=this;this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new sB(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){r.log_("Timed out trying to connect."),r.onClosed_(),r.connectTimeoutTimer_=null},Math.floor(mB)),i3(function(){if(!r.isClosed_){r.scriptTagHolder=new yB(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var l=ul(a,5),h=l[0],p=l[1],v=l[2];if(l[3],l[4],r.incrementIncomingBytes_(a),!!r.scriptTagHolder)if(r.connectTimeoutTimer_&&(clearTimeout(r.connectTimeoutTimer_),r.connectTimeoutTimer_=null),r.everConnected_=!0,h===KS)r.id=p,r.password=v;else if(h===aB)p?(r.scriptTagHolder.sendNewPolls=!1,r.myPacketOrderer.closeAfter(p,function(){r.onClosed_()})):r.onClosed_();else throw new Error("Unrecognized command received: "+h)},function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var l=ul(a,2),h=l[0],p=l[1];r.incrementIncomingBytes_(a),r.myPacketOrderer.handleResponse(h,p)},function(){r.onClosed_()},r.urlFn);var i={};i[KS]="t",i[pR]=Math.floor(Math.random()*1e8),r.scriptTagHolder.uniqueCallbackIdentifier&&(i[lB]=r.scriptTagHolder.uniqueCallbackIdentifier),i[VN]=Y_,r.transportSessionId&&(i[BN]=r.transportSessionId),r.lastSessionId&&(i[WN]=r.lastSessionId),r.applicationId&&(i[h3]=r.applicationId),typeof location<"u"&&location.hostname&&GN.test(location.hostname)&&(i[qN]=HN);var s=r.urlFn(i);r.log_("Connecting via long-poll to "+s),r.scriptTagHolder.addTag(s,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!s3()&&!a3()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(t){var n=Ue(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);for(var r=s4(n),i=FN(r,vB),s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(t,n){this.myDisconnFrame=document.createElement("iframe");var r={};r[dB]="t",r[fR]=t,r[hR]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},e.prototype.incrementIncomingBytes_=function(t){var n=Ue(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)},e}(),yB=function(){function e(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=DN(),window[uB+this.uniqueCallbackIdentifier]=t,window[cB+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){var a=document.domain;s='<script>document.domain="'+a+'";<\/script>'}var c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(l){sn("frame writing exception"),l.stack&&sn(l.stack),sn(l)}}}return e.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{var n=t.contentWindow.document;n||sn("No IE domain setting required")}catch{var r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},e.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){t.myIFrame!==null&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var n=this.onDisconnect;n&&(this.onDisconnect=null,n())},e.prototype.startLongPoll=function(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[fR]=this.myID,t[hR]=this.myPW,t[pR]=this.currentSerial;for(var n=this.urlFn(t),r="",i=0;this.pendingSegs.length>0;){var s=this.pendingSegs[0];if(s.d.length+vR+r.length<=dR){var a=this.pendingSegs.shift();r=r+"&"+fB+i+"="+a.seg+"&"+hB+i+"="+a.ts+"&"+pB+i+"="+a.d,i++}else break}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1},e.prototype.enqueueSegment=function(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(t,n){var r=this;this.outstandingRequests.add(n);var i=function(){r.outstandingRequests.delete(n),r.newRequest_()},s=setTimeout(i,Math.floor(gB)),a=function(){clearTimeout(s),i()};this.addTag(t,a)},e.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var i=r.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=function(){sn("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gR="";function mR(e){gR=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _B=16384,wB=45e3,op=null;typeof MozWebSocket<"u"?op=MozWebSocket:typeof WebSocket<"u"&&(op=WebSocket);var ps=function(){function e(t,n,r,i,s){this.connId=t,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jl(this.connId),this.stats_=ip.getCollection(n),this.connURL=e.connectionURL_(n,i,s),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(t,n,r){var i={};return i[VN]=Y_,typeof location<"u"&&location.hostname&&GN.test(location.hostname)&&(i[qN]=HN),n&&(i[BN]=n),r&&(i[WN]=r),t.connectionURL($N,i)},e.prototype.open=function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gs.set("previous_websocket_failure",!0);try{var i,s,a,c;if(!SN()){var s={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new op(this.connURL,[],s)}}catch(h){this.log_("Error instantiating WebSocket.");var l=h.message||h.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(h){r.handleIncomingFrame(h)},this.mySock.onerror=function(h){r.log_("WebSocket error.  Closing connection.");var p=h.message||h.data;p&&r.log_(p),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if(typeof navigator<"u"&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&op!==null&&!e.forceDisallow_},e.previouslyFailed=function(){return gs.isInMemoryStorage||gs.get("previous_websocket_failure")===!0},e.prototype.markConnectionHealthy=function(){gs.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var n=this.frames.join("");this.frames=null;var r=ll(n);this.onMessage(r)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(t){if(K(this.frames===null,"We already have a frame buffer"),t.length<=6){var n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t},e.prototype.handleIncomingFrame=function(t){if(this.mySock!==null){var n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{var r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}},e.prototype.send=function(t){this.resetKeepAlive();var n=Ue(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);var r=FN(n,_B);r.length>1&&this.sendString_(String(r.length));for(var i=0;i<r.length;i++)this.sendString_(r[i])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(wB))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bB=function(){function e(t){this.initTransports_(t)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[nw,ps]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=ps&&ps.isAvailable(),s=i&&!ps.previouslyFailed();if(t.webSocketOnly&&(i||vn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ps];else{var a=this.transports_=[];try{for(var c=Te(e.ALL_TRANSPORTS),l=c.next();!l.done;l=c.next()){var h=l.value;h&&h.isAvailable()&&a.push(h)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EB=6e4,IB=5e3,TB=10*1024,SB=100*1024,xm="t",QS="d",AB="s",YS="r",CB="e",XS="o",JS="a",ZS="n",tA="p",NB="h",yR=function(){function e(t,n,r,i,s,a,c,l){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.onMessage_=i,this.onReady_=s,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jl("c:"+this.id+":"),this.transportManager_=new bB(n),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var t=this,n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(r,i)},Math.floor(0));var s=n.healthyTimeout||0;s>0&&(this.healthyTimeout_=zc(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>SB?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>TB?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(s)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(t){var n=this;return function(r){t===n.conn_?n.onConnectionLost_(r):t===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},e.prototype.connReceiver_=function(t){var n=this;return function(r){n.state_!==2&&(t===n.rx_?n.onPrimaryMessageReceived_(r):t===n.secondaryConn_?n.onSecondaryMessageReceived_(r):n.log_("message on old connection"))}},e.prototype.sendRequest=function(t){var n={t:"d",d:t};this.sendData_(n)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(t){if(xm in t){var n=t[xm];n===JS?this.upgradeIfSecondaryHealthy_():n===YS?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===XS&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(t){var n=Nc("t",t),r=Nc("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:tA,d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:JS,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ZS,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(t){var n=Nc("t",t),r=Nc("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)},e.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(t){var n=Nc(xm,t);if(QS in t){var r=t[QS];if(n===NB)this.onHandshake_(r);else if(n===ZS){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===AB?this.onConnectionShutdown_(r):n===YS?this.onReset_(r):n===CB?Oy("Server Error: "+r):n===XS?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Oy("Unknown control packet command: "+n)}},e.prototype.onHandshake_=function(t){var n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(i),this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Y_!==r&&vn("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},e.prototype.startUpgrade_=function(t){var n=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,i),zc(function(){n.secondaryConn_&&(n.log_("Timed out trying to upgrade."),n.secondaryConn_.close())},Math.floor(EB))},e.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),this.state_===1?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(t,n){var r=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):zc(function(){r.sendPingOnPrimaryIfNecessary_()},Math.floor(IB))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:tA,d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()},e.prototype.onConnectionLost_=function(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()},e.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)},e.prototype.close=function(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _R=function(){function e(){}return e.prototype.put=function(t,n,r,i){},e.prototype.merge=function(t,n,r,i){},e.prototype.refreshAuthToken=function(t){},e.prototype.onDisconnectPut=function(t,n,r){},e.prototype.onDisconnectMerge=function(t,n,r){},e.prototype.onDisconnectCancel=function(t,n){},e.prototype.reportStats=function(t){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xc=1e3,RB=60*5*1e3,OB=3*1e3,eA=30*1e3,xB=1.3,PB=3e4,kB="server_kill",DB=3,Ts=function(e){J(t,e);function t(n,r,i,s,a,c,l){var h=e.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=c,h.authOverride_=l,h.id=t.nextPersistentConnectionId_++,h.log_=jl("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=xc,h.maxReconnectDelay_=RB,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!SN())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return h.scheduleConnect_(0),oB.getInstance().on("visible",h.onVisible_,h),n.host.indexOf("fblocal")===-1&&zS.getInstance().on("online",h.onOnline_,h),h}return t.prototype.sendRequest=function(n,r,i){var s=++this.requestNumber_,a={r:s,a:n,b:r};this.log_(Ue(a)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[s]=i)},t.prototype.get=function(n){var r=this,i=new Bn,s={p:n.path.toString(),q:n.queryObject()},a={action:"g",request:s,onComplete:function(l){var h=l.d;l.s==="ok"?(r.onDataUpdate_(s.p,h,!1,null),i.resolve(h)):i.reject(h)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;var c=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var l=r.outstandingGets_[c];l===void 0||a!==l||(delete r.outstandingGets_[c],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),r.log_("get "+c+" timed out on connection"),i.reject(new Error("Client is offline.")))},OB),this.connected_&&this.sendGet_(c),i.promise},t.prototype.listen=function(n,r,i,s){var a=n.queryIdentifier(),c=n.path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),K(n.getQueryParams().isDefault()||!n.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");var l={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(c).set(a,l),this.connected_&&this.sendListen_(l)},t.prototype.sendGet_=function(n){var r=this,i=this.outstandingGets_[n];this.sendRequest("g",i.request,function(s){delete r.outstandingGets_[n],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})},t.prototype.sendListen_=function(n){var r=this,i=n.query,s=i.path.toString(),a=i.queryIdentifier();this.log_("Listen on "+s+" for "+a);var c={p:s},l="q";n.tag&&(c.q=i.queryObject(),c.t=n.tag),c.h=n.hashFn(),this.sendRequest(l,c,function(h){var p=h.d,v=h.s;t.warnOnListenWarnings_(p,i);var m=r.listens.get(s)&&r.listens.get(s).get(a);m===n&&(r.log_("listen response",h),v!=="ok"&&r.removeListen_(s,a),n.onComplete&&n.onComplete(v,p))})},t.warnOnListenWarnings_=function(n,r){if(n&&typeof n=="object"&&$n(n,"w")){var i=kr(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){var s='".indexOn": "'+r.getQueryParams().getIndex().toString()+'"',a=r.path.toString();vn("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+s+" at ")+(a+" to your security rules for better performance."))}}},t.prototype.refreshAuthToken=function(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(n)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(n){var r=n&&n.length===40;(r||m4(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=eA)},t.prototype.tryAuth=function(){var n=this;if(this.connected_&&this.authToken_){var r=this.authToken_,i=g4(r)?"auth":"gauth",s={cred:r};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,function(a){var c=a.s,l=a.d||"error";n.authToken_===r&&(c==="ok"?n.invalidAuthTokenCount_=0:n.onAuthRevoked_(c,l))})}},t.prototype.unlisten=function(n,r){var i=n.path.toString(),s=n.queryIdentifier();this.log_("Unlisten called for "+i+" "+s),K(n.getQueryParams().isDefault()||!n.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query");var a=this.removeListen_(i,s);a&&this.connected_&&this.sendUnlisten_(i,s,n.queryObject(),r)},t.prototype.sendUnlisten_=function(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);var a={p:n},c="n";s&&(a.q=i,a.t=s),this.sendRequest(c,a)},t.prototype.onDisconnectPut=function(n,r,i){this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})},t.prototype.onDisconnectMerge=function(n,r,i){this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})},t.prototype.onDisconnectCancel=function(n,r){this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})},t.prototype.sendOnDisconnect_=function(n,r,i,s){var a={p:r,d:i};this.log_("onDisconnect "+n,a),this.sendRequest(n,a,function(c){s&&setTimeout(function(){s(c.s,c.d)},Math.floor(0))})},t.prototype.put=function(n,r,i,s){this.putInternal("p",n,r,i,s)},t.prototype.merge=function(n,r,i,s){this.putInternal("m",n,r,i,s)},t.prototype.putInternal=function(n,r,i,s,a){var c={p:r,d:i};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:n,request:c,onComplete:s}),this.outstandingPutCount_++;var l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)},t.prototype.sendPut_=function(n){var r=this,i=this.outstandingPuts_[n].action,s=this.outstandingPuts_[n].request,a=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,s,function(c){r.log_(i+" response",c),delete r.outstandingPuts_[n],r.outstandingPutCount_--,r.outstandingPutCount_===0&&(r.outstandingPuts_=[]),a&&a(c.s,c.d)})},t.prototype.reportStats=function(n){var r=this;if(this.connected_){var i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,function(s){var a=s.s;if(a!=="ok"){var c=s.d;r.log_("reportStats","Error sending stats: "+c)}})}},t.prototype.onDataMessage_=function(n){if("r"in n){this.log_("from server: "+Ue(n));var r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}},t.prototype.onDataPush_=function(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):Oy("Unrecognized action received from server: "+Ue(n)+`
Are you using the latest client?`)},t.prototype.onReady_=function(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(n){var r=this;K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){r.establishConnectionTimer_=null,r.establishConnection_()},Math.floor(n))},t.prototype.onVisible_=function(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xc,this.realtime_||this.scheduleConnect_(0)),this.visible_=n},t.prototype.onOnline_=function(n){n?(this.log_("Browser went online."),this.reconnectDelay_=xc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(!this.visible_)this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();else if(this.lastConnectionEstablishedTime_){var n=new Date().getTime()-this.lastConnectionEstablishedTime_;n>PB&&(this.reconnectDelay_=xc),this.lastConnectionEstablishedTime_=null}var r=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-r);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*xB)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){var n=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;var r=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+t.nextConnectionId_++,c=this,l=this.lastSessionId,h=!1,p=null,v=function(){p?p.close():(h=!0,s())},m=function(b){K(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(b)};this.realtime_={close:v,sendRequest:m};var y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(y).then(function(b){h?sn("getToken() completed but was canceled"):(sn("getToken() completed. Creating connection."),c.authToken_=b&&b.accessToken,p=new yR(a,c.repoInfo_,c.applicationId_,r,i,s,function(E){vn(E+" ("+c.repoInfo_.toString()+")"),c.interrupt(kB)},l))}).then(null,function(b){c.log_("Failed to get token: "+b),h||(n.repoInfo_.nodeAdmin&&vn(b),v())})}},t.prototype.interrupt=function(n){sn("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(n){sn("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Cy(this.interruptReasons_)&&(this.reconnectDelay_=xc,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(n){var r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})},t.prototype.cancelSentTransactions_=function(){for(var n=0;n<this.outstandingPuts_.length;n++){var r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(n,r){var i;r?i=r.map(function(a){return K_(a)}).join("$"):i="default";var s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")},t.prototype.removeListen_=function(n,r){var i=new et(n).toString(),s;if(this.listens.has(i)){var a=this.listens.get(i);s=a.get(r),a.delete(r),a.size===0&&this.listens.delete(i)}else s=void 0;return s},t.prototype.onAuthRevoked_=function(n,r){sn("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=DB&&(this.reconnectDelay_=eA,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))},t.prototype.restoreState_=function(){var n,r,i,s;this.tryAuth();try{for(var a=Te(this.listens.values()),c=a.next();!c.done;c=a.next()){var l=c.value;try{for(var h=(i=void 0,Te(l.values())),p=h.next();!p.done;p=h.next()){var v=p.value;this.sendListen_(v)}}catch(b){i={error:b}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}}}catch(b){n={error:b}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}for(var m=0;m<this.outstandingPuts_.length;m++)this.outstandingPuts_[m]&&this.sendPut_(m);for(;this.onDisconnectRequestQueue_.length;){var y=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(y.action,y.pathString,y.data,y.onComplete)}for(var m=0;m<this.outstandingGets_.length;m++)this.outstandingGets_[m]&&this.sendGet_(m)},t.prototype.sendConnectStats_=function(){var n={},r="js";n["sdk."+r+"."+gR.replace(/\./g,"-")]=1,q_()?n["framework.cordova"]=1:TN()&&(n["framework.reactnative"]=1),this.reportStats(n)},t.prototype.shouldReconnect_=function(){var n=zS.getInstance().currentlyOnline();return Cy(this.interruptReasons_)&&n},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(_R);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LB=function(e){J(t,e);function t(n,r,i){var s=e.call(this)||this;return s.repoInfo_=n,s.onDataUpdate_=r,s.authTokenProvider_=i,s.log_=jl("p:rest:"),s.listens_={},s}return t.prototype.reportStats=function(n){throw new Error("Method not implemented.")},t.getListenId_=function(n,r){return r!==void 0?"tag$"+r:(K(n.getQueryParams().isDefault(),"should have a tag if it's not a default query."),n.path.toString())},t.prototype.listen=function(n,r,i,s){var a=this,c=n.path.toString();this.log_("Listen called for "+c+" "+n.queryIdentifier());var l=t.getListenId_(n,i),h={};this.listens_[l]=h;var p=n.getQueryParams().toRestQueryStringParameters();this.restRequest_(c+".json",p,function(v,m){var y=m;if(v===404&&(y=null,v=null),v===null&&a.onDataUpdate_(c,y,!1,i),kr(a.listens_,l)===h){var b;v?v===401?b="permission_denied":b="rest_error:"+v:b="ok",s(b,null)}})},t.prototype.unlisten=function(n,r){var i=t.getListenId_(n,r);delete this.listens_[i]},t.prototype.get=function(n){var r=this,i=n.getQueryParams().toRestQueryStringParameters(),s=n.path.toString(),a=new Bn;return this.restRequest_(s+".json",i,function(c,l){var h=l;c===404&&(h=null,c=null),c===null?(r.onDataUpdate_(s,h,!1,null),a.resolve(h)):a.reject(new Error(h))}),a.promise},t.prototype.refreshAuthToken=function(n){},t.prototype.restRequest_=function(n,r,i){var s=this;r===void 0&&(r={}),r.format="export",this.authTokenProvider_.getToken(!1).then(function(a){var c=a&&a.accessToken;c&&(r.auth=c);var l=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+n+"?ns="+s.repoInfo_.namespace+y4(r);s.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(i&&h.readyState===4){s.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var p=null;if(h.status>=200&&h.status<300){try{p=ll(h.responseText)}catch{vn("Failed to parse JSON response for "+l+": "+h.responseText)}i(null,p)}else h.status!==401&&h.status!==404&&vn("Got unsuccessful REST response for "+l+" Status: "+h.status),i(h.status);i=null}},h.open("GET",l,!0),h.send()})},t}(_R);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nA=function(){function e(){this.children={},this.childCount=0,this.value=null}return e}(),MB=function(){function e(t,n,r){t===void 0&&(t=""),n===void 0&&(n=null),r===void 0&&(r=new nA),this.name_=t,this.parent_=n,this.node_=r}return e.prototype.subTree=function(t){for(var n=t instanceof et?t:new et(t),r=this,i=n.getFront();i!==null;){var s=kr(r.node_.children,i)||new nA;r=new e(i,r,s),n=n.popFront(),i=n.getFront()}return r},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(t){K(typeof t<"u","Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return this.getValue()===null&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;je(this.node_.children,function(r,i){t(new e(r,n,i))})},e.prototype.forEachDescendant=function(t,n,r){n&&!r&&t(this),this.forEachChild(function(i){i.forEachDescendant(t,!0,r)}),n&&r&&t(this)},e.prototype.forEachAncestor=function(t,n){for(var r=n?this:this.parent();r!==null;){if(t(r))return!0;r=r.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(n){n.getValue()!==null?t(n):n.forEachImmediateDescendantWithValue(t)})},e.prototype.path=function(){return new et(this.parent_===null?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){this.parent_!==null&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(t,n){var r=n.isEmpty(),i=$n(this.node_.children,t);r&&i?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):!r&&!i&&(this.node_.children[t]=n.node_,this.node_.childCount++,this.updateParents_())},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rA="repo_interrupt",FB=25,Re;(function(e){e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT"})(Re||(Re={}));var rw=function(){function e(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.app=r,this.authTokenProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Tm,this.transactionQueueTree_=new MB,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.start=function(){var t=this;if(this.stats_=ip.getCollection(this.repoInfo_),this.forceRestClient_||l3())this.server_=new LB(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var n=this.app.options.databaseAuthVariableOverride;if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ue(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}this.persistentConnection_=new Ts(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,n),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(r){t.server_.refreshAuthToken(r)}),this.statsReporter_=ip.getOrCreateReporter(this.repoInfo_,function(){return new nB(t.stats_,t.server_)}),this.infoData_=new J3,this.infoSyncTree_=new WS({startListening:function(r,i,s,a){var c=[],l=t.infoData_.getNode(r.path);return l.isEmpty()||(c=t.infoSyncTree_.applyServerOverwrite(r.path,l),setTimeout(function(){a("ok")},0)),c},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new WS({startListening:function(r,i,s,a){return t.server_.listen(r,s,i,function(c,l){var h=a(c,l);t.eventQueue_.raiseEventsForChangedPath(r.path,h)}),[]},stopListening:function(r,i){t.server_.unlisten(r,i)}})},e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var t=this.infoData_.getNode(new et(".info/serverTimeOffset")),n=t.val()||0;return new Date().getTime()+n},e.prototype.generateServerValues=function(){return U3({timestamp:this.serverTime()})},e.prototype.onDataUpdate_=function(t,n,r,i){this.dataUpdateCount++;var s=new et(t);n=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,n):n;var a=[];if(i)if(r){var c=Zh(n,function(m){return pe(m)});a=this.serverSyncTree_.applyTaggedQueryMerge(s,c,i)}else{var l=pe(n);a=this.serverSyncTree_.applyTaggedQueryOverwrite(s,l,i)}else if(r){var h=Zh(n,function(m){return pe(m)});a=this.serverSyncTree_.applyServerMerge(s,h)}else{var p=pe(n);a=this.serverSyncTree_.applyServerOverwrite(s,p)}var v=s;a.length>0&&(v=this.rerunTransactions_(s)),this.eventQueue_.raiseEventsForChangedPath(v,a)},e.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},e.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),t===!1&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(t){var n=this;je(t,function(r,i){n.updateInfo_(r,i)})},e.prototype.updateInfo_=function(t,n){var r=new et("/.info/"+t),i=pe(n);this.infoData_.updateSnapshot(r,i);var s=this.infoSyncTree_.applyServerOverwrite(r,i);this.eventQueue_.raiseEventsForChangedPath(r,s)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.getValue=function(t){var n=this,r=this.serverSyncTree_.getServerValue(t);return r!=null?Promise.resolve(new vo(r,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then(function(i){var s=pe(i),a=n.serverSyncTree_.applyServerOverwrite(t.path,s);return n.eventQueue_.raiseEventsAtPath(t.path,a),Promise.resolve(new vo(s,t.getRef(),t.getQueryParams().getIndex()))},function(i){return n.log_("get for query "+Ue(t)+" failed: "+i),Promise.reject(new Error(i))})},e.prototype.setWithPriority=function(t,n,r,i){var s=this;this.log_("set",{path:t.toString(),value:n,priority:r});var a=this.generateServerValues(),c=pe(n,r),l=this.serverSyncTree_.calcCompleteEventCache(t),h=Im(c,l,a),p=this.getNextWriteId_(),v=this.serverSyncTree_.applyUserOverwrite(t,h,p,!0);this.eventQueue_.queueEvents(v),this.server_.put(t.toString(),c.val(!0),function(y,b){var E=y==="ok";E||vn("set at "+t+" failed: "+y);var I=s.serverSyncTree_.ackUserWrite(p,!E);s.eventQueue_.raiseEventsForChangedPath(t,I),s.callOnCompleteCallback(i,y,b)});var m=this.abortTransactions_(t);this.rerunTransactions_(m),this.eventQueue_.raiseEventsForChangedPath(m,[])},e.prototype.update=function(t,n,r){var i=this;this.log_("update",{path:t.toString(),value:n});var s=!0,a=this.generateServerValues(),c={};if(je(n,function(p,v){s=!1,c[p]=VS(t.child(p),pe(v),i.serverSyncTree_,a)}),s)sn("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(r,"ok");else{var l=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserMerge(t,c,l);this.eventQueue_.queueEvents(h),this.server_.merge(t.toString(),n,function(p,v){var m=p==="ok";m||vn("update at "+t+" failed: "+p);var y=i.serverSyncTree_.ackUserWrite(l,!m),b=y.length>0?i.rerunTransactions_(t):t;i.eventQueue_.raiseEventsForChangedPath(b,y),i.callOnCompleteCallback(r,p,v)}),je(n,function(p){var v=i.abortTransactions_(t.child(p));i.rerunTransactions_(v)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},e.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var n=this.generateServerValues(),r=new Tm;this.onDisconnect_.forEachTree(et.Empty,function(s,a){var c=VS(s,a,t.serverSyncTree_,n);r.remember(s,c)});var i=[];r.forEachTree(et.Empty,function(s,a){i=i.concat(t.serverSyncTree_.applyServerOverwrite(s,a));var c=t.abortTransactions_(s);t.rerunTransactions_(c)}),this.onDisconnect_=new Tm,this.eventQueue_.raiseEventsForChangedPath(et.Empty,i)},e.prototype.onDisconnectCancel=function(t,n){var r=this;this.server_.onDisconnectCancel(t.toString(),function(i,s){i==="ok"&&r.onDisconnect_.forget(t),r.callOnCompleteCallback(n,i,s)})},e.prototype.onDisconnectSet=function(t,n,r){var i=this,s=pe(n);this.server_.onDisconnectPut(t.toString(),s.val(!0),function(a,c){a==="ok"&&i.onDisconnect_.remember(t,s),i.callOnCompleteCallback(r,a,c)})},e.prototype.onDisconnectSetWithPriority=function(t,n,r,i){var s=this,a=pe(n,r);this.server_.onDisconnectPut(t.toString(),a.val(!0),function(c,l){c==="ok"&&s.onDisconnect_.remember(t,a),s.callOnCompleteCallback(i,c,l)})},e.prototype.onDisconnectUpdate=function(t,n,r){var i=this;if(Cy(n)){sn("onDisconnect().update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(r,"ok");return}this.server_.onDisconnectMerge(t.toString(),n,function(s,a){s==="ok"&&je(n,function(c,l){var h=pe(l);i.onDisconnect_.remember(t.child(c),h)}),i.callOnCompleteCallback(r,s,a)})},e.prototype.addEventCallbackForQuery=function(t,n){var r;t.path.getFront()===".info"?r=this.infoSyncTree_.addEventRegistration(t,n):r=this.serverSyncTree_.addEventRegistration(t,n),this.eventQueue_.raiseEventsAtPath(t.path,r)},e.prototype.removeEventCallbackForQuery=function(t,n){var r;t.path.getFront()===".info"?r=this.infoSyncTree_.removeEventRegistration(t,n):r=this.serverSyncTree_.removeEventRegistration(t,n),this.eventQueue_.raiseEventsAtPath(t.path,r)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(rA)},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(rA)},e.prototype.stats=function(t){if(t===void 0&&(t=!1),!(typeof console>"u")){var n;t?(this.statsListener_||(this.statsListener_=new cR(this.stats_)),n=this.statsListener_.get()):n=this.stats_.get();var r=Object.keys(n).reduce(function(i,s){return Math.max(s.length,i)},0);je(n,function(i,s){for(var a=i,c=i.length;c<r+2;c++)a+=" ";console.log(a+s)})}},e.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},e.prototype.log_=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r="";this.persistentConnection_&&(r=this.persistentConnection_.id+":"),sn.apply(void 0,Wi([r],t))},e.prototype.callOnCompleteCallback=function(t,n,r){t&&Da(function(){if(n==="ok")t(null);else{var i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);var a=new Error(s);a.code=i,t(a)}})},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new iw(this))},enumerable:!1,configurable:!0}),e.prototype.startTransaction=function(t,n,r,i){this.log_("transaction on "+t);var s=function(){},a=new Pi(this,t);a.on("value",s);var c=function(){a.off("value",s)},l={path:t,update:n,onComplete:r,status:null,order:DN(),applyLocally:i,retryCount:0,unwatcher:c,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=this.getLatestState_(t);l.currentInputSnapshot=h;var p=l.update(h.val());if(p===void 0){if(l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete){var v=new vo(l.currentInputSnapshot,new Pi(this,l.path),Jt);l.onComplete(null,!1,v)}}else{hl("transaction failed: Data returned ",p,l.path),l.status=Re.RUN;var m=this.transactionQueueTree_.subTree(t),y=m.getValue()||[];y.push(l),m.setValue(y);var b=void 0;if(typeof p=="object"&&p!==null&&$n(p,".priority"))b=kr(p,".priority"),K(fl(b),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var E=this.serverSyncTree_.calcCompleteEventCache(t)||It.EMPTY_NODE;b=E.getPriority().val()}var I=this.generateServerValues(),C=pe(p,b),P=Im(C,h,I);l.currentOutputSnapshotRaw=C,l.currentOutputSnapshotResolved=P,l.currentWriteId=this.getNextWriteId_();var D=this.serverSyncTree_.applyUserOverwrite(t,P,l.currentWriteId,l.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,D),this.sendReadyTransactions_()}},e.prototype.getLatestState_=function(t,n){return this.serverSyncTree_.calcCompleteEventCache(t,n)||It.EMPTY_NODE},e.prototype.sendReadyTransactions_=function(t){var n=this;if(t===void 0&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),t.getValue()!==null){var r=this.buildTransactionQueue_(t);K(r.length>0,"Sending zero length transaction queue");var i=r.every(function(s){return s.status===Re.RUN});i&&this.sendTransactionQueue_(t.path(),r)}else t.hasChildren()&&t.forEachChild(function(s){n.sendReadyTransactions_(s)})},e.prototype.sendTransactionQueue_=function(t,n){for(var r=this,i=n.map(function(y){return y.currentWriteId}),s=this.getLatestState_(t,i),a=s,c=s.hash(),l=0;l<n.length;l++){var h=n[l];K(h.status===Re.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=Re.SENT,h.retryCount++;var p=et.relativePath(t,h.path);a=a.updateChild(p,h.currentOutputSnapshotRaw)}var v=a.val(!0),m=t;this.server_.put(m.toString(),v,function(y){r.log_("transaction put response",{path:m.toString(),status:y});var b=[];if(y==="ok"){for(var E=[],I=0;I<n.length;I++){if(n[I].status=Re.COMPLETED,b=b.concat(r.serverSyncTree_.ackUserWrite(n[I].currentWriteId)),n[I].onComplete){var C=n[I].currentOutputSnapshotResolved,P=new Pi(r,n[I].path),D=new vo(C,P,Jt);E.push(n[I].onComplete.bind(null,null,!0,D))}n[I].unwatcher()}r.pruneCompletedTransactionsBelowNode_(r.transactionQueueTree_.subTree(t)),r.sendReadyTransactions_(),r.eventQueue_.raiseEventsForChangedPath(t,b);for(var I=0;I<E.length;I++)Da(E[I])}else{if(y==="datastale")for(var I=0;I<n.length;I++)n[I].status===Re.SENT_NEEDS_ABORT?n[I].status=Re.NEEDS_ABORT:n[I].status=Re.RUN;else{vn("transaction at "+m.toString()+" failed: "+y);for(var I=0;I<n.length;I++)n[I].status=Re.NEEDS_ABORT,n[I].abortReason=y}r.rerunTransactions_(t)}},c)},e.prototype.rerunTransactions_=function(t){var n=this.getAncestorTransactionNode_(t),r=n.path(),i=this.buildTransactionQueue_(n);return this.rerunTransactionQueue_(i,r),r},e.prototype.rerunTransactionQueue_=function(t,n){if(t.length!==0){for(var r=[],i=[],s=t.filter(function(U){return U.status===Re.RUN}),a=s.map(function(U){return U.currentWriteId}),c=0;c<t.length;c++){var l=t[c],h=et.relativePath(n,l.path),p=!1,v=void 0;if(K(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===Re.NEEDS_ABORT)p=!0,v=l.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(l.currentWriteId,!0));else if(l.status===Re.RUN)if(l.retryCount>=FB)p=!0,v="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(l.currentWriteId,!0));else{var m=this.getLatestState_(l.path,a);l.currentInputSnapshot=m;var y=t[c].update(m.val());if(y!==void 0){hl("transaction failed: Data returned ",y,l.path);var b=pe(y),E=typeof y=="object"&&y!=null&&$n(y,".priority");E||(b=b.updatePriority(m.getPriority()));var I=l.currentWriteId,C=this.generateServerValues(),P=Im(b,m,C);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=P,l.currentWriteId=this.getNextWriteId_(),a.splice(a.indexOf(I),1),i=i.concat(this.serverSyncTree_.applyUserOverwrite(l.path,P,l.currentWriteId,l.applyLocally)),i=i.concat(this.serverSyncTree_.ackUserWrite(I,!0))}else p=!0,v="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(l.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(n,i),i=[],p&&(t[c].status=Re.COMPLETED,function(U){setTimeout(U,Math.floor(0))}(t[c].unwatcher),t[c].onComplete))if(v==="nodata"){var D=new Pi(this,t[c].path),F=t[c].currentInputSnapshot,Q=new vo(F,D,Jt);r.push(t[c].onComplete.bind(null,null,!1,Q))}else r.push(t[c].onComplete.bind(null,new Error(v),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(var c=0;c<r.length;c++)Da(r[c]);this.sendReadyTransactions_()}},e.prototype.getAncestorTransactionNode_=function(t){var n,r=this.transactionQueueTree_;for(n=t.getFront();n!==null&&r.getValue()===null;)r=r.subTree(n),t=t.popFront(),n=t.getFront();return r},e.prototype.buildTransactionQueue_=function(t){var n=[];return this.aggregateTransactionQueuesForNode_(t,n),n.sort(function(r,i){return r.order-i.order}),n},e.prototype.aggregateTransactionQueuesForNode_=function(t,n){var r=this,i=t.getValue();if(i!==null)for(var s=0;s<i.length;s++)n.push(i[s]);t.forEachChild(function(a){r.aggregateTransactionQueuesForNode_(a,n)})},e.prototype.pruneCompletedTransactionsBelowNode_=function(t){var n=this,r=t.getValue();if(r){for(var i=0,s=0;s<r.length;s++)r[s].status!==Re.COMPLETED&&(r[i]=r[s],i++);r.length=i,t.setValue(r.length>0?r:null)}t.forEachChild(function(a){n.pruneCompletedTransactionsBelowNode_(a)})},e.prototype.abortTransactions_=function(t){var n=this,r=this.getAncestorTransactionNode_(t).path(),i=this.transactionQueueTree_.subTree(t);return i.forEachAncestor(function(s){n.abortTransactionsOnNode_(s)}),this.abortTransactionsOnNode_(i),i.forEachDescendant(function(s){n.abortTransactionsOnNode_(s)}),r},e.prototype.abortTransactionsOnNode_=function(t){var n=t.getValue();if(n!==null){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)if(n[a].status!==Re.SENT_NEEDS_ABORT){if(n[a].status===Re.SENT)K(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=Re.SENT_NEEDS_ABORT,n[a].abortReason="set";else if(K(n[a].status===Re.RUN,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(this.serverSyncTree_.ackUserWrite(n[a].currentWriteId,!0)),n[a].onComplete){var c=null;r.push(n[a].onComplete.bind(null,new Error("set"),!1,c))}}s===-1?t.setValue(null):n.length=s+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),i);for(var a=0;a<r.length;a++)Da(r[a])}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wR=function(){function e(t){this.indexedFilter_=new ew(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},e.prototype.updateChild=function(t,n,r,i,s,a){return this.matches(new Dt(n,r))||(r=It.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,s,a)},e.prototype.updateFullNode=function(t,n,r){n.isLeafNode()&&(n=It.EMPTY_NODE);var i=n.withIndex(this.index_);i=i.updatePriority(It.EMPTY_NODE);var s=this;return n.forEachChild(Jt,function(a,c){s.matches(new Dt(a,c))||(i=i.updateImmediateChild(a,It.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(t){if(t.hasStart()){var n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()},e.getEndPost_=function(t){if(t.hasEnd()){var n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UB=function(){function e(t){this.rangedFilter_=new wR(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return e.prototype.updateChild=function(t,n,r,i,s,a){return this.rangedFilter_.matches(new Dt(n,r))||(r=It.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,s,a):this.fullLimitUpdateChild_(t,n,r,s,a)},e.prototype.updateFullNode=function(t,n,r){var i;if(n.isLeafNode()||n.isEmpty())i=It.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=It.EMPTY_NODE.withIndex(this.index_);var s=void 0;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;s.hasNext()&&a<this.limit_;){var c=s.getNext(),l=void 0;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),c)<=0:l=this.index_.compare(c,this.rangedFilter_.getEndPost())<=0,l)i=i.updateImmediateChild(c.name,c.node),a++;else break}}else{i=n.withIndex(this.index_),i=i.updatePriority(It.EMPTY_NODE);var h=void 0,p=void 0,v=void 0,s=void 0;if(this.reverse_){s=i.getReverseIterator(this.index_),h=this.rangedFilter_.getEndPost(),p=this.rangedFilter_.getStartPost();var m=this.index_.getCompare();v=function(I,C){return m(C,I)}}else s=i.getIterator(this.index_),h=this.rangedFilter_.getStartPost(),p=this.rangedFilter_.getEndPost(),v=this.index_.getCompare();for(var a=0,y=!1;s.hasNext();){var c=s.getNext();!y&&v(h,c)<=0&&(y=!0);var l=y&&a<this.limit_&&v(c,p)<=0;l?a++:i=i.updateImmediateChild(c.name,It.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(t,n,r,i,s){var a;if(this.reverse_){var c=this.index_.getCompare();a=function(P,D){return c(D,P)}}else a=this.index_.getCompare();var l=t;K(l.numChildren()===this.limit_,"");var h=new Dt(n,r),p=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),v=this.rangedFilter_.matches(h);if(l.hasChild(n)){for(var m=l.getImmediateChild(n),y=i.getChildAfterChild(this.index_,p,this.reverse_);y!=null&&(y.name===n||l.hasChild(y.name));)y=i.getChildAfterChild(this.index_,y,this.reverse_);var b=y==null?1:a(y,h),E=v&&!r.isEmpty()&&b>=0;if(E)return s!=null&&s.trackChildChange(vl(n,r,m)),l.updateImmediateChild(n,r);s!=null&&s.trackChildChange(dl(n,m));var I=l.updateImmediateChild(n,It.EMPTY_NODE),C=y!=null&&this.rangedFilter_.matches(y);return C?(s!=null&&s.trackChildChange(nu(y.name,y.node)),I.updateImmediateChild(y.name,y.node)):I}else return r.isEmpty()?t:v&&a(p,h)>=0?(s!=null&&(s.trackChildChange(dl(p.name,p.node)),s.trackChildChange(nu(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(p.name,It.EMPTY_NODE)):t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jB=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Jt}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return this.viewFrom_===""?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ji},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:hi},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&this.viewFrom_!==""},e.prototype.getLimit=function(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="",n},e.prototype.limitToFirst=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(t,n){var r=this.copy_();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r},e.prototype.startAfter=function(t,n){var r;if(this.index_===ui)typeof t=="string"&&(t=DS(t)),r=this.startAt(t,n);else{var i=void 0;n==null?i=hi:i=DS(n),r=this.startAt(t,i)}return r.startAfterSet_=!0,r},e.prototype.endAt=function(t,n){var r=this.copy_();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r},e.prototype.endBefore=function(t,n){var r,i;return this.index_===ui?(typeof t=="string"&&(t=LS(t)),i=this.endAt(t,n)):(n==null?r=ji:r=LS(n),i=this.endAt(t,r)),i.endBeforeSet_=!0,i},e.prototype.orderBy=function(t){var n=this.copy_();return n.index_=t,n},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_;var r=this.viewFrom_;r===""&&(this.isViewFromLeft()?r=t.VIEW_FROM_LEFT:r=t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=r}return this.index_!==Jt&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Jt},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new ew(this.getIndex()):this.hasLimit()?new UB(this):new wR(this)},e.prototype.toRestQueryStringParameters=function(){var t=e.REST_QUERY_CONSTANTS_,n={};if(this.isDefault())return n;var r;return this.index_===Jt?r=t.PRIORITY_INDEX:this.index_===Ly?r=t.VALUE_INDEX:this.index_===ui?r=t.KEY_INDEX:(K(this.index_ instanceof My,"Unrecognized index type!"),r=this.index_.toString()),n[t.ORDER_BY]=Ue(r),this.startSet_&&(n[t.START_AT]=Ue(this.indexStartValue_),this.startNameSet_&&(n[t.START_AT]+=","+Ue(this.indexStartName_))),this.endSet_&&(n[t.END_AT]=Ue(this.indexEndValue_),this.endNameSet_&&(n[t.END_AT]+=","+Ue(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[t.LIMIT_TO_FIRST]=this.limit_:n[t.LIMIT_TO_LAST]=this.limit_),n},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pi=function(e){J(t,e);function t(n,r){var i=this;if(!(n instanceof rw))throw new Error("new Reference() no longer supported - use app.database().");return i=e.call(this,n,r,new jB,!1)||this,i}return t.prototype.getKey=function(){return mt("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(n){return mt("Reference.child",1,1,arguments.length),typeof n=="number"?n=String(n):n instanceof et||(this.path.getFront()===null?w3("Reference.child",1,n,!1):pl("Reference.child",1,n,!1)),new t(this.repo,this.path.child(n))},t.prototype.getParent=function(){mt("Reference.parent",0,0,arguments.length);var n=this.path.parent();return n===null?null:new t(this.repo,n)},t.prototype.getRoot=function(){mt("Reference.root",0,0,arguments.length);for(var n=this;n.getParent()!==null;)n=n.getParent();return n},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(n,r){mt("Reference.set",1,2,arguments.length),pr("Reference.set",this.path),oi("Reference.set",1,n,this.path,!1),Qe("Reference.set",2,r,!0);var i=new Bn;return this.repo.setWithPriority(this.path,n,null,i.wrapCallback(r)),i.promise},t.prototype.update=function(n,r){if(mt("Reference.update",1,2,arguments.length),pr("Reference.update",this.path),Array.isArray(n)){for(var i={},s=0;s<n.length;++s)i[""+s]=n[s];n=i,vn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}QN("Reference.update",1,n,this.path,!1),Qe("Reference.update",2,r,!0);var a=new Bn;return this.repo.update(this.path,n,a.wrapCallback(r)),a.promise},t.prototype.setWithPriority=function(n,r,i){if(mt("Reference.setWithPriority",2,3,arguments.length),pr("Reference.setWithPriority",this.path),oi("Reference.setWithPriority",1,n,this.path,!1),Py("Reference.setWithPriority",2,r,!1),Qe("Reference.setWithPriority",3,i,!0),this.getKey()===".length"||this.getKey()===".keys")throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var s=new Bn;return this.repo.setWithPriority(this.path,n,r,s.wrapCallback(i)),s.promise},t.prototype.remove=function(n){return mt("Reference.remove",0,1,arguments.length),pr("Reference.remove",this.path),Qe("Reference.remove",1,n,!0),this.set(null,n)},t.prototype.transaction=function(n,r,i){if(mt("Reference.transaction",1,3,arguments.length),pr("Reference.transaction",this.path),Qe("Reference.transaction",1,n,!1),Qe("Reference.transaction",2,r,!0),b3("Reference.transaction",3,i,!0),this.getKey()===".length"||this.getKey()===".keys")throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";i===void 0&&(i=!0);var s=new Bn;typeof r=="function"&&s.promise.catch(function(){});var a=function(c,l,h){c?s.reject(c):s.resolve(new I3(l,h)),typeof r=="function"&&r(c,l,h)};return this.repo.startTransaction(this.path,n,a,i),s.promise},t.prototype.setPriority=function(n,r){mt("Reference.setPriority",1,2,arguments.length),pr("Reference.setPriority",this.path),Py("Reference.setPriority",1,n,!1),Qe("Reference.setPriority",2,r,!0);var i=new Bn;return this.repo.setWithPriority(this.path.child(".priority"),n,null,i.wrapCallback(r)),i.promise},t.prototype.push=function(n,r){mt("Reference.push",0,2,arguments.length),pr("Reference.push",this.path),oi("Reference.push",1,n,this.path,!0),Qe("Reference.push",2,r,!0);var i=this.repo.serverTime(),s=T3(i),a=this.child(s),c=this.child(s),l;return n!=null?l=a.set(n,r).then(function(){return c}):l=Promise.resolve(c),a.then=l.then.bind(l),a.catch=l.then.bind(l,void 0),typeof r=="function"&&l.catch(function(){}),a},t.prototype.onDisconnect=function(){return pr("Reference.onDisconnect",this.path),new E3(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(Z_);Z_.__referenceConstructor=Pi;Fy.__referenceConstructor=Pi;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VB=function(){function e(t,n){var r=this;this.app_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(i){return r.auth_=i})}return e.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(n){return n&&n.code==="auth/token-not-initialized"?(sn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)}):Promise.resolve(null)},e.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(n){return n.addAuthTokenListener(t)}))},e.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(n){return n.removeAuthTokenListener(t)})},e.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vn(t)},e}(),iA=function(){function e(){}return e.prototype.getToken=function(t){return Promise.resolve({accessToken:e.EMULATOR_AUTH_TOKEN})},e.prototype.addTokenChangeListener=function(t){t(e.EMULATOR_AUTH_TOKEN)},e.prototype.removeTokenChangeListener=function(t){},e.prototype.notifyForInvalidToken=function(){},e.EMULATOR_AUTH_TOKEN="owner",e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BB="FIREBASE_DATABASE_EMULATOR_HOST",Pm,gl=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return Pm||(Pm=new e),Pm},e.prototype.interrupt=function(){var t,n,r,i;try{for(var s=Te(Object.keys(this.repos_)),a=s.next();!a.done;a=s.next()){var c=a.value;try{for(var l=(r=void 0,Te(Object.keys(this.repos_[c]))),h=l.next();!h.done;h=l.next()){var p=h.value;this.repos_[c][p].interrupt()}}catch(v){r={error:v}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}}catch(v){t={error:v}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},e.prototype.resume=function(){var t,n,r,i;try{for(var s=Te(Object.keys(this.repos_)),a=s.next();!a.done;a=s.next()){var c=a.value;try{for(var l=(r=void 0,Te(Object.keys(this.repos_[c]))),h=l.next();!h.done;h=l.next()){var p=h.value;this.repos_[c][p].resume()}}catch(v){r={error:v}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}}catch(v){t={error:v}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},e.prototype.applyEmulatorSettings=function(t,n,r){t.repoInfo_=new X_(n+":"+r,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new iA)},e.prototype.databaseFromApp=function(t,n,r,i){var s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||si("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),sn("Using default host for project ",t.options.projectId),s=t.options.projectId+"-default-rtdb.firebaseio.com");var a=xy(s,i),c=a.repoInfo,l,h=void 0;typeof process<"u"&&(h=process.env[BB]),h?(l=!0,s="http://"+h+"?ns="+c.namespace,a=xy(s,i),c=a.repoInfo):l=!a.repoInfo.secure;var p=i&&l?new iA:new VB(t,n);YN("Invalid Firebase Database URL",1,a),a.path.isEmpty()||si("Database URL must point to the root of a Firebase Database (not including a child path).");var v=this.createRepo(c,t,p);return v.database},e.prototype.deleteRepo=function(t){var n=kr(this.repos_,t.app.name);(!n||kr(n,t.key)!==t)&&si("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete n[t.key]},e.prototype.createRepo=function(t,n,r){var i=kr(this.repos_,n.name);i||(i={},this.repos_[n.name]=i);var s=kr(i,t.toURLString());return s&&si("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new rw(t,this.useRestClient_,n,r),i[t.toURLString()]=s,s},e.prototype.forceRestClient=function(t){this.useRestClient_=t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iw=function(){function e(t){var n=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return R(n,void 0,void 0,function(){return N(this,function(r){return this.checkDeleted_("delete"),gl.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof rw||si("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(e.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Pi(this.repo_,et.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),e.prototype.useEmulator=function(t,n){if(this.checkDeleted_("useEmulator"),this.instanceStarted_){si("Cannot call useEmulator() after instance has already been initialized.");return}gl.getInstance().applyEmulatorSettings(this.repoInternal_,t,n)},e.prototype.ref=function(t){return this.checkDeleted_("ref"),mt("database.ref",0,1,arguments.length),t instanceof Pi?this.refFromURL(t.toString()):t!==void 0?this.root_.child(t):this.root_},e.prototype.refFromURL=function(t){var n="database.refFromURL";this.checkDeleted_(n),mt(n,1,1,arguments.length);var r=xy(t,this.repo_.repoInfo_.nodeAdmin);YN(n,1,r);var i=r.repoInfo;return!this.repo_.repoInfo_.isCustomHost()&&i.host!==this.repo_.repoInfo_.host&&si(n+": Host name does not match the current database: (found "+i.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(r.path.toString())},e.prototype.checkDeleted_=function(t){this.repoInternal_===null&&si("Cannot call "+t+" on a deleted database.")},e.prototype.goOffline=function(){mt("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){mt("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qB=function(){ps.forceDisallow(),nw.forceAllow()},HB=function(){nw.forceDisallow()},GB=function(){return ps.isAvailable()},WB=function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},$B=function(e,t){e.repo.stats(t)},zB=function(e,t){e.repo.statsIncrementCounter(t)},KB=function(e){return e.repo.dataUpdateCount},QB=function(e,t){return e.repo.interceptServerData_(t)};function YB(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,s=e.namespace,a=e.nodeAdmin,c=a===void 0?!1:a;mR(r);var l=new NN("auth-internal",new RN("database-standalone"));return l.setComponent(new zn("auth-internal",function(){return i},"PRIVATE")),{instance:gl.getInstance().databaseFromApp(t,l,n,c),namespace:s}}var XB=Object.freeze({__proto__:null,forceLongPolling:qB,forceWebSockets:HB,isWebSocketsAvailable:GB,setSecurityDebugCallback:WB,stats:$B,statsIncrementCounter:zB,dataUpdateCount:KB,interceptServerData:QB,initStandalone:YB});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JB=Ts;Ts.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Ts.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var ZB=yR,tq=function(e){var t=Ts.prototype.put;return Ts.prototype.put=function(n,r,i,s){s!==void 0&&(s=e()),t.call(this,n,r,i,s)},function(){Ts.prototype.put=t}},eq=X_,nq=function(e){return e.queryIdentifier()},rq=function(e){gl.getInstance().forceRestClient(e)},iq=Object.freeze({__proto__:null,DataConnection:JB,RealTimeConnection:ZB,hijackHash:tq,ConnectionTarget:eq,queryIdentifier:nq,forceRestClient:rq}),oq="@firebase/database",sq="0.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aq=iw.ServerValue;function uq(e){mR(e.SDK_VERSION),e.INTERNAL.registerComponent(new zn("database",function(t,n){var r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return gl.getInstance().databaseFromApp(r,i,n)},"PUBLIC").setServiceProps({Reference:Pi,Query:Z_,Database:iw,DataSnapshot:vo,enableLogging:MN,INTERNAL:XB,ServerValue:aq,TEST_ACCESS:iq}).setMultipleInstances(!0)),e.registerVersion(oq,sq)}uq(at);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Uy=function(e,t){return Uy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Uy(e,t)};function cq(e,t){Uy(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function bR(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var lq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ct,ow=ow||{},Tt=lq||self;function sp(){}function jy(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Bl(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function fq(e){return Object.prototype.hasOwnProperty.call(e,km)&&e[km]||(e[km]=++hq)}var km="closure_uid_"+(1e9*Math.random()>>>0),hq=0;function pq(e,t,n){return e.call.apply(e.bind,arguments)}function dq(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function gn(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?gn=pq:gn=dq,gn.apply(null,arguments)}function mh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function vi(){return Date.now()}function Dn(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Kb=function(r,i,s){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return t.prototype[i].apply(r,a)}}function Lo(){this.j=this.j,this.i=this.i}var vq=0;Lo.prototype.j=!1;Lo.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),vq!=0)&&fq(this)};Lo.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ER=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},IR=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=typeof e=="string"?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function gq(e){t:{for(var t=oH,n=e.length,r=typeof e=="string"?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break t}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function oA(e){return Array.prototype.concat.apply([],arguments)}function sw(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ap(e){return/^[\s\xa0]*$/.test(e)}var sA=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Rn(e,t){return e.indexOf(t)!=-1}function Dm(e,t){return e<t?-1:e>t?1:0}var On;t:{var aA=Tt.navigator;if(aA){var uA=aA.userAgent;if(uA){On=uA;break t}}On=""}function aw(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function TR(e){var t={};for(var n in e)t[n]=e[n];return t}var cA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function SR(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var s=0;s<cA.length;s++)n=cA[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function uw(e){return uw[" "](e),e}uw[" "]=sp;function mq(e,t){var n=wq;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var yq=Rn(On,"Opera"),Ro=Rn(On,"Trident")||Rn(On,"MSIE"),AR=Rn(On,"Edge"),Vy=AR||Ro,CR=Rn(On,"Gecko")&&!(Rn(On.toLowerCase(),"webkit")&&!Rn(On,"Edge"))&&!(Rn(On,"Trident")||Rn(On,"MSIE"))&&!Rn(On,"Edge"),_q=Rn(On.toLowerCase(),"webkit")&&!Rn(On,"Edge");function NR(){var e=Tt.document;return e?e.documentMode:void 0}var up;t:{var Lm="",Mm=function(){var e=On;if(CR)return/rv:([^\);]+)(\)|;)/.exec(e);if(AR)return/Edge\/([\d\.]+)/.exec(e);if(Ro)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(_q)return/WebKit\/(\S+)/.exec(e);if(yq)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(Mm&&(Lm=Mm?Mm[1]:""),Ro){var Fm=NR();if(Fm!=null&&Fm>parseFloat(Lm)){up=String(Fm);break t}}up=Lm}var wq={};function RR(e){return mq(e,function(){for(var t=0,n=sA(String(up)).split("."),r=sA(String(e)).split("."),i=Math.max(n.length,r.length),s=0;t==0&&s<i;s++){var a=n[s]||"",c=r[s]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],a[0].length==0&&c[0].length==0)break;t=Dm(a[1].length==0?0:parseInt(a[1],10),c[1].length==0?0:parseInt(c[1],10))||Dm(a[2].length==0,c[2].length==0)||Dm(a[2],c[2]),a=a[3],c=c[3]}while(t==0)}return 0<=t})}var By;if(Tt.document&&Ro){var lA=NR();By=lA||parseInt(up,10)||void 0}else By=void 0;var OR=By,cw=!Ro||9<=Number(OR),bq=Ro&&!RR("9"),Eq=function(){if(!Tt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Tt.addEventListener("test",sp,t),Tt.removeEventListener("test",sp,t)}catch{}return e}();function mn(e,t){this.type=e,this.a=this.target=t,this.defaultPrevented=!1}mn.prototype.b=function(){this.defaultPrevented=!0};function ml(e,t){if(mn.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(CR){t:{try{uw(t.nodeName);var i=!0;break t}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:Iq[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}Dn(ml,mn);var Iq={2:"touch",3:"pen",4:"mouse"};ml.prototype.b=function(){ml.X.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,bq)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch{}};var ql="closure_listenable_"+(1e6*Math.random()|0),Tq=0;function Sq(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ca=i,this.key=++Tq,this.Y=this.Z=!1}function ed(e){e.Y=!0,e.listener=null,e.proxy=null,e.src=null,e.ca=null}function nd(e){this.src=e,this.a={},this.b=0}nd.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.a[s],e||(e=this.a[s]=[],this.b++);var a=Hy(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):(t=new Sq(t,this.src,s,!!r,i),t.Z=n,e.push(t)),t};function qy(e,t){var n=t.type;if(n in e.a){var r=e.a[n],i=ER(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(ed(t),e.a[n].length==0&&(delete e.a[n],e.b--))}}function Hy(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.Y&&s.listener==t&&s.capture==!!n&&s.ca==r)return i}return-1}var lw="closure_lm_"+(1e6*Math.random()|0),Um={};function fw(e,t,n,r,i){if(r&&r.once)return PR(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)fw(e,t[s],n,r,i);return null}return n=dw(n),e&&e[ql]?e.va(t,n,Bl(r)?!!r.capture:!!r,i):xR(e,t,n,!1,r,i)}function xR(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=Bl(i)?!!i.capture:!!i;if(a&&!cw)return null;var c=pw(e);if(c||(e[lw]=c=new nd(e)),n=c.add(t,n,r,a,s),n.proxy)return n;if(r=Aq(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Eq||(i=a),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(DR(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Aq(){var e=Cq,t=cw?function(n){return e.call(t.src,t.listener,n)}:function(n){if(n=e.call(t.src,t.listener,n),!n)return n};return t}function PR(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)PR(e,t[s],n,r,i);return null}return n=dw(n),e&&e[ql]?e.wa(t,n,Bl(r)?!!r.capture:!!r,i):xR(e,t,n,!0,r,i)}function kR(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)kR(e,t[s],n,r,i);else r=Bl(r)?!!r.capture:!!r,n=dw(n),e&&e[ql]?(e=e.c,t=String(t).toString(),t in e.a&&(s=e.a[t],n=Hy(s,n,r,i),-1<n&&(ed(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.a[t],e.b--)))):e&&(e=pw(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Hy(t,n,r,i)),(n=-1<e?t[e]:null)&&hw(n))}function hw(e){if(typeof e!="number"&&e&&!e.Y){var t=e.src;if(t&&t[ql])qy(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(DR(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=pw(t))?(qy(n,e),n.b==0&&(n.src=null,t[lw]=null)):ed(e)}}}function DR(e){return e in Um?Um[e]:Um[e]="on"+e}function fA(e,t){var n=e.listener,r=e.ca||e.src;return e.Z&&hw(e),n.call(r,t)}function Cq(e,t){if(e.Y)return!0;if(!cw){if(!t)t:{t=["window","event"];for(var n=Tt,r=0;r<t.length;r++)if(n=n[t[r]],n==null){t=null;break t}t=n}return t=new ml(t,this),fA(e,t)}return fA(e,new ml(t,this))}function pw(e){return e=e[lw],e instanceof nd?e:null}var jm="__closure_events_fn_"+(1e9*Math.random()>>>0);function dw(e){return typeof e=="function"?e:(e[jm]||(e[jm]=function(t){return e.handleEvent(t)}),e[jm])}function sr(){Lo.call(this),this.c=new nd(this),this.J=this,this.C=null}Dn(sr,Lo);sr.prototype[ql]=!0;ct=sr.prototype;ct.addEventListener=function(e,t,n,r){fw(this,e,t,n,r)};ct.removeEventListener=function(e,t,n,r){kR(this,e,t,n,r)};function un(e,t){var n,r=e.C;if(r)for(n=[];r;r=r.C)n.push(r);if(e=e.J,r=t.type||t,typeof t=="string")t=new mn(t,e);else if(t instanceof mn)t.target=t.target||e;else{var i=t;t=new mn(r,e),SR(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.a=n[s];i=yh(a,r,!0,t)&&i}if(a=t.a=e,i=yh(a,r,!0,t)&&i,i=yh(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)a=t.a=n[s],i=yh(a,r,!1,t)&&i}ct.G=function(){if(sr.X.G.call(this),this.c){var e=this.c,t;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ed(n[r]);delete e.a[t],e.b--}}this.C=null};ct.va=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)};ct.wa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};function yh(e,t,n,r){if(t=e.c.a[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.Y&&a.capture==n){var c=a.listener,l=a.ca||a.src;a.Z&&qy(e.c,a),i=c.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var vw=Tt.JSON.stringify;function LR(){this.b=this.a=null}var MR=new(function(){function e(t,n){this.c=t,this.f=n,this.b=0,this.a=null}return e.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},e}())(function(){return new gw},function(e){e.reset()});LR.prototype.add=function(e,t){var n=MR.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n};function Nq(){var e=UR,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function gw(){this.next=this.b=this.a=null}gw.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null};gw.prototype.reset=function(){this.next=this.b=this.a=null};function Rq(e){Tt.setTimeout(function(){throw e},0)}function FR(e,t){Gy||Oq(),Wy||(Gy(),Wy=!0),UR.add(e,t)}var Gy;function Oq(){var e=Tt.Promise.resolve(void 0);Gy=function(){e.then(xq)}}var Wy=!1,UR=new LR;function xq(){for(var e;e=Nq();){try{e.a.call(e.b)}catch(n){Rq(n)}var t=MR;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Wy=!1}function rd(e,t){sr.call(this),this.b=e||1,this.a=t||Tt,this.f=gn(this.Za,this),this.g=vi()}Dn(rd,sr);ct=rd.prototype;ct.aa=!1;ct.M=null;ct.Za=function(){if(this.aa){var e=vi()-this.g;0<e&&e<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-e):(this.M&&(this.a.clearTimeout(this.M),this.M=null),un(this,"tick"),this.aa&&(mw(this),this.start()))}};ct.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=vi())};function mw(e){e.aa=!1,e.M&&(e.a.clearTimeout(e.M),e.M=null)}ct.G=function(){rd.X.G.call(this),mw(this),delete this.a};function yw(e,t,n){if(typeof e=="function")n&&(e=gn(e,n));else if(e&&typeof e.handleEvent=="function")e=gn(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:Tt.setTimeout(e,t||0)}function jR(e){e.a=yw(function(){e.a=null,e.c&&(e.c=!1,jR(e))},e.h);var t=e.b;e.b=null,e.g.apply(null,t)}var Pq=function(e){cq(t,e);function t(n,r){var i=e.call(this)||this;return i.g=n,i.h=r,i.b=null,i.c=!1,i.a=null,i}return t.prototype.f=function(n){this.b=arguments,this.a?this.c=!0:jR(this)},t.prototype.G=function(){e.prototype.G.call(this),this.a&&(Tt.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},t}(Lo);function yl(e){Lo.call(this),this.b=e,this.a={}}Dn(yl,Lo);var hA=[];function VR(e,t,n,r){Array.isArray(n)||(n&&(hA[0]=n.toString()),n=hA);for(var i=0;i<n.length;i++){var s=fw(t,n[i],r||e.handleEvent,!1,e.b||e);if(!s)break;e.a[s.key]=s}}function BR(e){aw(e.a,function(t,n){this.a.hasOwnProperty(n)&&hw(t)},e),e.a={}}yl.prototype.G=function(){yl.X.G.call(this),BR(this)};yl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function _w(){this.a=!0}function kq(e,t,n,r,i,s){e.info(function(){if(e.a)if(s)for(var a="",c=s.split("&"),l=0;l<c.length;l++){var h=c[l].split("=");if(1<h.length){var p=h[0];h=h[1];var v=p.split("_");a=2<=v.length&&v[1]=="type"?a+(p+"="+h+"&"):a+(p+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+a})}function Dq(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+a})}function La(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+Mq(e,n)+(r?" "+r:"")})}function Lq(e,t){e.info(function(){return"TIMEOUT: "+t})}_w.prototype.info=function(){};function Mq(e,t){if(!e.a)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<i.length;a++)i[a]=""}}}}return vw(n)}catch{return t}}var Bs={},pA=null;function id(){return pA=pA||new sr}Bs.Fa="serverreachability";function qR(e){mn.call(this,Bs.Fa,e)}Dn(qR,mn);function _l(e){var t=id();un(t,new qR(t))}Bs.STAT_EVENT="statevent";function HR(e,t){mn.call(this,Bs.STAT_EVENT,e),this.stat=t}Dn(HR,mn);function xn(e){var t=id();un(t,new HR(t,e))}Bs.Ga="timingevent";function GR(e){mn.call(this,Bs.Ga,e)}Dn(GR,mn);function Hl(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return Tt.setTimeout(function(){e()},t)}var od={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},WR={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function $R(){}$R.prototype.a=null;function dA(e){var t;return(t=e.a)||(t=e.a={}),t}function zR(){}var Gl={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ww(){mn.call(this,"d")}Dn(ww,mn);function bw(){mn.call(this,"c")}Dn(bw,mn);var KR;function QR(){}Dn(QR,$R);KR=new QR;function Wl(e,t,n,r){this.g=e,this.c=t,this.f=n,this.S=r||1,this.J=new yl(this),this.P=Fq,e=Vy?125:void 0,this.R=new rd(e),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}var Fq=45e3,YR={},$y={};ct=Wl.prototype;ct.setTimeout=function(e){this.P=e};function zy(e,t,n){e.H=1,e.i=ad(Vi(t)),e.j=n,e.I=!0,XR(e,null)}function XR(e,t){e.u=vi(),$l(e),e.l=Vi(e.i);var n=e.l,r=e.S;Array.isArray(r)||(r=[String(r)]),rO(n.b,"t",r),e.D=0,e.a=bO(e.g,e.g.C?t:null),0<e.O&&(e.F=new Pq(gn(e.Ca,e,e.a),e.O)),VR(e.J,e.a,"readystatechange",e.Xa),t=e.B?TR(e.B):{},e.j?(e.m||(e.m="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ba(e.l,e.m,e.j,t)):(e.m="GET",e.a.ba(e.l,e.m,null,t)),_l(),kq(e.c,e.m,e.l,e.f,e.S,e.j)}ct.Xa=function(e){e=e.target;var t=this.F;t&&wo(e)==3?t.f():this.Ca(e)};ct.Ca=function(e){try{if(e==this.a)t:{var t=wo(this.a),n=this.a.ua(),r=this.a.W();if(!(3>t||t==3&&!Vy&&!this.a.$())){this.A||t!=4||n==7||(n==8||0>=r?_l(3):_l(2)),sd(this);var i=this.a.W();this.N=i;var s=this.a.$();if(this.b=i==200,Dq(this.c,this.m,this.l,this.f,this.S,t,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,c=this.a;if((a=c.a?c.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ap(a)){var l=a;break e}}l=null}if(l)La(this.c,this.f,l,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ky(this,l);else{this.b=!1,this.h=3,xn(12),Ga(this),cp(this);break t}}this.I?(JR(this,t,s),Vy&&this.b&&t==3&&(VR(this.J,this.R,"tick",this.Wa),this.R.start())):(La(this.c,this.f,s,null),Ky(this,s)),t==4&&Ga(this),this.b&&!this.A&&(t==4?mO(this.g,this):(this.b=!1,$l(this)))}else i==400&&0<s.indexOf("Unknown SID")?(this.h=3,xn(12)):(this.h=0,xn(13)),Ga(this),cp(this)}}}catch{}finally{}};function JR(e,t,n){for(var r=!0;!e.A&&e.D<n.length;){var i=Uq(e,n);if(i==$y){t==4&&(e.h=4,xn(14),r=!1),La(e.c,e.f,null,"[Incomplete Response]");break}else if(i==YR){e.h=4,xn(15),La(e.c,e.f,n,"[Invalid Chunk]"),r=!1;break}else La(e.c,e.f,i,null),Ky(e,i)}t==4&&n.length==0&&(e.h=1,xn(16),r=!1),e.b=e.b&&r,r?0<n.length&&!e.V&&(e.V=!0,t=e.g,t.a==e&&t.U&&!t.F&&(t.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Rw(t),t.F=!0,xn(11))):(La(e.c,e.f,n,"[Invalid Chunked Response]"),Ga(e),cp(e))}ct.Wa=function(){if(this.a){var e=wo(this.a),t=this.a.$();this.D<t.length&&(sd(this),JR(this,e,t),this.b&&e!=4&&$l(this))}};function Uq(e,t){var n=e.D,r=t.indexOf(`
`,n);return r==-1?$y:(n=Number(t.substring(n,r)),isNaN(n)?YR:(r+=1,r+n>t.length?$y:(t=t.substr(r,n),e.D=r+n,t)))}ct.cancel=function(){this.A=!0,Ga(this)};function $l(e){e.T=vi()+e.P,ZR(e,e.P)}function ZR(e,t){if(e.o!=null)throw Error("WatchDog timer not null");e.o=Hl(gn(e.Va,e),t)}function sd(e){e.o&&(Tt.clearTimeout(e.o),e.o=null)}ct.Va=function(){this.o=null;var e=vi();0<=e-this.T?(Lq(this.c,this.l),this.H!=2&&(_l(),xn(17)),Ga(this),this.h=2,cp(this)):ZR(this,this.T-e)};function cp(e){e.g.v==0||e.A||mO(e.g,e)}function Ga(e){sd(e);var t=e.F;t&&typeof t.ja=="function"&&t.ja(),e.F=null,mw(e.R),BR(e.J),e.a&&(t=e.a,e.a=null,t.abort(),t.ja())}function Ky(e,t){try{var n=e.g;if(n.v!=0&&(n.a==e||Qy(n.b,e))){if(n.I=e.N,!e.C&&Qy(n.b,e)&&n.v==3){try{var r=n.ka.a.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){t:if(!n.j){if(n.a)if(n.a.u+3e3<e.u)pp(n),cd(n);else break t;Nw(n),xn(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&n.o==0&&!n.m&&(n.m=Hl(gn(n.Sa,n),6e3));if(1>=sO(n.b)&&n.ea){try{n.ea()}catch{}n.ea=void 0}}else ms(n,11)}else if((e.C||n.a==e)&&pp(n),!ap(t))for(t=r=n.ka.a.parse(t),r=0;r<t.length;r++)if(i=t[r],n.P=i[0],i=i[1],n.v==2)if(i[0]=="c"){n.J=i[1],n.ga=i[2];var s=i[3];s!=null&&(n.ha=s,n.c.info("VER="+n.ha));var a=i[4];a!=null&&(n.pa=a,n.c.info("SVER="+n.pa));var c=i[5];if(c!=null&&typeof c=="number"&&0<c){var l=1.5*c;n.D=l,n.c.info("backChannelRequestTimeoutMs_="+l)}l=n;var h=e.a;if(h){var p=h.a?h.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var v=l.b;!v.a&&(Rn(p,"spdy")||Rn(p,"quic")||Rn(p,"h2"))&&(v.f=v.g,v.a=new Set,v.b&&(Tw(v,v.b),v.b=null))}if(l.A){var m=h.a?h.a.getResponseHeader("X-HTTP-Session-Id"):null;m&&(l.na=m,ce(l.B,l.A,m))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=vi()-e.u,n.c.info("Handshake RTT: "+n.N+"ms")),l=n;var y=e;if(l.la=wO(l,l.C?l.ga:null,l.fa),y.C){aO(l.b,y);var b=y,E=l.D;E&&b.setTimeout(E),b.o&&(sd(b),$l(b)),l.a=y}else vO(l);0<n.g.length&&ld(n)}else i[0]!="stop"&&i[0]!="close"||ms(n,7);else n.v==3&&(i[0]=="stop"||i[0]=="close"?i[0]=="stop"?ms(n,7):Cw(n):i[0]!="noop"&&n.f&&n.f.sa(i),n.o=0)}_l(4)}catch{}}function jq(e){if(e.K&&typeof e.K=="function")return e.K();if(typeof e=="string")return e.split("");if(jy(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return e=t}function Ew(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(jy(e)||typeof e=="string")IR(e,t,void 0);else{if(e.L&&typeof e.L=="function")var n=e.L();else if(e.K&&typeof e.K=="function")n=void 0;else if(jy(e)||typeof e=="string"){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=jq(e),i=r.length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function Nu(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Nu)for(n=e.L(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}ct=Nu.prototype;ct.K=function(){Iw(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e};ct.L=function(){return Iw(this),this.a.concat()};function Iw(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];xs(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)r=e.a[t],xs(i,r)||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}ct.get=function(e,t){return xs(this.b,e)?this.b[e]:t};ct.set=function(e,t){xs(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t};ct.forEach=function(e,t){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};function xs(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var tO=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Vq(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ps(e,t){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,e instanceof Ps){this.a=t!==void 0?t:e.a,lp(this,e.f),this.j=e.j,fp(this,e.c),hp(this,e.h),this.g=e.g,t=e.b;var n=new wl;n.c=t.c,t.a&&(n.a=new Nu(t.a),n.b=t.b),vA(this,n),this.i=e.i}else e&&(n=String(e).match(tO))?(this.a=!!t,lp(this,n[1]||"",!0),this.j=Kc(n[2]||""),fp(this,n[3]||"",!0),hp(this,n[4]),this.g=Kc(n[5]||"",!0),vA(this,n[6]||"",!0),this.i=Kc(n[7]||"")):(this.a=!!t,this.b=new wl(null,this.a))}Ps.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Uc(t,gA,!0),":");var n=this.c;return(n||t=="file")&&(e.push("//"),(t=this.j)&&e.push(Uc(t,gA,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,n!=null&&e.push(":",String(n))),(n=this.g)&&(this.c&&n.charAt(0)!="/"&&e.push("/"),e.push(Uc(n,n.charAt(0)=="/"?Wq:Gq,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.i)&&e.push("#",Uc(n,zq)),e.join("")};function Vi(e){return new Ps(e)}function lp(e,t,n){e.f=n?Kc(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function fp(e,t,n){e.c=n?Kc(t,!0):t}function hp(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.h=t}else e.h=null}function vA(e,t,n){t instanceof wl?(e.b=t,Kq(e.b,e.a)):(n||(t=Uc(t,$q)),e.b=new wl(t,e.a))}function ce(e,t,n){e.b.set(t,n)}function ad(e){return ce(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^vi()).toString(36)),e}function Bq(e){return e instanceof Ps?Vi(e):new Ps(e,void 0)}function qq(e,t,n,r){var i=new Ps(null,void 0);return e&&lp(i,e),t&&fp(i,t),n&&hp(i,n),r&&(i.g=r),i}function Kc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Uc(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,Hq),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Hq(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var gA=/[#\/\?@]/g,Gq=/[#\?:]/g,Wq=/[#\?]/g,$q=/[#\?@]/g,zq=/#/g;function wl(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Mo(e){e.a||(e.a=new Nu,e.b=0,e.c&&Vq(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}ct=wl.prototype;ct.add=function(e,t){Mo(this),this.c=null,e=Ru(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this};function eO(e,t){Mo(e),t=Ru(e,t),xs(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,e=e.a,xs(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Iw(e)))}function nO(e,t){return Mo(e),t=Ru(e,t),xs(e.a.b,t)}ct.forEach=function(e,t){Mo(this),this.a.forEach(function(n,r){IR(n,function(i){e.call(t,i,r,this)},this)},this)};ct.L=function(){Mo(this);for(var e=this.a.K(),t=this.a.L(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n};ct.K=function(e){Mo(this);var t=[];if(typeof e=="string")nO(this,e)&&(t=oA(t,this.a.get(Ru(this,e))));else{e=this.a.K();for(var n=0;n<e.length;n++)t=oA(t,e[n])}return t};ct.set=function(e,t){return Mo(this),this.c=null,e=Ru(this,e),nO(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this};ct.get=function(e,t){return e?(e=this.K(e),0<e.length?String(e[0]):t):t};function rO(e,t,n){eO(e,t),0<n.length&&(e.c=null,e.a.set(Ru(e,t),sw(n)),e.b+=n.length)}ct.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.L(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.K(r);for(var s=0;s<r.length;s++){var a=i;r[s]!==""&&(a+="="+encodeURIComponent(String(r[s]))),e.push(a)}}return this.c=e.join("&")};function Ru(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function Kq(e,t){t&&!e.f&&(Mo(e),e.c=null,e.a.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(eO(this,r),rO(this,i,n))},e)),e.f=t}var Qq=function(){function e(t,n){this.b=t,this.a=n}return e}();function iO(e){this.g=e||Yq,Tt.PerformanceNavigationTiming?(e=Tt.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(Tt.ia&&Tt.ia.ya&&Tt.ia.ya()&&Tt.ia.ya().Lb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Yq=10;function oO(e){return e.b?!0:e.a?e.a.size>=e.f:!1}function sO(e){return e.b?1:e.a?e.a.size:0}function Qy(e,t){return e.b?e.b==t:e.a?e.a.has(t):!1}function Tw(e,t){e.a?e.a.add(t):e.b=t}function aO(e,t){e.b&&e.b==t?e.b=null:e.a&&e.a.has(t)&&e.a.delete(t)}iO.prototype.cancel=function(){var e,t;if(this.c=uO(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&this.a.size!==0){try{for(var n=bR(this.a.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){e={error:s}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}};function uO(e){var t,n;if(e.b!=null)return e.c.concat(e.b.s);if(e.a!=null&&e.a.size!==0){var r=e.c;try{for(var i=bR(e.a.values()),s=i.next();!s.done;s=i.next()){var a=s.value;r=r.concat(a.s)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return sw(e.c)}function Sw(){}Sw.prototype.stringify=function(e){return Tt.JSON.stringify(e,void 0)};Sw.prototype.parse=function(e){return Tt.JSON.parse(e,void 0)};function Xq(){this.a=new Sw}function Jq(e,t,n){var r=n||"";try{Ew(e,function(i,s){var a=i;Bl(i)&&(a=vw(i)),t.push(r+s+"="+encodeURIComponent(a))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Zq(e,t){var n=new _w;if(Tt.Image){var r=new Image;r.onload=mh(_h,n,r,"TestLoadImage: loaded",!0,t),r.onerror=mh(_h,n,r,"TestLoadImage: error",!1,t),r.onabort=mh(_h,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=mh(_h,n,r,"TestLoadImage: timeout",!1,t),Tt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function _h(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}var tH=Tt.JSON.parse;function He(e){sr.call(this),this.headers=new Nu,this.H=e||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=eH,this.D=this.F=!1}Dn(He,sr);var eH="",nH=/^https?$/i,rH=["POST","PUT"];ct=He.prototype;ct.ba=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+e);t=t?t.toUpperCase():"GET",this.B=e,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?dA(this.H):dA(KR),this.a.onreadystatechange=gn(this.za,this);try{this.A=!0,this.a.open(t,String(e),!0),this.A=!1}catch(s){mA(this,s);return}e=n||"";var i=new Nu(this.headers);r&&Ew(r,function(s,a){i.set(a,s)}),r=gq(i.L()),n=Tt.FormData&&e instanceof Tt.FormData,!(0<=ER(rH,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,a){this.a.setRequestHeader(a,s)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{fO(this),0<this.o&&((this.D=iH(this.a))?(this.a.timeout=this.o,this.a.ontimeout=gn(this.xa,this)):this.m=yw(this.xa,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(s){mA(this,s)}};function iH(e){return Ro&&RR(9)&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function oH(e){return e.toLowerCase()=="content-type"}ct.xa=function(){typeof ow<"u"&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,un(this,"timeout"),this.abort(8))};function mA(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,cO(e),ud(e)}function cO(e){e.u||(e.u=!0,un(e,"complete"),un(e,"error"))}ct.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,un(this,"complete"),un(this,"abort"),ud(this))};ct.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),ud(this,!0)),He.X.G.call(this)};ct.za=function(){this.j||(this.A||this.l||this.g?lO(this):this.Ua())};ct.Ua=function(){lO(this)};function lO(e){if(e.b&&typeof ow<"u"&&(!e.s[1]||wo(e)!=4||e.W()!=2)){if(e.l&&wo(e)==4)yw(e.za,0,e);else if(un(e,"readystatechange"),wo(e)==4){e.b=!1;try{{var t=e.W();t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var r;if(!(r=n)){var i;if(i=t===0){var s=String(e.B).match(tO)[1]||null;if(!s&&Tt.self&&Tt.self.location){var a=Tt.self.location.protocol;s=a.substr(0,a.length-1)}i=!nH.test(s?s.toLowerCase():"")}r=i}var c=r}if(c)un(e,"complete"),un(e,"success");else{e.h=6;try{var l=2<wo(e)?e.a.statusText:""}catch{l=""}e.f=l+" ["+e.W()+"]",cO(e)}}finally{ud(e)}}}}function ud(e,t){if(e.a){fO(e);var n=e.a,r=e.s[0]?sp:null;e.a=null,e.s=null,t||un(e,"ready");try{n.onreadystatechange=r}catch{}}}function fO(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(Tt.clearTimeout(e.m),e.m=null)}function wo(e){return e.a?e.a.readyState:0}ct.W=function(){try{return 2<wo(this)?this.a.status:-1}catch{return-1}};ct.$=function(){try{return this.a?this.a.responseText:""}catch{return""}};ct.Pa=function(e){if(this.a){var t=this.a.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),tH(t)}};ct.ua=function(){return this.h};ct.Qa=function(){return typeof this.f=="string"?this.f:String(this.f)};function sH(e){var t="";return aw(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function Aw(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=sH(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):ce(e,t,n))}function Pc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function hO(e){this.pa=0,this.g=[],this.c=new _w,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Pc("failFast",!1,e),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Pc("baseRetryDelayMs",5e3,e),this.Ra=Pc("retryDelaySeedMs",1e4,e),this.Ma=Pc("forwardChannelMaxRetries",2,e),this.ma=Pc("forwardChannelRequestTimeoutMs",2e4,e),this.Na=e&&e.g||void 0,this.D=void 0,this.C=e&&e.supportsCrossDomainXhr||!1,this.J="",this.b=new iO(e&&e.concurrentRequestLimit),this.ka=new Xq,this.da=e&&e.fastHandshake||!1,this.Ia=e&&e.b||!1,e&&e.f&&(this.c.a=!1),e&&e.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&e&&e.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=e&&e.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}ct=hO.prototype;ct.ha=8;ct.v=1;function Cw(e){if(pO(e),e.v==3){var t=e.R++,n=Vi(e.B);ce(n,"SID",e.J),ce(n,"RID",t),ce(n,"TYPE","terminate"),zl(e,n),t=new Wl(e,e.c,t,void 0),t.H=2,t.i=ad(Vi(n)),n=!1,Tt.navigator&&Tt.navigator.sendBeacon&&(n=Tt.navigator.sendBeacon(t.i.toString(),"")),!n&&Tt.Image&&(new Image().src=t.i,n=!0),n||(t.a=bO(t.g,null),t.a.ba(t.i)),t.u=vi(),$l(t)}_O(e)}function cd(e){e.a&&(Rw(e),e.a.cancel(),e.a=null)}function pO(e){cd(e),e.j&&(Tt.clearTimeout(e.j),e.j=null),pp(e),e.b.cancel(),e.h&&(typeof e.h=="number"&&Tt.clearTimeout(e.h),e.h=null)}function Vm(e,t){e.g.push(new Qq(e.Oa++,t)),e.v==3&&ld(e)}function ld(e){oO(e.b)||e.h||(e.h=!0,FR(e.Ba,e),e.u=0)}function aH(e,t){return sO(e.b)>=e.b.f-(e.h?1:0)?!1:e.h?(e.g=t.s.concat(e.g),!0):e.v==1||e.v==2||e.u>=(e.La?0:e.Ma)?!1:(e.h=Hl(gn(e.Ba,e,t),yO(e,e.u)),e.u++,!0)}ct.Ba=function(e){if(this.h)if(this.h=null,this.v==1){if(!e){this.R=Math.floor(1e5*Math.random()),e=this.R++;var t=new Wl(this,this.c,e,void 0),n=this.l;this.O&&(n?(n=TR(n),SR(n,this.O)):n=this.O),this.i===null&&(t.B=n);var r;if(this.da)t:{for(var i=r=0;i<this.g.length;i++){e:{var s=this.g[i];if("__data__"in s.a&&(s=s.a.__data__,typeof s=="string")){s=s.length;break e}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=i;break t}if(r===4096||i===this.g.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=dO(this,t,r),i=Vi(this.B),ce(i,"RID",e),ce(i,"CVER",22),this.A&&ce(i,"X-HTTP-Session-Id",this.A),zl(this,i),this.i&&n&&Aw(i,this.i,n),Tw(this.b,t),this.Ia&&ce(i,"TYPE","init"),this.da?(ce(i,"$req",r),ce(i,"SID","null"),t.U=!0,zy(t,i,null)):zy(t,i,r),this.v=2}}else this.v==3&&(e?yA(this,e):this.g.length==0||oO(this.b)||yA(this))};function yA(e,t){var n;t?n=t.f:n=e.R++;var r=Vi(e.B);ce(r,"SID",e.J),ce(r,"RID",n),ce(r,"AID",e.P),zl(e,r),e.i&&e.l&&Aw(r,e.i,e.l),n=new Wl(e,e.c,n,e.u+1),e.i===null&&(n.B=e.l),t&&(e.g=t.s.concat(e.g)),t=dO(e,n,1e3),n.setTimeout(Math.round(.5*e.ma)+Math.round(.5*e.ma*Math.random())),Tw(e.b,n),zy(n,r,t)}function zl(e,t){e.f&&Ew({},function(n,r){ce(t,r,n)})}function dO(e,t,n){n=Math.min(e.g.length,n);var r=e.f?gn(e.f.Ja,e.f,e):null;t:for(var i=e.g,s=-1;;){var a=["count="+n];s==-1?0<n?(s=i[0].b,a.push("ofs="+s)):s=0:a.push("ofs="+s);for(var c=!0,l=0;l<n;l++){var h=i[l].b,p=i[l].a;if(h-=s,0>h)s=Math.max(0,i[l].b-100),c=!1;else try{Jq(p,a,"req"+h+"_")}catch{r&&r(p)}}if(c){r=a.join("&");break t}}return e=e.g.splice(0,n),t.s=e,r}function vO(e){e.a||e.j||(e.T=1,FR(e.Aa,e),e.o=0)}function Nw(e){return e.a||e.j||3<=e.o?!1:(e.T++,e.j=Hl(gn(e.Aa,e),yO(e,e.o)),e.o++,!0)}ct.Aa=function(){if(this.j=null,gO(this),this.U&&!(this.F||this.a==null||0>=this.N)){var e=2*this.N;this.c.info("BP detection timer enabled: "+e),this.s=Hl(gn(this.Ta,this),e)}};ct.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,xn(10),cd(this),gO(this))};function Rw(e){e.s!=null&&(Tt.clearTimeout(e.s),e.s=null)}function gO(e){e.a=new Wl(e,e.c,"rpc",e.T),e.i===null&&(e.a.B=e.l),e.a.O=0;var t=Vi(e.la);ce(t,"RID","rpc"),ce(t,"SID",e.J),ce(t,"CI",e.H?"0":"1"),ce(t,"AID",e.P),zl(e,t),ce(t,"TYPE","xmlhttp"),e.i&&e.l&&Aw(t,e.i,e.l),e.D&&e.a.setTimeout(e.D);var n=e.a;e=e.ga,n.H=1,n.i=ad(Vi(t)),n.j=null,n.I=!0,XR(n,e)}ct.Sa=function(){this.m!=null&&(this.m=null,cd(this),Nw(this),xn(19))};function pp(e){e.m!=null&&(Tt.clearTimeout(e.m),e.m=null)}function mO(e,t){var n=null;if(e.a==t){pp(e),Rw(e),e.a=null;var r=2}else if(Qy(e.b,t))n=t.s,aO(e.b,t),r=1;else return;if(e.I=t.N,e.v!=0){if(t.b)if(r==1){n=t.j?t.j.length:0,t=vi()-t.u;var i=e.u;r=id(),un(r,new GR(r)),ld(e)}else vO(e);else if(i=t.h,i==3||i==0&&0<e.I||!(r==1&&aH(e,t)||r==2&&Nw(e)))switch(n&&0<n.length&&(t=e.b,t.c=t.c.concat(n)),i){case 1:ms(e,5);break;case 4:ms(e,10);break;case 3:ms(e,6);break;default:ms(e,2)}}}function yO(e,t){var n=e.Ha+Math.floor(Math.random()*e.Ra);return e.f||(n*=2),n*t}function ms(e,t){if(e.c.info("Error code "+t),t==2){var n=null;e.f&&(n=null);var r=gn(e.Ya,e);n||(n=new Ps("//www.google.com/images/cleardot.gif"),Tt.location&&Tt.location.protocol=="http"||lp(n,"https"),ad(n)),Zq(n.toString(),r)}else xn(2);e.v=0,e.f&&e.f.ra(t),_O(e),pO(e)}ct.Ya=function(e){e?(this.c.info("Successfully pinged google.com"),xn(2)):(this.c.info("Failed to ping google.com"),xn(1))};function _O(e){e.v=0,e.I=-1,e.f&&((uO(e.b).length!=0||e.g.length!=0)&&(e.b.c.length=0,sw(e.g),e.g.length=0),e.f.qa())}function wO(e,t,n){var r=Bq(n);if(r.c!="")t&&fp(r,t+"."+r.c),hp(r,r.h);else{var i=Tt.location;r=qq(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.V&&aw(e.V,function(s,a){ce(r,a,s)}),t=e.A,n=e.na,t&&n&&ce(r,t,n),ce(r,"VER",e.ha),zl(e,r),r}function bO(e,t){if(t&&!e.C)throw Error("Can't create secondary domain capable XhrIo object.");return t=new He(e.Na),t.F=e.C,t}function EO(){}ct=EO.prototype;ct.ta=function(){};ct.sa=function(){};ct.ra=function(){};ct.qa=function(){};ct.Ja=function(){};function dp(){if(Ro&&!(10<=Number(OR)))throw Error("Environmental error: no available transport.")}dp.prototype.a=function(e,t){return new ar(e,t)};function ar(e,t){sr.call(this),this.a=new hO(t),this.o=e,this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.l=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.a&&(e?e["X-WebChannel-Client-Profile"]=t.a:e={"X-WebChannel-Client-Profile":t.a}),this.a.O=e,(e=t&&t.httpHeadersOverwriteParam)&&!ap(e)&&(this.a.i=e),this.m=t&&t.supportsCrossDomainXhr||!1,this.l=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ap(t)&&(this.a.A=t,e=this.b,e!==null&&t in e&&(e=this.b,t in e&&delete e[t])),this.f=new Ou(this)}Dn(ar,sr);ar.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var e=this.a,t=this.o,n=this.b||void 0;xn(0),e.fa=t,e.V=n||{},e.H=e.S,e.B=wO(e,null,e.fa),ld(e)};ar.prototype.close=function(){Cw(this.a)};ar.prototype.h=function(e){if(typeof e=="string"){var t={};t.__data__=e,Vm(this.a,t)}else this.l?(t={},t.__data__=vw(e),Vm(this.a,t)):Vm(this.a,e)};ar.prototype.G=function(){this.a.f=null,delete this.f,Cw(this.a),delete this.a,ar.X.G.call(this)};function IO(e){ww.call(this);var t=e.__sm__;if(t){t:{for(var n in t){e=n;break t}e=void 0}(this.c=e)?(e=this.c,this.data=t!==null&&e in t?t[e]:void 0):this.data=t}else this.data=e}Dn(IO,ww);function TO(){bw.call(this),this.status=1}Dn(TO,bw);function Ou(e){this.a=e}Dn(Ou,EO);Ou.prototype.ta=function(){un(this.a,"a")};Ou.prototype.sa=function(e){un(this.a,new IO(e))};Ou.prototype.ra=function(e){un(this.a,new TO)};Ou.prototype.qa=function(){un(this.a,"b")};dp.prototype.createWebChannel=dp.prototype.a;ar.prototype.send=ar.prototype.h;ar.prototype.open=ar.prototype.g;ar.prototype.close=ar.prototype.close;od.NO_ERROR=0;od.TIMEOUT=8;od.HTTP_ERROR=6;WR.COMPLETE="complete";zR.EventType=Gl;Gl.OPEN="a";Gl.CLOSE="b";Gl.ERROR="c";Gl.MESSAGE="d";sr.prototype.listen=sr.prototype.va;He.prototype.listenOnce=He.prototype.wa;He.prototype.getLastError=He.prototype.Qa;He.prototype.getLastErrorCode=He.prototype.ua;He.prototype.getStatus=He.prototype.W;He.prototype.getResponseJson=He.prototype.Pa;He.prototype.getResponseText=He.prototype.$;He.prototype.send=He.prototype.ba;var uH=function(){return new dp},cH=function(){return id()},Bm=od,lH=WR,fH=Bs,_A={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},wh=zR,hH=He;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pH=function(e,t,n,r,i,s){this.t=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=s},vp=function(){function e(t,n){this.projectId=t,this.database=n||"(default)"}return Object.defineProperty(e.prototype,"o",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),jr=new Cu("@firebase/firestore");function Yy(){return jr.logLevel}function Y(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(jr.logLevel<=Rt.DEBUG){var r=t.map(Ow);jr.debug.apply(jr,Ae(["Firestore (8.2.7): "+e],r))}}function Pe(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(jr.logLevel<=Rt.ERROR){var r=t.map(Ow);jr.error.apply(jr,Ae(["Firestore (8.2.7): "+e],r))}}function gp(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(jr.logLevel<=Rt.WARN){var r=t.map(Ow);jr.warn.apply(jr,Ae(["Firestore (8.2.7): "+e],r))}}function Ow(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(e){e===void 0&&(e="Unexpected state");var t="FIRESTORE (8.2.7) INTERNAL ASSERTION FAILED: "+e;throw Pe(t),new Error(t)}function yt(e,t){e||ut()}function Z(e,t){return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dH(e){var t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SO=function(){function e(){}return e.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";r.length<20;)for(var i=dH(40),s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length));return r},e}();function kt(e,t){return e<t?-1:e>t?1:0}function ru(e,t,n){return e.length===t.length&&e.every(function(r,i){return n(r,t[i])})}function AO(e){return e+"\0"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pn=function(){function e(t){this.h=t}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(n){for(var r="",i=0;i<n.length;++i)r+=String.fromCharCode(n[i]);return r}(t))},e.prototype.toBase64=function(){return t=this.h,btoa(t);var t},e.prototype.toUint8Array=function(){return function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.h)},e.prototype.l=function(){return 2*this.h.length},e.prototype._=function(t){return kt(this.h,t.h)},e.prototype.isEqual=function(t){return this.h===t.h},e}();Pn.T=new Pn("");var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).code=n,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return J(t,e),t}(Error),ks=function(){function e(t){this.I=t}return e.fromBase64String=function(t){try{return new e(Pn.fromBase64String(t))}catch(n){throw new G(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},e.fromUint8Array=function(t){return new e(Pn.fromUint8Array(t))},e.prototype.toBase64=function(){return this.I.toBase64()},e.prototype.toUint8Array=function(){return this.I.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this.I.isEqual(t.I)},e}(),tr=function(){function e(t){this.uid=t}return e.prototype.m=function(){return this.uid!=null},e.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(t){return t.uid===this.uid},e}();tr.UNAUTHENTICATED=new tr(null),tr.R=new tr("google-credentials-uid"),tr.P=new tr("first-party-uid");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vH=function(e,t){this.user=t,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+e},wA=function(){function e(){this.V=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.p=function(){},e.prototype.v=function(t){this.V=t,t(tr.UNAUTHENTICATED)},e.prototype.S=function(){this.V=null},e}(),gH=function(){function e(t){var n=this;this.D=null,this.currentUser=tr.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){n.N++,n.currentUser=n.$(),n.C=!0,n.V&&n.V(n.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then(function(r){n.auth=r,n.D&&n.auth.addAuthTokenListener(n.D)},function(){}))}return e.prototype.getToken=function(){var t=this,n=this.N,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){return t.N!==n?(Y("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):i?(yt(typeof i.accessToken=="string"),new vH(i.accessToken,t.currentUser)):null}):Promise.resolve(null)},e.prototype.p=function(){this.forceRefresh=!0},e.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},e.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},e.prototype.$=function(){var t=this.auth&&this.auth.getUid();return yt(t===null||typeof t=="string"),new tr(t)},e}(),mH=function(){function e(t,n){this.F=t,this.O=n,this.type="FirstParty",this.user=tr.P}return Object.defineProperty(e.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},n=this.F.auth.getAuthHeaderValueForFirstParty([]);return n&&(t.Authorization=n),t},enumerable:!1,configurable:!0}),e}(),yH=function(){function e(t,n){this.F=t,this.O=n}return e.prototype.getToken=function(){return Promise.resolve(new mH(this.F,this.O))},e.prototype.v=function(t){t(tr.P)},e.prototype.S=function(){},e.prototype.p=function(){},e}(),rr=function(){function e(t,n){var r=this;this.previousValue=t,n&&(n.k=function(i){return r.M(i)},this.L=function(i){return n.B(i)})}return e.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},e.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},e}();rr.q=-1;var Hn=function(){function e(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new G(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new G(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new G(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype.U=function(t){return this.seconds===t.seconds?kt(this.nanoseconds,t.nanoseconds):kt(this.seconds,t.seconds)},e.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),Ot=function(){function e(t){this.timestamp=t}return e.K=function(t){return new e(t)},e.min=function(){return new e(new Hn(0,0))},e.prototype._=function(t){return this.timestamp.U(t.timestamp)},e.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},e.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.j=function(){return this.timestamp},e}(),CO=function(){function e(t,n,r){n===void 0?n=0:n>t.length&&ut(),r===void 0?r=t.length-n:r>t.length-n&&ut(),this.segments=t,this.offset=n,this.G=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return e.H(this,t)===0},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(r){n.push(r)}):n.push(t),this.J(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.Y=function(t){return t=t===void 0?1:t,this.J(this.segments,this.offset+t,this.length-t)},e.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},e.prototype.Z=function(){return this.segments[this.offset]},e.prototype.tt=function(){return this.get(this.length-1)},e.prototype.get=function(t){return this.segments[this.offset+t]},e.prototype.et=function(){return this.length===0},e.prototype.nt=function(t){if(t.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.forEach=function(t){for(var n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])},e.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},e.H=function(t,n){for(var r=Math.min(t.length,n.length),i=0;i<r;i++){var s=t.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return t.length<n.length?-1:t.length>n.length?1:0},e}(),Ht=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return J(t,e),t.prototype.J=function(n,r,i){return new t(n,r,i)},t.prototype.rt=function(){return this.it().join("/")},t.prototype.toString=function(){return this.rt()},t.ot=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=[],s=0,a=n;s<a.length;s++){var c=a[s];if(c.indexOf("//")>=0)throw new G(k.INVALID_ARGUMENT,"Invalid segment ("+c+"). Paths must not contain // in them.");i.push.apply(i,c.split("/").filter(function(l){return l.length>0}))}return new t(i)},t.ct=function(){return new t([])},t}(CO),_H=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Hr=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return J(t,e),t.prototype.J=function(n,r,i){return new t(n,r,i)},t.at=function(n){return _H.test(n)},t.prototype.rt=function(){return this.it().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.at(n)||(n="`"+n+"`"),n}).join(".")},t.prototype.toString=function(){return this.rt()},t.prototype.ut=function(){return this.length===1&&this.get(0)==="__name__"},t.ht=function(){return new t(["__name__"])},t.lt=function(n){for(var r=[],i="",s=0,a=function(){if(i.length===0)throw new G(k.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},c=!1;s<n.length;){var l=n[s];if(l==="\\"){if(s+1===n.length)throw new G(k.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var h=n[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new G(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=h,s+=2}else l==="`"?(c=!c,s++):l!=="."||c?(i+=l,s++):(a(),s++)}if(a(),c)throw new G(k.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new t(r)},t.ct=function(){return new t([])},t}(CO),ht=function(){function e(t){this.path=t}return e._t=function(t){return new e(Ht.ot(t))},e.ft=function(t){return new e(Ht.ot(t).Y(5))},e.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},e.prototype.isEqual=function(t){return t!==null&&Ht.H(this.path,t.path)===0},e.prototype.toString=function(){return this.path.toString()},e.H=function(t,n){return Ht.H(t.path,n.path)},e.wt=function(t){return t.length%2==0},e.Et=function(t){return new e(new Ht(t.slice()))},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Kl(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function NO(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iu=function(){function e(t){this.fields=t,t.sort(Hr.H)}return e.prototype.Tt=function(t){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].nt(t))return!0;return!1},e.prototype.isEqual=function(t){return ru(this.fields,t.fields,function(n,r){return n.isEqual(r)})},e}(),wH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(e){if(yt(!!e),typeof e=="string"){var t=0,n=wH.exec(e);if(yt(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:xe(e.seconds),nanos:xe(e.nanos)}}function xe(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function ou(e){return typeof e=="string"?Pn.fromBase64String(e):Pn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function RO(e){var t=e.mapValue.fields.__previous_value__;return xw(t)?RO(t):t}function bl(e){var t=Oo(e.mapValue.fields.__local_write_time__.timestampValue);return new Hn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(e){return e==null}function mp(e){return e===0&&1/e==-1/0}function OO(e){return typeof e=="number"&&Number.isInteger(e)&&!mp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?xw(e)?4:10:ut()}function pi(e,t){var n=xo(e);if(n!==xo(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return bl(e).isEqual(bl(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var s=Oo(r.timestampValue),a=Oo(i.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,i){return ou(r.bytesValue).isEqual(ou(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return xe(r.geoPointValue.latitude)===xe(i.geoPointValue.latitude)&&xe(r.geoPointValue.longitude)===xe(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return xe(r.integerValue)===xe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var s=xe(r.doubleValue),a=xe(i.doubleValue);return s===a?mp(s)===mp(a):isNaN(s)&&isNaN(a)}return!1}(e,t);case 9:return ru(e.arrayValue.values||[],t.arrayValue.values||[],pi);case 10:return function(r,i){var s=r.mapValue.fields||{},a=i.mapValue.fields||{};if(bA(s)!==bA(a))return!1;for(var c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!pi(s[c],a[c])))return!1;return!0}(e,t);default:return ut()}}function El(e,t){return(e.values||[]).find(function(n){return pi(n,t)})!==void 0}function su(e,t){var n=xo(e),r=xo(t);if(n!==r)return kt(n,r);switch(n){case 0:return 0;case 1:return kt(e.booleanValue,t.booleanValue);case 2:return function(i,s){var a=xe(i.integerValue||i.doubleValue),c=xe(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return EA(e.timestampValue,t.timestampValue);case 4:return EA(bl(e),bl(t));case 5:return kt(e.stringValue,t.stringValue);case 6:return function(i,s){var a=ou(i),c=ou(s);return a._(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,s){for(var a=i.split("/"),c=s.split("/"),l=0;l<a.length&&l<c.length;l++){var h=kt(a[l],c[l]);if(h!==0)return h}return kt(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,s){var a=kt(xe(i.latitude),xe(s.latitude));return a!==0?a:kt(xe(i.longitude),xe(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,s){for(var a=i.values||[],c=s.values||[],l=0;l<a.length&&l<c.length;++l){var h=su(a[l],c[l]);if(h)return h}return kt(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,s){var a=i.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(var p=0;p<c.length&&p<h.length;++p){var v=kt(c[p],h[p]);if(v!==0)return v;var m=su(a[c[p]],l[h[p]]);if(m!==0)return m}return kt(c.length,h.length)}(e.mapValue,t.mapValue);default:throw ut()}}function EA(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return kt(e,t);var n=Oo(e),r=Oo(t),i=kt(n.seconds,r.seconds);return i!==0?i:kt(n.nanos,r.nanos)}function Pw(e){return Xy(e)}function Xy(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){var i=Oo(r);return"time("+i.seconds+","+i.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ou(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ht.ft(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(r){for(var i="[",s=!0,a=0,c=r.values||[];a<c.length;a++)s?s=!1:i+=",",i+=Xy(c[a]);return i+"]"}(e.arrayValue):"mapValue"in e?function(r){for(var i="{",s=!0,a=0,c=Object.keys(r.fields||{}).sort();a<c.length;a++){var l=c[a];s?s=!1:i+=",",i+=l+":"+Xy(r.fields[l])}return i+"}"}(e.mapValue):ut();var t,n}function yp(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.rt()}}function Jy(e){return!!e&&"integerValue"in e}function kw(e){return!!e&&"arrayValue"in e}function IA(e){return!!e&&"nullValue"in e}function TA(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Dw(e){return!!e&&"mapValue"in e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Po=function(){function e(t){this.proto=t}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){if(t.et())return this.proto;for(var n=this.proto,r=0;r<t.length-1;++r)if(!n.mapValue.fields||!Dw(n=n.mapValue.fields[t.get(r)]))return null;return(n=(n.mapValue.fields||{})[t.tt()])||null},e.prototype.isEqual=function(t){return pi(this.proto,t.proto)},e}(),Ql=function(){function e(t){t===void 0&&(t=Po.empty()),this.It=t,this.At=new Map}return e.prototype.set=function(t,n){return this.Rt(t,n),this},e.prototype.delete=function(t){return this.Rt(t,null),this},e.prototype.Rt=function(t,n){for(var r=this.At,i=0;i<t.length-1;++i){var s=t.get(i),a=r.get(s);a instanceof Map?r=a:a&&xo(a)===10?(a=new Map(Object.entries(a.mapValue.fields||{})),r.set(s,a),r=a):(a=new Map,r.set(s,a),r=a)}r.set(t.tt(),n)},e.prototype.Pt=function(){var t=this.yt(Hr.ct(),this.At);return t!=null?new Po(t):this.It},e.prototype.yt=function(t,n){var r=this,i=!1,s=this.It.field(t),a=Dw(s)?Object.assign({},s.mapValue.fields):{};return n.forEach(function(c,l){if(c instanceof Map){var h=r.yt(t.child(l),c);h!=null&&(a[l]=h,i=!0)}else c!==null?(a[l]=c,i=!0):a.hasOwnProperty(l)&&(delete a[l],i=!0)}),i?{mapValue:{fields:a}}:null},e}();function xO(e){var t=[];return Kl(e.fields||{},function(n,r){var i=new Hr([n]);if(Dw(r)){var s=xO(r.mapValue).fields;if(s.length===0)t.push(i);else for(var a=0,c=s;a<c.length;a++){var l=c[a];t.push(i.child(l))}}else t.push(i)}),new iu(t)}var Lw=function(e,t){this.key=e,this.version=t},Zt=function(e){function t(n,r,i,s){var a=this;return(a=e.call(this,n,r)||this).gt=i,a.Vt=!!s.Vt,a.hasCommittedMutations=!!s.hasCommittedMutations,a}return J(t,e),t.prototype.field=function(n){return this.gt.field(n)},t.prototype.data=function(){return this.gt},t.prototype.bt=function(){return this.gt.proto},t.prototype.isEqual=function(n){return n instanceof t&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.Vt===n.Vt&&this.hasCommittedMutations===n.hasCommittedMutations&&this.gt.isEqual(n.gt)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t}(Lw),Be=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r)||this).hasCommittedMutations=!(!i||!i.hasCommittedMutations),s}return J(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(n){return n instanceof t&&n.hasCommittedMutations===this.hasCommittedMutations&&n.version.isEqual(this.version)&&n.key.isEqual(this.key)},t}(Lw),Mw=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return J(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(n){return n instanceof t&&n.version.isEqual(this.version)&&n.key.isEqual(this.key)},t}(Lw),bH=function(e,t,n,r,i,s,a){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),a===void 0&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.vt=null};function SA(e,t,n,r,i,s,a){return t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),a===void 0&&(a=null),new bH(e,t,n,r,i,s,a)}function Yl(e){var t=Z(e);if(t.vt===null){var n=t.path.rt();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(r){return function(i){return i.field.rt()+i.op.toString()+Pw(i.value)}(r)}).join(","),n+="|ob:",n+=t.orderBy.map(function(r){return function(i){return i.field.rt()+i.dir}(r)}).join(","),qs(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=wp(t.startAt)),t.endAt&&(n+="|ub:",n+=wp(t.endAt)),t.vt=n}return t.vt}function fd(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!RH(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],s=t.filters[r],i.op!==s.op||!i.field.isEqual(s.field)||!pi(i.value,s.value))return!1;var i,s;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!CA(e.startAt,t.startAt)&&CA(e.endAt,t.endAt)}function _p(e){return ht.wt(e.path)&&e.collectionGroup===null&&e.filters.length===0}var ir=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).field=n,s.op=r,s.value=i,s}return J(t,e),t.create=function(n,r,i){return n.ut()?r==="in"||r==="not-in"?this.St(n,r,i):new EH(n,r,i):r==="array-contains"?new SH(n,i):r==="in"?new AH(n,i):r==="not-in"?new CH(n,i):r==="array-contains-any"?new NH(n,i):new t(n,r,i)},t.St=function(n,r,i){return r==="in"?new IH(n,i):new TH(n,i)},t.prototype.matches=function(n){var r=n.field(this.field);return this.op==="!="?r!==null&&this.Dt(su(r,this.value)):r!==null&&xo(this.value)===xo(r)&&this.Dt(su(r,this.value))},t.prototype.Dt=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return ut()}},t.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),EH=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,i)||this).key=ht.ft(i.referenceValue),s}return J(t,e),t.prototype.matches=function(n){var r=ht.H(n.key,this.key);return this.Dt(r)},t}(ir),IH=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"in",r)||this).keys=PO("in",r),i}return J(t,e),t.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},t}(ir),TH=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"not-in",r)||this).keys=PO("not-in",r),i}return J(t,e),t.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},t}(ir);function PO(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(function(r){return ht.ft(r.referenceValue)})}var SH=function(e){function t(n,r){return e.call(this,n,"array-contains",r)||this}return J(t,e),t.prototype.matches=function(n){var r=n.field(this.field);return kw(r)&&El(r.arrayValue,this.value)},t}(ir),AH=function(e){function t(n,r){return e.call(this,n,"in",r)||this}return J(t,e),t.prototype.matches=function(n){var r=n.field(this.field);return r!==null&&El(this.value.arrayValue,r)},t}(ir),CH=function(e){function t(n,r){return e.call(this,n,"not-in",r)||this}return J(t,e),t.prototype.matches=function(n){if(El(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.field(this.field);return r!==null&&!El(this.value.arrayValue,r)},t}(ir),NH=function(e){function t(n,r){return e.call(this,n,"array-contains-any",r)||this}return J(t,e),t.prototype.matches=function(n){var r=this,i=n.field(this.field);return!(!kw(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(s){return El(r.value.arrayValue,s)})},t}(ir),Il=function(e,t){this.position=e,this.before=t};function wp(e){return(e.before?"b":"a")+":"+e.position.map(function(t){return Pw(t)}).join(",")}var Wa=function(e,t){t===void 0&&(t="asc"),this.field=e,this.dir=t};function RH(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function AA(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var s=t[i],a=e.position[i];if(r=s.field.ut()?ht.H(ht.ft(a.referenceValue),n.key):su(a,n.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return e.before?r<=0:r<0}function CA(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!pi(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $i=function(e,t,n,r,i,s,a,c){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s="F"),a===void 0&&(a=null),c===void 0&&(c=null),this.path=e,this.collectionGroup=t,this.xt=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=c,this.Nt=null,this.$t=null,this.startAt,this.endAt};function kO(e,t,n,r,i,s,a,c){return new $i(e,t,n,r,i,s,a,c)}function xu(e){return new $i(e)}function jh(e){return!qs(e.limit)&&e.limitType==="F"}function bp(e){return!qs(e.limit)&&e.limitType==="L"}function Fw(e){return e.xt.length>0?e.xt[0].field:null}function Uw(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.Ct())return r.field}return null}function jw(e){return e.collectionGroup!==null}function au(e){var t=Z(e);if(t.Nt===null){t.Nt=[];var n=Uw(t),r=Fw(t);if(n!==null&&r===null)n.ut()||t.Nt.push(new Wa(n)),t.Nt.push(new Wa(Hr.ht(),"asc"));else{for(var i=!1,s=0,a=t.xt;s<a.length;s++){var c=a[s];t.Nt.push(c),c.field.ut()&&(i=!0)}if(!i){var l=t.xt.length>0?t.xt[t.xt.length-1].dir:"asc";t.Nt.push(new Wa(Hr.ht(),l))}}}return t.Nt}function _r(e){var t=Z(e);if(!t.$t)if(t.limitType==="F")t.$t=SA(t.path,t.collectionGroup,au(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=au(t);r<i.length;r++){var s=i[r],a=s.dir==="desc"?"asc":"desc";n.push(new Wa(s.field,a))}var c=t.endAt?new Il(t.endAt.position,!t.endAt.before):null,l=t.startAt?new Il(t.startAt.position,!t.startAt.before):null;t.$t=SA(t.path,t.collectionGroup,n,t.filters,t.limit,c,l)}return t.$t}function DO(e,t,n){return new $i(e.path,e.collectionGroup,e.xt.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Xl(e,t){return fd(_r(e),_r(t))&&e.limitType===t.limitType}function LO(e){return Yl(_r(e))+"|lt:"+e.limitType}function Zy(e){return"Query(target="+function(t){var n=t.path.rt();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map(function(r){return(i=r).field.rt()+" "+i.op+" "+Pw(i.value);var i}).join(", ")+"]"),qs(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map(function(r){return function(i){return i.field.rt()+" ("+i.dir+")"}(r)}).join(", ")+"]"),t.startAt&&(n+=", startAt: "+wp(t.startAt)),t.endAt&&(n+=", endAt: "+wp(t.endAt)),"Target("+n+")"}(_r(e))+"; limitType="+e.limitType+")"}function Jl(e,t){return function(n,r){var i=r.key.path;return n.collectionGroup!==null?r.key.dt(n.collectionGroup)&&n.path.nt(i):ht.wt(n.path)?n.path.isEqual(i):n.path.st(i)}(e,t)&&function(n,r){for(var i=0,s=n.xt;i<s.length;i++){var a=s[i];if(!a.field.ut()&&r.field(a.field)===null)return!1}return!0}(e,t)&&function(n,r){for(var i=0,s=n.filters;i<s.length;i++)if(!s[i].matches(r))return!1;return!0}(e,t)&&function(n,r){return!(n.startAt&&!AA(n.startAt,au(n),r))&&(!n.endAt||!AA(n.endAt,au(n),r))}(e,t)}function MO(e){return function(t,n){for(var r=!1,i=0,s=au(e);i<s.length;i++){var a=s[i],c=OH(a,t,n);if(c!==0)return c;r=r||a.field.ut()}return 0}}function OH(e,t,n){var r=e.field.ut()?ht.H(t.key,n.key):function(i,s,a){var c=s.field(i),l=a.field(i);return c!==null&&l!==null?su(c,l):ut()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hd=function(){function e(t,n,r,i,s,a,c){s===void 0&&(s=Ot.min()),a===void 0&&(a=Ot.min()),c===void 0&&(c=Pn.T),this.target=t,this.targetId=n,this.Ft=r,this.sequenceNumber=i,this.Ot=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c}return e.prototype.kt=function(t){return new e(this.target,this.targetId,this.Ft,t,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.Mt=function(t,n){return new e(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.Lt=function(t){return new e(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,t,this.resumeToken)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(e,t){if(e.Bt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mp(t)?"-0":t}}function UO(e){return{integerValue:""+e}}function jO(e,t){return OO(t)?UO(t):FO(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pd=function(){this.qt=void 0};function xH(e,t,n){return e instanceof uu?function(r,i){var s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,t):e instanceof Ds?BO(e,t):e instanceof Ls?qO(e,t):function(r,i){var s=VO(r,i),a=NA(s)+NA(r.Ut);return Jy(s)&&Jy(r.Ut)?UO(a):FO(r.Qt,a)}(e,t)}function PH(e,t,n){return e instanceof Ds?BO(e,t):e instanceof Ls?qO(e,t):n}function VO(e,t){return e instanceof cu?Jy(n=t)||function(r){return!!r&&"doubleValue"in r}(n)?t:{integerValue:0}:null;var n}var uu=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return J(t,e),t}(pd),Ds=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return J(t,e),t}(pd);function BO(e,t){for(var n=HO(t),r=function(a){n.some(function(c){return pi(c,a)})||n.push(a)},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Ls=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return J(t,e),t}(pd);function qO(e,t){for(var n=HO(t),r=function(a){n=n.filter(function(c){return!pi(c,a)})},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var cu=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Qt=n,i.Ut=r,i}return J(t,e),t}(pd);function NA(e){return xe(e.integerValue||e.doubleValue)}function HO(e){return kw(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zl=function(e,t){this.field=e,this.transform=t},kH=function(e,t){this.version=e,this.transformResults=t},dn=function(){function e(t,n){this.updateTime=t,this.exists=n}return e.Kt=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"Wt",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},e}();function Vh(e,t){return e.updateTime!==void 0?t instanceof Zt&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t instanceof Zt}var dd=function(){};function DH(e,t,n){return e instanceof tf?function(r,i,s){var a=r.value;if(s.transformResults){var c=xA(r.fieldTransforms,i,s.transformResults);a=Vw(r.fieldTransforms,a,c)}return new Zt(r.key,s.version,a,{hasCommittedMutations:!0})}(e,t,n):e instanceof Fo?function(r,i,s){if(!Vh(r.jt,i))return new Mw(r.key,s.version);var a=GO(r,i,s.transformResults?xA(r.fieldTransforms,i,s.transformResults):[]);return new Zt(r.key,s.version,a,{hasCommittedMutations:!0})}(e,t,n):function(r,i,s){return new Be(r.key,s.version,{hasCommittedMutations:!0})}(e,0,n)}function t_(e,t,n){return e instanceof tf?function(r,i,s){if(!Vh(r.jt,i))return i;var a=r.value,c=PA(r.fieldTransforms,s,i);a=Vw(r.fieldTransforms,a,c);var l=OA(i);return new Zt(r.key,l,a,{Vt:!0})}(e,t,n):e instanceof Fo?function(r,i,s){if(!Vh(r.jt,i))return i;var a=OA(i),c=GO(r,i,PA(r.fieldTransforms,s,i));return new Zt(r.key,a,c,{Vt:!0})}(e,t,n):function(r,i){return Vh(r.jt,i)?new Be(r.key,Ot.min()):i}(e,t)}function LH(e,t){return function(n,r){for(var i=null,s=0,a=n;s<a.length;s++){var c=a[s],l=r instanceof Zt?r.field(c.field):void 0,h=VO(c.transform,l||null);h!=null&&(i=i==null?new Ql().set(c.field,h):i.set(c.field,h))}return i?i.Pt():null}(e.fieldTransforms,t)}function RA(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.jt.isEqual(t.jt)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&ru(n,r,function(i,s){return function(a,c){return a.field.isEqual(c.field)&&function(l,h){return l instanceof Ds&&h instanceof Ds||l instanceof Ls&&h instanceof Ls?ru(l.elements,h.elements,pi):l instanceof cu&&h instanceof cu?pi(l.Ut,h.Ut):l instanceof uu&&h instanceof uu}(a.transform,c.transform)}(i,s)})}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.Gt.isEqual(t.Gt))}function OA(e){return e instanceof Zt?e.version:Ot.min()}var tf=function(e){function t(n,r,i,s){s===void 0&&(s=[]);var a=this;return(a=e.call(this)||this).key=n,a.value=r,a.jt=i,a.fieldTransforms=s,a.type=0,a}return J(t,e),t}(dd),Fo=function(e){function t(n,r,i,s,a){a===void 0&&(a=[]);var c=this;return(c=e.call(this)||this).key=n,c.data=r,c.Gt=i,c.jt=s,c.fieldTransforms=a,c.type=1,c}return J(t,e),t}(dd);function GO(e,t,n){var r;return r=function(i,s){var a=new Ql(s);return i.Gt.fields.forEach(function(c){if(!c.et()){var l=i.data.field(c);l!==null?a.set(c,l):a.delete(c)}}),a.Pt()}(e,r=t instanceof Zt?t.data():Po.empty()),r=Vw(e.fieldTransforms,r,n)}function xA(e,t,n){var r=[];yt(e.length===n.length);for(var i=0;i<n.length;i++){var s=e[i],a=s.transform,c=null;t instanceof Zt&&(c=t.field(s.field)),r.push(PH(a,c,n[i]))}return r}function PA(e,t,n){for(var r=[],i=0,s=e;i<s.length;i++){var a=s[i],c=a.transform,l=null;n instanceof Zt&&(l=n.field(a.field)),r.push(xH(c,l,t))}return r}function Vw(e,t,n){for(var r=new Ql(t),i=0;i<e.length;i++){var s=e[i];r.set(s.field,n[i])}return r.Pt()}var Oe,Lt,ef=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.jt=r,i.type=2,i.fieldTransforms=[],i}return J(t,e),t}(dd),Bw=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.jt=r,i.type=3,i.fieldTransforms=[],i}return J(t,e),t}(dd),MH=function(e){this.count=e};function WO(e){switch(e){case k.OK:return ut();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return ut()}}function $O(e){if(e===void 0)return Pe("GRPC error has no .code"),k.UNKNOWN;switch(e){case Oe.OK:return k.OK;case Oe.CANCELLED:return k.CANCELLED;case Oe.UNKNOWN:return k.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return k.INTERNAL;case Oe.UNAVAILABLE:return k.UNAVAILABLE;case Oe.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Oe.NOT_FOUND:return k.NOT_FOUND;case Oe.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Oe.ABORTED:return k.ABORTED;case Oe.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Oe.DATA_LOSS:return k.DATA_LOSS;default:return ut()}}(Lt=Oe||(Oe={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn=function(){function e(t,n){this.H=t,this.root=n||go.EMPTY}return e.prototype.zt=function(t,n){return new e(this.H,this.root.zt(t,n,this.H).copy(null,null,go.Ht,null,null))},e.prototype.remove=function(t){return new e(this.H,this.root.remove(t,this.H).copy(null,null,go.Ht,null,null))},e.prototype.get=function(t){for(var n=this.root;!n.et();){var r=this.H(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},e.prototype.indexOf=function(t){for(var n=0,r=this.root;!r.et();){var i=this.H(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},e.prototype.et=function(){return this.root.et()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.Jt=function(){return this.root.Jt()},e.prototype.Yt=function(){return this.root.Yt()},e.prototype.Xt=function(t){return this.root.Xt(t)},e.prototype.forEach=function(t){this.Xt(function(n,r){return t(n,r),!1})},e.prototype.toString=function(){var t=[];return this.Xt(function(n,r){return t.push(n+":"+r),!1}),"{"+t.join(", ")+"}"},e.prototype.Zt=function(t){return this.root.Zt(t)},e.prototype.te=function(){return new bh(this.root,null,this.H,!1)},e.prototype.ee=function(t){return new bh(this.root,t,this.H,!1)},e.prototype.ne=function(){return new bh(this.root,null,this.H,!0)},e.prototype.se=function(t){return new bh(this.root,t,this.H,!0)},e}(),bh=function(){function e(t,n,r,i){this.ie=i,this.re=[];for(var s=1;!t.et();)if(s=n?r(t.key,n):1,i&&(s*=-1),s<0)t=this.ie?t.left:t.right;else{if(s===0){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return e.prototype.oe=function(){var t=this.re.pop(),n={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return n},e.prototype.ce=function(){return this.re.length>0},e.prototype.ae=function(){if(this.re.length===0)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},e}(),go=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=s??e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)},e.prototype.et=function(){return!1},e.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},e.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},e.prototype.min=function(){return this.left.et()?this:this.left.min()},e.prototype.Jt=function(){return this.min().key},e.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},e.prototype.zt=function(t,n,r){var i=this,s=r(t,i.key);return(i=s<0?i.copy(null,null,null,i.left.zt(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.zt(t,n,r))).ue()},e.prototype.he=function(){if(this.left.et())return e.EMPTY;var t=this;return t.left.le()||t.left.left.le()||(t=t._e()),(t=t.copy(null,null,null,t.left.he(),null)).ue()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),n(t,i.key)===0){if(i.right.et())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.ue()},e.prototype.le=function(){return this.color},e.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},e.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},e.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},e.prototype.we=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.fe=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},e.prototype.Ie=function(){if(this.le()&&this.left.le()||this.right.le())throw ut();var t=this.left.Ie();if(t!==this.right.Ie())throw ut();return t+(this.le()?0:1)},e}();go.EMPTY=null,go.RED=!0,go.Ht=!1,go.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw ut()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw ut()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw ut()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw ut()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw ut()},enumerable:!1,configurable:!0}),e.prototype.copy=function(t,n,r,i,s){return this},e.prototype.zt=function(t,n,r){return new go(t,n)},e.prototype.remove=function(t,n){return this},e.prototype.et=function(){return!0},e.prototype.Xt=function(t){return!1},e.prototype.Zt=function(t){return!1},e.prototype.Jt=function(){return null},e.prototype.Yt=function(){return null},e.prototype.le=function(){return!1},e.prototype.Te=function(){return!0},e.prototype.Ie=function(){return 0},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe=function(){function e(t){this.H=t,this.data=new wn(this.H)}return e.prototype.has=function(t){return this.data.get(t)!==null},e.prototype.first=function(){return this.data.Jt()},e.prototype.last=function(){return this.data.Yt()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(t){return this.data.indexOf(t)},e.prototype.forEach=function(t){this.data.Xt(function(n,r){return t(n),!1})},e.prototype.me=function(t,n){for(var r=this.data.ee(t[0]);r.ce();){var i=r.oe();if(this.H(i.key,t[1])>=0)return;n(i.key)}},e.prototype.Ae=function(t,n){var r;for(r=n!==void 0?this.data.ee(n):this.data.te();r.ce();)if(!t(r.oe().key))return},e.prototype.Re=function(t){var n=this.data.ee(t);return n.ce()?n.oe().key:null},e.prototype.te=function(){return new kA(this.data.te())},e.prototype.ee=function(t){return new kA(this.data.ee(t))},e.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},e.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},e.prototype.et=function(){return this.data.et()},e.prototype.Pe=function(t){var n=this;return n.size<t.size&&(n=t,t=this),t.forEach(function(r){n=n.add(r)}),n},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.te(),r=t.data.te();n.ce();){var i=n.oe().key,s=r.oe().key;if(this.H(i,s)!==0)return!1}return!0},e.prototype.it=function(){var t=[];return this.forEach(function(n){t.push(n)}),t},e.prototype.toString=function(){var t=[];return this.forEach(function(n){return t.push(n)}),"SortedSet("+t.toString()+")"},e.prototype.copy=function(t){var n=new e(this.H);return n.data=t,n},e}(),kA=function(){function e(t){this.ye=t}return e.prototype.oe=function(){return this.ye.oe().key},e.prototype.ce=function(){return this.ye.ce()},e}(),FH=new wn(ht.H);function Bi(){return FH}function Ep(){return Bi()}var UH=new wn(ht.H);function Tl(){return UH}var jH=new wn(ht.H);function zO(){return jH}var VH=new qe(ht.H);function Qt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=VH,r=0,i=e;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var BH=new qe(kt);function vd(){return BH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KO=function(){function e(t){this.H=t?function(n,r){return t(n,r)||ht.H(n.key,r.key)}:function(n,r){return ht.H(n.key,r.key)},this.ge=Tl(),this.Ve=new wn(this.H)}return e.pe=function(t){return new e(t.H)},e.prototype.has=function(t){return this.ge.get(t)!=null},e.prototype.get=function(t){return this.ge.get(t)},e.prototype.first=function(){return this.Ve.Jt()},e.prototype.last=function(){return this.Ve.Yt()},e.prototype.et=function(){return this.Ve.et()},e.prototype.indexOf=function(t){var n=this.ge.get(t);return n?this.Ve.indexOf(n):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t){this.Ve.Xt(function(n,r){return t(n),!1})},e.prototype.add=function(t){var n=this.delete(t.key);return n.copy(n.ge.zt(t.key,t),n.Ve.zt(t,null))},e.prototype.delete=function(t){var n=this.get(t);return n?this.copy(this.ge.remove(t),this.Ve.remove(n)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.Ve.te(),r=t.Ve.te();n.ce();){var i=n.oe().key,s=r.oe().key;if(!i.isEqual(s))return!1}return!0},e.prototype.toString=function(){var t=[];return this.forEach(function(n){t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`},e.prototype.copy=function(t,n){var r=new e;return r.H=this.H,r.ge=t,r.Ve=n,r},e}(),DA=function(){function e(){this.be=new wn(ht.H)}return e.prototype.track=function(t){var n=t.doc.key,r=this.be.get(n);r?t.type!==0&&r.type===3?this.be=this.be.zt(n,t):t.type===3&&r.type!==1?this.be=this.be.zt(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.be=this.be.zt(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.be=this.be.zt(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.be=this.be.remove(n):t.type===1&&r.type===2?this.be=this.be.zt(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.be=this.be.zt(n,{type:2,doc:t.doc}):ut():this.be=this.be.zt(n,t)},e.prototype.ve=function(){var t=[];return this.be.Xt(function(n,r){t.push(r)}),t},e}(),Ip=function(){function e(t,n,r,i,s,a,c,l){this.query=t,this.docs=n,this.Se=r,this.docChanges=i,this.De=s,this.fromCache=a,this.Ce=c,this.xe=l}return e.Ne=function(t,n,r,i){var s=[];return n.forEach(function(a){s.push({type:0,doc:a})}),new e(t,n,KO.pe(n),s,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&Xl(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0},e}(),qw=function(){function e(t,n,r,i,s){this.Ot=t,this.$e=n,this.Fe=r,this.Oe=i,this.ke=s}return e.Me=function(t,n){var r=new Map;return r.set(t,Hw.Le(t,n)),new e(Ot.min(),r,vd(),Bi(),Qt())},e}(),Hw=function(){function e(t,n,r,i,s){this.resumeToken=t,this.Be=n,this.qe=r,this.Ue=i,this.Qe=s}return e.Le=function(t,n){return new e(Pn.T,n,Qt(),Qt(),Qt())},e}(),Bh=function(e,t,n,r){this.Ke=e,this.removedTargetIds=t,this.key=n,this.We=r},QO=function(e,t){this.targetId=e,this.je=t},YO=function(e,t,n,r){n===void 0&&(n=Pn.T),r===void 0&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},LA=function(){function e(){this.Ge=0,this.ze=FA(),this.He=Pn.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(e.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Xe",{get:function(){return this.Ge!==0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),e.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},e.prototype.en=function(){var t=Qt(),n=Qt(),r=Qt();return this.ze.forEach(function(i,s){switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new Hw(this.He,this.Je,t,n,r)},e.prototype.nn=function(){this.Ye=!1,this.ze=FA()},e.prototype.sn=function(t,n){this.Ye=!0,this.ze=this.ze.zt(t,n)},e.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},e.prototype.on=function(){this.Ge+=1},e.prototype.cn=function(){this.Ge-=1},e.prototype.an=function(){this.Ye=!0,this.Je=!0},e}(),qH=function(){function e(t){this.un=t,this.hn=new Map,this.ln=Bi(),this._n=MA(),this.fn=new qe(kt)}return e.prototype.dn=function(t){for(var n=0,r=t.Ke;n<r.length;n++){var i=r[n];t.We instanceof Zt?this.wn(i,t.We):t.We instanceof Be&&this.En(i,t.key,t.We)}for(var s=0,a=t.removedTargetIds;s<a.length;s++)i=a[s],this.En(i,t.key,t.We)},e.prototype.Tn=function(t){var n=this;this.In(t,function(r){var i=n.mn(r);switch(t.state){case 0:n.An(r)&&i.tn(t.resumeToken);break;case 1:i.cn(),i.Xe||i.nn(),i.tn(t.resumeToken);break;case 2:i.cn(),i.Xe||n.removeTarget(r);break;case 3:n.An(r)&&(i.an(),i.tn(t.resumeToken));break;case 4:n.An(r)&&(n.Rn(r),i.tn(t.resumeToken));break;default:ut()}})},e.prototype.In=function(t,n){var r=this;t.targetIds.length>0?t.targetIds.forEach(n):this.hn.forEach(function(i,s){r.An(s)&&n(s)})},e.prototype.Pn=function(t){var n=t.targetId,r=t.je.count,i=this.yn(n);if(i){var s=i.target;if(_p(s))if(r===0){var a=new ht(s.path);this.En(n,a,new Be(a,Ot.min()))}else yt(r===1);else this.gn(n)!==r&&(this.Rn(n),this.fn=this.fn.add(n))}},e.prototype.Vn=function(t){var n=this,r=new Map;this.hn.forEach(function(a,c){var l=n.yn(c);if(l){if(a.Be&&_p(l.target)){var h=new ht(l.target.path);n.ln.get(h)!==null||n.pn(c,h)||n.En(c,h,new Be(h,t))}a.Ze&&(r.set(c,a.en()),a.nn())}});var i=Qt();this._n.forEach(function(a,c){var l=!0;c.Ae(function(h){var p=n.yn(h);return!p||p.Ft===2||(l=!1,!1)}),l&&(i=i.add(a))});var s=new qw(t,r,this.fn,this.ln,i);return this.ln=Bi(),this._n=MA(),this.fn=new qe(kt),s},e.prototype.wn=function(t,n){if(this.An(t)){var r=this.pn(t,n.key)?2:0;this.mn(t).sn(n.key,r),this.ln=this.ln.zt(n.key,n),this._n=this._n.zt(n.key,this.bn(n.key).add(t))}},e.prototype.En=function(t,n,r){if(this.An(t)){var i=this.mn(t);this.pn(t,n)?i.sn(n,1):i.rn(n),this._n=this._n.zt(n,this.bn(n).delete(t)),r&&(this.ln=this.ln.zt(n,r))}},e.prototype.removeTarget=function(t){this.hn.delete(t)},e.prototype.gn=function(t){var n=this.mn(t).en();return this.un.vn(t).size+n.qe.size-n.Qe.size},e.prototype.on=function(t){this.mn(t).on()},e.prototype.mn=function(t){var n=this.hn.get(t);return n||(n=new LA,this.hn.set(t,n)),n},e.prototype.bn=function(t){var n=this._n.get(t);return n||(n=new qe(kt),this._n=this._n.zt(t,n)),n},e.prototype.An=function(t){var n=this.yn(t)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",t),n},e.prototype.yn=function(t){var n=this.hn.get(t);return n&&n.Xe?null:this.un.Sn(t)},e.prototype.Rn=function(t){var n=this;this.hn.set(t,new LA),this.un.vn(t).forEach(function(r){n.En(t,r,null)})},e.prototype.pn=function(t,n){return this.un.vn(t).has(n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(){return new wn(ht.H)}function FA(){return new wn(ht.H)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HH={asc:"ASCENDING",desc:"DESCENDING"},GH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WH=function(e,t){this.t=e,this.Bt=t};function Sl(e,t){return e.Bt?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function XO(e,t){return e.Bt?t.toBase64():t.toUint8Array()}function $H(e,t){return Sl(e,t.j())}function Xe(e){return yt(!!e),Ot.K(function(t){var n=Oo(t);return new Hn(n.seconds,n.nanos)}(e))}function Gw(e,t){return function(n){return new Ht(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).rt()}function JO(e){var t=Ht.ot(e);return yt(sx(t)),t}function Al(e,t){return Gw(e.t,t.path)}function ci(e,t){var n=JO(t);if(n.get(1)!==e.t.projectId)throw new G(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.t.projectId);if(n.get(3)!==e.t.database)throw new G(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.t.database);return new ht(tx(n))}function e_(e,t){return Gw(e.t,t)}function ZO(e){var t=JO(e);return t.length===4?Ht.ct():tx(t)}function Cl(e){return new Ht(["projects",e.t.projectId,"databases",e.t.database]).rt()}function tx(e){return yt(e.length>4&&e.get(4)==="documents"),e.Y(5)}function UA(e,t,n){return{name:Al(e,t),fields:n.proto.mapValue.fields}}function ex(e,t,n){var r=ci(e,t.name),i=Xe(t.updateTime),s=new Po({mapValue:{fields:t.fields}});return new Zt(r,i,s,{hasCommittedMutations:!!n})}function Tp(e,t){var n;if(t instanceof tf)n={update:UA(e,t.key,t.value)};else if(t instanceof ef)n={delete:Al(e,t.key)};else if(t instanceof Fo)n={update:UA(e,t.key,t.data),updateMask:XH(t.Gt)};else{if(!(t instanceof Bw))return ut();n={verify:Al(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(r){return function(i,s){var a=s.transform;if(a instanceof uu)return{fieldPath:s.field.rt(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ds)return{fieldPath:s.field.rt(),appendMissingElements:{values:a.elements}};if(a instanceof Ls)return{fieldPath:s.field.rt(),removeAllFromArray:{values:a.elements}};if(a instanceof cu)return{fieldPath:s.field.rt(),increment:a.Ut};throw ut()}(0,r)})),t.jt.Wt||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:$H(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ut()}(e,t.jt)),n}function jA(e,t){var n=t.currentDocument?function(h){return h.updateTime!==void 0?dn.updateTime(Xe(h.updateTime)):h.exists!==void 0?dn.exists(h.exists):dn.Kt()}(t.currentDocument):dn.Kt(),r=t.updateTransforms?t.updateTransforms.map(function(h){return function(p,v){var m=null;if("setToServerValue"in v)yt(v.setToServerValue==="REQUEST_TIME"),m=new uu;else if("appendMissingElements"in v){var y=v.appendMissingElements.values||[];m=new Ds(y)}else if("removeAllFromArray"in v){var b=v.removeAllFromArray.values||[];m=new Ls(b)}else"increment"in v?m=new cu(p,v.increment):ut();var E=Hr.lt(v.fieldPath);return new Zl(E,m)}(e,h)}):[];if(t.update){t.update.name;var i=ci(e,t.update.name),s=new Po({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(h){var p=h.fieldPaths||[];return new iu(p.map(function(v){return Hr.lt(v)}))}(t.updateMask);return new Fo(i,s,a,n,r)}return new tf(i,s,n,r)}if(t.delete){var c=ci(e,t.delete);return new ef(c,n)}if(t.verify){var l=ci(e,t.verify);return new Bw(l,n)}return ut()}function nx(e,t){return{documents:[e_(e,t.path)]}}function rx(e,t){var n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=e_(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=e_(e,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(c){if(c.length!==0){var l=c.map(function(h){return function(p){if(p.op==="=="){if(TA(p.value))return{unaryFilter:{field:Ta(p.field),op:"IS_NAN"}};if(IA(p.value))return{unaryFilter:{field:Ta(p.field),op:"IS_NULL"}}}else if(p.op==="!="){if(TA(p.value))return{unaryFilter:{field:Ta(p.field),op:"IS_NOT_NAN"}};if(IA(p.value))return{unaryFilter:{field:Ta(p.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ta(p.field),op:KH(p.op),value:p.value}}}(h)});return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}}(t.filters);i&&(n.structuredQuery.where=i);var s=function(c){if(c.length!==0)return c.map(function(l){return function(h){return{field:Ta(h.field),direction:zH(h.dir)}}(l)})}(t.orderBy);s&&(n.structuredQuery.orderBy=s);var a=function(c,l){return c.Bt||qs(l)?l:{value:l}}(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=VA(t.startAt)),t.endAt&&(n.structuredQuery.endAt=VA(t.endAt)),n}function ix(e){var t=ZO(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){yt(r===1);var s=n.from[0];s.allDescendants?i=s.collectionId:t=t.child(s.collectionId)}var a=[];n.where&&(a=ox(n.where));var c=[];n.orderBy&&(c=n.orderBy.map(function(v){return function(m){return new Wa(Ma(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(v)}));var l=null;n.limit&&(l=function(v){var m;return qs(m=typeof v=="object"?v.value:v)?null:m}(n.limit));var h=null;n.startAt&&(h=BA(n.startAt));var p=null;return n.endAt&&(p=BA(n.endAt)),kO(t,i,c,a,l,"F",h,p)}function ox(e){return e?e.unaryFilter!==void 0?[YH(e)]:e.fieldFilter!==void 0?[QH(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(function(t){return ox(t)}).reduce(function(t,n){return t.concat(n)}):ut():[]}function VA(e){return{before:e.before,values:e.position}}function BA(e){var t=!!e.before,n=e.values||[];return new Il(n,t)}function zH(e){return HH[e]}function KH(e){return GH[e]}function Ta(e){return{fieldPath:e.rt()}}function Ma(e){return Hr.lt(e.fieldPath)}function QH(e){return ir.create(Ma(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ut()}}(e.fieldFilter.op),e.fieldFilter.value)}function YH(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ma(e.unaryFilter.field);return ir.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ma(e.unaryFilter.field);return ir.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ma(e.unaryFilter.field);return ir.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ma(e.unaryFilter.field);return ir.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ut()}}function XH(e){var t=[];return e.fields.forEach(function(n){return t.push(n.rt())}),{fieldPaths:t}}function sx(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},$=function(){function e(t){var n=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t(function(r){n.xn=!0,n.result=r,n.Dn&&n.Dn(r)},function(r){n.xn=!0,n.error=r,n.Cn&&n.Cn(r)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,n){var r=this;return this.Nn&&ut(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(t,this.result):new e(function(i,s){r.Dn=function(a){r.Fn(t,a).next(i,s)},r.Cn=function(a){r.$n(n,a).next(i,s)}})},e.prototype.On=function(){var t=this;return new Promise(function(n,r){t.next(n,r)})},e.prototype.kn=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.Fn=function(t,n){return t?this.kn(function(){return t(n)}):e.resolve(n)},e.prototype.$n=function(t,n){return t?this.kn(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(n,r){n(t)})},e.reject=function(t){return new e(function(n,r){r(t)})},e.Mn=function(t){return new e(function(n,r){var i=0,s=0,a=!1;t.forEach(function(c){++i,c.next(function(){++s,a&&s===i&&n()},function(l){return r(l)})}),a=!0,s===i&&n()})},e.Ln=function(t){for(var n=e.resolve(!1),r=function(a){n=n.next(function(c){return c?e.resolve(c):a()})},i=0,s=t;i<s.length;i++)r(s[i]);return n},e.forEach=function(t,n){var r=this,i=[];return t.forEach(function(s,a){i.push(n.call(r,s,a))}),this.Mn(i)},e}(),ax=function(){function e(t,n){var r=this;this.action=t,this.transaction=n,this.aborted=!1,this.Bn=new kn,this.transaction.oncomplete=function(){r.Bn.resolve()},this.transaction.onabort=function(){n.error?r.Bn.reject(new Qc(t,n.error)):r.Bn.resolve()},this.transaction.onerror=function(i){var s=Ww(i.target.error);r.Bn.reject(new Qc(t,s))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(s){throw new Qc(n,s)}},Object.defineProperty(e.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(Y("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(t){var n=this.transaction.objectStore(t);return new ZH(n)},e}(),lu=function(){function e(t,n,r){this.name=t,this.version=n,this.Un=r,e.Qn(Os())===12.2&&Pe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return Y("SimpleDb","Removing database:",t),ds(window.indexedDB.deleteDatabase(t)).On()},e.Kn=function(){if(typeof indexedDB>"u")return!1;if(e.Wn())return!0;var t=Os(),n=e.Qn(t),r=0<n&&n<10,i=e.jn(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},e.Wn=function(){var t;return typeof process<"u"&&((t=process.env)===null||t===void 0?void 0:t.Gn)==="YES"},e.zn=function(t,n){return t.store(n)},e.Qn=function(t){var n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},e.jn=function(t){var n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},e.prototype.Hn=function(t){return R(this,void 0,void 0,function(){var n,r=this;return N(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(Y("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(s,a){var c=indexedDB.open(r.name,r.version);c.onsuccess=function(l){var h=l.target.result;s(h)},c.onblocked=function(){a(new Qc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=function(l){var h=l.target.error;h.name==="VersionError"?a(new G(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a(new Qc(t,h))},c.onupgradeneeded=function(l){Y("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',l.oldVersion);var h=l.target.result;r.Un.Jn(h,c.transaction,l.oldVersion,r.version).next(function(){Y("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=i.sent(),i.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(s){return r.Yn(s)}),this.db)]}})})},e.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(n){return t(n)})},e.prototype.runTransaction=function(t,n,r,i){return R(this,void 0,void 0,function(){var s,a,c,l,h;return N(this,function(p){switch(p.label){case 0:s=n==="readonly",a=0,c=function(){var v,m,y,b,E;return N(this,function(I){switch(I.label){case 0:++a,I.label=1;case 1:return I.trys.push([1,4,,5]),[4,l.Hn(t)];case 2:return l.db=I.sent(),v=ax.open(l.db,t,s?"readonly":"readwrite",r),m=i(v).catch(function(C){return v.abort(C),$.reject(C)}).On(),y={},m.catch(function(){}),[4,v.qn];case 3:return[2,(y.value=(I.sent(),m),y)];case 4:return b=I.sent(),E=b.name!=="FirebaseError"&&a<3,Y("SimpleDb","Transaction failed with error:",b.message,"Retrying:",E),l.close(),E?[3,5]:[2,{value:Promise.reject(b)}];case 5:return[2]}})},l=this,p.label=1;case 1:return[5,c()];case 2:if(typeof(h=p.sent())=="object")return[2,h.value];p.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),JH=function(){function e(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(e.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.ts=!0},e.prototype.ss=function(t){this.es=t},e.prototype.delete=function(){return ds(this.Zn.delete())},e}(),Qc=function(e){function t(n,r){var i=this;return(i=e.call(this,k.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",i}return J(t,e),t}(G);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(e){return e.name==="IndexedDbTransactionError"}var ZH=function(){function e(t){this.store=t}return e.prototype.put=function(t,n){var r;return n!==void 0?(Y("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(Y("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ds(r)},e.prototype.add=function(t){return Y("SimpleDb","ADD",this.store.name,t,t),ds(this.store.add(t))},e.prototype.get=function(t){var n=this;return ds(this.store.get(t)).next(function(r){return r===void 0&&(r=null),Y("SimpleDb","GET",n.store.name,t,r),r})},e.prototype.delete=function(t){return Y("SimpleDb","DELETE",this.store.name,t),ds(this.store.delete(t))},e.prototype.count=function(){return Y("SimpleDb","COUNT",this.store.name),ds(this.store.count())},e.prototype.rs=function(t,n){var r=this.cursor(this.options(t,n)),i=[];return this.os(r,function(s,a){i.push(a)}).next(function(){return i})},e.prototype.cs=function(t,n){Y("SimpleDb","DELETE ALL",this.store.name);var r=this.options(t,n);r.us=!1;var i=this.cursor(r);return this.os(i,function(s,a,c){return c.delete()})},e.prototype.hs=function(t,n){var r;n?r=t:(r={},n=t);var i=this.cursor(r);return this.os(i,n)},e.prototype.ls=function(t){var n=this.cursor({});return new $(function(r,i){n.onerror=function(s){var a=Ww(s.target.error);i(a)},n.onsuccess=function(s){var a=s.target.result;a?t(a.primaryKey,a.value).next(function(c){c?a.continue():r()}):r()}})},e.prototype.os=function(t,n){var r=[];return new $(function(i,s){t.onerror=function(a){s(a.target.error)},t.onsuccess=function(a){var c=a.target.result;if(c){var l=new JH(c),h=n(c.primaryKey,c.value,l);if(h instanceof $){var p=h.catch(function(v){return l.done(),$.reject(v)});r.push(p)}l.xn?i():l.ns===null?c.continue():c.continue(l.ns)}else i()}}).next(function(){return $.Mn(r)})},e.prototype.options=function(t,n){var r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}},e.prototype.cursor=function(t){var n="next";if(t.reverse&&(n="prev"),t.index){var r=this.store.index(t.index);return t.us?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)},e}();function ds(e){return new $(function(t,n){e.onsuccess=function(r){var i=r.target.result;t(i)},e.onerror=function(r){var i=Ww(r.target.error);n(i)}})}var qA=!1;function Ww(e){var t=lu.Qn(Os());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new G("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return qA||(qA=!0,setTimeout(function(){throw r},0)),r}}return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tG=function(){function e(t,n,r,i,s){this._s=t,this.fs=n,this.ds=r,this.op=i,this.ws=s,this.Es=new kn,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch(function(a){})}return e.Ts=function(t,n,r,i,s){var a=new e(t,n,Date.now()+r,i,s);return a.start(r),a},e.prototype.start=function(t){var n=this;this.Is=setTimeout(function(){return n.As()},t)},e.prototype.Rs=function(){return this.As()},e.prototype.cancel=function(t){this.Is!==null&&(this.clearTimeout(),this.Es.reject(new G(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.As=function(){var t=this;this._s.Ps(function(){return t.Is!==null?(t.clearTimeout(),t.op().then(function(n){return t.Es.resolve(n)})):Promise.resolve()})},e.prototype.clearTimeout=function(){this.Is!==null&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},e}();function Pu(e,t){if(Pe("AsyncQueue",t+": "+e),Hs(e))return new G(k.UNAVAILABLE,t+": "+e);throw e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ux="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",cx=function(){function e(){this.ys=[]}return e.prototype.gs=function(t){this.ys.push(t)},e.prototype.Vs=function(){this.ys.forEach(function(t){return t()})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=HA(t)),t=eG(e.get(n),t);return HA(t)}function eG(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function HA(e){return e+""}function ki(e){var t=e.length;if(yt(t>=2),t===2)return yt(e.charAt(0)===""&&e.charAt(1)===""),Ht.ct();for(var n=t-2,r=[],i="",s=0;s<t;){var a=e.indexOf("",s);switch((a<0||a>n)&&ut(),e.charAt(a+1)){case"":var c=e.substring(s,a),l=void 0;i.length===0?l=c:(l=i+=c,i=""),r.push(l);break;case"":i+=e.substring(s,a),i+="\0";break;case"":i+=e.substring(s,a+1);break;default:ut()}s=a+2}return new Ht(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nG=function(e,t){this.seconds=e,this.nanoseconds=t},Zn=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Zn.store="owner",Zn.key="owner";var Io=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Io.store="mutationQueues",Io.keyPath="userId";var re=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};re.store="mutations",re.keyPath="batchId",re.userMutationsIndex="userMutationsIndex",re.userMutationsKeyPath=["userId","batchId"];var fn=function(){function e(){}return e.prefixForUser=function(t){return[t]},e.prefixForPath=function(t,n){return[t,Vr(n)]},e.key=function(t,n,r){return[t,Vr(n),r]},e}();fn.store="documentMutations",fn.PLACEHOLDER=new fn;var rG=function(e,t){this.path=e,this.readTime=t},iG=function(e,t){this.path=e,this.version=t},me=function(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};me.store="remoteDocuments",me.readTimeIndex="readTimeIndex",me.readTimeIndexPath="readTime",me.collectionReadTimeIndex="collectionReadTimeIndex",me.collectionReadTimeIndexPath=["parentPath","readTime"];var ai=function(e){this.byteSize=e};ai.store="remoteDocumentGlobal",ai.key="remoteDocumentGlobalKey";var qn=function(e,t,n,r,i,s,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=a};qn.store="targets",qn.keyPath="targetId",qn.queryTargetsIndexName="queryTargetsIndex",qn.queryTargetsKeyPath=["canonicalId","targetId"];var an=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};an.store="targetDocuments",an.keyPath=["targetId","path"],an.documentTargetsIndex="documentTargetsIndex",an.documentTargetsKeyPath=["path","targetId"];var er=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};er.key="targetGlobalKey",er.store="targetGlobal";var Ss=function(e,t){this.collectionId=e,this.parent=t};Ss.store="collectionParents",Ss.keyPath=["collectionId","parent"];var Li=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};Li.store="clientMetadata",Li.keyPath="clientId";var fu=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};fu.store="bundles",fu.keyPath="bundleId";var hu=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};hu.store="namedQueries",hu.keyPath="name";var oG=Ae(Ae(Ae(Ae([Io.store,re.store,fn.store,me.store,qn.store,Zn.store,er.store,an.store],[Li.store]),[ai.store]),[Ss.store]),[fu.store,hu.store]),GA=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).ps=n,i.bs=r,i}return J(t,e),t}(cx);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(e,t){var n=Z(e);return lu.zn(n.ps,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $w=function(){function e(t,n,r,i){this.batchId=t,this.vs=n,this.baseMutations=r,this.mutations=i}return e.prototype.Ss=function(t,n,r){for(var i=r.Ds,s=0;s<this.mutations.length;s++){var a=this.mutations[s];a.key.isEqual(t)&&(n=DH(a,n,i[s]))}return n},e.prototype.Cs=function(t,n){for(var r=0,i=this.baseMutations;r<i.length;r++)(c=i[r]).key.isEqual(t)&&(n=t_(c,n,this.vs));for(var s=0,a=this.mutations;s<a.length;s++){var c;(c=a[s]).key.isEqual(t)&&(n=t_(c,n,this.vs))}return n},e.prototype.xs=function(t){var n=this,r=t;return this.mutations.forEach(function(i){var s=n.Cs(i.key,t.get(i.key));s&&(r=r.zt(i.key,s))}),r},e.prototype.keys=function(){return this.mutations.reduce(function(t,n){return t.add(n.key)},Qt())},e.prototype.isEqual=function(t){return this.batchId===t.batchId&&ru(this.mutations,t.mutations,function(n,r){return RA(n,r)})&&ru(this.baseMutations,t.baseMutations,function(n,r){return RA(n,r)})},e}(),sG=function(){function e(t,n,r,i){this.batch=t,this.Ns=n,this.Ds=r,this.$s=i}return e.from=function(t,n,r){yt(t.mutations.length===r.length);for(var i=zO(),s=t.mutations,a=0;a<s.length;a++)i=i.zt(s[a].key,r[a].version);return new e(t,n,r,i)},e}(),lx=function(e){this.Fs=e};function n_(e,t){if(t.document)return ex(e.Fs,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=ht.Et(t.noDocument.path),r=du(t.noDocument.readTime);return new Be(n,r,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var i=ht.Et(t.unknownDocument.path);return r=du(t.unknownDocument.version),new Mw(i,r)}return ut()}function WA(e,t,n){var r=zw(n),i=t.key.path.X().it();if(t instanceof Zt){var s=function(v,m){return{name:Al(v,m.key),fields:m.bt().mapValue.fields,updateTime:Sl(v,m.version.j())}}(e.Fs,t),a=t.hasCommittedMutations;return new me(null,null,s,a,r,i)}if(t instanceof Be){var c=t.key.path.it(),l=pu(t.version);return a=t.hasCommittedMutations,new me(null,new rG(c,l),null,a,r,i)}if(t instanceof Mw){var h=t.key.path.it(),p=pu(t.version);return new me(new iG(h,p),null,null,!0,r,i)}return ut()}function zw(e){var t=e.j();return[t.seconds,t.nanoseconds]}function fx(e){var t=new Hn(e[0],e[1]);return Ot.K(t)}function pu(e){var t=e.j();return new nG(t.seconds,t.nanoseconds)}function du(e){var t=new Hn(e.seconds,e.nanoseconds);return Ot.K(t)}function Pa(e,t){for(var n=(t.baseMutations||[]).map(function(l){return jA(e.Fs,l)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&t.mutations[r+1].transform!==void 0){var s=t.mutations[r+1];i.updateTransforms=s.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map(function(l){return jA(e.Fs,l)}),c=Hn.fromMillis(t.localWriteTimeMs);return new $w(t.batchId,c,n,a)}function jc(e){var t,n,r=du(e.readTime),i=e.lastLimboFreeSnapshotVersion!==void 0?du(e.lastLimboFreeSnapshotVersion):Ot.min();return e.query.documents!==void 0?(yt((n=e.query).documents.length===1),t=_r(xu(ZO(n.documents[0])))):t=function(s){return _r(ix(s))}(e.query),new hd(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Pn.fromBase64String(e.resumeToken))}function hx(e,t){var n,r=pu(t.Ot),i=pu(t.lastLimboFreeSnapshotVersion);n=_p(t.target)?nx(e.Fs,t.target):rx(e.Fs,t.target);var s=t.resumeToken.toBase64();return new qn(t.targetId,Yl(t.target),r,s,t.sequenceNumber,i,n)}function Kw(e){var t=ix({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?DO(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aG=function(){function e(){}return e.prototype.Os=function(t,n){return $A(t).get(n).next(function(r){if(r)return{id:(i=r).bundleId,createTime:du(i.createTime),version:i.version};var i})},e.prototype.ks=function(t,n){return $A(t).put({bundleId:(r=n).id,createTime:pu(Xe(r.createTime)),version:r.version});var r},e.prototype.Ms=function(t,n){return zA(t).get(n).next(function(r){if(r)return{name:(i=r).name,query:Kw(i.bundledQuery),readTime:du(i.readTime)};var i})},e.prototype.Ls=function(t,n){return zA(t).put(function(r){return{name:r.name,readTime:pu(Xe(r.readTime)),bundledQuery:r.bundledQuery}}(n))},e}();function $A(e){return Kn(e,fu.store)}function zA(e){return Kn(e,hu.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uG=function(){function e(){this.Bs=new Qw}return e.prototype.qs=function(t,n){return this.Bs.add(n),$.resolve()},e.prototype.Us=function(t,n){return $.resolve(this.Bs.getEntries(n))},e}(),Qw=function(){function e(){this.index={}}return e.prototype.add=function(t){var n=t.tt(),r=t.X(),i=this.index[n]||new qe(Ht.H),s=!i.has(r);return this.index[n]=i.add(r),s},e.prototype.has=function(t){var n=t.tt(),r=t.X(),i=this.index[n];return i&&i.has(r)},e.prototype.getEntries=function(t){return(this.index[t]||new qe(Ht.H)).it()},e}(),cG=function(){function e(){this.Qs=new Qw}return e.prototype.qs=function(t,n){var r=this;if(!this.Qs.has(n)){var i=n.tt(),s=n.X();t.gs(function(){r.Qs.add(n)});var a={collectionId:i,parent:Vr(s)};return KA(t).put(a)}return $.resolve()},e.prototype.Us=function(t,n){var r=[],i=IDBKeyRange.bound([n,""],[AO(n),""],!1,!0);return KA(t).rs(i).next(function(s){for(var a=0,c=s;a<c.length;a++){var l=c[a];if(l.collectionId!==n)break;r.push(ki(l.parent))}return r})},e}();function KA(e){return Kn(e,Ss.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QA={Ks:!1,Ws:0,js:0,Gs:0},ni=function(){function e(t,n,r){this.zs=t,this.Hs=n,this.Js=r}return e.Ys=function(t){return new e(t,e.Xs,e.Zs)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(e){return R(this,void 0,void 0,function(){return N(this,function(t){if(e.code!==k.FAILED_PRECONDITION||e.message!==ux)throw e;return Y("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni.Xs=10,ni.Zs=1e3,ni.ti=new ni(41943040,ni.Xs,ni.Zs),ni.ei=new ni(-1,0,0);var ku=function(){function e(t,n){this.ni=t,this.si=n,this.ii={}}return e.prototype.get=function(t){var n=this.ni(t),r=this.ii[n];if(r!==void 0)for(var i=0,s=r;i<s.length;i++){var a=s[i],c=a[0],l=a[1];if(this.si(c,t))return l}},e.prototype.has=function(t){return this.get(t)!==void 0},e.prototype.set=function(t,n){var r=this.ni(t),i=this.ii[r];if(i!==void 0){for(var s=0;s<i.length;s++)if(this.si(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n])}else this.ii[r]=[[t,n]]},e.prototype.delete=function(t){var n=this.ni(t),r=this.ii[n];if(r===void 0)return!1;for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return r.length===1?delete this.ii[n]:r.splice(i,1),!0;return!1},e.prototype.forEach=function(t){Kl(this.ii,function(n,r){for(var i=0,s=r;i<s.length;i++){var a=s[i],c=a[0],l=a[1];t(c,l)}})},e.prototype.et=function(){return NO(this.ii)},e}(),px=function(){function e(){this.ri=new ku(function(t){return t.toString()},function(t,n){return t.isEqual(n)}),this.oi=!1}return e.prototype.ci=function(t){var n=this.ri.get(t);return n?n.readTime:Ot.min()},e.prototype.ai=function(t,n){this.ui(),this.ri.set(t.key,{hi:t,readTime:n})},e.prototype.li=function(t,n){n===void 0&&(n=null),this.ui(),this.ri.set(t,{hi:null,readTime:n})},e.prototype._i=function(t,n){this.ui();var r=this.ri.get(n);return r!==void 0?$.resolve(r.hi):this.fi(t,n)},e.prototype.getEntries=function(t,n){return this.di(t,n)},e.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},e.prototype.ui=function(){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(e,t,n){var r=e.store(re.store),i=e.store(fn.store),s=[],a=IDBKeyRange.only(n.batchId),c=0,l=r.hs({range:a},function(b,E,I){return c++,I.delete()});s.push(l.next(function(){yt(c===1)}));for(var h=[],p=0,v=n.mutations;p<v.length;p++){var m=v[p],y=fn.key(t,m.key.path,n.batchId);s.push(i.delete(y)),h.push(m.key)}return $.Mn(s).next(function(){return h})}function Sp(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ut();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lG=function(){function e(t,n,r,i){this.userId=t,this.Qt=n,this.Ei=r,this.Ti=i,this.Ii={}}return e.mi=function(t,n,r,i){return yt(t.uid!==""),new e(t.m()?t.uid:"",n,r,i)},e.prototype.Ai=function(t){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ao(t).hs({index:re.userMutationsIndex,range:r},function(i,s,a){n=!1,a.done()}).next(function(){return n})},e.prototype.Ri=function(t,n,r,i){var s=this,a=ka(t),c=ao(t);return c.add({}).next(function(l){yt(typeof l=="number");for(var h=new $w(l,n,r,i),p=function(C,P,D){var F=D.baseMutations.map(function(U){return Tp(C.Fs,U)}),Q=D.mutations.map(function(U){return Tp(C.Fs,U)});return new re(P,D.batchId,D.vs.toMillis(),F,Q)}(s.Qt,s.userId,h),v=[],m=new qe(function(C,P){return kt(C.rt(),P.rt())}),y=0,b=i;y<b.length;y++){var E=b[y],I=fn.key(s.userId,E.key.path,l);m=m.add(E.key.path.X()),v.push(c.put(p)),v.push(a.put(I,fn.PLACEHOLDER))}return m.forEach(function(C){v.push(s.Ei.qs(t,C))}),t.gs(function(){s.Ii[l]=h.keys()}),$.Mn(v).next(function(){return h})})},e.prototype.Pi=function(t,n){var r=this;return ao(t).get(n).next(function(i){return i?(yt(i.userId===r.userId),Pa(r.Qt,i)):null})},e.prototype.yi=function(t,n){var r=this;return this.Ii[n]?$.resolve(this.Ii[n]):this.Pi(t,n).next(function(i){if(i){var s=i.keys();return r.Ii[n]=s,s}return null})},e.prototype.gi=function(t,n){var r=this,i=n+1,s=IDBKeyRange.lowerBound([this.userId,i]),a=null;return ao(t).hs({index:re.userMutationsIndex,range:s},function(c,l,h){l.userId===r.userId&&(yt(l.batchId>=i),a=Pa(r.Qt,l)),h.done()}).next(function(){return a})},e.prototype.Vi=function(t){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return ao(t).hs({index:re.userMutationsIndex,range:n,reverse:!0},function(i,s,a){r=s.batchId,a.done()}).next(function(){return r})},e.prototype.pi=function(t){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ao(t).rs(re.userMutationsIndex,r).next(function(i){return i.map(function(s){return Pa(n.Qt,s)})})},e.prototype.bi=function(t,n){var r=this,i=fn.prefixForPath(this.userId,n.path),s=IDBKeyRange.lowerBound(i),a=[];return ka(t).hs({range:s},function(c,l,h){var p=c[0],v=c[1],m=c[2],y=ki(v);if(p===r.userId&&n.path.isEqual(y))return ao(t).get(m).next(function(b){if(!b)throw ut();yt(b.userId===r.userId),a.push(Pa(r.Qt,b))});h.done()}).next(function(){return a})},e.prototype.vi=function(t,n){var r=this,i=new qe(kt),s=[];return n.forEach(function(a){var c=fn.prefixForPath(r.userId,a.path),l=IDBKeyRange.lowerBound(c),h=ka(t).hs({range:l},function(p,v,m){var y=p[0],b=p[1],E=p[2],I=ki(b);y===r.userId&&a.path.isEqual(I)?i=i.add(E):m.done()});s.push(h)}),$.Mn(s).next(function(){return r.Si(t,i)})},e.prototype.Di=function(t,n){var r=this,i=n.path,s=i.length+1,a=fn.prefixForPath(this.userId,i),c=IDBKeyRange.lowerBound(a),l=new qe(kt);return ka(t).hs({range:c},function(h,p,v){var m=h[0],y=h[1],b=h[2],E=ki(y);m===r.userId&&i.nt(E)?E.length===s&&(l=l.add(b)):v.done()}).next(function(){return r.Si(t,l)})},e.prototype.Si=function(t,n){var r=this,i=[],s=[];return n.forEach(function(a){s.push(ao(t).get(a).next(function(c){if(c===null)throw ut();yt(c.userId===r.userId),i.push(Pa(r.Qt,c))}))}),$.Mn(s).next(function(){return i})},e.prototype.Ci=function(t,n){var r=this;return dx(t.ps,this.userId,n).next(function(i){return t.gs(function(){r.xi(n.batchId)}),$.forEach(i,function(s){return r.Ti.Ni(t,s)})})},e.prototype.xi=function(t){delete this.Ii[t]},e.prototype.$i=function(t){var n=this;return this.Ai(t).next(function(r){if(!r)return $.resolve();var i=IDBKeyRange.lowerBound(fn.prefixForUser(n.userId)),s=[];return ka(t).hs({range:i},function(a,c,l){if(a[0]===n.userId){var h=ki(a[1]);s.push(h)}else l.done()}).next(function(){yt(s.length===0)})})},e.prototype.Fi=function(t,n){return vx(t,this.userId,n)},e.prototype.Oi=function(t){var n=this;return gx(t).get(this.userId).next(function(r){return r||new Io(n.userId,-1,"")})},e}();function vx(e,t,n){var r=fn.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),a=!1;return ka(e).hs({range:s,us:!0},function(c,l,h){var p=c[0],v=c[1];c[2],p===t&&v===i&&(a=!0),h.done()}).next(function(){return a})}function ao(e){return Kn(e,re.store)}function ka(e){return Kn(e,fn.store)}function gx(e){return Kn(e,Io.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ap=function(){function e(t){this.ki=t}return e.prototype.next=function(){return this.ki+=2,this.ki},e.Mi=function(){return new e(0)},e.Li=function(){return new e(-1)},e}(),fG=function(){function e(t,n){this.Ti=t,this.Qt=n}return e.prototype.Bi=function(t){var n=this;return this.qi(t).next(function(r){var i=new Ap(r.highestTargetId);return r.highestTargetId=i.next(),n.Ui(t,r).next(function(){return r.highestTargetId})})},e.prototype.Qi=function(t){return this.qi(t).next(function(n){return Ot.K(new Hn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.Ki=function(t){return this.qi(t).next(function(n){return n.highestListenSequenceNumber})},e.prototype.Wi=function(t,n,r){var i=this;return this.qi(t).next(function(s){return s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.j()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),i.Ui(t,s)})},e.prototype.ji=function(t,n){var r=this;return this.Gi(t,n).next(function(){return r.qi(t).next(function(i){return i.targetCount+=1,r.zi(n,i),r.Ui(t,i)})})},e.prototype.Hi=function(t,n){return this.Gi(t,n)},e.prototype.Ji=function(t,n){var r=this;return this.Yi(t,n.targetId).next(function(){return Sa(t).delete(n.targetId)}).next(function(){return r.qi(t)}).next(function(i){return yt(i.targetCount>0),i.targetCount-=1,r.Ui(t,i)})},e.prototype.Xi=function(t,n,r){var i=this,s=0,a=[];return Sa(t).hs(function(c,l){var h=jc(l);h.sequenceNumber<=n&&r.get(h.targetId)===null&&(s++,a.push(i.Ji(t,h)))}).next(function(){return $.Mn(a)}).next(function(){return s})},e.prototype.In=function(t,n){return Sa(t).hs(function(r,i){var s=jc(i);n(s)})},e.prototype.qi=function(t){return YA(t).get(er.key).next(function(n){return yt(n!==null),n})},e.prototype.Ui=function(t,n){return YA(t).put(er.key,n)},e.prototype.Gi=function(t,n){return Sa(t).put(hx(this.Qt,n))},e.prototype.zi=function(t,n){var r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r},e.prototype.Zi=function(t){return this.qi(t).next(function(n){return n.targetCount})},e.prototype.tr=function(t,n){var r=Yl(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Sa(t).hs({range:i,index:qn.queryTargetsIndexName},function(a,c,l){var h=jc(c);fd(n,h.target)&&(s=h,l.done())}).next(function(){return s})},e.prototype.er=function(t,n,r){var i=this,s=[],a=mo(t);return n.forEach(function(c){var l=Vr(c.path);s.push(a.put(new an(r,l))),s.push(i.Ti.nr(t,r,c))}),$.Mn(s)},e.prototype.sr=function(t,n,r){var i=this,s=mo(t);return $.forEach(n,function(a){var c=Vr(a.path);return $.Mn([s.delete([r,c]),i.Ti.ir(t,r,a)])})},e.prototype.Yi=function(t,n){var r=mo(t),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)},e.prototype.rr=function(t,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),i=mo(t),s=Qt();return i.hs({range:r,us:!0},function(a,c,l){var h=ki(a[1]),p=new ht(h);s=s.add(p)}).next(function(){return s})},e.prototype.Fi=function(t,n){var r=Vr(n.path),i=IDBKeyRange.bound([r],[AO(r)],!1,!0),s=0;return mo(t).hs({index:an.documentTargetsIndex,us:!0,range:i},function(a,c,l){var h=a[0];a[1],h!==0&&(s++,l.done())}).next(function(){return s>0})},e.prototype.Sn=function(t,n){return Sa(t).get(n).next(function(r){return r?jc(r):null})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(e){return Kn(e,qn.store)}function YA(e){return Kn(e,er.store)}function mo(e){return Kn(e,an.store)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(e,t){var n=e[0],r=e[1],i=t[0],s=t[1],a=kt(n,i);return a===0?kt(r,s):a}var hG=function(){function e(t){this.cr=t,this.buffer=new qe(XA),this.ar=0}return e.prototype.ur=function(){return++this.ar},e.prototype.hr=function(t){var n=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();XA(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),pG=function(){function e(t,n){this.lr=t,this._s=n,this._r=!1,this.dr=null}return e.prototype.start=function(t){this.lr.params.zs!==-1&&this.wr(t)},e.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(e.prototype,"Er",{get:function(){return this.dr!==null},enumerable:!1,configurable:!0}),e.prototype.wr=function(t){var n=this,r=this._r?3e5:6e4;Y("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.dr=this._s.Tr("lru_garbage_collection",r,function(){return R(n,void 0,void 0,function(){var i;return N(this,function(s){switch(s.label){case 0:this.dr=null,this._r=!0,s.label=1;case 1:return s.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return s.sent(),[3,7];case 3:return Hs(i=s.sent())?(Y("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i),[3,6]):[3,4];case 4:return[4,Gs(i)];case 5:s.sent(),s.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return s.sent(),[2]}})})})},e}(),dG=function(){function e(t,n){this.mr=t,this.params=n}return e.prototype.Ar=function(t,n){return this.mr.Rr(t).next(function(r){return Math.floor(n/100*r)})},e.prototype.Pr=function(t,n){var r=this;if(n===0)return $.resolve(rr.q);var i=new hG(n);return this.mr.In(t,function(s){return i.hr(s.sequenceNumber)}).next(function(){return r.mr.yr(t,function(s){return i.hr(s)})}).next(function(){return i.maxValue})},e.prototype.Xi=function(t,n,r){return this.mr.Xi(t,n,r)},e.prototype.gr=function(t,n){return this.mr.gr(t,n)},e.prototype.Vr=function(t,n){var r=this;return this.params.zs===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(QA)):this.pr(t).next(function(i){return i<r.params.zs?(Y("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.params.zs),QA):r.br(t,n)})},e.prototype.pr=function(t){return this.mr.pr(t)},e.prototype.br=function(t,n){var r,i,s,a,c,l,h,p=this,v=Date.now();return this.Ar(t,this.params.Hs).next(function(m){return m>p.params.Js?(Y("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+p.params.Js+" from "+m),i=p.params.Js):i=m,a=Date.now(),p.Pr(t,i)}).next(function(m){return r=m,c=Date.now(),p.Xi(t,r,n)}).next(function(m){return s=m,l=Date.now(),p.gr(t,r)}).next(function(m){return h=Date.now(),Yy()<=Rt.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(a-v)+`ms
	Determined least recently used `+i+" in "+(c-a)+`ms
	Removed `+s+" targets in "+(l-c)+`ms
	Removed `+m+" documents in "+(h-l)+`ms
Total Duration: `+(h-v)+"ms"),$.resolve({Ks:!0,Ws:i,js:s,Gs:m})})},e}(),vG=function(){function e(t,n){this.db=t,this.lr=function(r,i){return new dG(r,i)}(this,n)}return e.prototype.Rr=function(t){var n=this.vr(t);return this.db.Sr().Zi(t).next(function(r){return n.next(function(i){return r+i})})},e.prototype.vr=function(t){var n=0;return this.yr(t,function(r){n++}).next(function(){return n})},e.prototype.In=function(t,n){return this.db.Sr().In(t,n)},e.prototype.yr=function(t,n){return this.Dr(t,function(r,i){return n(i)})},e.prototype.nr=function(t,n,r){return Eh(t,r)},e.prototype.ir=function(t,n,r){return Eh(t,r)},e.prototype.Xi=function(t,n,r){return this.db.Sr().Xi(t,n,r)},e.prototype.Ni=function(t,n){return Eh(t,n)},e.prototype.Cr=function(t,n){return function(r,i){var s=!1;return gx(r).ls(function(a){return vx(r,a,i).next(function(c){return c&&(s=!0),$.resolve(!c)})}).next(function(){return s})}(t,n)},e.prototype.gr=function(t,n){var r=this,i=this.db.$r().Nr(),s=[],a=0;return this.Dr(t,function(c,l){if(l<=n){var h=r.Cr(t,c).next(function(p){if(!p)return a++,i._i(t,c).next(function(){return i.li(c),mo(t).delete([0,Vr(c.path)])})});s.push(h)}}).next(function(){return $.Mn(s)}).next(function(){return i.apply(t)}).next(function(){return a})},e.prototype.removeTarget=function(t,n){var r=n.kt(t.bs);return this.db.Sr().Hi(t,r)},e.prototype.Fr=function(t,n){return Eh(t,n)},e.prototype.Dr=function(t,n){var r,i=mo(t),s=rr.q;return i.hs({index:an.documentTargetsIndex},function(a,c){var l=a[0],h=(a[1],c.path),p=c.sequenceNumber;l===0?(s!==rr.q&&n(new ht(ki(r)),s),s=p,r=h):s=rr.q}).next(function(){s!==rr.q&&n(new ht(ki(r)),s)})},e.prototype.pr=function(t){return this.db.$r().Or(t)},e}();function Eh(e,t){return mo(e).put(function(n,r){return new an(0,Vr(n.path),r)}(t,e.bs))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gG=function(){function e(t,n){this.Qt=t,this.Ei=n}return e.prototype.ai=function(t,n,r){return po(t).put(Ih(n),r)},e.prototype.li=function(t,n){var r=po(t),i=Ih(n);return r.delete(i)},e.prototype.updateMetadata=function(t,n){var r=this;return this.getMetadata(t).next(function(i){return i.byteSize+=n,r.kr(t,i)})},e.prototype._i=function(t,n){var r=this;return po(t).get(Ih(n)).next(function(i){return r.Mr(i)})},e.prototype.Lr=function(t,n){var r=this;return po(t).get(Ih(n)).next(function(i){var s=r.Mr(i);return s?{hi:s,size:Sp(i)}:null})},e.prototype.getEntries=function(t,n){var r=this,i=Ep();return this.Br(t,n,function(s,a){var c=r.Mr(a);i=i.zt(s,c)}).next(function(){return i})},e.prototype.qr=function(t,n){var r=this,i=Ep(),s=new wn(ht.H);return this.Br(t,n,function(a,c){var l=r.Mr(c);l?(i=i.zt(a,l),s=s.zt(a,Sp(c))):(i=i.zt(a,null),s=s.zt(a,0))}).next(function(){return{Ur:i,Qr:s}})},e.prototype.Br=function(t,n,r){if(n.et())return $.resolve();var i=IDBKeyRange.bound(n.first().path.it(),n.last().path.it()),s=n.te(),a=s.oe();return po(t).hs({range:i},function(c,l,h){for(var p=ht.Et(c);a&&ht.H(a,p)<0;)r(a,null),a=s.oe();a&&a.isEqual(p)&&(r(a,l),a=s.ce()?s.oe():null),a?h.ss(a.path.it()):h.done()}).next(function(){for(;a;)r(a,null),a=s.ce()?s.oe():null})},e.prototype.Kr=function(t,n,r){var i=this,s=Tl(),a=n.path.length+1,c={};if(r.isEqual(Ot.min())){var l=n.path.it();c.range=IDBKeyRange.lowerBound(l)}else{var h=n.path.it(),p=zw(r);c.range=IDBKeyRange.lowerBound([h,p],!0),c.index=me.collectionReadTimeIndex}return po(t).hs(c,function(v,m,y){if(v.length===a){var b=n_(i.Qt,m);n.path.nt(b.key.path)?b instanceof Zt&&Jl(n,b)&&(s=s.zt(b.key,b)):y.done()}}).next(function(){return s})},e.prototype.Nr=function(t){return new mG(this,!!t&&t.Wr)},e.prototype.Or=function(t){return this.getMetadata(t).next(function(n){return n.byteSize})},e.prototype.getMetadata=function(t){return JA(t).get(ai.key).next(function(n){return yt(!!n),n})},e.prototype.kr=function(t,n){return JA(t).put(ai.key,n)},e.prototype.Mr=function(t){if(t){var n=n_(this.Qt,t);return n instanceof Be&&n.version.isEqual(Ot.min())?null:n}return null},e}(),mG=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).jr=n,i.Wr=r,i.Gr=new ku(function(s){return s.toString()},function(s,a){return s.isEqual(a)}),i}return J(t,e),t.prototype.wi=function(n){var r=this,i=[],s=0,a=new qe(function(c,l){return kt(c.rt(),l.rt())});return this.ri.forEach(function(c,l){var h=r.Gr.get(c);if(l.hi){var p=WA(r.jr.Qt,l.hi,r.ci(c));a=a.add(c.path.X());var v=Sp(p);s+=v-h,i.push(r.jr.ai(n,c,p))}else if(s-=h,r.Wr){var m=WA(r.jr.Qt,new Be(c,Ot.min()),r.ci(c));i.push(r.jr.ai(n,c,m))}else i.push(r.jr.li(n,c))}),a.forEach(function(c){i.push(r.jr.Ei.qs(n,c))}),i.push(this.jr.updateMetadata(n,s)),$.Mn(i)},t.prototype.fi=function(n,r){var i=this;return this.jr.Lr(n,r).next(function(s){return s===null?(i.Gr.set(r,0),null):(i.Gr.set(r,s.size),s.hi)})},t.prototype.di=function(n,r){var i=this;return this.jr.qr(n,r).next(function(s){var a=s.Ur;return s.Qr.forEach(function(c,l){i.Gr.set(c,l)}),a})},t}(px);function JA(e){return Kn(e,ai.store)}function po(e){return Kn(e,me.store)}function Ih(e){return e.path.it()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yG=function(){function e(t){this.Qt=t}return e.prototype.Jn=function(t,n,r,i){var s=this;yt(r<i&&r>=0&&i<=11);var a=new ax("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(Zn.store)}(t),function(l){l.createObjectStore(Io.store,{keyPath:Io.keyPath}),l.createObjectStore(re.store,{keyPath:re.keyPath,autoIncrement:!0}).createIndex(re.userMutationsIndex,re.userMutationsKeyPath,{unique:!0}),l.createObjectStore(fn.store)}(t),ZA(t),function(l){l.createObjectStore(me.store)}(t));var c=$.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(an.store),l.deleteObjectStore(qn.store),l.deleteObjectStore(er.store)}(t),ZA(t)),c=c.next(function(){return function(l){var h=l.store(er.store),p=new er(0,0,Ot.min().j(),0);return h.put(er.key,p)}(a)})),r<4&&i>=4&&(r!==0&&(c=c.next(function(){return function(l,h){return h.store(re.store).rs().next(function(p){l.deleteObjectStore(re.store),l.createObjectStore(re.store,{keyPath:re.keyPath,autoIncrement:!0}).createIndex(re.userMutationsIndex,re.userMutationsKeyPath,{unique:!0});var v=h.store(re.store),m=p.map(function(y){return v.put(y)});return $.Mn(m)})}(t,a)})),c=c.next(function(){(function(l){l.createObjectStore(Li.store,{keyPath:Li.keyPath})})(t)})),r<5&&i>=5&&(c=c.next(function(){return s.zr(a)})),r<6&&i>=6&&(c=c.next(function(){return function(l){l.createObjectStore(ai.store)}(t),s.Hr(a)})),r<7&&i>=7&&(c=c.next(function(){return s.Jr(a)})),r<8&&i>=8&&(c=c.next(function(){return s.Yr(t,a)})),r<9&&i>=9&&(c=c.next(function(){(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t),function(l){var h=l.objectStore(me.store);h.createIndex(me.readTimeIndex,me.readTimeIndexPath,{unique:!1}),h.createIndex(me.collectionReadTimeIndex,me.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(c=c.next(function(){return s.Xr(a)})),r<11&&i>=11&&(c=c.next(function(){(function(l){l.createObjectStore(fu.store,{keyPath:fu.keyPath})})(t),function(l){l.createObjectStore(hu.store,{keyPath:hu.keyPath})}(t)})),c},e.prototype.Hr=function(t){var n=0;return t.store(me.store).hs(function(r,i){n+=Sp(i)}).next(function(){var r=new ai(n);return t.store(ai.store).put(ai.key,r)})},e.prototype.zr=function(t){var n=this,r=t.store(Io.store),i=t.store(re.store);return r.rs().next(function(s){return $.forEach(s,function(a){var c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return i.rs(re.userMutationsIndex,c).next(function(l){return $.forEach(l,function(h){yt(h.userId===a.userId);var p=Pa(n.Qt,h);return dx(t,a.userId,p).next(function(){})})})})})},e.prototype.Jr=function(t){var n=t.store(an.store),r=t.store(me.store);return t.store(er.store).get(er.key).next(function(i){var s=[];return r.hs(function(a,c){var l=new Ht(a),h=function(p){return[0,Vr(p)]}(l);s.push(n.get(h).next(function(p){return p?$.resolve():function(v){return n.put(new an(0,Vr(v),i.highestListenSequenceNumber))}(l)}))}).next(function(){return $.Mn(s)})})},e.prototype.Yr=function(t,n){t.createObjectStore(Ss.store,{keyPath:Ss.keyPath});var r=n.store(Ss.store),i=new Qw,s=function(a){if(i.add(a)){var c=a.tt(),l=a.X();return r.put({collectionId:c,parent:Vr(l)})}};return n.store(me.store).hs({us:!0},function(a,c){var l=new Ht(a);return s(l.X())}).next(function(){return n.store(fn.store).hs({us:!0},function(a,c){a[0];var l=a[1],h=(a[2],ki(l));return s(h.X())})})},e.prototype.Xr=function(t){var n=this,r=t.store(qn.store);return r.hs(function(i,s){var a=jc(s),c=hx(n.Qt,a);return r.put(c)})},e}();function ZA(e){e.createObjectStore(an.store,{keyPath:an.keyPath}).createIndex(an.documentTargetsIndex,an.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(qn.store,{keyPath:qn.keyPath}).createIndex(qn.queryTargetsIndexName,qn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(er.store)}var qm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",_G=function(){function e(t,n,r,i,s,a,c,l,h,p){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Zr=s,this.window=a,this.document=c,this.eo=h,this.no=p,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(v){return Promise.resolve()},!e.Kn())throw new G(k.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new vG(this,i),this.ho=n+"main",this.Qt=new lx(l),this.lo=new lu(this.ho,11,new yG(this.Qt)),this._o=new fG(this.Ti,this.Qt),this.Ei=new cG,this.fo=function(v,m){return new gG(v,m)}(this.Qt,this.Ei),this.wo=new aG,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,p===!1&&Pe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var t=this;return this.To().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new G(k.FAILED_PRECONDITION,qm);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return t._o.Ki(n)})}).then(function(n){t.so=new rr(n,t.eo)}).then(function(){t.io=!0}).catch(function(n){return t.lo&&t.lo.close(),Promise.reject(n)})},e.prototype.Ro=function(t){var n=this;return this.uo=function(r){return R(n,void 0,void 0,function(){return N(this,function(i){return this.Er?[2,t(r)]:[2]})})},t(this.isPrimary)},e.prototype.Po=function(t){var n=this;this.lo.Xn(function(r){return R(n,void 0,void 0,function(){return N(this,function(i){switch(i.label){case 0:return r.newVersion===null?[4,t()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},e.prototype.yo=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps(function(){return R(n,void 0,void 0,function(){return N(this,function(r){switch(r.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},e.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return Th(n).put(new Li(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Vo(n).next(function(r){r||(t.isPrimary=!1,t.Zr.po(function(){return t.uo(!1)}))})}).next(function(){return t.bo(n)}).next(function(r){return t.isPrimary&&!r?t.vo(n).next(function(){return!1}):!!r&&t.So(n).next(function(){return!0})})}).catch(function(n){if(Hs(n))return Y("IndexedDbPersistence","Failed to extend owner lease: ",n),t.isPrimary;if(!t.allowTabSynchronization)throw n;return Y("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){t.isPrimary!==n&&t.Zr.po(function(){return t.uo(n)}),t.isPrimary=n})},e.prototype.Vo=function(t){var n=this;return kc(t).get(Zn.key).next(function(r){return $.resolve(n.Do(r))})},e.prototype.Co=function(t){return Th(t).delete(this.clientId)},e.prototype.xo=function(){return R(this,void 0,void 0,function(){var t,n,r,i,s=this;return N(this,function(a){switch(a.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(c){var l=Kn(c,Li.store);return l.rs().next(function(h){var p=s.$o(h,18e5),v=h.filter(function(m){return p.indexOf(m)===-1});return $.forEach(v,function(m){return l.delete(m.clientId)}).next(function(){return v})})}).catch(function(){return[]})]);case 1:if(t=a.sent(),this.Eo)for(n=0,r=t;n<r.length;n++)i=r[n],this.Eo.removeItem(this.Fo(i.clientId));a.label=2;case 2:return[2]}})})},e.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,function(){return t.To().then(function(){return t.xo()}).then(function(){return t.Ao()})})},e.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.bo=function(t){var n=this;return this.no?$.resolve(!0):kc(t).get(Zn.key).next(function(r){if(r!==null&&n.No(r.leaseTimestampMs,5e3)&&!n.Oo(r.ownerId)){if(n.Do(r)&&n.networkEnabled)return!0;if(!n.Do(r)){if(!r.allowTabSynchronization)throw new G(k.FAILED_PRECONDITION,qm);return!1}}return!(!n.networkEnabled||!n.inForeground)||Th(t).rs().next(function(i){return n.$o(i,5e3).find(function(s){if(n.clientId!==s.clientId){var a=!n.networkEnabled&&s.networkEnabled,c=!n.inForeground&&s.inForeground,l=n.networkEnabled===s.networkEnabled;if(a||c&&l)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&Y("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},e.prototype.ko=function(){return R(this,void 0,void 0,function(){var t=this;return N(this,function(n){switch(n.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[Zn.store,Li.store],function(r){var i=new GA(r,rr.q);return t.vo(i).next(function(){return t.Co(i)})})];case 1:return n.sent(),this.lo.close(),this.qo(),[2]}})})},e.prototype.$o=function(t,n){var r=this;return t.filter(function(i){return r.No(i.updateTimeMs,n)&&!r.Oo(i.clientId)})},e.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(n){return Th(n).rs().next(function(r){return t.$o(r,18e5).map(function(i){return i.clientId})})})},Object.defineProperty(e.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),e.prototype.Qo=function(t){return lG.mi(t,this.Qt,this.Ei,this.Ti)},e.prototype.Sr=function(){return this._o},e.prototype.$r=function(){return this.fo},e.prototype.Ko=function(){return this.Ei},e.prototype.Wo=function(){return this.wo},e.prototype.runTransaction=function(t,n,r){var i=this;Y("IndexedDbPersistence","Starting transaction:",t);var s,a=n==="readonly"?"readonly":"readwrite";return this.lo.runTransaction(t,a,oG,function(c){return s=new GA(c,i.so?i.so.next():rr.q),n==="readwrite-primary"?i.Vo(s).next(function(l){return!!l||i.bo(s)}).next(function(l){if(!l)throw Pe("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Zr.po(function(){return i.uo(!1)}),new G(k.FAILED_PRECONDITION,ux);return r(s)}).next(function(l){return i.So(s).next(function(){return l})}):i.jo(s).next(function(){return r(s)})}).then(function(c){return s.Vs(),c})},e.prototype.jo=function(t){var n=this;return kc(t).get(Zn.key).next(function(r){if(r!==null&&n.No(r.leaseTimestampMs,5e3)&&!n.Oo(r.ownerId)&&!n.Do(r)&&!(n.no||n.allowTabSynchronization&&r.allowTabSynchronization))throw new G(k.FAILED_PRECONDITION,qm)})},e.prototype.So=function(t){var n=new Zn(this.clientId,this.allowTabSynchronization,Date.now());return kc(t).put(Zn.key,n)},e.Kn=function(){return lu.Kn()},e.prototype.vo=function(t){var n=this,r=kc(t);return r.get(Zn.key).next(function(i){return n.Do(i)?(Y("IndexedDbPersistence","Releasing primary lease."),r.delete(Zn.key)):$.resolve()})},e.prototype.No=function(t,n){var r=Date.now();return!(t<r-n||t>r&&(Pe("Detected an update time that is in the future: "+t+" > "+r),1))},e.prototype.Io=function(){var t=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.oo=function(){t.Zr.Ps(function(){return t.inForeground=t.document.visibilityState==="visible",t.To()})},this.document.addEventListener("visibilitychange",this.oo),this.inForeground=this.document.visibilityState==="visible")},e.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},e.prototype.mo=function(){var t,n=this;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ro=function(){n.Mo(),n.Zr.Ps(function(){return n.ko()})},this.window.addEventListener("unload",this.ro))},e.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},e.prototype.Oo=function(t){var n;try{var r=((n=this.Eo)===null||n===void 0?void 0:n.getItem(this.Fo(t)))!==null;return Y("IndexedDbPersistence","Client '"+t+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(i){return Pe("IndexedDbPersistence","Failed to get zombied client id.",i),!1}},e.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){Pe("Failed to set zombie client id.",t)}},e.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch{}},e.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}();function kc(e){return Kn(e,Zn.store)}function Th(e){return Kn(e,Li.store)}function Yw(e,t){var n=e.projectId;return e.o||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var wG=function(e,t){this.progress=e,this.Go=t},mx=function(){function e(t,n,r){this.fo=t,this.zo=n,this.Ei=r}return e.prototype.Ho=function(t,n){var r=this;return this.zo.bi(t,n).next(function(i){return r.Jo(t,n,i)})},e.prototype.Jo=function(t,n,r){return this.fo._i(t,n).next(function(i){for(var s=0,a=r;s<a.length;s++)i=a[s].Cs(n,i);return i})},e.prototype.Yo=function(t,n,r){var i=Ep();return n.forEach(function(s,a){for(var c=0,l=r;c<l.length;c++)a=l[c].Cs(s,a);i=i.zt(s,a)}),i},e.prototype.Xo=function(t,n){var r=this;return this.fo.getEntries(t,n).next(function(i){return r.Zo(t,i)})},e.prototype.Zo=function(t,n){var r=this;return this.zo.vi(t,n).next(function(i){var s=r.Yo(t,n,i),a=Bi();return s.forEach(function(c,l){l||(l=new Be(c,Ot.min())),a=a.zt(c,l)}),a})},e.prototype.Kr=function(t,n,r){return function(i){return ht.wt(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.tc(t,n.path):jw(n)?this.ec(t,n,r):this.nc(t,n,r)},e.prototype.tc=function(t,n){return this.Ho(t,new ht(n)).next(function(r){var i=Tl();return r instanceof Zt&&(i=i.zt(r.key,r)),i})},e.prototype.ec=function(t,n,r){var i=this,s=n.collectionGroup,a=Tl();return this.Ei.Us(t,s).next(function(c){return $.forEach(c,function(l){var h=function(p,v){return new $i(v,null,p.xt.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return i.nc(t,h,r).next(function(p){p.forEach(function(v,m){a=a.zt(v,m)})})}).next(function(){return a})})},e.prototype.nc=function(t,n,r){var i,s,a=this;return this.fo.Kr(t,n,r).next(function(c){return i=c,a.zo.Di(t,n)}).next(function(c){return s=c,a.sc(t,s,i).next(function(l){i=l;for(var h=0,p=s;h<p.length;h++)for(var v=p[h],m=0,y=v.mutations;m<y.length;m++){var b=y[m],E=b.key,I=t_(b,i.get(E),v.vs);i=I instanceof Zt?i.zt(E,I):i.remove(E)}})}).next(function(){return i.forEach(function(c,l){Jl(n,l)||(i=i.remove(c))}),i})},e.prototype.sc=function(t,n,r){for(var i=Qt(),s=0,a=n;s<a.length;s++)for(var c=0,l=a[s].mutations;c<l.length;c++){var h=l[c];h instanceof Fo&&r.get(h.key)===null&&(i=i.add(h.key))}var p=r;return this.fo.getEntries(t,i).next(function(v){return v.forEach(function(m,y){y!==null&&y instanceof Zt&&(p=p.zt(m,y))}),p})},e}(),bG=function(){function e(t,n,r,i){this.targetId=t,this.fromCache=n,this.ic=r,this.rc=i}return e.oc=function(t,n){for(var r=Qt(),i=Qt(),s=0,a=n.docChanges;s<a.length;s++){var c=a[s];switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),yx=function(){function e(){}return e.prototype.cc=function(t){this.ac=t},e.prototype.Kr=function(t,n,r,i){var s=this;return function(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.xt.length===0||a.xt.length===1&&a.xt[0].field.ut())}(n)||r.isEqual(Ot.min())?this.uc(t,n):this.ac.Xo(t,i).next(function(a){var c=s.hc(n,a);return(jh(n)||bp(n))&&s.lc(n.limitType,c,i,r)?s.uc(t,n):(Yy()<=Rt.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Zy(n)),s.ac.Kr(t,n,r).next(function(l){return c.forEach(function(h){l=l.zt(h.key,h)}),l}))})},e.prototype.hc=function(t,n){var r=new qe(MO(t));return n.forEach(function(i,s){s instanceof Zt&&Jl(t,s)&&(r=r.add(s))}),r},e.prototype.lc=function(t,n,r,i){if(r.size!==n.size)return!0;var s=t==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version._(i)>0)},e.prototype.uc=function(t,n){return Yy()<=Rt.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Zy(n)),this.ac.Kr(t,n,Ot.min())},e}(),EG=function(){function e(t,n,r,i){this.persistence=t,this._c=n,this.Qt=i,this.fc=new wn(kt),this.dc=new ku(function(s){return Yl(s)},fd),this.wc=Ot.min(),this.zo=t.Qo(r),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new mx(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return e.prototype.Ir=function(t){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return t.Vr(r,n.fc)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(e,t,n,r){return new EG(e,t,n,r)}function wx(e,t){return R(this,void 0,void 0,function(){var n,r,i,s;return N(this,function(a){switch(a.label){case 0:return n=Z(e),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",function(c){var l;return n.zo.pi(c).next(function(h){return l=h,r=n.persistence.Qo(t),i=new mx(n.Ec,r,n.persistence.Ko()),r.pi(c)}).next(function(h){for(var p=[],v=[],m=Qt(),y=0,b=l;y<b.length;y++){var E=b[y];p.push(E.batchId);for(var I=0,C=E.mutations;I<C.length;I++){var P=C[I];m=m.add(P.key)}}for(var D=0,F=h;D<F.length;D++){var Q=F[D];v.push(Q.batchId);for(var U=0,_t=Q.mutations;U<_t.length;U++){var Wt=_t[U];m=m.add(Wt.key)}}return i.Xo(c,m).next(function(lt){return{Ic:lt,mc:p,Ac:v}})})})];case 1:return s=a.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),s)]}})})}function IG(e,t){var n=Z(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var i=t.batch.keys(),s=n.Ec.Nr({Wr:!0});return function(a,c,l,h){var p=l.batch,v=p.keys(),m=$.resolve();return v.forEach(function(y){m=m.next(function(){return h._i(c,y)}).next(function(b){var E=b,I=l.$s.get(y);yt(I!==null),(!E||E.version._(I)<0)&&(E=p.Ss(y,E,l))&&h.ai(E,l.Ns)})}),m.next(function(){return a.zo.Ci(c,p)})}(n,r,t,s).next(function(){return s.apply(r)}).next(function(){return n.zo.$i(r)}).next(function(){return n.Tc.Xo(r,i)})})}function bx(e){var t=Z(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return t._o.Qi(n)})}function TG(e,t){var n=Z(e),r=t.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var a=n.Ec.Nr({Wr:!0});i=n.fc;var c=[];t.$e.forEach(function(p,v){var m=i.get(v);if(m){c.push(n._o.sr(s,p.Qe,v).next(function(){return n._o.er(s,p.qe,v)}));var y=p.resumeToken;if(y.l()>0){var b=m.Mt(y,r).kt(s.bs);i=i.zt(v,b),function(E,I,C){return yt(I.resumeToken.l()>0),E.resumeToken.l()===0||I.Ot.W()-E.Ot.W()>=3e8||C.qe.size+C.Ue.size+C.Qe.size>0}(m,b,p)&&c.push(n._o.Hi(s,b))}}});var l=Bi();if(t.Oe.forEach(function(p,v){t.ke.has(p)&&c.push(n.persistence.Ti.Fr(s,p))}),c.push(Ex(s,a,t.Oe,r,void 0).next(function(p){l=p})),!r.isEqual(Ot.min())){var h=n._o.Qi(s).next(function(p){return n._o.Wi(s,s.bs,r)});c.push(h)}return $.Mn(c).next(function(){return a.apply(s)}).next(function(){return n.Tc.Zo(s,l)})}).then(function(s){return n.fc=i,s})}function Ex(e,t,n,r,i){var s=Qt();return n.forEach(function(a){return s=s.add(a)}),t.getEntries(e,s).next(function(a){var c=Bi();return n.forEach(function(l,h){var p=a.get(l),v=(i==null?void 0:i.get(l))||r;h instanceof Be&&h.version.isEqual(Ot.min())?(t.li(l,v),c=c.zt(l,h)):p==null||h.version._(p.version)>0||h.version._(p.version)===0&&p.hasPendingWrites?(t.ai(h,v),c=c.zt(l,h)):Y("LocalStore","Ignoring outdated watch update for ",l,". Current version:",p.version," Watch version:",h.version)}),c})}function SG(e,t){var n=Z(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return t===void 0&&(t=-1),n.zo.gi(r,t)})}function vu(e,t){var n=Z(e);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return n._o.tr(r,t).next(function(s){return s?(i=s,$.resolve(i)):n._o.Bi(r).next(function(a){return i=new hd(t,a,0,r.bs),n._o.ji(r,i).next(function(){return i})})})}).then(function(r){var i=n.fc.get(r.targetId);return(i===null||r.Ot._(i.Ot)>0)&&(n.fc=n.fc.zt(r.targetId,r),n.dc.set(t,r.targetId)),r})}function gu(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a;return N(this,function(c){switch(c.label){case 0:r=Z(e),i=r.fc.get(t),s=n?"readwrite":"readwrite-primary",c.label=1;case 1:return c.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(l){return r.persistence.Ti.removeTarget(l,i)})];case 2:c.sent(),c.label=3;case 3:return[3,5];case 4:if(!Hs(a=c.sent()))throw a;return Y("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.fc=r.fc.remove(t),r.dc.delete(i.target),[2]}})})}function Cp(e,t,n){var r=Z(e),i=Ot.min(),s=Qt();return r.persistence.runTransaction("Execute query","readonly",function(a){return function(c,l,h){var p=Z(c),v=p.dc.get(h);return v!==void 0?$.resolve(p.fc.get(v)):p._o.tr(l,h)}(r,a,_r(t)).next(function(c){if(c)return i=c.lastLimboFreeSnapshotVersion,r._o.rr(a,c.targetId).next(function(l){s=l})}).next(function(){return r._c.Kr(a,t,n?i:Ot.min(),n?s:Qt())}).next(function(c){return{documents:c,Rc:s}})})}function Ix(e,t){var n=Z(e),r=Z(n._o),i=n.fc.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(s){return r.Sn(s,t).next(function(a){return a?a.target:null})})}function Tx(e){var t=Z(e);return t.persistence.runTransaction("Get new document changes","readonly",function(n){return function(r,i,s){var a=Z(r),c=Bi(),l=zw(s),h=po(i),p=IDBKeyRange.lowerBound(l,!0);return h.hs({index:me.readTimeIndex,range:p},function(v,m){var y=n_(a.Qt,m);c=c.zt(y.key,y),l=m.readTime}).next(function(){return{Go:c,readTime:fx(l)}})}(t.Ec,n,t.wc)}).then(function(n){var r=n.Go,i=n.readTime;return t.wc=i,r})}function AG(e){return R(this,void 0,void 0,function(){var t;return N(this,function(n){return[2,(t=Z(e)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(i){var s=po(i),a=Ot.min();return s.hs({index:me.readTimeIndex,reverse:!0},function(c,l,h){l.readTime&&(a=fx(l.readTime)),h.done()}).next(function(){return a})}(r)}).then(function(r){t.wc=r})]})})}function CG(e,t,n,r){return R(this,void 0,void 0,function(){var i,s,a,c,l,h,p,v,m,y;return N(this,function(b){switch(b.label){case 0:for(i=Z(e),s=Qt(),a=Bi(),c=zO(),l=0,h=n;l<h.length;l++)p=h[l],v=t.Pc(p.metadata.name),p.document&&(s=s.add(v)),a=a.zt(v,t.yc(p)),c=c.zt(v,t.gc(p.metadata.readTime));return m=i.Ec.Nr({Wr:!0}),[4,vu(i,function(E){return _r(xu(Ht.ot("__bundle__/docs/"+E)))}(r))];case 1:return y=b.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(E){return Ex(E,m,a,Ot.min(),c).next(function(I){return m.apply(E),I}).next(function(I){return i._o.Yi(E,y.targetId).next(function(){return i._o.er(E,s,y.targetId)}).next(function(){return i.Tc.Zo(E,I)})})})]}})})}function NG(e,t,n){return n===void 0&&(n=Qt()),R(this,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:return[4,vu(e,_r(Kw(t.bundledQuery)))];case 1:return r=s.sent(),[2,(i=Z(e)).persistence.runTransaction("Save named query","readwrite",function(a){var c=Xe(t.readTime);if(r.Ot._(c)>=0)return i.wo.Ls(a,t);var l=r.Mt(Pn.T,c);return i.fc=i.fc.zt(l.targetId,l),i._o.Hi(a,l).next(function(){return i._o.Yi(a,r.targetId)}).next(function(){return i._o.er(a,n,r.targetId)}).next(function(){return i.wo.Ls(a,t)})})]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var RG=function(){function e(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return e.prototype.Os=function(t,n){return $.resolve(this.Vc.get(n))},e.prototype.ks=function(t,n){var r;return this.Vc.set(n.id,{id:(r=n).id,version:r.version,createTime:Xe(r.createTime)}),$.resolve()},e.prototype.Ms=function(t,n){return $.resolve(this.bc.get(n))},e.prototype.Ls=function(t,n){return this.bc.set(n.name,function(r){return{name:r.name,query:Kw(r.bundledQuery),readTime:Xe(r.readTime)}}(n)),$.resolve()},e}(),Xw=function(){function e(){this.vc=new qe(Ke.Sc),this.Dc=new qe(Ke.Cc)}return e.prototype.et=function(){return this.vc.et()},e.prototype.nr=function(t,n){var r=new Ke(t,n);this.vc=this.vc.add(r),this.Dc=this.Dc.add(r)},e.prototype.xc=function(t,n){var r=this;t.forEach(function(i){return r.nr(i,n)})},e.prototype.ir=function(t,n){this.Nc(new Ke(t,n))},e.prototype.$c=function(t,n){var r=this;t.forEach(function(i){return r.ir(i,n)})},e.prototype.Fc=function(t){var n=this,r=new ht(new Ht([])),i=new Ke(r,t),s=new Ke(r,t+1),a=[];return this.Dc.me([i,s],function(c){n.Nc(c),a.push(c.key)}),a},e.prototype.Oc=function(){var t=this;this.vc.forEach(function(n){return t.Nc(n)})},e.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},e.prototype.kc=function(t){var n=new ht(new Ht([])),r=new Ke(n,t),i=new Ke(n,t+1),s=Qt();return this.Dc.me([r,i],function(a){s=s.add(a.key)}),s},e.prototype.Fi=function(t){var n=new Ke(t,0),r=this.vc.Re(n);return r!==null&&t.isEqual(r.key)},e}(),Ke=function(){function e(t,n){this.key=t,this.Mc=n}return e.Sc=function(t,n){return ht.H(t.key,n.key)||kt(t.Mc,n.Mc)},e.Cc=function(t,n){return kt(t.Mc,n.Mc)||ht.H(t.key,n.key)},e}(),OG=function(){function e(t,n){this.Ei=t,this.Ti=n,this.zo=[],this.Lc=1,this.Bc=new qe(Ke.Sc)}return e.prototype.Ai=function(t){return $.resolve(this.zo.length===0)},e.prototype.Ri=function(t,n,r,i){var s=this.Lc;this.Lc++,this.zo.length>0&&this.zo[this.zo.length-1];var a=new $w(s,n,r,i);this.zo.push(a);for(var c=0,l=i;c<l.length;c++){var h=l[c];this.Bc=this.Bc.add(new Ke(h.key,s)),this.Ei.qs(t,h.key.path.X())}return $.resolve(a)},e.prototype.Pi=function(t,n){return $.resolve(this.qc(n))},e.prototype.gi=function(t,n){var r=n+1,i=this.Uc(r),s=i<0?0:i;return $.resolve(this.zo.length>s?this.zo[s]:null)},e.prototype.Vi=function(){return $.resolve(this.zo.length===0?-1:this.Lc-1)},e.prototype.pi=function(t){return $.resolve(this.zo.slice())},e.prototype.bi=function(t,n){var r=this,i=new Ke(n,0),s=new Ke(n,Number.POSITIVE_INFINITY),a=[];return this.Bc.me([i,s],function(c){var l=r.qc(c.Mc);a.push(l)}),$.resolve(a)},e.prototype.vi=function(t,n){var r=this,i=new qe(kt);return n.forEach(function(s){var a=new Ke(s,0),c=new Ke(s,Number.POSITIVE_INFINITY);r.Bc.me([a,c],function(l){i=i.add(l.Mc)})}),$.resolve(this.Qc(i))},e.prototype.Di=function(t,n){var r=n.path,i=r.length+1,s=r;ht.wt(s)||(s=s.child(""));var a=new Ke(new ht(s),0),c=new qe(kt);return this.Bc.Ae(function(l){var h=l.key.path;return!!r.nt(h)&&(h.length===i&&(c=c.add(l.Mc)),!0)},a),$.resolve(this.Qc(c))},e.prototype.Qc=function(t){var n=this,r=[];return t.forEach(function(i){var s=n.qc(i);s!==null&&r.push(s)}),r},e.prototype.Ci=function(t,n){var r=this;yt(this.Kc(n.batchId,"removed")===0),this.zo.shift();var i=this.Bc;return $.forEach(n.mutations,function(s){var a=new Ke(s.key,n.batchId);return i=i.delete(a),r.Ti.Ni(t,s.key)}).next(function(){r.Bc=i})},e.prototype.xi=function(t){},e.prototype.Fi=function(t,n){var r=new Ke(n,0),i=this.Bc.Re(r);return $.resolve(n.isEqual(i&&i.key))},e.prototype.$i=function(t){return this.zo.length,$.resolve()},e.prototype.Kc=function(t,n){return this.Uc(t)},e.prototype.Uc=function(t){return this.zo.length===0?0:t-this.zo[0].batchId},e.prototype.qc=function(t){var n=this.Uc(t);return n<0||n>=this.zo.length?null:this.zo[n]},e}(),xG=function(){function e(t,n){this.Ei=t,this.Wc=n,this.docs=new wn(ht.H),this.size=0}return e.prototype.ai=function(t,n,r){var i=n.key,s=this.docs.get(i),a=s?s.size:0,c=this.Wc(n);return this.docs=this.docs.zt(i,{hi:n,size:c,readTime:r}),this.size+=c-a,this.Ei.qs(t,i.path.X())},e.prototype.li=function(t){var n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)},e.prototype._i=function(t,n){var r=this.docs.get(n);return $.resolve(r?r.hi:null)},e.prototype.getEntries=function(t,n){var r=this,i=Ep();return n.forEach(function(s){var a=r.docs.get(s);i=i.zt(s,a?a.hi:null)}),$.resolve(i)},e.prototype.Kr=function(t,n,r){for(var i=Tl(),s=new ht(n.path.child("")),a=this.docs.ee(s);a.ce();){var c=a.oe(),l=c.key,h=c.value,p=h.hi,v=h.readTime;if(!n.path.nt(l.path))break;v._(r)<=0||p instanceof Zt&&Jl(n,p)&&(i=i.zt(p.key,p))}return $.resolve(i)},e.prototype.jc=function(t,n){return $.forEach(this.docs,function(r){return n(r)})},e.prototype.Nr=function(t){return new PG(this)},e.prototype.Or=function(t){return $.resolve(this.size)},e}(),PG=function(e){function t(n){var r=this;return(r=e.call(this)||this).jr=n,r}return J(t,e),t.prototype.wi=function(n){var r=this,i=[];return this.ri.forEach(function(s,a){a&&a.hi?i.push(r.jr.ai(n,a.hi,r.ci(s))):r.jr.li(s)}),$.Mn(i)},t.prototype.fi=function(n,r){return this.jr._i(n,r)},t.prototype.di=function(n,r){return this.jr.getEntries(n,r)},t}(px),kG=function(){function e(t){this.persistence=t,this.Gc=new ku(function(n){return Yl(n)},fd),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.zc=0,this.Hc=new Xw,this.targetCount=0,this.Jc=Ap.Mi()}return e.prototype.In=function(t,n){return this.Gc.forEach(function(r,i){return n(i)}),$.resolve()},e.prototype.Qi=function(t){return $.resolve(this.lastRemoteSnapshotVersion)},e.prototype.Ki=function(t){return $.resolve(this.zc)},e.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),$.resolve(this.highestTargetId)},e.prototype.Wi=function(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.zc&&(this.zc=n),$.resolve()},e.prototype.Gi=function(t){this.Gc.set(t.target,t);var n=t.targetId;n>this.highestTargetId&&(this.Jc=new Ap(n),this.highestTargetId=n),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},e.prototype.ji=function(t,n){return this.Gi(n),this.targetCount+=1,$.resolve()},e.prototype.Hi=function(t,n){return this.Gi(n),$.resolve()},e.prototype.Ji=function(t,n){return this.Gc.delete(n.target),this.Hc.Fc(n.targetId),this.targetCount-=1,$.resolve()},e.prototype.Xi=function(t,n,r){var i=this,s=0,a=[];return this.Gc.forEach(function(c,l){l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i.Gc.delete(c),a.push(i.Yi(t,l.targetId)),s++)}),$.Mn(a).next(function(){return s})},e.prototype.Zi=function(t){return $.resolve(this.targetCount)},e.prototype.tr=function(t,n){var r=this.Gc.get(n)||null;return $.resolve(r)},e.prototype.er=function(t,n,r){return this.Hc.xc(n,r),$.resolve()},e.prototype.sr=function(t,n,r){this.Hc.$c(n,r);var i=this.persistence.Ti,s=[];return i&&n.forEach(function(a){s.push(i.Ni(t,a))}),$.Mn(s)},e.prototype.Yi=function(t,n){return this.Hc.Fc(n),$.resolve()},e.prototype.rr=function(t,n){var r=this.Hc.kc(n);return $.resolve(r)},e.prototype.Fi=function(t,n){return $.resolve(this.Hc.Fi(n))},e}(),DG=function(){function e(t,n){var r=this;this.Yc={},this.so=new rr(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new kG(this),this.Ei=new uG,this.fo=function(i,s){return new xG(i,function(a){return r.Ti.Xc(a)})}(this.Ei),this.Qt=new lx(n),this.wo=new RG(this.Qt)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(e.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),e.prototype.Po=function(){},e.prototype.yo=function(){},e.prototype.Ko=function(){return this.Ei},e.prototype.Qo=function(t){var n=this.Yc[t.A()];return n||(n=new OG(this.Ei,this.Ti),this.Yc[t.A()]=n),n},e.prototype.Sr=function(){return this._o},e.prototype.$r=function(){return this.fo},e.prototype.Wo=function(){return this.wo},e.prototype.runTransaction=function(t,n,r){var i=this;Y("MemoryPersistence","Starting transaction:",t);var s=new LG(this.so.next());return this.Ti.Zc(),r(s).next(function(a){return i.Ti.ta(s).next(function(){return a})}).On().then(function(a){return s.Vs(),a})},e.prototype.ea=function(t,n){return $.Ln(Object.values(this.Yc).map(function(r){return function(){return r.Fi(t,n)}}))},e}(),LG=function(e){function t(n){var r=this;return(r=e.call(this)||this).bs=n,r}return J(t,e),t}(cx),MG=function(){function e(t){this.persistence=t,this.na=new Xw,this.sa=null}return e.ia=function(t){return new e(t)},Object.defineProperty(e.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw ut()},enumerable:!1,configurable:!0}),e.prototype.nr=function(t,n,r){return this.na.nr(r,n),this.ra.delete(r.toString()),$.resolve()},e.prototype.ir=function(t,n,r){return this.na.ir(r,n),this.ra.add(r.toString()),$.resolve()},e.prototype.Ni=function(t,n){return this.ra.add(n.toString()),$.resolve()},e.prototype.removeTarget=function(t,n){var r=this;this.na.Fc(n.targetId).forEach(function(s){return r.ra.add(s.toString())});var i=this.persistence.Sr();return i.rr(t,n.targetId).next(function(s){s.forEach(function(a){return r.ra.add(a.toString())})}).next(function(){return i.Ji(t,n)})},e.prototype.Zc=function(){this.sa=new Set},e.prototype.ta=function(t){var n=this,r=this.persistence.$r().Nr();return $.forEach(this.ra,function(i){var s=ht._t(i);return n.oa(t,s).next(function(a){a||r.li(s)})}).next(function(){return n.sa=null,r.apply(t)})},e.prototype.Fr=function(t,n){var r=this;return this.oa(t,n).next(function(i){i?r.ra.delete(n.toString()):r.ra.add(n.toString())})},e.prototype.Xc=function(t){return 0},e.prototype.oa=function(t,n){var r=this;return $.Ln([function(){return $.resolve(r.na.Fi(n))},function(){return r.persistence.Sr().Fi(t,n)},function(){return r.persistence.ea(t,n)}])},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(e,t){return"firestore_clients_"+e+"_"+t}function eC(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.m()&&(r+="_"+t.uid),r}function Hm(e,t){return"firestore_targets_"+e+"_"+t}var nC=function(){function e(t,n,r,i){this.user=t,this.batchId=n,this.state=r,this.error=i}return e.ca=function(t,n,r){var i,s=JSON.parse(r),a=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return a&&s.error&&(a=typeof s.error.message=="string"&&typeof s.error.code=="string")&&(i=new G(s.error.code,s.error.message)),a?new e(t,n,s.state,i):(Pe("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),Gm=function(){function e(t,n,r){this.targetId=t,this.state=n,this.error=r}return e.ca=function(t,n){var r,i=JSON.parse(n),s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string")&&(r=new G(i.error.code,i.error.message)),s?new e(t,i.state,r):(Pe("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),rC=function(){function e(t,n){this.clientId=t,this.activeTargetIds=n}return e.ca=function(t,n){for(var r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=vd(),a=0;i&&a<r.activeTargetIds.length;++a)i=OO(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new e(t,s):(Pe("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),FG=function(){function e(t,n){this.clientId=t,this.onlineState=n}return e.ca=function(t){var n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new e(n.clientId,n.onlineState):(Pe("SharedClientState","Failed to parse online state: "+t),null)},e}(),r_=function(){function e(){this.activeTargetIds=vd()}return e.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},e.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},e.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},e}(),Wm=function(){function e(t,n,r,i,s){this.window=t,this.Zr=n,this.persistenceKey=r,this.la=i,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new wn(kt),this.Er=!1,this.Ta=[];var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ia=tC(this.persistenceKey,this.la),this.ma=function(c){return"firestore_sequence_number_"+c}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new r_),this.Aa=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.ya=function(c){return"firestore_online_state_"+c}(this.persistenceKey),this.ga=function(c){return"firestore_bundle_loaded_"+c}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return e.Kn=function(t){return!(!t||!t.localStorage)},e.prototype.start=function(){return R(this,void 0,void 0,function(){var t,n,r,i,s,a,c,l,h,p,v,m=this;return N(this,function(y){switch(y.label){case 0:return[4,this._a.Uo()];case 1:for(t=y.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.la&&(s=this.getItem(tC(this.persistenceKey,i)))&&(a=rC.ca(i,s))&&(this.Ea=this.Ea.zt(a.clientId,a));for(this.Va(),(c=this.storage.getItem(this.ya))&&(l=this.pa(c))&&this.ba(l),h=0,p=this.Ta;h<p.length;h++)v=p[h],this.wa(v);return this.Ta=[],this.window.addEventListener("unload",function(){return m.ko()}),this.Er=!0,[2]}})})},e.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},e.prototype.va=function(){return this.Sa(this.Ea)},e.prototype.Da=function(t){var n=!1;return this.Ea.forEach(function(r,i){i.activeTargetIds.has(t)&&(n=!0)}),n},e.prototype.Ca=function(t){this.xa(t,"pending")},e.prototype.Na=function(t,n,r){this.xa(t,n,r),this.$a(t)},e.prototype.Fa=function(t){var n="not-current";if(this.Da(t)){var r=this.storage.getItem(Hm(this.persistenceKey,t));if(r){var i=Gm.ca(t,r);i&&(n=i.state)}}return this.Oa.ua(t),this.Va(),n},e.prototype.ka=function(t){this.Oa.ha(t),this.Va()},e.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},e.prototype.La=function(t){this.removeItem(Hm(this.persistenceKey,t))},e.prototype.Ba=function(t,n,r){this.qa(t,n,r)},e.prototype.Ua=function(t,n,r){var i=this;n.forEach(function(s){i.$a(s)}),this.currentUser=t,r.forEach(function(s){i.Ca(s)})},e.prototype.Qa=function(t){this.Ka(t)},e.prototype.Wa=function(){this.ja()},e.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},e.prototype.getItem=function(t){var n=this.storage.getItem(t);return Y("SharedClientState","READ",t,n),n},e.prototype.setItem=function(t,n){Y("SharedClientState","SET",t,n),this.storage.setItem(t,n)},e.prototype.removeItem=function(t){Y("SharedClientState","REMOVE",t),this.storage.removeItem(t)},e.prototype.wa=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(Y("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ia)return void Pe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po(function(){return R(n,void 0,void 0,function(){var i,s,a,c,l,h;return N(this,function(p){if(this.Er){if(r.key!==null){if(this.Aa.test(r.key)){if(r.newValue==null)return i=this.Ga(r.key),[2,this.za(i,null)];if(s=this.Ha(r.key,r.newValue))return[2,this.za(s.clientId,s)]}else if(this.Ra.test(r.key)){if(r.newValue!==null&&(a=this.Ja(r.key,r.newValue)))return[2,this.Ya(a)]}else if(this.Pa.test(r.key)){if(r.newValue!==null&&(c=this.Xa(r.key,r.newValue)))return[2,this.Za(c)]}else if(r.key===this.ya){if(r.newValue!==null&&(l=this.pa(r.newValue)))return[2,this.ba(l)]}else if(r.key===this.ma)(h=function(v){var m=rr.q;if(v!=null)try{var y=JSON.parse(v);yt(typeof y=="number"),m=y}catch(b){Pe("SharedClientState","Failed to read sequence number from WebStorage",b)}return m}(r.newValue))!==rr.q&&this.k(h);else if(r.key===this.ga)return[2,this._a.tu()]}}else this.Ta.push(r);return[2]})})})}},Object.defineProperty(e.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),e.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},e.prototype.xa=function(t,n,r){var i=new nC(this.currentUser,t,n,r),s=eC(this.persistenceKey,this.currentUser,t);this.setItem(s,i.aa())},e.prototype.$a=function(t){var n=eC(this.persistenceKey,this.currentUser,t);this.removeItem(n)},e.prototype.Ka=function(t){var n={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(n))},e.prototype.qa=function(t,n,r){var i=Hm(this.persistenceKey,t),s=new Gm(t,n,r);this.setItem(i,s.aa())},e.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},e.prototype.Ga=function(t){var n=this.Aa.exec(t);return n?n[1]:null},e.prototype.Ha=function(t,n){var r=this.Ga(t);return rC.ca(r,n)},e.prototype.Ja=function(t,n){var r=this.Ra.exec(t),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return nC.ca(new tr(s),i,n)},e.prototype.Xa=function(t,n){var r=this.Pa.exec(t),i=Number(r[1]);return Gm.ca(i,n)},e.prototype.pa=function(t){return FG.ca(t)},e.prototype.Ya=function(t){return R(this,void 0,void 0,function(){return N(this,function(n){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(Y("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},e.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},e.prototype.za=function(t,n){var r=this,i=n?this.Ea.zt(t,n):this.Ea.remove(t),s=this.Sa(this.Ea),a=this.Sa(i),c=[],l=[];return a.forEach(function(h){s.has(h)||c.push(h)}),s.forEach(function(h){a.has(h)||l.push(h)}),this._a.su(c,l).then(function(){r.Ea=i})},e.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},e.prototype.Sa=function(t){var n=vd();return t.forEach(function(r,i){n=n.Pe(i.activeTargetIds)}),n},e}(),Sx=function(){function e(){this.iu=new r_,this.ru={},this.fa=null,this.k=null}return e.prototype.Ca=function(t){},e.prototype.Na=function(t,n,r){},e.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},e.prototype.Ba=function(t,n,r){this.ru[t]=n},e.prototype.ka=function(t){this.iu.ha(t)},e.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},e.prototype.La=function(t){delete this.ru[t]},e.prototype.va=function(){return this.iu.activeTargetIds},e.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},e.prototype.start=function(){return this.iu=new r_,Promise.resolve()},e.prototype.Ua=function(t,n,r){},e.prototype.Qa=function(t){},e.prototype.ko=function(){},e.prototype.B=function(t){},e.prototype.Wa=function(){},e}(),UG=function(){function e(){}return e.prototype.ou=function(t){},e.prototype.ko=function(){},e}(),iC=function(){function e(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return e.prototype.ou=function(t){this.lu.push(t)},e.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},e.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},e.prototype.au=function(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,n=this.lu;t<n.length;t++)(0,n[t])(0)},e.prototype.hu=function(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,n=this.lu;t<n.length;t++)(0,n[t])(1)},e.Kn=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},e}(),jG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},VG=function(){function e(t){this.fu=t.fu,this.du=t.du}return e.prototype.wu=function(t){this.Eu=t},e.prototype.Tu=function(t){this.Iu=t},e.prototype.onMessage=function(t){this.mu=t},e.prototype.close=function(){this.du()},e.prototype.send=function(t){this.fu(t)},e.prototype.Au=function(){this.Eu()},e.prototype.Ru=function(t){this.Iu(t)},e.prototype.Pu=function(t){this.mu(t)},e}(),BG=function(e){function t(n){var r=this;return(r=e.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.i=n.i,r}return J(t,e),t.prototype.Su=function(n,r,i,s){return new Promise(function(a,c){var l=new hH;l.listenOnce(lH.COMPLETE,function(){try{switch(l.getLastErrorCode()){case Bm.NO_ERROR:var p=l.getResponseJson();Y("Connection","XHR received:",JSON.stringify(p)),a(p);break;case Bm.TIMEOUT:Y("Connection",'RPC "'+n+'" timed out'),c(new G(k.DEADLINE_EXCEEDED,"Request time out"));break;case Bm.HTTP_ERROR:var v=l.getStatus();if(Y("Connection",'RPC "'+n+'" failed with status:',v,"response text:",l.getResponseText()),v>0){var m=l.getResponseJson().error;if(m&&m.status&&m.message){var y=function(b){var E=b.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(E)>=0?E:k.UNKNOWN}(m.status);c(new G(y,m.message))}else c(new G(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new G(k.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{Y("Connection",'RPC "'+n+'" completed.')}});var h=JSON.stringify(s);l.send(r,"POST",h,i,15)})},t.prototype.Cu=function(n,r){var i=[this.gu,"/","google.firestore.v1.Firestore","/",n,"/channel"],s=uH(),a=cH(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(c.initMessageHeaders,r),q_()||TN()||l4()||f4()||h4()||H_()||(c.httpHeadersOverwriteParam="$httpHeaders");var l=i.join("");Y("Connection","Creating WebChannel: "+l,c);var h=s.createWebChannel(l,c),p=!1,v=!1,m=new VG({fu:function(b){v?Y("Connection","Not sending because WebChannel is closed:",b):(p||(Y("Connection","Opening WebChannel transport."),h.open(),p=!0),Y("Connection","WebChannel sending:",b),h.send(b))},du:function(){return h.close()}}),y=function(b,E,I){b.listen(E,function(C){try{I(C)}catch(P){setTimeout(function(){throw P},0)}})};return y(h,wh.EventType.OPEN,function(){v||Y("Connection","WebChannel transport opened.")}),y(h,wh.EventType.CLOSE,function(){v||(v=!0,Y("Connection","WebChannel transport closed"),m.Ru())}),y(h,wh.EventType.ERROR,function(b){v||(v=!0,gp("Connection","WebChannel transport errored:",b),m.Ru(new G(k.UNAVAILABLE,"The operation could not be completed")))}),y(h,wh.EventType.MESSAGE,function(b){var E;if(!v){var I=b.data[0];yt(!!I);var C=I,P=C.error||((E=C[0])===null||E===void 0?void 0:E.error);if(P){Y("Connection","WebChannel received error:",P);var D=P.status,F=function(U){var _t=Oe[U];if(_t!==void 0)return $O(_t)}(D),Q=P.message;F===void 0&&(F=k.INTERNAL,Q="Unknown error status: "+D+" with message "+P.message),v=!0,m.Ru(new G(F,Q)),h.close()}else Y("Connection","WebChannel received:",I),m.Pu(I)}}),y(a,fH.STAT_EVENT,function(b){b.stat===_A.PROXY?Y("Connection","Detected buffering proxy"):b.stat===_A.NOPROXY&&Y("Connection","Detected no buffering proxy")}),setTimeout(function(){m.Au()},0),m},t}(function(){function e(t){this.yu=t,this.t=t.t;var n=t.ssl?"https":"http";this.gu=n+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return e.prototype.pu=function(t,n,r,i){var s=this.bu(t,n);Y("RestConnection","Sending: ",s,r);var a={};return this.vu(a,i),this.Su(t,s,a,r).then(function(c){return Y("RestConnection","Received: ",c),c},function(c){throw gp("RestConnection",t+" failed with error: ",c,"url: ",s,"request:",r),c})},e.prototype.Du=function(t,n,r,i){return this.pu(t,n,r,i)},e.prototype.vu=function(t,n){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.7",t["Content-Type"]="text/plain",n)for(var r in n.g)n.g.hasOwnProperty(r)&&(t[r]=n.g[r])},e.prototype.bu=function(t,n){var r=jG[t];return this.gu+"/v1/"+n+":"+r},e}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(){return typeof window<"u"?window:null}function qh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nf(e){return new WH(e,!0)}var Jw=function(){function e(t,n,r,i,s){r===void 0&&(r=1e3),i===void 0&&(i=1.5),s===void 0&&(s=6e4),this.Zr=t,this.fs=n,this.xu=r,this.Nu=i,this.$u=s,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return e.prototype.reset=function(){this.Fu=0},e.prototype.Mu=function(){this.Fu=this.$u},e.prototype.Lu=function(t){var n=this;this.cancel();var r=Math.floor(this.Fu+this.Bu()),i=Math.max(0,Date.now()-this.ku),s=Math.max(0,r-i);s>0&&Y("ExponentialBackoff","Backing off for "+s+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,s,function(){return n.ku=Date.now(),t()}),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},e.prototype.qu=function(){this.Ou!==null&&(this.Ou.Rs(),this.Ou=null)},e.prototype.cancel=function(){this.Ou!==null&&(this.Ou.cancel(),this.Ou=null)},e.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},e}(),Cx=function(){function e(t,n,r,i,s,a){this.Zr=t,this.Uu=r,this.Qu=i,this.Ku=s,this.listener=a,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new Jw(t,n)}return e.prototype.zu=function(){return this.state===1||this.state===2||this.state===4},e.prototype.Hu=function(){return this.state===2},e.prototype.start=function(){this.state!==3?this.auth():this.Ju()},e.prototype.stop=function(){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.Yu=function(){this.state=0,this.Gu.reset()},e.prototype.Xu=function(){var t=this;this.Hu()&&this.ju===null&&(this.ju=this.Zr.Tr(this.Uu,6e4,function(){return t.Zu()}))},e.prototype.th=function(t){this.eh(),this.stream.send(t)},e.prototype.Zu=function(){return R(this,void 0,void 0,function(){return N(this,function(t){return this.Hu()?[2,this.close(0)]:[2]})})},e.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},e.prototype.close=function(t,n){return R(this,void 0,void 0,function(){return N(this,function(r){switch(r.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,t!==3?this.Gu.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(Pe(n.toString()),Pe("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):n&&n.code===k.UNAUTHENTICATED&&this.Ku.p(),this.stream!==null&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(n)];case 1:return r.sent(),[2]}})})},e.prototype.nh=function(){},e.prototype.auth=function(){var t=this;this.state=1;var n=this.sh(this.Wu),r=this.Wu;this.Ku.getToken().then(function(i){t.Wu===r&&t.ih(i)},function(i){n(function(){var s=new G(k.UNKNOWN,"Fetching auth token failed: "+i.message);return t.rh(s)})})},e.prototype.ih=function(t){var n=this,r=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu(function(){r(function(){return n.state=2,n.listener.wu()})}),this.stream.Tu(function(i){r(function(){return n.rh(i)})}),this.stream.onMessage(function(i){r(function(){return n.onMessage(i)})})},e.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu(function(){return R(t,void 0,void 0,function(){return N(this,function(n){return this.state=0,this.start(),[2]})})})},e.prototype.rh=function(t){return Y("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.sh=function(t){var n=this;return function(r){n.Zr.Ps(function(){return n.Wu===t?r():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),qG=function(e){function t(n,r,i,s,a){var c=this;return(c=e.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,i,a)||this).Qt=s,c}return J(t,e),t.prototype.oh=function(n){return this.Qu.Cu("Listen",n)},t.prototype.onMessage=function(n){this.Gu.reset();var r=function(s,a){var c;if("targetChange"in a){a.targetChange;var l=function(I){return I==="NO_CHANGE"?0:I==="ADD"?1:I==="REMOVE"?2:I==="CURRENT"?3:I==="RESET"?4:ut()}(a.targetChange.targetChangeType||"NO_CHANGE"),h=a.targetChange.targetIds||[],p=function(I,C){return I.Bt?(yt(C===void 0||typeof C=="string"),Pn.fromBase64String(C||"")):(yt(C===void 0||C instanceof Uint8Array),Pn.fromUint8Array(C||new Uint8Array))}(s,a.targetChange.resumeToken),v=(m=a.targetChange.cause)&&function(I){var C=I.code===void 0?k.UNKNOWN:$O(I.code);return new G(C,I.message||"")}(m);c=new YO(l,h,p,v||null)}else if("documentChange"in a){a.documentChange,(l=a.documentChange).document,l.document.name,l.document.updateTime,h=ci(s,l.document.name),p=Xe(l.document.updateTime);var m=new Po({mapValue:{fields:l.document.fields}}),y=(v=new Zt(h,p,m,{}),l.targetIds||[]),b=l.removedTargetIds||[];c=new Bh(y,b,v.key,v)}else if("documentDelete"in a)a.documentDelete,(l=a.documentDelete).document,h=ci(s,l.document),p=l.readTime?Xe(l.readTime):Ot.min(),m=new Be(h,p),v=l.removedTargetIds||[],c=new Bh([],v,m.key,m);else if("documentRemove"in a)a.documentRemove,(l=a.documentRemove).document,h=ci(s,l.document),p=l.removedTargetIds||[],c=new Bh([],p,h,null);else{if(!("filter"in a))return ut();a.filter;var E=a.filter;E.targetId,l=E.count||0,h=new MH(l),p=E.targetId,c=new QO(p,h)}return c}(this.Qt,n),i=function(s){if(!("targetChange"in s))return Ot.min();var a=s.targetChange;return a.targetIds&&a.targetIds.length?Ot.min():a.readTime?Xe(a.readTime):Ot.min()}(n);return this.listener.ah(r,i)},t.prototype.uh=function(n){var r={};r.database=Cl(this.Qt),r.addTarget=function(s,a){var c,l=a.target;return(c=_p(l)?{documents:nx(s,l)}:{query:rx(s,l)}).targetId=a.targetId,a.resumeToken.l()>0?c.resumeToken=XO(s,a.resumeToken):a.Ot._(Ot.min())>0&&(c.readTime=Sl(s,a.Ot.j())),c}(this.Qt,n);var i=function(s,a){var c=function(l,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,a.Ft);return c==null?null:{"goog-listen-tags":c}}(this.Qt,n);i&&(r.labels=i),this.th(r)},t.prototype.hh=function(n){var r={};r.database=Cl(this.Qt),r.removeTarget=n,this.th(r)},t}(Cx),HG=function(e){function t(n,r,i,s,a){var c=this;return(c=e.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,i,a)||this).Qt=s,c.lh=!1,c}return J(t,e),Object.defineProperty(t.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.nh=function(){this.lh&&this.fh([])},t.prototype.oh=function(n){return this.Qu.Cu("Write",n)},t.prototype.onMessage=function(n){if(yt(!!n.streamToken),this.lastStreamToken=n.streamToken,this.lh){this.Gu.reset();var r=function(s,a){return s&&s.length>0?(yt(a!==void 0),s.map(function(c){return function(l,h){var p=l.updateTime?Xe(l.updateTime):Xe(h);p.isEqual(Ot.min())&&(p=Xe(h));var v=null;return l.transformResults&&l.transformResults.length>0&&(v=l.transformResults),new kH(p,v)}(c,a)})):[]}(n.writeResults,n.commitTime),i=Xe(n.commitTime);return this.listener.dh(i,r)}return yt(!n.writeResults||n.writeResults.length===0),this.lh=!0,this.listener.wh()},t.prototype.Eh=function(){var n={};n.database=Cl(this.Qt),this.th(n)},t.prototype.fh=function(n){var r=this,i={streamToken:this.lastStreamToken,writes:n.map(function(s){return Tp(r.Qt,s)})};this.th(i)},t}(Cx),GG=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).credentials=n,s.Qu=r,s.Qt=i,s.Th=!1,s}return J(t,e),t.prototype.Ih=function(){if(this.Th)throw new G(k.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.pu=function(n,r,i){var s=this;return this.Ih(),this.credentials.getToken().then(function(a){return s.Qu.pu(n,r,i,a)}).catch(function(a){throw a.code===k.UNAUTHENTICATED&&s.credentials.p(),a})},t.prototype.Du=function(n,r,i){var s=this;return this.Ih(),this.credentials.getToken().then(function(a){return s.Qu.Du(n,r,i,a)}).catch(function(a){throw a.code===k.UNAUTHENTICATED&&s.credentials.p(),a})},t.prototype.terminate=function(){this.Th=!1},t}(function(){}),WG=function(){function e(t,n){this._s=t,this.fa=n,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return e.prototype.Ph=function(){var t=this;this.mh===0&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()}))},e.prototype.Vh=function(t){this.state==="Online"?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},e.prototype.set=function(t){this.ph(),this.mh=0,t==="Online"&&(this.Rh=!1),this.yh(t)},e.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},e.prototype.gh=function(t){var n="Could not reach Cloud Firestore backend. "+t+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Rh?(Pe(n),this.Rh=!1):Y("OnlineStateTracker",n)},e.prototype.ph=function(){this.Ah!==null&&(this.Ah.cancel(),this.Ah=null)},e}(),$G=function(e,t,n,r,i){var s=this;this.bh=e,this.Sh=t,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou(function(a){n.Ps(function(){return R(s,void 0,void 0,function(){return N(this,function(c){switch(c.label){case 0:return Uo(this)?(Y("RemoteStore","Restarting streams for network reachability change."),[4,function(l){return R(this,void 0,void 0,function(){var h;return N(this,function(p){switch(p.label){case 0:return(h=Z(l)).Nh.add(4),[4,Du(h)];case 1:return p.sent(),h.Oh.set("Unknown"),h.Nh.delete(4),[4,rf(h)];case 2:return p.sent(),[2]}})})}(this)]):[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})})}),this.Oh=new WG(n,r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(e){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:if(!Uo(e))return[3,4];t=0,n=e.$h,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function Du(e){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:t=0,n=e.$h,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function gd(e,t){var n=Z(e);n.xh.has(t.targetId)||(n.xh.set(t.targetId,t),eb(n)?tb(n):Mu(n).Hu()&&Zw(n,t))}function Nl(e,t){var n=Z(e),r=Mu(n);n.xh.delete(t),r.Hu()&&Nx(n,t),n.xh.size===0&&(r.Hu()?r.Xu():Uo(n)&&n.Oh.set("Unknown"))}function Zw(e,t){e.kh.on(t.targetId),Mu(e).uh(t)}function Nx(e,t){e.kh.on(t),Mu(e).hh(t)}function tb(e){e.kh=new qH({vn:function(t){return e.Dh.vn(t)},Sn:function(t){return e.xh.get(t)||null}}),Mu(e).start(),e.Oh.Ph()}function eb(e){return Uo(e)&&!Mu(e).zu()&&e.xh.size>0}function Uo(e){return Z(e).Nh.size===0}function Rx(e){e.kh=void 0}function zG(e){return R(this,void 0,void 0,function(){return N(this,function(t){return e.xh.forEach(function(n,r){Zw(e,n)}),[2]})})}function KG(e,t){return R(this,void 0,void 0,function(){return N(this,function(n){return Rx(e),eb(e)?(e.Oh.Vh(t),tb(e)):e.Oh.set("Unknown"),[2]})})}function QG(e,t,n){return R(this,void 0,void 0,function(){var r,i,s;return N(this,function(a){switch(a.label){case 0:if(e.Oh.set("Online"),!(t instanceof YO&&t.state===2&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(c,l){return R(this,void 0,void 0,function(){var h,p,v,m;return N(this,function(y){switch(y.label){case 0:h=l.cause,p=0,v=l.targetIds,y.label=1;case 1:return p<v.length?(m=v[p],c.xh.has(m)?[4,c.Dh.Mh(m,h)]:[3,3]):[3,5];case 2:y.sent(),c.xh.delete(m),c.kh.removeTarget(m),y.label=3;case 3:y.label=4;case 4:return p++,[3,1];case 5:return[2]}})})}(e,t)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Y("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,Np(e,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Bh?e.kh.dn(t):t instanceof QO?e.kh.Pn(t):e.kh.Tn(t),n.isEqual(Ot.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,bx(e.bh)];case 8:return i=a.sent(),n._(i)>=0?[4,function(c,l){var h=c.kh.Vn(l);return h.$e.forEach(function(p,v){if(p.resumeToken.l()>0){var m=c.xh.get(v);m&&c.xh.set(v,m.Mt(p.resumeToken,l))}}),h.Fe.forEach(function(p){var v=c.xh.get(p);if(v){c.xh.set(p,v.Mt(Pn.T,v.Ot)),Nx(c,p);var m=new hd(v.target,p,1,v.sequenceNumber);Zw(c,m)}}),c.Dh.Lh(h)}(e,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Y("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,Np(e,s)];case 12:return a.sent(),[3,13];case 13:return[2]}})})}function Np(e,t,n){return R(this,void 0,void 0,function(){var r=this;return N(this,function(i){switch(i.label){case 0:if(!Hs(t))throw t;return e.Nh.add(1),[4,Du(e)];case 1:return i.sent(),e.Oh.set("Offline"),n||(n=function(){return bx(e.bh)}),e._s.po(function(){return R(r,void 0,void 0,function(){return N(this,function(s){switch(s.label){case 0:return Y("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return s.sent(),e.Nh.delete(1),[4,rf(e)];case 2:return s.sent(),[2]}})})}),[2]}})})}function Ox(e,t){return t().catch(function(n){return Np(e,n,t)})}function Lu(e){return R(this,void 0,void 0,function(){var t,n,r,i,s;return N(this,function(a){switch(a.label){case 0:t=Z(e),n=ko(t),r=t.Ch.length>0?t.Ch[t.Ch.length-1].batchId:-1,a.label=1;case 1:if(!function(c){return Uo(c)&&c.Ch.length<10}(t))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,SG(t.bh,r)];case 3:return(i=a.sent())===null?(t.Ch.length===0&&n.Xu(),[3,7]):(r=i.batchId,function(c,l){c.Ch.push(l);var h=ko(c);h.Hu()&&h._h&&h.fh(l.mutations)}(t,i),[3,6]);case 4:return s=a.sent(),[4,Np(t,s)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return xx(t)&&Px(t),[2]}})})}function xx(e){return Uo(e)&&!ko(e).zu()&&e.Ch.length>0}function Px(e){ko(e).start()}function YG(e){return R(this,void 0,void 0,function(){return N(this,function(t){return ko(e).Eh(),[2]})})}function XG(e){return R(this,void 0,void 0,function(){var t,n,r,i;return N(this,function(s){for(t=ko(e),n=0,r=e.Ch;n<r.length;n++)i=r[n],t.fh(i.mutations);return[2]})})}function JG(e,t,n){return R(this,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:return r=e.Ch.shift(),i=sG.from(r,t,n),[4,Ox(e,function(){return e.Dh.Bh(i)})];case 1:return s.sent(),[4,Lu(e)];case 2:return s.sent(),[2]}})})}function ZG(e,t){return R(this,void 0,void 0,function(){return N(this,function(n){switch(n.label){case 0:return t&&ko(e)._h?[4,function(r,i){return R(this,void 0,void 0,function(){var s,a;return N(this,function(c){switch(c.label){case 0:return WO(a=i.code)&&a!==k.ABORTED?(s=r.Ch.shift(),ko(r).Yu(),[4,Ox(r,function(){return r.Dh.qh(s.batchId,i)})]):[3,3];case 1:return c.sent(),[4,Lu(r)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return xx(e)&&Px(e),[2]}})})}function i_(e,t){return R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return n=Z(e),t?(n.Nh.delete(2),[4,rf(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Nh.add(2),[4,Du(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Mu(e){var t=this;return e.Uh||(e.Uh=function(n,r,i){var s=Z(n);return s.Ih(),new qG(r,s.Qu,s.credentials,s.Qt,i)}(e.Sh,e._s,{wu:zG.bind(null,e),Tu:KG.bind(null,e),ah:QG.bind(null,e)}),e.$h.push(function(n){return R(t,void 0,void 0,function(){return N(this,function(r){switch(r.label){case 0:return n?(e.Uh.Yu(),eb(e)?tb(e):e.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Uh.stop()];case 2:r.sent(),Rx(e),r.label=3;case 3:return[2]}})})})),e.Uh}function ko(e){var t=this;return e.Qh||(e.Qh=function(n,r,i){var s=Z(n);return s.Ih(),new HG(r,s.Qu,s.credentials,s.Qt,i)}(e.Sh,e._s,{wu:YG.bind(null,e),Tu:ZG.bind(null,e),wh:XG.bind(null,e),dh:JG.bind(null,e)}),e.$h.push(function(n){return R(t,void 0,void 0,function(){return N(this,function(r){switch(r.label){case 0:return n?(e.Qh.Yu(),[4,Lu(e)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,e.Qh.stop()];case 3:r.sent(),e.Ch.length>0&&(Y("RemoteStore","Stopping write stream with "+e.Ch.length+" pending writes"),e.Ch=[]),r.label=4;case 4:return[2]}})})})),e.Qh}var tW=function(){this.Kh=void 0,this.listeners=[]},eW=function(){this.queries=new ku(function(e){return LO(e)},Xl),this.onlineState="Unknown",this.Wh=new Set};function nb(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return N(this,function(h){switch(h.label){case 0:if(n=Z(e),r=t.query,i=!1,(s=n.queries.get(r))||(i=!0,s=new tW),!i)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),a=s,[4,n.jh(r)];case 2:return a.Kh=h.sent(),[3,4];case 3:return c=h.sent(),l=Pu(c,"Initialization of query '"+Zy(t.query)+"' failed"),[2,void t.onError(l)];case 4:return n.queries.set(r,s),s.listeners.push(t),t.Gh(n.onlineState),s.Kh&&t.zh(s.Kh)&&ib(n),[2]}})})}function rb(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a;return N(this,function(c){return n=Z(e),r=t.query,i=!1,(s=n.queries.get(r))&&(a=s.listeners.indexOf(t))>=0&&(s.listeners.splice(a,1),i=s.listeners.length===0),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]})})}function nW(e,t){for(var n=Z(e),r=!1,i=0,s=t;i<s.length;i++){var a=s[i],c=a.query,l=n.queries.get(c);if(l){for(var h=0,p=l.listeners;h<p.length;h++)p[h].zh(a)&&(r=!0);l.Kh=a}}r&&ib(n)}function rW(e,t,n){var r=Z(e),i=r.queries.get(t);if(i)for(var s=0,a=i.listeners;s<a.length;s++)a[s].onError(n);r.queries.delete(t)}function ib(e){e.Wh.forEach(function(t){t.next()})}var ob=function(){function e(t,n,r){this.query=t,this.Jh=n,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=r||{}}return e.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var n=[],r=0,i=t.docChanges;r<i.length;r++){var s=i[r];s.type!==3&&n.push(s)}t=new Ip(t.query,t.docs,t.Se,n,t.De,t.fromCache,t.Ce,!0)}var a=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),a=!0):this.tl(t,this.onlineState)&&(this.el(t),a=!0),this.Xh=t,a},e.prototype.onError=function(t){this.Jh.error(t)},e.prototype.Gh=function(t){this.onlineState=t;var n=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),n=!0),n},e.prototype.tl=function(t,n){if(!t.fromCache)return!0;var r=n!=="Offline";return!(this.options.nl&&r||t.docs.et()&&n!=="Offline")},e.prototype.Zh=function(t){if(t.docChanges.length>0)return!0;var n=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!n)&&this.options.includeMetadataChanges===!0},e.prototype.el=function(t){t=Ip.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},e}(),iW=function(){function e(t,n){this.payload=t,this.byteLength=n}return e.prototype.sl=function(){return"metadata"in this.payload},e}(),oC=function(){function e(t){this.Qt=t}return e.prototype.Pc=function(t){return ci(this.Qt,t)},e.prototype.yc=function(t){return t.metadata.exists?ex(this.Qt,t.document,!1):new Be(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},e.prototype.gc=function(t){return Xe(t)},e}(),oW=function(){function e(t,n,r){this.il=t,this.bh=n,this.Qt=r,this.queries=[],this.documents=[],this.progress=kx(t)}return e.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var n=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++n):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++n),n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null},e.prototype.ol=function(t){for(var n=new Map,r=new oC(this.Qt),i=0,s=t;i<s.length;i++){var a=s[i];if(a.metadata.queries)for(var c=r.Pc(a.metadata.name),l=0,h=a.metadata.queries;l<h.length;l++){var p=h[l],v=(n.get(p)||Qt()).add(c);n.set(p,v)}}return n},e.prototype.complete=function(){return R(this,void 0,void 0,function(){var t,n,r,i,s;return N(this,function(a){switch(a.label){case 0:return[4,CG(this.bh,new oC(this.Qt),this.documents,this.il.id)];case 1:t=a.sent(),n=this.ol(this.documents),r=0,i=this.queries,a.label=2;case 2:return r<i.length?(s=i[r],[4,NG(this.bh,s,n.get(s.name))]):[3,5];case 3:a.sent(),a.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new wG(Object.assign({},this.progress),t))]}})})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dx=function(e){this.key=e},Lx=function(e){this.key=e},Mx=function(){function e(t,n){this.query=t,this.cl=n,this.al=null,this.Be=!1,this.ul=Qt(),this.De=Qt(),this.hl=MO(t),this.ll=new KO(this.hl)}return Object.defineProperty(e.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),e.prototype.fl=function(t,n){var r=this,i=n?n.dl:new DA,s=n?n.ll:this.ll,a=n?n.De:this.De,c=s,l=!1,h=jh(this.query)&&s.size===this.query.limit?s.last():null,p=bp(this.query)&&s.size===this.query.limit?s.first():null;if(t.Xt(function(m,y){var b=s.get(m),E=y instanceof Zt?y:null;E&&(E=Jl(r.query,E)?E:null);var I=!!b&&r.De.has(b.key),C=!!E&&(E.Vt||r.De.has(E.key)&&E.hasCommittedMutations),P=!1;b&&E?b.data().isEqual(E.data())?I!==C&&(i.track({type:3,doc:E}),P=!0):r.wl(b,E)||(i.track({type:2,doc:E}),P=!0,(h&&r.hl(E,h)>0||p&&r.hl(E,p)<0)&&(l=!0)):!b&&E?(i.track({type:0,doc:E}),P=!0):b&&!E&&(i.track({type:1,doc:b}),P=!0,(h||p)&&(l=!0)),P&&(E?(c=c.add(E),a=C?a.add(m):a.delete(m)):(c=c.delete(m),a=a.delete(m)))}),jh(this.query)||bp(this.query))for(;c.size>this.query.limit;){var v=jh(this.query)?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{ll:c,dl:i,lc:l,De:a}},e.prototype.wl=function(t,n){return t.Vt&&n.hasCommittedMutations&&!n.Vt},e.prototype.wi=function(t,n,r){var i=this,s=this.ll;this.ll=t.ll,this.De=t.De;var a=t.dl.ve();a.sort(function(p,v){return function(m,y){var b=function(E){switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return b(m)-b(y)}(p.type,v.type)||i.hl(p.doc,v.doc)}),this.El(r);var c=n?this.Tl():[],l=this.ul.size===0&&this.Be?1:0,h=l!==this.al;return this.al=l,a.length!==0||h?{snapshot:new Ip(this.query,t.ll,s,a,t.De,l===0,h,!1),Il:c}:{Il:c}},e.prototype.Gh=function(t){return this.Be&&t==="Offline"?(this.Be=!1,this.wi({ll:this.ll,dl:new DA,De:this.De,lc:!1},!1)):{Il:[]}},e.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},e.prototype.El=function(t){var n=this;t&&(t.qe.forEach(function(r){return n.cl=n.cl.add(r)}),t.Ue.forEach(function(r){}),t.Qe.forEach(function(r){return n.cl=n.cl.delete(r)}),this.Be=t.Be)},e.prototype.Tl=function(){var t=this;if(!this.Be)return[];var n=this.ul;this.ul=Qt(),this.ll.forEach(function(i){t.ml(i.key)&&(t.ul=t.ul.add(i.key))});var r=[];return n.forEach(function(i){t.ul.has(i)||r.push(new Lx(i))}),this.ul.forEach(function(i){n.has(i)||r.push(new Dx(i))}),r},e.prototype.Al=function(t){this.cl=t.Rc,this.ul=Qt();var n=this.fl(t.documents);return this.wi(n,!0)},e.prototype.Rl=function(){return Ip.Ne(this.query,this.ll,this.De,this.al===0)},e}(),sW=function(e,t,n){this.query=e,this.targetId=t,this.view=n},aW=function(e){this.key=e,this.Pl=!1},uW=function(){function e(t,n,r,i,s,a){this.bh=t,this.yl=n,this.gl=r,this.Vl=i,this.currentUser=s,this.pl=a,this.bl={},this.vl=new ku(function(c){return LO(c)},Xl),this.Sl=new Map,this.Dl=new Set,this.Cl=new wn(ht.H),this.xl=new Map,this.Nl=new Xw,this.$l={},this.Fl=new Map,this.Ol=Ap.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(e.prototype,"Ml",{get:function(){return this.kl===!0},enumerable:!1,configurable:!0}),e}();function cW(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c;return N(this,function(l){switch(l.label){case 0:return n=lb(e),(s=n.vl.get(t))?(r=s.targetId,n.Vl.Fa(r),i=s.view.Rl(),[3,4]):[3,1];case 1:return[4,vu(n.bh,_r(t))];case 2:return a=l.sent(),c=n.Vl.Fa(a.targetId),r=a.targetId,[4,sb(n,t,r,c==="current")];case 3:i=l.sent(),n.Ml&&gd(n.yl,a),l.label=4;case 4:return[2,i]}})})}function sb(e,t,n,r){return R(this,void 0,void 0,function(){var i,s,a,c,l,h;return N(this,function(p){switch(p.label){case 0:return e.Ll=function(v,m,y){return function(b,E,I,C){return R(this,void 0,void 0,function(){var P,D,F;return N(this,function(Q){switch(Q.label){case 0:return P=E.view.fl(I),P.lc?[4,Cp(b.bh,E.query,!1).then(function(U){var _t=U.documents;return E.view.fl(_t,P)})]:[3,2];case 1:P=Q.sent(),Q.label=2;case 2:return D=C&&C.$e.get(E.targetId),F=E.view.wi(P,b.Ml,D),[2,(o_(b,E.targetId,F.Il),F.snapshot)]}})})}(e,v,m,y)},[4,Cp(e.bh,t,!0)];case 1:return i=p.sent(),s=new Mx(t,i.Rc),a=s.fl(i.documents),c=Hw.Le(n,r&&e.onlineState!=="Offline"),l=s.wi(a,e.Ml,c),o_(e,n,l.Il),h=new sW(t,n,s),[2,(e.vl.set(t,h),e.Sl.has(n)?e.Sl.get(n).push(t):e.Sl.set(n,[t]),l.snapshot)]}})})}function lW(e,t){return R(this,void 0,void 0,function(){var n,r,i;return N(this,function(s){switch(s.label){case 0:return n=Z(e),r=n.vl.get(t),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter(function(a){return!Xl(a,t)})),void n.vl.delete(t))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,gu(n.bh,r.targetId,!1).then(function(){n.Vl.La(r.targetId),Nl(n.yl,r.targetId),mu(n,r.targetId)}).catch(Gs)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return mu(n,r.targetId),[4,gu(n.bh,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function fW(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a;return N(this,function(c){switch(c.label){case 0:r=fb(e),c.label=1;case 1:return c.trys.push([1,5,,6]),[4,function(l,h){var p,v=Z(l),m=Hn.now(),y=h.reduce(function(b,E){return b.add(E.key)},Qt());return v.persistence.runTransaction("Locally write mutations","readwrite",function(b){return v.Tc.Xo(b,y).next(function(E){p=E;for(var I=[],C=0,P=h;C<P.length;C++){var D=P[C],F=LH(D,p.get(D.key));F!=null&&I.push(new Fo(D.key,F,xO(F.proto.mapValue),dn.exists(!0)))}return v.zo.Ri(b,m,I,h)})}).then(function(b){var E=b.xs(p);return{batchId:b.batchId,ri:E}})}(r.bh,t)];case 2:return i=c.sent(),r.Vl.Ca(i.batchId),function(l,h,p){var v=l.$l[l.currentUser.A()];v||(v=new wn(kt)),v=v.zt(h,p),l.$l[l.currentUser.A()]=v}(r,i.batchId,n),[4,zi(r,i.ri)];case 3:return c.sent(),[4,Lu(r.yl)];case 4:return c.sent(),[3,6];case 5:return s=c.sent(),a=Pu(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}})})}function Fx(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:n=Z(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,TG(n.bh,t)];case 2:return r=i.sent(),t.$e.forEach(function(s,a){var c=n.xl.get(a);c&&(yt(s.qe.size+s.Ue.size+s.Qe.size<=1),s.qe.size>0?c.Pl=!0:s.Ue.size>0?yt(c.Pl):s.Qe.size>0&&(yt(c.Pl),c.Pl=!1))}),[4,zi(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,Gs(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function sC(e,t,n){var r=Z(e);if(r.Ml&&n===0||!r.Ml&&n===1){var i=[];r.vl.forEach(function(s,a){var c=a.view.Gh(t);c.snapshot&&i.push(c.snapshot)}),function(s,a){var c=Z(s);c.onlineState=a;var l=!1;c.queries.forEach(function(h,p){for(var v=0,m=p.listeners;v<m.length;v++)m[v].Gh(a)&&(l=!0)}),l&&ib(c)}(r.gl,t),i.length&&r.bl.ah(i),r.onlineState=t,r.Ml&&r.Vl.Qa(t)}}function hW(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a,c,l;return N(this,function(h){switch(h.label){case 0:return(r=Z(e)).Vl.Ba(t,"rejected",n),i=r.xl.get(t),(s=i&&i.key)?(a=(a=new wn(ht.H)).zt(s,new Be(s,Ot.min())),c=Qt().add(s),l=new qw(Ot.min(),new Map,new qe(kt),a,c),[4,Fx(r,l)]):[3,2];case 1:return h.sent(),r.Cl=r.Cl.remove(s),r.xl.delete(t),cb(r),[3,4];case 2:return[4,gu(r.bh,t,!1).then(function(){return mu(r,t,n)}).catch(Gs)];case 3:h.sent(),h.label=4;case 4:return[2]}})})}function pW(e,t){return R(this,void 0,void 0,function(){var n,r,i;return N(this,function(s){switch(s.label){case 0:n=Z(e),r=t.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,IG(n.bh,t)];case 2:return i=s.sent(),ub(n,r,null),ab(n,r),n.Vl.Na(r,"acknowledged"),[4,zi(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,Gs(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function dW(e,t,n){return R(this,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:r=Z(e),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(a,c){var l=Z(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",function(h){var p;return l.zo.Pi(h,c).next(function(v){return yt(v!==null),p=v.keys(),l.zo.Ci(h,v)}).next(function(){return l.zo.$i(h)}).next(function(){return l.Tc.Xo(h,p)})})}(r.bh,t)];case 2:return i=s.sent(),ub(r,t,n),ab(r,t),r.Vl.Na(t,"rejected",n),[4,zi(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,Gs(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function vW(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a;return N(this,function(c){switch(c.label){case 0:Uo((n=Z(e)).yl)||Y("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,function(l){var h=Z(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(p){return h.zo.Vi(p)})}(n.bh)];case 2:return(r=c.sent())===-1?[2,void t.resolve()]:((i=n.Fl.get(r)||[]).push(t),n.Fl.set(r,i),[3,4]);case 3:return s=c.sent(),a=Pu(s,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}})})}function ab(e,t){(e.Fl.get(t)||[]).forEach(function(n){n.resolve()}),e.Fl.delete(t)}function ub(e,t,n){var r=Z(e),i=r.$l[r.currentUser.A()];if(i){var s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.$l[r.currentUser.A()]=i}}function mu(e,t,n){n===void 0&&(n=null),e.Vl.ka(t);for(var r=0,i=e.Sl.get(t);r<i.length;r++){var s=i[r];e.vl.delete(s),n&&e.bl.Bl(s,n)}e.Sl.delete(t),e.Ml&&e.Nl.Fc(t).forEach(function(a){e.Nl.Fi(a)||Ux(e,a)})}function Ux(e,t){e.Dl.delete(t.path.rt());var n=e.Cl.get(t);n!==null&&(Nl(e.yl,n),e.Cl=e.Cl.remove(t),e.xl.delete(n),cb(e))}function o_(e,t,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof Dx?(e.Nl.nr(s.key,t),gW(e,s)):s instanceof Lx?(Y("SyncEngine","Document no longer in limbo: "+s.key),e.Nl.ir(s.key,t),e.Nl.Fi(s.key)||Ux(e,s.key)):ut()}}function gW(e,t){var n=t.key,r=n.path.rt();e.Cl.get(n)||e.Dl.has(r)||(Y("SyncEngine","New document in limbo: "+n),e.Dl.add(r),cb(e))}function cb(e){for(;e.Dl.size>0&&e.Cl.size<e.pl;){var t=e.Dl.values().next().value;e.Dl.delete(t);var n=new ht(Ht.ot(t)),r=e.Ol.next();e.xl.set(r,new aW(n)),e.Cl=e.Cl.zt(n,r),gd(e.yl,new hd(_r(xu(n.path)),r,2,rr.q))}}function zi(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a;return N(this,function(c){switch(c.label){case 0:return r=Z(e),i=[],s=[],a=[],r.vl.et()?[3,3]:(r.vl.forEach(function(l,h){a.push(r.Ll(h,t,n).then(function(p){if(p){r.Ml&&r.Vl.Ba(h.targetId,p.fromCache?"not-current":"current"),i.push(p);var v=bG.oc(h.targetId,p);s.push(v)}}))}),[4,Promise.all(a)]);case 1:return c.sent(),r.bl.ah(i),[4,function(l,h){return R(this,void 0,void 0,function(){var p,v,m,y,b,E,I,C,P;return N(this,function(D){switch(D.label){case 0:p=Z(l),D.label=1;case 1:return D.trys.push([1,3,,4]),[4,p.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(F){return $.forEach(h,function(Q){return $.forEach(Q.ic,function(U){return p.persistence.Ti.nr(F,Q.targetId,U)}).next(function(){return $.forEach(Q.rc,function(U){return p.persistence.Ti.ir(F,Q.targetId,U)})})})})];case 2:return D.sent(),[3,4];case 3:if(!Hs(v=D.sent()))throw v;return Y("LocalStore","Failed to update sequence numbers: "+v),[3,4];case 4:for(m=0,y=h;m<y.length;m++)b=y[m],E=b.targetId,b.fromCache||(I=p.fc.get(E),C=I.Ot,P=I.Lt(C),p.fc=p.fc.zt(E,P));return[2]}})})}(r.bh,s)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function mW(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return(n=Z(e)).currentUser.isEqual(t)?[3,3]:(Y("SyncEngine","User change. New user:",t.A()),[4,wx(n.bh,t)]);case 1:return r=i.sent(),n.currentUser=t,function(s,a){s.Fl.forEach(function(c){c.forEach(function(l){l.reject(new G(k.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Fl.clear()}(n),n.Vl.Ua(t,r.mc,r.Ac),[4,zi(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function yW(e,t){var n=Z(e),r=n.xl.get(t);if(r&&r.Pl)return Qt().add(r.key);var i=Qt(),s=n.Sl.get(t);if(!s)return i;for(var a=0,c=s;a<c.length;a++){var l=c[a],h=n.vl.get(l);i=i.Pe(h.view._l)}return i}function _W(e,t){return R(this,void 0,void 0,function(){var n,r,i;return N(this,function(s){switch(s.label){case 0:return[4,Cp((n=Z(e)).bh,t.query,!0)];case 1:return r=s.sent(),i=t.view.Al(r),[2,(n.Ml&&o_(n,t.targetId,i.Il),i)]}})})}function wW(e){return R(this,void 0,void 0,function(){var t;return N(this,function(n){return[2,Tx((t=Z(e)).bh).then(function(r){return zi(t,r)})]})})}function bW(e,t,n,r){return R(this,void 0,void 0,function(){var i,s;return N(this,function(a){switch(a.label){case 0:return[4,function(c,l){var h=Z(c),p=Z(h.zo);return h.persistence.runTransaction("Lookup mutation documents","readonly",function(v){return p.yi(v,l).next(function(m){return m?h.Tc.Xo(v,m):$.resolve(null)})})}((i=Z(e)).bh,t)];case 1:return(s=a.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,Lu(i.yl)];case 2:return a.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(ub(i,t,r||null),ab(i,t),function(c,l){Z(Z(c).zo).xi(l)}(i.bh,t)):ut(),a.label=4;case 4:return[4,zi(i,s)];case 5:return a.sent(),[3,7];case 6:Y("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}})})}function EW(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c,l,h;return N(this,function(p){switch(p.label){case 0:return lb(n=Z(e)),fb(n),t!==!0||n.kl===!0?[3,3]:(r=n.Vl.va(),[4,aC(n,r.it())]);case 1:return i=p.sent(),n.kl=!0,[4,i_(n.yl,!0)];case 2:for(p.sent(),s=0,a=i;s<a.length;s++)c=a[s],gd(n.yl,c);return[3,7];case 3:return t!==!1||n.kl===!1?[3,7]:(l=[],h=Promise.resolve(),n.Sl.forEach(function(v,m){n.Vl.Ma(m)?l.push(m):h=h.then(function(){return mu(n,m),gu(n.bh,m,!0)}),Nl(n.yl,m)}),[4,h]);case 4:return p.sent(),[4,aC(n,l)];case 5:return p.sent(),function(v){var m=Z(v);m.xl.forEach(function(y,b){Nl(m.yl,b)}),m.Nl.Oc(),m.xl=new Map,m.Cl=new wn(ht.H)}(n),n.kl=!1,[4,i_(n.yl,!1)];case 6:p.sent(),p.label=7;case 7:return[2]}})})}function aC(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a,c,l,h,p,v,m,y,b,E,I;return N(this,function(C){switch(C.label){case 0:r=Z(e),i=[],s=[],a=0,c=t,C.label=1;case 1:return a<c.length?(l=c[a],h=void 0,(p=r.Sl.get(l))&&p.length!==0?[4,vu(r.bh,_r(p[0]))]:[3,7]):[3,13];case 2:h=C.sent(),v=0,m=p,C.label=3;case 3:return v<m.length?(y=m[v],b=r.vl.get(y),[4,_W(r,b)]):[3,6];case 4:(E=C.sent()).snapshot&&s.push(E.snapshot),C.label=5;case 5:return v++,[3,3];case 6:return[3,11];case 7:return[4,Ix(r.bh,l)];case 8:return I=C.sent(),[4,vu(r.bh,I)];case 9:return h=C.sent(),[4,sb(r,jx(I),l,!1)];case 10:C.sent(),C.label=11;case 11:i.push(h),C.label=12;case 12:return a++,[3,1];case 13:return[2,(r.bl.ah(s),i)]}})})}function jx(e){return kO(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function IW(e){var t=Z(e);return Z(Z(t.bh).persistence).Uo()}function TW(e,t,n,r){return R(this,void 0,void 0,function(){var i,s,a;return N(this,function(c){switch(c.label){case 0:return(i=Z(e)).kl?(Y("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Tx(i.bh)];case 3:return s=c.sent(),a=qw.Me(t,n==="current"),[4,zi(i,s,a)];case 4:return c.sent(),[3,8];case 5:return[4,gu(i.bh,t,!0)];case 6:return c.sent(),mu(i,t,r),[3,8];case 7:ut(),c.label=8;case 8:return[2]}})})}function SW(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a,c,l,h,p,v,m;return N(this,function(y){switch(y.label){case 0:if(!(r=lb(e)).kl)return[3,10];i=0,s=t,y.label=1;case 1:return i<s.length?(a=s[i],r.Sl.has(a)?(Y("SyncEngine","Adding an already active target "+a),[3,5]):[4,Ix(r.bh,a)]):[3,6];case 2:return c=y.sent(),[4,vu(r.bh,c)];case 3:return l=y.sent(),[4,sb(r,jx(c),l.targetId,!1)];case 4:y.sent(),gd(r.yl,l),y.label=5;case 5:return i++,[3,1];case 6:h=function(b){return N(this,function(E){switch(E.label){case 0:return r.Sl.has(b)?[4,gu(r.bh,b,!1).then(function(){Nl(r.yl,b),mu(r,b)}).catch(Gs)]:[3,2];case 1:E.sent(),E.label=2;case 2:return[2]}})},p=0,v=n,y.label=7;case 7:return p<v.length?(m=v[p],[5,h(m)]):[3,10];case 8:y.sent(),y.label=9;case 9:return p++,[3,7];case 10:return[2]}})})}function lb(e){var t=Z(e);return t.yl.Dh.Lh=Fx.bind(null,t),t.yl.Dh.vn=yW.bind(null,t),t.yl.Dh.Mh=hW.bind(null,t),t.bl.ah=nW.bind(null,t.gl),t.bl.Bl=rW.bind(null,t.gl),t}function fb(e){var t=Z(e);return t.yl.Dh.Bh=pW.bind(null,t),t.yl.Dh.qh=dW.bind(null,t),t}function AW(e,t,n){var r=Z(e);(function(i,s,a){return R(this,void 0,void 0,function(){var c,l,h,p,v,m;return N(this,function(y){switch(y.label){case 0:return y.trys.push([0,14,,15]),[4,s.getMetadata()];case 1:return c=y.sent(),[4,function(b,E){var I=Z(b),C=Xe(E.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",function(P){return I.wo.Os(P,E.id)}).then(function(P){return!!P&&P.createTime._(C)>=0})}(i.bh,c)];case 2:return y.sent()?[4,s.close()]:[3,4];case 3:return[2,(y.sent(),void a.ql(function(b){return{taskState:"Success",documentsLoaded:b.totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}}(c)))];case 4:return a.Ul(kx(c)),l=new oW(c,i.bh,s.Qt),[4,s.Ql()];case 5:h=y.sent(),y.label=6;case 6:return h?[4,l.rl(h)]:[3,10];case 7:return(p=y.sent())&&a.Ul(p),[4,s.Ql()];case 8:h=y.sent(),y.label=9;case 9:return[3,6];case 10:return[4,l.complete()];case 11:return v=y.sent(),[4,zi(i,v.Go,void 0)];case 12:return y.sent(),[4,function(b,E){var I=Z(b);return I.persistence.runTransaction("Save bundle","readwrite",function(C){return I.wo.ks(C,E)})}(i.bh,c)];case 13:return y.sent(),a.ql(v.progress),[3,15];case 14:return gp("SyncEngine","Loading bundle failed with "+(m=y.sent())),a.Kl(m),[3,15];case 15:return[2]}})})})(r,t,n).then(function(){r.Vl.Wa()})}var Vx=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(t){return R(this,void 0,void 0,function(){return N(this,function(n){switch(n.label){case 0:return this.Qt=nf(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return n.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}})})},e.prototype.zl=function(t){return null},e.prototype.Hl=function(t){return _x(this.persistence,new yx,t.Jl,this.Qt)},e.prototype.jl=function(t){return new DG(MG.ia,this.Qt)},e.prototype.Wl=function(t){return new Sx},e.prototype.terminate=function(){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}})})},e}(),Bx=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).Yl=n,s.cacheSizeBytes=r,s.forceOwnership=i,s.synchronizeTabs=!1,s}return J(t,e),t.prototype.initialize=function(n){return R(this,void 0,void 0,function(){return N(this,function(r){switch(r.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return r.sent(),[4,AG(this.bh)];case 2:return r.sent(),[4,this.Yl.initialize(this,n)];case 3:return r.sent(),[4,fb(this.Yl._a)];case 4:return r.sent(),[4,Lu(this.Yl.yl)];case 5:return r.sent(),[2]}})})},t.prototype.Hl=function(n){return _x(this.persistence,new yx,n.Jl,this.Qt)},t.prototype.zl=function(n){var r=this.persistence.Ti.lr;return new pG(r,n._s)},t.prototype.jl=function(n){var r=Yw(n.yu.t,n.yu.persistenceKey),i=this.cacheSizeBytes!==void 0?ni.Ys(this.cacheSizeBytes):ni.ti;return new _G(this.synchronizeTabs,r,n.clientId,i,n._s,Ax(),qh(),this.Qt,this.Vl,!!this.forceOwnership)},t.prototype.Wl=function(n){return new Sx},t}(Vx),CW=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r,!1)||this).Yl=n,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return J(t,e),t.prototype.initialize=function(n){return R(this,void 0,void 0,function(){var r,i=this;return N(this,function(s){switch(s.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return s.sent(),r=this.Yl._a,this.Vl instanceof Wm?(this.Vl._a={eu:bW.bind(null,r),nu:TW.bind(null,r),su:SW.bind(null,r),Uo:IW.bind(null,r),tu:wW.bind(null,r)},[4,this.Vl.start()]):[3,3];case 2:s.sent(),s.label=3;case 3:return[4,this.persistence.Ro(function(a){return R(i,void 0,void 0,function(){return N(this,function(c){switch(c.label){case 0:return[4,EW(this.Yl._a,a)];case 1:return c.sent(),this.Gl&&(a&&!this.Gl.Er?this.Gl.start(this.bh):a||this.Gl.stop()),[2]}})})})];case 4:return s.sent(),[2]}})})},t.prototype.Wl=function(n){var r=Ax();if(!Wm.Kn(r))throw new G(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var i=Yw(n.yu.t,n.yu.persistenceKey);return new Wm(r,n._s,i,n.clientId,n.Jl)},t}(Bx),s_=function(){function e(){}return e.prototype.initialize=function(t,n){return R(this,void 0,void 0,function(){var r=this;return N(this,function(i){switch(i.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(n),this.yl=this.Zl(n),this.gl=this.t_(n),this._a=this.e_(n,!t.synchronizeTabs),this.Vl.fa=function(s){return sC(r._a,s,1)},this.yl.Dh.n_=mW.bind(null,this._a),[4,i_(this.yl,this._a.Ml)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.t_=function(t){return new eW},e.prototype.Xl=function(t){var n,r=nf(t.yu.t),i=(n=t.yu,new BG(n));return function(s,a,c){return new GG(s,a,c)}(t.credentials,i,r)},e.prototype.Zl=function(t){var n,r,i,s,a,c=this;return n=this.bh,r=this.Sh,i=t._s,s=function(l){return sC(c._a,l,0)},a=iC.Kn()?new iC:new UG,new $G(n,r,i,s,a)},e.prototype.e_=function(t,n){return function(r,i,s,a,c,l,h){var p=new uW(r,i,s,a,c,l);return h&&(p.kl=!0),p}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,n)},e.prototype.terminate=function(){return function(t){return R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return n=Z(t),Y("RemoteStore","RemoteStore shutting down."),n.Nh.add(5),[4,Du(n)];case 1:return r.sent(),n.Fh.ko(),n.Oh.set("Unknown"),[2]}})})}(this.yl)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(e,t){t===void 0&&(t=10240);var n=0;return{read:function(){return R(this,void 0,void 0,function(){var r;return N(this,function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]})})},cancel:function(){return R(this,void 0,void 0,function(){return N(this,function(r){return[2]})})},releaseLock:function(){}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var md=function(){function e(t){this.observer=t,this.muted=!1}return e.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},e.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},e.prototype.i_=function(){this.muted=!0},e.prototype.s_=function(t,n){var r=this;this.muted||setTimeout(function(){r.muted||t(n)},0)},e}(),NW=function(){function e(t,n){var r=this;this.r_=t,this.Qt=n,this.metadata=new kn,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then(function(i){i&&i.sl()?r.metadata.resolve(i.payload.metadata):r.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             `+JSON.stringify(i==null?void 0:i.payload)))},function(i){return r.metadata.reject(i)})}return e.prototype.close=function(){return this.r_.cancel()},e.prototype.getMetadata=function(){return R(this,void 0,void 0,function(){return N(this,function(t){return[2,this.metadata.promise]})})},e.prototype.Ql=function(){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}})})},e.prototype.c_=function(){return R(this,void 0,void 0,function(){var t,n,r,i;return N(this,function(s){switch(s.label){case 0:return[4,this.a_()];case 1:return(t=s.sent())===null?[2,null]:(n=this.o_.decode(t),r=Number(n),isNaN(r)&&this.u_("length string ("+n+") is not valid number"),[4,this.h_(r)]);case 2:return i=s.sent(),[2,new iW(JSON.parse(i),t.length+r)]}})})},e.prototype.l_=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},e.prototype.a_=function(){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(r.sent())return[3,3];r.label=2;case 2:return[3,0];case 3:return this.buffer.length===0?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),n)])}})})},e.prototype.h_=function(t){return R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:r.sent()&&this.u_("Reached the end of bundle when more is expected."),r.label=2;case 2:return[3,0];case 3:return n=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),n)]}})})},e.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},e.prototype.__=function(){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return[4,this.r_.read()];case 1:return(t=r.sent()).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),[2,t.done]}})})},e}(),Mi=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;++r)if(t[r].length===0)throw new G(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new Hr(t)}return e.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},e}(),Ws=function(e){this._methodName=e},Mt=function(e){this.d_=e};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(e,t,n){if(!n)throw new G(k.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function pb(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new G(k.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function qx(e,t,n,r){if(t===!0&&r===!0)throw new G(k.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function cC(e){if(!ht.wt(e))throw new G(k.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function lC(e){if(ht.wt(e))throw new G(k.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function yd(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";var t=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return typeof e=="function"?"a function":ut()}function qt(e,t){if("_delegate"in e&&(e=e.d_),!(e instanceof t)){if(t.name===e.constructor.name)throw new G(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=yd(e);throw new G(k.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function fC(e,t){if(t<=0)throw new G(k.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hC=function(){function e(t){var n;if(t.host===void 0){if(t.ssl!==void 0)throw new G(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new G(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,qx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},e}(),pC=new Map,Rl=function(){function e(t,n){this.w_="(lite)",this.E_=new hC({}),this.T_=!1,t instanceof vp?(this.I_=t,this.m_=new wA):(this.A_=t,this.I_=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new G(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vp(r.options.projectId)}(t),this.m_=new gH(n))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this.A_)throw new G(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"P_",{get:function(){return this.y_!==void 0},enumerable:!1,configurable:!0}),e.prototype.g_=function(t){if(this.T_)throw new G(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new hC(t),t.credentials!==void 0&&(this.m_=function(n){if(!n)return new wA;switch(n.type){case"gapi":var r=n.client;return yt(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new yH(r,n.sessionIndex||"0");case"provider":return n.client;default:throw new G(k.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype.V_=function(){return this.E_},e.prototype.p_=function(){return this.T_=!0,this.E_},e.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},e.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},e.prototype.b_=function(){return t=this,(n=pC.get(t))&&(Y("ComponentProvider","Removing Datastore"),pC.delete(t),n.terminate()),Promise.resolve();var t,n},e}(),de=function(){function e(t,n,r){this.v_=n,this.S_=r,this.type="document",this.firestore=t}return Object.defineProperty(e.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new To(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.S_)},e}(),Gn=function(){function e(t,n,r){this.v_=n,this.C_=r,this.type="query",this.firestore=t}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this.C_)},e}(),To=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,xu(i))||this).firestore=n,s.D_=i,s.type="collection",s}return J(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this.D_.X();return n.et()?null:new de(this.firestore,null,new ht(n))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(n){return new t(this.firestore,n,this.D_)},t}(Gn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e instanceof Mt&&(e=e.d_),hb("collection","path",t),e instanceof Rl)return lC(n=Ht.ot.apply(Ht,Ae([t],r))),new To(e,null,n);if(!(e instanceof de||e instanceof To))throw new G(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return lC(n=Ht.ot.apply(Ht,Ae([e.path],r)).child(Ht.ot(t))),new To(e.firestore,null,n)}function Hh(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e instanceof Mt&&(e=e.d_),arguments.length===1&&(t=SO.u()),hb("doc","path",t),e instanceof Rl)return cC(n=Ht.ot.apply(Ht,Ae([t],r))),new de(e,null,new ht(n));if(!(e instanceof de||e instanceof To))throw new G(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cC(n=e.D_.child(Ht.ot.apply(Ht,Ae([t],r)))),new de(e.firestore,e instanceof To?e.v_:null,new ht(n))}function Gx(e,t){return e instanceof Mt&&(e=e.d_),t instanceof Mt&&(t=t.d_),(e instanceof de||e instanceof To)&&(t instanceof de||t instanceof To)&&e.firestore===t.firestore&&e.path===t.path&&e.v_===t.v_}function Wx(e,t){return e instanceof Mt&&(e=e.d_),t instanceof Mt&&(t=t.d_),e instanceof Gn&&t instanceof Gn&&e.firestore===t.firestore&&Xl(e.C_,t.C_)&&e.v_===t.v_}var _d=function(){function e(t,n){if(!isFinite(t)||t<-90||t>90)throw new G(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new G(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this.x_=t,this.N_=n}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},e.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},e.prototype.U=function(t){return kt(this.x_,t.x_)||kt(this.N_,t.N_)},e}(),RW=/^__.*__$/,OW=function(){function e(t,n,r){this.data=t,this.Gt=n,this.fieldTransforms=r}return e.prototype.F_=function(t,n){return this.Gt!==null?new Fo(t,this.data,this.Gt,n,this.fieldTransforms):new tf(t,this.data,n,this.fieldTransforms)},e}(),$x=function(){function e(t,n,r){this.data=t,this.Gt=n,this.fieldTransforms=r}return e.prototype.F_=function(t,n){return new Fo(t,this.data,this.Gt,n,this.fieldTransforms)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}var Kx=function(){function e(t,n,r,i,s,a){this.settings=t,this.t=n,this.Qt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.O_(),this.fieldTransforms=s||[],this.Gt=a||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),e.prototype.M_=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},e.prototype.L_=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.M_({path:r,B_:!1});return i.q_(t),i},e.prototype.U_=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.M_({path:r,B_:!1});return i.O_(),i},e.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},e.prototype.K_=function(t){return Rp(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},e.prototype.contains=function(t){return this.Gt.find(function(n){return t.nt(n)})!==void 0||this.fieldTransforms.find(function(n){return t.nt(n.field)})!==void 0},e.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},e.prototype.q_=function(t){if(t.length===0)throw this.K_("Document fields must not be empty");if(zx(this.k_)&&RW.test(t))throw this.K_('Document fields cannot begin and end with "__"')},e}(),xW=function(){function e(t,n,r){this.t=t,this.ignoreUndefinedProperties=n,this.Qt=r||nf(t)}return e.prototype.G_=function(t,n,r,i){return i===void 0&&(i=!1),new Kx({k_:t,methodName:n,j_:r,path:Hr.ct(),B_:!1,W_:i},this.t,this.Qt,this.ignoreUndefinedProperties)},e}();function $s(e){var t=e.p_(),n=nf(e.I_);return new xW(e.I_,!!t.ignoreUndefinedProperties,n)}function wd(e,t,n,r,i,s){s===void 0&&(s={});var a=e.G_(s.merge||s.mergeFields?2:0,t,n,i);mb("Data must be an object, but it was:",a,r);var c,l,h=Xx(r,a);if(s.merge)c=new iu(a.Gt),l=a.fieldTransforms;else if(s.mergeFields){for(var p=[],v=0,m=s.mergeFields;v<m.length;v++){var y=a_(t,m[v],n);if(!a.contains(y))throw new G(k.INVALID_ARGUMENT,"Field '"+y+"' is specified in your field mask but missing from your input data.");Zx(p,y)||p.push(y)}c=new iu(p),l=a.fieldTransforms.filter(function(b){return c.Tt(b.field)})}else c=null,l=a.fieldTransforms;return new OW(new Po(h),c,l)}var db=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return J(t,e),t.prototype.z_=function(n){if(n.k_!==2)throw n.k_===1?n.K_(this._methodName+"() can only appear at the top level of your update data"):n.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.Gt.push(n.path),null},t.prototype.isEqual=function(n){return n instanceof t},t}(Ws);function Qx(e,t,n){return new Kx({k_:3,j_:t.settings.j_,methodName:e._methodName,B_:n},t.t,t.Qt,t.ignoreUndefinedProperties)}var PW=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return J(t,e),t.prototype.z_=function(n){return new Zl(n.path,new uu)},t.prototype.isEqual=function(n){return n instanceof t},t}(Ws),kW=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).H_=r,i}return J(t,e),t.prototype.z_=function(n){var r=Qx(this,n,!0),i=this.H_.map(function(a){return zs(a,r)}),s=new Ds(i);return new Zl(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(Ws),DW=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).H_=r,i}return J(t,e),t.prototype.z_=function(n){var r=Qx(this,n,!0),i=this.H_.map(function(a){return zs(a,r)}),s=new Ls(i);return new Zl(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(Ws),LW=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).J_=r,i}return J(t,e),t.prototype.z_=function(n){var r=new cu(n.Qt,jO(n.Qt,this.J_));return new Zl(n.path,r)},t.prototype.isEqual=function(n){return this===n},t}(Ws);function vb(e,t,n,r){var i=e.G_(1,t,n);mb("Data must be an object, but it was:",i,r);var s=[],a=new Ql;Kl(r,function(l,h){var p=yb(t,l,n);h instanceof Mt&&(h=h.d_);var v=i.U_(p);if(h instanceof db)s.push(p);else{var m=zs(h,v);m!=null&&(s.push(p),a.set(p,m))}});var c=new iu(s);return new $x(a.Pt(),c,i.fieldTransforms)}function gb(e,t,n,r,i,s){var a=e.G_(1,t,n),c=[a_(t,r,n)],l=[i];if(s.length%2!=0)throw new G(k.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<s.length;h+=2)c.push(a_(t,s[h])),l.push(s[h+1]);for(var p=[],v=new Ql,m=c.length-1;m>=0;--m)if(!Zx(p,c[m])){var y=c[m],b=l[m];b instanceof Mt&&(b=b.d_);var E=a.U_(y);if(b instanceof db)p.push(y);else{var I=zs(b,E);I!=null&&(p.push(y),v.set(y,I))}}var C=new iu(p);return new $x(v.Pt(),C,a.fieldTransforms)}function Yx(e,t,n,r){return r===void 0&&(r=!1),zs(n,e.G_(r?4:3,t))}function zs(e,t){if(e instanceof Mt&&(e=e.d_),Jx(e))return mb("Unsupported field value:",t,e),Xx(e,t);if(e instanceof Ws)return function(n,r){if(!zx(r.k_))throw r.K_(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.K_(n._methodName+"() is not currently supported inside arrays");var i=n.z_(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.Gt.push(t.path),e instanceof Array){if(t.settings.B_&&t.k_!==4)throw t.K_("Nested arrays are not supported");return function(n,r){for(var i=[],s=0,a=0,c=n;a<c.length;a++){var l=zs(c[a],r.Q_(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(e,t)}return function(n,r){if(n instanceof Mt&&(n=n.d_),n===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return jO(r.Qt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){var i=Hn.fromDate(n);return{timestampValue:Sl(r.Qt,i)}}if(n instanceof Hn)return i=new Hn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:Sl(r.Qt,i)};if(n instanceof _d)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ks)return{bytesValue:XO(r.Qt,n.I)};if(n instanceof de){i=r.t;var s=n.firestore.I_;if(!s.isEqual(i))throw r.K_("Document reference is for database "+s.projectId+"/"+s.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Gw(n.firestore.I_||r.t,n.S_.path)}}throw r.K_("Unsupported field value: "+yd(n))}(e,t)}function Xx(e,t){var n={};return NO(e)?t.path&&t.path.length>0&&t.Gt.push(t.path):Kl(e,function(r,i){var s=zs(i,t.L_(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Jx(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Hn||e instanceof _d||e instanceof ks||e instanceof de||e instanceof Ws)}function mb(e,t,n){if(!Jx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){var r=yd(n);throw r==="an object"?t.K_(e+" a custom object"):t.K_(e+" "+r)}}function a_(e,t,n){if(t instanceof Mt&&(t=t.d_),t instanceof Mi)return t.f_;if(typeof t=="string")return yb(e,t);throw Rp("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var MW=new RegExp("[~\\*/\\[\\]]");function yb(e,t,n){if(t.search(MW)>=0)throw Rp("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return new(Mi.bind.apply(Mi,Ae([void 0],t.split("."))))().f_}catch{throw Rp("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function Rp(e,t,n,r,i){var s=r&&!r.et(),a=i!==void 0,c="Function "+t+"() called with invalid data";n&&(c+=" (via `toFirestore()`)");var l="";return(s||a)&&(l+=" (found",s&&(l+=" in field "+r),a&&(l+=" in document "+i),l+=")"),new G(k.INVALID_ARGUMENT,(c+=". ")+e+l)}function Zx(e,t){return e.some(function(n){return n.isEqual(t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FW=function(){function e(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return e.prototype.ef=function(t){return R(this,void 0,void 0,function(){var n,r=this;return N(this,function(i){switch(i.label){case 0:if(this.nf(),this.mutations.length>0)throw new G(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return R(this,void 0,void 0,function(){var c,l,h,p,v,m;return N(this,function(y){switch(y.label){case 0:return c=Z(s),l=Cl(c.Qt)+"/documents",h={documents:a.map(function(b){return Al(c.Qt,b)})},[4,c.Du("BatchGetDocuments",l,h)];case 1:return p=y.sent(),v=new Map,p.forEach(function(b){var E=function(I,C){return"found"in C?function(P,D){yt(!!D.found),D.found.name,D.found.updateTime;var F=ci(P,D.found.name),Q=Xe(D.found.updateTime),U=new Po({mapValue:{fields:D.found.fields}});return new Zt(F,Q,U,{})}(I,C):"missing"in C?function(P,D){yt(!!D.missing),yt(!!D.readTime);var F=ci(P,D.missing),Q=Xe(D.readTime);return new Be(F,Q)}(I,C):ut()}(c.Qt,b);v.set(E.key.toString(),E)}),m=[],[2,(a.forEach(function(b){var E=v.get(b.toString());yt(!!E),m.push(E)}),m)]}})})}(this.Sh,t)];case 1:return[2,((n=i.sent()).forEach(function(s){s instanceof Be||s instanceof Zt?r.sf(s):ut()}),n)]}})})},e.prototype.set=function(t,n){this.write(n.F_(t,this.jt(t))),this.tf.add(t.toString())},e.prototype.update=function(t,n){try{this.write(n.F_(t,this.rf(t)))}catch(r){this.Z_=r}this.tf.add(t.toString())},e.prototype.delete=function(t){this.write(new ef(t,this.jt(t))),this.tf.add(t.toString())},e.prototype.commit=function(){return R(this,void 0,void 0,function(){var t,n=this;return N(this,function(r){switch(r.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach(function(i){t.delete(i.key.toString())}),t.forEach(function(i,s){var a=ht._t(s);n.mutations.push(new Bw(a,n.jt(a)))}),[4,function(i,s){return R(this,void 0,void 0,function(){var a,c,l;return N(this,function(h){switch(h.label){case 0:return a=Z(i),c=Cl(a.Qt)+"/documents",l={writes:s.map(function(p){return Tp(a.Qt,p)})},[4,a.pu("Commit",c,l)];case 1:return h.sent(),[2]}})})}(this.Sh,this.mutations)];case 1:return r.sent(),this.X_=!0,[2]}})})},e.prototype.sf=function(t){var n;if(t instanceof Zt)n=t.version;else{if(!(t instanceof Be))throw ut();n=Ot.min()}var r=this.Y_.get(t.key.toString());if(r){if(!n.isEqual(r))throw new G(k.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),n)},e.prototype.jt=function(t){var n=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&n?dn.updateTime(n):dn.Kt()},e.prototype.rf=function(t){var n=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&n){if(n.isEqual(Ot.min()))throw new G(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dn.updateTime(n)}return dn.exists(!0)},e.prototype.write=function(t){this.nf(),this.mutations.push(t)},e.prototype.nf=function(){},e}(),UW=function(){function e(t,n,r,i){this._s=t,this.Sh=n,this.updateFunction=r,this.Es=i,this.cf=5,this.Gu=new Jw(this._s,"transaction_retry")}return e.prototype.run=function(){this.af()},e.prototype.af=function(){var t=this;this.Gu.Lu(function(){return R(t,void 0,void 0,function(){var n,r,i=this;return N(this,function(s){return n=new FW(this.Sh),(r=this.uf(n))&&r.then(function(a){i._s.Ps(function(){return n.commit().then(function(){i.Es.resolve(a)}).catch(function(c){i.hf(c)})})}).catch(function(a){i.hf(a)}),[2]})})})},e.prototype.uf=function(t){try{var n=this.updateFunction(t);return!qs(n)&&n.catch&&n.then?n:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.Es.reject(r),null}},e.prototype.hf=function(t){var n=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps(function(){return n.af(),Promise.resolve()})):this.Es.reject(t)},e.prototype.lf=function(t){if(t.name==="FirebaseError"){var n=t.code;return n==="aborted"||n==="failed-precondition"||!WO(n)}return!1},e}(),jW=function(){function e(t,n,r){var i=this;this.credentials=t,this._s=n,this.yu=r,this.user=tr.UNAUTHENTICATED,this.clientId=SO.u(),this._f=function(){},this.C=new kn,this.credentials.v(function(s){Y("FirestoreClient","Received user=",s.uid),i.user=s,i._f(s),i.C.resolve()})}return e.prototype.getConfiguration=function(){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}})})},e.prototype.ff=function(t){var n=this;this._f=t,this.C.promise.then(function(){return n._f(n.user)})},e.prototype.df=function(){if(this._s.wf)throw new G(k.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var t=this;this._s.Ef();var n=new kn;return this._s.Tf(function(){return R(t,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:s.sent(),s.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:s.sent(),s.label=4;case 4:return this.credentials.S(),n.resolve(),[3,6];case 5:return r=s.sent(),i=Pu(r,"Failed to shutdown persistence"),n.reject(i),[3,6];case 6:return[2]}})})}),n.promise},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(e,t){return R(this,void 0,void 0,function(){var n,r,i=this;return N(this,function(s){switch(s.label){case 0:return e._s.Af(),Y("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=s.sent(),[4,t.initialize(n)];case 2:return s.sent(),r=n.Jl,e.ff(function(a){r.isEqual(a)||(r=a,e._s.po(function(){return R(i,void 0,void 0,function(){return N(this,function(c){switch(c.label){case 0:return[4,wx(t.bh,a)];case 1:return c.sent(),[2]}})})}))}),t.persistence.Po(function(){return e.terminate()}),e.mf=t,[2]}})})}function eP(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return e._s.Af(),[4,_b(e)];case 1:return n=i.sent(),Y("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.ff(function(s){return e._s.po(function(){return function(a,c){return R(this,void 0,void 0,function(){var l,h;return N(this,function(p){switch(p.label){case 0:return(l=Z(a))._s.Af(),Y("RemoteStore","RemoteStore received new credentials"),h=Uo(l),l.Nh.add(3),[4,Du(l)];case 1:return p.sent(),h&&l.Oh.set("Unknown"),[4,l.Dh.n_(c)];case 2:return p.sent(),l.Nh.delete(3),[4,rf(l)];case 3:return p.sent(),[2]}})})}(t.yl,s)})}),e.If=t,[2]}})})}function _b(e){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return e.mf?[3,2]:(Y("FirestoreClient","Using default OfflineComponentProvider"),[4,tP(e,new Vx)]);case 1:t.sent(),t.label=2;case 2:return[2,e.mf]}})})}function bd(e){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return e.If?[3,2]:(Y("FirestoreClient","Using default OnlineComponentProvider"),[4,eP(e,new s_)]);case 1:t.sent(),t.label=2;case 2:return[2,e.If]}})})}function dC(e){return _b(e).then(function(t){return t.persistence})}function wb(e){return _b(e).then(function(t){return t.bh})}function vC(e){return bd(e).then(function(t){return t.yl})}function bb(e){return bd(e).then(function(t){return t._a})}function yu(e){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return[4,bd(e)];case 1:return t=r.sent(),[2,((n=t.gl).jh=cW.bind(null,t._a),n.Hh=lW.bind(null,t._a),n)]}})})}function gC(e,t,n){var r=this;n===void 0&&(n={});var i=new kn;return e._s.Ps(function(){return R(r,void 0,void 0,function(){var s;return N(this,function(a){switch(a.label){case 0:return s=function(c,l,h,p,v){var m=new md({next:function(b){l.Ps(function(){return rb(c,y)});var E=b.docs.has(h);!E&&b.fromCache?v.reject(new G(k.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&b.fromCache&&p&&p.source==="server"?v.reject(new G(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(b)},error:function(b){return v.reject(b)}}),y=new ob(xu(h.path),m,{includeMetadataChanges:!0,nl:!0});return nb(c,y)},[4,yu(e)];case 1:return[2,s.apply(void 0,[a.sent(),e._s,t,n,i])]}})})}),i.promise}function mC(e,t,n){var r=this;n===void 0&&(n={});var i=new kn;return e._s.Ps(function(){return R(r,void 0,void 0,function(){var s;return N(this,function(a){switch(a.label){case 0:return s=function(c,l,h,p,v){var m=new md({next:function(b){l.Ps(function(){return rb(c,y)}),b.fromCache&&p.source==="server"?v.reject(new G(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(b)},error:function(b){return v.reject(b)}}),y=new ob(h,m,{includeMetadataChanges:!0,nl:!0});return nb(c,y)},[4,yu(e)];case 1:return[2,s.apply(void 0,[a.sent(),e._s,t,n,i])]}})})}),i.promise}var VW=function(){function e(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new Jw(this,"async_queue_retry"),this.vf=function(){var r=qh();r&&Y("AsyncQueue","Visibility state changed to "+r.visibilityState),t.Gu.qu()};var n=qh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(e.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),e.prototype.Ps=function(t){this.enqueue(t)},e.prototype.Tf=function(t){this.Sf(),this.Df(t)},e.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=qh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.vf)}},e.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(n){}):this.Df(t)},e.prototype.po=function(t){var n=this;this.Ps(function(){return n.Pf.push(t),n.Cf()})},e.prototype.Cf=function(){return R(this,void 0,void 0,function(){var t,n=this;return N(this,function(r){switch(r.label){case 0:if(this.Pf.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return r.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!Hs(t=r.sent()))throw t;return Y("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu(function(){return n.Cf()}),r.label=5;case 5:return[2]}})})},e.prototype.Df=function(t){var n=this,r=this.Rf.then(function(){return n.pf=!0,t().catch(function(i){throw n.Vf=i,n.pf=!1,Pe("INTERNAL UNHANDLED ERROR: ",function(s){var a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i)),i}).then(function(i){return n.pf=!1,i})});return this.Rf=r,r},e.prototype.Tr=function(t,n,r){var i=this;this.Sf(),this.bf.indexOf(t)>-1&&(n=0);var s=tG.Ts(this,t,n,r,function(a){return i.xf(a)});return this.gf.push(s),s},e.prototype.Sf=function(){this.Vf&&ut()},e.prototype.Af=function(){},e.prototype.Nf=function(){return R(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return[4,t=this.Rf];case 1:n.sent(),n.label=2;case 2:if(t!==this.Rf)return[3,0];n.label=3;case 3:return[2]}})})},e.prototype.$f=function(t){for(var n=0,r=this.gf;n<r.length;n++)if(r[n].fs===t)return!0;return!1},e.prototype.Ff=function(t){var n=this;return this.Nf().then(function(){n.gf.sort(function(a,c){return a.ds-c.ds});for(var r=0,i=n.gf;r<i.length;r++){var s=i[r];if(s.Rs(),t!=="all"&&s.fs===t)break}return n.Nf()})},e.prototype.Of=function(t){this.bf.push(t)},e.prototype.xf=function(t){var n=this.gf.indexOf(t);this.gf.splice(n,1)},e}();function _u(e){return function(t,n){if(typeof t!="object"||t===null)return!1;for(var r=t,i=0,s=["next","error","complete"];i<s.length;i++){var a=s[i];if(a in r&&typeof r[a]=="function")return!0}return!1}(e)}var BW=function(){function e(){this.kf={},this.Mf=new kn,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(t,n,r){this.kf={next:t,error:n,complete:r}},e.prototype.catch=function(t){return this.Mf.promise.catch(t)},e.prototype.then=function(t,n){return this.Mf.promise.then(t,n)},e.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},e.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},e.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)},e}(),qW=-1,Se=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).Bf=new VW,i.w_="name"in n?n.name:"[DEFAULT]",i}return J(t,e),t.prototype.b_=function(){return this.qf||nP(this),this.qf.terminate()},t}(Rl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(e){return e.qf||nP(e),e.qf.df(),e.qf}function nP(e){var t=e.p_(),n=function(r,i,s){return new pH(r,i,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling)}(e.I_,e.w_,t);e.qf=new jW(e.m_,e.Bf,n)}function yC(e,t,n){var r=this,i=new kn;return e._s.enqueue(function(){return R(r,void 0,void 0,function(){var s;return N(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,tP(e,n)];case 1:return a.sent(),[4,eP(e,t)];case 2:return a.sent(),i.resolve(),[3,4];case 3:if(!function(c){return c.name==="FirebaseError"?c.code===k.FAILED_PRECONDITION||c.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(s=a.sent()))throw s;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function _C(e){if(e.R_||e.P_)throw new G(k.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Eb=function(){function e(){}return e.prototype.Uf=function(t,n){switch(n===void 0&&(n="none"),xo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return xe(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,n);case 5:return t.stringValue;case 6:return this.Wf(ou(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,n);case 10:return this.Hf(t.mapValue,n);default:throw ut()}},e.prototype.Hf=function(t,n){var r=this,i={};return Kl(t.fields||{},function(s,a){i[s]=r.Uf(a,n)}),i},e.prototype.Gf=function(t){return new _d(xe(t.latitude),xe(t.longitude))},e.prototype.zf=function(t,n){var r=this;return(t.values||[]).map(function(i){return r.Uf(i,n)})},e.prototype.Kf=function(t,n){switch(n){case"previous":var r=RO(t);return r==null?null:this.Uf(r,n);case"estimate":return this.Qf(bl(t));default:return null}},e.prototype.Qf=function(t){var n=Oo(t);return new Hn(n.seconds,n.nanos)},e.prototype.Jf=function(t,n){var r=Ht.ot(t);yt(sx(r));var i=new vp(r.get(1),r.get(3)),s=new ht(r.Y(5));return i.isEqual(n)||Pe("Document "+s+" contains a document reference within a different database ("+i.projectId+"/"+i.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),s},e}(),Ol=function(){function e(t,n,r,i,s){this.Yf=t,this.Xf=n,this.S_=r,this.Zf=i,this.v_=s}return Object.defineProperty(e.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new de(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return this.Zf!==null},e.prototype.data=function(){if(this.Zf){if(this.v_){var t=new HW(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},e.prototype.get=function(t){if(this.Zf){var n=this.Zf.data().field(Op("DocumentSnapshot.get",t));if(n!==null)return this.Xf.Uf(n)}},e}(),HW=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return J(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(Ol);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(e,t){return typeof t=="string"?yb(e,t):t instanceof Mt?t.d_.f_:t.f_}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(e){if(bp(e)&&e.xt.length===0)throw new G(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var of=function(){};function uo(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var s=i[r];e=s.td(e)}return e}var GW=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).ed=n,s.nd=r,s.sd=i,s.type="where",s}return J(t,e),t.prototype.td=function(n){var r=$s(n.firestore),i=function(s,a,c,l,h,p,v){var m;if(h.ut()){if(p==="array-contains"||p==="array-contains-any")throw new G(k.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+p+"' queries on FieldPath.documentId().");if(p==="in"||p==="not-in"){TC(v,p);for(var y=[],b=0,E=v;b<E.length;b++){var I=E[b];y.push(IC(l,s,I))}m={arrayValue:{values:y}}}else m=IC(l,s,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||TC(v,p),m=Yx(c,"where",v,p==="in"||p==="not-in");var C=ir.create(h,p,m);return function(P,D){if(D.Ct()){var F=Uw(P);if(F!==null&&!F.isEqual(D.field))throw new G(k.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+F.toString()+"' and '"+D.field.toString()+"'");var Q=Fw(P);Q!==null&&oP(P,D.field,Q)}var U=function(_t,Wt){for(var lt=0,Ze=_t.filters;lt<Ze.length;lt++){var O=Ze[lt];if(Wt.indexOf(O.op)>=0)return O.op}return null}(P,function(_t){switch(_t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(D.op));if(U!==null)throw U===D.op?new G(k.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+D.op.toString()+"' filter."):new G(k.INVALID_ARGUMENT,"Invalid query. You cannot use '"+D.op.toString()+"' filters with '"+U.toString()+"' filters.")}(s,C),C}(n.C_,0,r,n.firestore.I_,this.ed,this.nd,this.sd);return new Gn(n.firestore,n.v_,function(s,a){var c=s.filters.concat([a]);return new $i(s.path,s.collectionGroup,s.xt.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(n.C_,i))},t}(of),WW=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).ed=n,i.rd=r,i.type="orderBy",i}return J(t,e),t.prototype.td=function(n){var r=function(i,s,a){if(i.startAt!==null)throw new G(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var c=new Wa(s,a);return function(l,h){if(Fw(l)===null){var p=Uw(l);p!==null&&oP(l,p,h.field)}}(i,c),c}(n.C_,this.ed,this.rd);return new Gn(n.firestore,n.v_,function(i,s){var a=i.xt.concat([s]);return new $i(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(n.C_,r))},t}(of),wC=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.od=r,s.ad=i,s}return J(t,e),t.prototype.td=function(n){return new Gn(n.firestore,n.v_,DO(n.C_,this.od,this.ad))},t}(of),bC=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.ud=r,s.hd=i,s}return J(t,e),t.prototype.td=function(n){var r=iP(n,this.type,this.ud,this.hd);return new Gn(n.firestore,n.v_,function(i,s){return new $i(i.path,i.collectionGroup,i.xt.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(n.C_,r))},t}(of),EC=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.ud=r,s.hd=i,s}return J(t,e),t.prototype.td=function(n){var r=iP(n,this.type,this.ud,this.hd);return new Gn(n.firestore,n.v_,function(i,s){return new $i(i.path,i.collectionGroup,i.xt.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(n.C_,r))},t}(of);function iP(e,t,n,r){if(n[0]instanceof Mt&&(n[0]=n[0].d_),n[0]instanceof Ol)return function(s,a,c,l,h){if(!l)throw new G(k.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var p=[],v=0,m=au(s);v<m.length;v++){var y=m[v];if(y.field.ut())p.push(yp(a,l.key));else{var b=l.field(y.field);if(xw(b))throw new G(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){var E=y.field.rt();throw new G(k.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+E+"' (used as the orderBy) does not exist.")}p.push(b)}}return new Il(p,h)}(e.C_,e.firestore.I_,t,n[0].Zf,r);var i=$s(e.firestore);return function(s,a,c,l,h,p){var v=s.xt;if(h.length>v.length)throw new G(k.INVALID_ARGUMENT,"Too many arguments provided to "+l+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var m=[],y=0;y<h.length;y++){var b=h[y];if(v[y].field.ut()){if(typeof b!="string")throw new G(k.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+l+"(), but got a "+typeof b);if(!jw(s)&&b.indexOf("/")!==-1)throw new G(k.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+l+"() must be a plain document ID, but '"+b+"' contains a slash.");var E=s.path.child(Ht.ot(b));if(!ht.wt(E))throw new G(k.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+l+"() must result in a valid document path, but '"+E+"' is not because it contains an odd number of segments.");var I=new ht(E);m.push(yp(a,I))}else{var C=Yx(c,l,b);m.push(C)}}return new Il(m,p)}(e.C_,e.firestore.I_,i,t,n,r)}function IC(e,t,n){if(n instanceof Mt&&(n=n.d_),typeof n=="string"){if(n==="")throw new G(k.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!jw(t)&&n.indexOf("/")!==-1)throw new G(k.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(Ht.ot(n));if(!ht.wt(r))throw new G(k.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return yp(e,new ht(r))}if(n instanceof de)return yp(e,n.S_);throw new G(k.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+yd(n)+".")}function TC(e,t){if(!Array.isArray(e)||e.length===0)throw new G(k.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new G(k.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function oP(e,t,n){if(!n.isEqual(t))throw new G(k.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var $W=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return J(t,e),t.prototype.Wf=function(n){return new ks(n)},t.prototype.jf=function(n){var r=this.Jf(n,this.firestore.I_);return new de(this.firestore,null,r)},t}(Eb),ys=function(){function e(t,n){this.hasPendingWrites=t,this.fromCache=n}return e.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},e}(),Fi=function(e){function t(n,r,i,s,a,c){var l=this;return(l=e.call(this,n,r,i,s,c)||this).Yf=n,l.ld=n,l.metadata=a,l}return J(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(n){if(n===void 0&&(n={}),this.Zf){if(this.v_){var r=new Yc(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(r,n)}return this.Xf.Uf(this.Zf.bt(),n.serverTimestamps)}},t.prototype.get=function(n,r){if(r===void 0&&(r={}),this.Zf){var i=this.Zf.data().field(Op("DocumentSnapshot.get",n));if(i!==null)return this.Xf.Uf(i,r.serverTimestamps)}},t}(Ol),Yc=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return J(t,e),t.prototype.data=function(n){return n===void 0&&(n={}),e.prototype.data.call(this,n)},t}(Fi),yo=function(){function e(t,n,r,i){this.Yf=t,this.Xf=n,this._d=i,this.metadata=new ys(i.hasPendingWrites,i.fromCache),this.query=r}return Object.defineProperty(e.prototype,"docs",{get:function(){var t=[];return this.forEach(function(n){return t.push(n)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t,n){var r=this;this._d.docs.forEach(function(i){t.call(n,new Yc(r.Yf,r.Xf,i.key,i,new ys(r._d.De.has(i.key),r._d.fromCache),r.query.v_))})},e.prototype.docChanges=function(t){t===void 0&&(t={});var n=!!t.includeMetadataChanges;if(n&&this._d.xe)throw new G(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===n||(this.fd=function(r,i){if(r._d.Se.et()){var s=0;return r._d.docChanges.map(function(c){var l=new Yc(r.Yf,r.Xf,c.doc.key,c.doc,new ys(r._d.De.has(c.doc.key),r._d.fromCache),r.query.v_);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}var a=r._d.Se;return r._d.docChanges.filter(function(c){return i||c.type!==3}).map(function(c){var l=new Yc(r.Yf,r.Xf,c.doc.key,c.doc,new ys(r._d.De.has(c.doc.key),r._d.fromCache),r.query.v_),h=-1,p=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(p=(a=a.add(c.doc)).indexOf(c.doc.key)),{type:zW(c.type),doc:l,oldIndex:h,newIndex:p}})}(this,n),this.dd=n),this.fd},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zW(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function sP(e,t){return e instanceof Fi&&t instanceof Fi?e.Yf===t.Yf&&e.S_.isEqual(t.S_)&&(e.Zf===null?t.Zf===null:e.Zf.isEqual(t.Zf))&&e.v_===t.v_:e instanceof yo&&t instanceof yo&&e.Yf===t.Yf&&Wx(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._d.isEqual(t._d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var As=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return J(t,e),t.prototype.Wf=function(n){return new ks(n)},t.prototype.jf=function(n){var r=this.Jf(n,this.firestore.I_);return new de(this.firestore,null,r)},t}(Eb);function SC(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=qt(e,de);var s=qt(e.firestore,Se),a=$s(s);return t instanceof Mt&&(t=t.d_),xl(s,[(typeof t=="string"||t instanceof Mi?gb(a,"updateDoc",e.S_,t,n,r):vb(a,"updateDoc",e.S_,t)).F_(e.S_,dn.exists(!0))])}function aP(e){for(var t,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];e instanceof Mt&&(e=e.d_);var a={includeMetadataChanges:!1},c=0;typeof i[c]!="object"||_u(i[c])||(a=i[c],c++);var l,h,p,v={includeMetadataChanges:a.includeMetadataChanges};if(_u(i[c])){var m=i[c];i[c]=(t=m.next)===null||t===void 0?void 0:t.bind(m),i[c+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),i[c+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}if(e instanceof de)h=qt(e.firestore,Se),p=xu(e.S_.path),l={next:function(E){i[c]&&i[c](u_(h,e,E))},error:i[c+1],complete:i[c+2]};else{var y=qt(e,Gn);h=qt(y.firestore,Se),p=y.C_;var b=new As(h);l={next:function(E){i[c]&&i[c](new yo(h,b,y,E))},error:i[c+1],complete:i[c+2]},rP(e.C_)}return function(E,I,C,P){var D=this,F=new md(P),Q=new ob(I,F,C);return E._s.Ps(function(){return R(D,void 0,void 0,function(){var U;return N(this,function(_t){switch(_t.label){case 0:return U=nb,[4,yu(E)];case 1:return[2,U.apply(void 0,[_t.sent(),Q])]}})})}),function(){F.i_(),E._s.Ps(function(){return R(D,void 0,void 0,function(){var U;return N(this,function(_t){switch(_t.label){case 0:return U=rb,[4,yu(E)];case 1:return[2,U.apply(void 0,[_t.sent(),Q])]}})})})}}(Ye(h),p,v,l)}function xl(e,t){return function(n,r){var i=this,s=new kn;return n._s.Ps(function(){return R(i,void 0,void 0,function(){var a;return N(this,function(c){switch(c.label){case 0:return a=fW,[4,bb(n)];case 1:return[2,a.apply(void 0,[c.sent(),r,s])]}})})}),s.promise}(Ye(e),t)}function u_(e,t,n){var r=n.docs.get(t.S_),i=new As(e);return new Fi(e,i,t.S_,r,new ys(n.hasPendingWrites,n.fromCache),t.v_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KW=function(){function e(t,n){this.Yf=t,this.wd=n,this.Ed=[],this.Td=!1,this.Id=$s(t)}return e.prototype.set=function(t,n,r){this.md();var i=_o(t,this.Yf),s=Ed(i.v_,n,r),a=wd(this.Id,"WriteBatch.set",i.S_,s,i.v_!==null,r);return this.Ed.push(a.F_(i.S_,dn.Kt())),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];this.md();var a,c=_o(t,this.Yf);return n instanceof Mt&&(n=n.d_),a=typeof n=="string"||n instanceof Mi?gb(this.Id,"WriteBatch.update",c.S_,n,r,i):vb(this.Id,"WriteBatch.update",c.S_,n),this.Ed.push(a.F_(c.S_,dn.exists(!0))),this},e.prototype.delete=function(t){this.md();var n=_o(t,this.Yf);return this.Ed=this.Ed.concat(new ef(n.S_,dn.Kt())),this},e.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},e.prototype.md=function(){if(this.Td)throw new G(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();function _o(e,t){if(e instanceof Mt&&(e=e.d_),e.firestore!==t)throw new G(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QW=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).Yf=n,i}return J(t,e),t.prototype.get=function(n){var r=this,i=_o(n,this.Yf),s=new As(this.Yf);return e.prototype.get.call(this,n).then(function(a){return new Fi(r.Yf,s,i.S_,a.Zf,new ys(!1,!1),i.v_)})},t}(function(){function e(t,n){this.Yf=t,this.Ad=n,this.Id=$s(t)}return e.prototype.get=function(t){var n=this,r=_o(t,this.Yf),i=new $W(this.Yf);return this.Ad.ef([r.S_]).then(function(s){if(!s||s.length!==1)return ut();var a=s[0];if(a instanceof Be)return new Ol(n.Yf,i,r.S_,null,r.v_);if(a instanceof Zt)return new Ol(n.Yf,i,a.key,a,r.v_);throw ut()})},e.prototype.set=function(t,n,r){var i=_o(t,this.Yf),s=Ed(i.v_,n,r),a=wd(this.Id,"Transaction.set",i.S_,s,i.v_!==null,r);return this.Ad.set(i.S_,a),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var a,c=_o(t,this.Yf);return n instanceof Mt&&(n=n.d_),a=typeof n=="string"||n instanceof Mi?gb(this.Id,"Transaction.update",c.S_,n,r,i):vb(this.Id,"Transaction.update",c.S_,n),this.Ad.update(c.S_,a),this},e.prototype.delete=function(t){var n=_o(t,this.Yf);return this.Ad.delete(n.S_),this},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(){if(typeof Uint8Array>"u")throw new G(k.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function CC(){if(typeof atob>"u")throw new G(k.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var uP=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return J(t,e),t.fromBase64String=function(n){return CC(),new t(ks.fromBase64String(n))},t.fromUint8Array=function(n){return AC(),new t(ks.fromUint8Array(n))},t.prototype.toBase64=function(){return CC(),this.d_.toBase64()},t.prototype.toUint8Array=function(){return AC(),this.d_.toUint8Array()},t.prototype.isEqual=function(n){return this.d_.isEqual(n.d_)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(Mt),YW=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(t,n){return function(r,i){_C(r=qt(r,Se));var s=Ye(r),a=r.p_(),c=new s_;return yC(s,c,new Bx(c,a.cacheSizeBytes,i==null?void 0:i.forceOwnership))}(t.d_,{forceOwnership:n})},e.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(n){_C(n=qt(n,Se));var r=Ye(n),i=n.p_(),s=new s_;return yC(r,s,new CW(s,i.cacheSizeBytes))}(t.d_)},e.prototype.clearIndexedDbPersistence=function(t){return function(n){var r=this;if(n.R_&&!n.P_)throw new G(k.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new kn;return n.Bf.Tf(function(){return R(r,void 0,void 0,function(){var s;return N(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,function(c){return R(this,void 0,void 0,function(){var l;return N(this,function(h){switch(h.label){case 0:return lu.Kn()?(l=c+"main",[4,lu.delete(l)]):[2,Promise.resolve()];case 1:return h.sent(),[2]}})})}(Yw(n.I_,n.w_))];case 1:return a.sent(),i.resolve(),[3,3];case 2:return s=a.sent(),i.reject(s),[3,3];case 3:return[2]}})})}),i.promise}(t.d_)},e}(),Ib=function(e){function t(n,r,i){var s=this;return(s=e.call(this,r)||this).Rd=i,s.INTERNAL={delete:function(){return s.terminate()}},n instanceof vp||(s.Pd=n),s}return J(t,e),Object.defineProperty(t.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),t.prototype.settings=function(n){n.merge&&delete(n=Object.assign(Object.assign({},this.d_.V_()),n)).merge,this.d_.g_(n)},t.prototype.useEmulator=function(n,r){(function(i,s,a){var c=(i=qt(i,Rl)).V_();c.host!=="firestore.googleapis.com"&&c.host!==s&&gp("Host has been set in both settings() and useEmulator(), emulator host will be used"),i.g_(Object.assign(Object.assign({},c),{host:s+":"+a,ssl:!1}))})(this.d_,n,r)},t.prototype.enableNetwork=function(){return function(n){var r=this;return n._s.enqueue(function(){return R(r,void 0,void 0,function(){var i,s;return N(this,function(a){switch(a.label){case 0:return[4,dC(n)];case 1:return i=a.sent(),[4,vC(n)];case 2:return s=a.sent(),[2,(i.yo(!0),function(c){var l=Z(c);return l.Nh.delete(0),rf(l)}(s))]}})})})}(Ye(qt(this.d_,Se)))},t.prototype.disableNetwork=function(){return function(n){var r=this;return n._s.enqueue(function(){return R(r,void 0,void 0,function(){var i,s;return N(this,function(a){switch(a.label){case 0:return[4,dC(n)];case 1:return i=a.sent(),[4,vC(n)];case 2:return s=a.sent(),[2,(i.yo(!1),function(c){return R(this,void 0,void 0,function(){var l;return N(this,function(h){switch(h.label){case 0:return(l=Z(c)).Nh.add(0),[4,Du(l)];case 1:return h.sent(),l.Oh.set("Offline"),[2]}})})}(s))]}})})})}(Ye(qt(this.d_,Se)))},t.prototype.enablePersistence=function(n){var r=!1,i=!1;return n&&qx("synchronizeTabs",r=!!n.synchronizeTabs,"experimentalForceOwningTab",i=!!n.experimentalForceOwningTab),r?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,i)},t.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},t.prototype.waitForPendingWrites=function(){return function(n){var r=this,i=new kn;return n._s.Ps(function(){return R(r,void 0,void 0,function(){var s;return N(this,function(a){switch(a.label){case 0:return s=vW,[4,bb(n)];case 1:return[2,s.apply(void 0,[a.sent(),i])]}})})}),i.promise}(Ye(qt(this.d_,Se)))},t.prototype.onSnapshotsInSync=function(n){return function(r,i){return function(s,a){var c=this,l=new md(a);return s._s.Ps(function(){return R(c,void 0,void 0,function(){var h;return N(this,function(p){switch(p.label){case 0:return h=function(v,m){Z(v).Wh.add(m),m.next()},[4,yu(s)];case 1:return[2,h.apply(void 0,[p.sent(),l])]}})})}),function(){l.i_(),s._s.Ps(function(){return R(c,void 0,void 0,function(){var h;return N(this,function(p){switch(p.label){case 0:return h=function(v,m){Z(v).Wh.delete(m)},[4,yu(s)];case 1:return[2,h.apply(void 0,[p.sent(),l])]}})})})}}(Ye(r=qt(r,Se)),_u(i)?i:{next:i})}(this.d_,n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Pd)throw new G(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),t.prototype.collection=function(n){try{return new xp(this,Hx(this.d_,n))}catch(r){throw Cn(r,"collection()","Firestore.collection()")}},t.prototype.doc=function(n){try{return new Cs(this,Hh(this.d_,n))}catch(r){throw Cn(r,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(n){try{return new sf(this,function(r,i){if(r=qt(r,Rl),hb("collectionGroup","collection id",i),i.indexOf("/")>=0)throw new G(k.INVALID_ARGUMENT,"Invalid collection ID '"+i+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Gn(r,null,function(s){return new $i(Ht.ct(),s)}(i))}(this.d_,n))}catch(r){throw Cn(r,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(n){var r=this;return function(i,s){return function(a,c){var l=this,h=new kn;return a._s.Ps(function(){return R(l,void 0,void 0,function(){var p;return N(this,function(v){switch(v.label){case 0:return[4,function(m){return bd(m).then(function(y){return y.Sh})}(a)];case 1:return p=v.sent(),new UW(a._s,p,c,h).run(),[2]}})})}),h.promise}(Ye(i),function(a){return s(new QW(i,a))})}(this.d_,function(i){return n(new cP(r,i))})},t.prototype.batch=function(){var n=this;return Ye(this.d_),new lP(new KW(this.d_,function(r){return xl(n.d_,r)}))},t.prototype.loadBundle=function(n){throw new G(k.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(n){throw new G(k.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(Mt),Id=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return J(t,e),t.prototype.Wf=function(n){return new uP(new ks(n))},t.prototype.jf=function(n){var r=this.Jf(n,this.firestore.I_);return Cs.yd(r,this.firestore,null)},t}(Eb);function XW(e){var t;t=e,jr.setLogLevel(t)}var cP=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).Yf=n,i.Xf=new Id(n),i}return J(t,e),t.prototype.get=function(n){var r=this,i=_s(n);return this.d_.get(i).then(function(s){return new Pl(r.Yf,new Fi(r.Yf.d_,r.Xf,s.S_,s.Zf,s.metadata,i.v_))})},t.prototype.set=function(n,r,i){var s=_s(n);return i?(pb("Transaction.set",i),this.d_.set(s,r,i)):this.d_.set(s,r),this},t.prototype.update=function(n,r,i){for(var s,a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];var l=_s(n);return arguments.length===2?this.d_.update(l,r):(s=this.d_).update.apply(s,Ae([l,r,i],a)),this},t.prototype.delete=function(n){var r=_s(n);return this.d_.delete(r),this},t}(Mt),lP=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return J(t,e),t.prototype.set=function(n,r,i){var s=_s(n);return i?(pb("WriteBatch.set",i),this.d_.set(s,r,i)):this.d_.set(s,r),this},t.prototype.update=function(n,r,i){for(var s,a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];var l=_s(n);return arguments.length===2?this.d_.update(l,r):(s=this.d_).update.apply(s,Ae([l,r,i],a)),this},t.prototype.delete=function(n){var r=_s(n);return this.d_.delete(r),this},t.prototype.commit=function(){return this.d_.commit()},t}(Mt),Td=function(e){function t(n,r,i){var s=this;return(s=e.call(this,i)||this).Yf=n,s.Xf=r,s}return J(t,e),t.prototype.fromFirestore=function(n,r){var i=new Yc(this.Yf.d_,this.Xf,n.S_,n.Zf,n.metadata,null);return this.d_.fromFirestore(new kl(this.Yf,i),r??{})},t.prototype.toFirestore=function(n,r){return r?this.d_.toFirestore(n,r):this.d_.toFirestore(n)},t.gd=function(n,r){var i=t.Vd,s=i.get(n);s||(s=new WeakMap,i.set(n,s));var a=s.get(r);return a||(a=new t(n,new Id(n),r),s.set(r,a)),a},t}(Mt);Td.Vd=new WeakMap;var Cs=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).firestore=n,i.Xf=new Id(n),i}return J(t,e),t.pd=function(n,r,i){if(n.length%2!=0)throw new G(k.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+n.rt()+" has "+n.length);return new t(r,new de(r.d_,i,new ht(n)))},t.yd=function(n,r,i){return new t(r,new de(r.d_,i,n))},Object.defineProperty(t.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new xp(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(n){try{return new xp(this.firestore,Hx(this.d_,n))}catch(r){throw Cn(r,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(n){return n instanceof Mt&&(n=n.d_),n instanceof de&&Gx(this.d_,n)},t.prototype.set=function(n,r){r=pb("DocumentReference.set",r);try{return function(i,s,a){i=qt(i,de);var c=qt(i.firestore,Se),l=Ed(i.v_,s,a);return xl(c,[wd($s(c),"setDoc",i.S_,l,i.v_!==null,a).F_(i.S_,dn.Kt())])}(this.d_,n,r)}catch(i){throw Cn(i,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(n,r){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];try{return arguments.length===1?SC(this.d_,n):SC.apply(void 0,Ae([this.d_,n,r],i))}catch(a){throw Cn(a,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return xl(qt((n=this.d_).firestore,Se),[new ef(n.S_,dn.Kt())]);var n},t.prototype.onSnapshot=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=fP(r),a=hP(r,function(c){return new Pl(n.firestore,new Fi(n.firestore.d_,n.Xf,c.S_,c.Zf,c.metadata,n.d_.v_))});return aP(this.d_,s,a)},t.prototype.get=function(n){var r=this;return((n==null?void 0:n.source)==="cache"?function(i){i=qt(i,de);var s=qt(i.firestore,Se),a=Ye(s),c=new As(s);return function(l,h){var p=this,v=new kn;return l._s.Ps(function(){return R(p,void 0,void 0,function(){var m;return N(this,function(y){switch(y.label){case 0:return m=function(b,E,I){return R(this,void 0,void 0,function(){var C,P;return N(this,function(D){switch(D.label){case 0:return D.trys.push([0,2,,3]),[4,function(F,Q){var U=Z(F);return U.persistence.runTransaction("read document","readonly",function(_t){return U.Tc.Ho(_t,Q)})}(b,E)];case 1:return(P=D.sent())instanceof Zt?I.resolve(P):P instanceof Be?I.resolve(null):I.reject(new G(k.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return C=D.sent(),P=Pu(C,"Failed to get document '"+E+" from cache"),I.reject(P),[3,3];case 3:return[2]}})})},[4,wb(l)];case 1:return[2,m.apply(void 0,[y.sent(),h,v])]}})})}),v.promise}(a,i.S_).then(function(l){return new Fi(s,c,i.S_,l,new ys(l instanceof Zt&&l.Vt,!0),i.v_)})}(this.d_):(n==null?void 0:n.source)==="server"?function(i){i=qt(i,de);var s=qt(i.firestore,Se);return gC(Ye(s),i.S_,{source:"server"}).then(function(a){return u_(s,i,a)})}(this.d_):function(i){i=qt(i,de);var s=qt(i.firestore,Se);return gC(Ye(s),i.S_).then(function(a){return u_(s,i,a)})}(this.d_)).then(function(i){return new Pl(r.firestore,new Fi(r.firestore.d_,r.Xf,i.S_,i.Zf,i.metadata,r.d_.v_))})},t.prototype.withConverter=function(n){return new t(this.firestore,this.d_.withConverter(Td.gd(this.firestore,n)))},t}(Mt);function Cn(e,t,n){return e.message=e.message.replace(t,n),e}function fP(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(typeof r=="object"&&!_u(r))return r}return{}}function hP(e,t){var n,r,i;return{next:function(s){i.next&&i.next(t(s))},error:(n=(i=_u(e[0])?e[0]:_u(e[1])?e[1]:typeof e[0]=="function"?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Pl=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).Yf=n,i}return J(t,e),Object.defineProperty(t.prototype,"ref",{get:function(){return new Cs(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(n){return this.d_.data(n)},t.prototype.get=function(n,r){return this.d_.get(n,r)},t.prototype.isEqual=function(n){return sP(this.d_,n.d_)},t}(Mt),kl=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return J(t,e),t.prototype.data=function(n){return this.d_.data(n)},t}(Pl),sf=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).firestore=n,i.Xf=new Id(n),i}return J(t,e),t.prototype.where=function(n,r,i){try{return new t(this.firestore,uo(this.d_,function(s,a,c){var l=a,h=Op("where",s);return new GW(h,l,c)}(n,r,i)))}catch(s){throw Cn(s,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(n,r){try{return new t(this.firestore,uo(this.d_,function(i,s){s===void 0&&(s="asc");var a=s,c=Op("orderBy",i);return new WW(c,a)}(n,r)))}catch(i){throw Cn(i,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(n){try{return new t(this.firestore,uo(this.d_,function(r){return fC("limit",r),new wC("limit",r,"F")}(n)))}catch(r){throw Cn(r,"limit()","Query.limit()")}},t.prototype.limitToLast=function(n){try{return new t(this.firestore,uo(this.d_,function(r){return fC("limitToLast",r),new wC("limitToLast",r,"L")}(n)))}catch(r){throw Cn(r,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return new t(this.firestore,uo(this.d_,(function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new bC("startAt",i,!0)}).apply(void 0,n)))}catch(i){throw Cn(i,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return new t(this.firestore,uo(this.d_,(function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new bC("startAfter",i,!1)}).apply(void 0,n)))}catch(i){throw Cn(i,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return new t(this.firestore,uo(this.d_,(function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new EC("endBefore",i,!0)}).apply(void 0,n)))}catch(i){throw Cn(i,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return new t(this.firestore,uo(this.d_,(function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new EC("endAt",i,!1)}).apply(void 0,n)))}catch(i){throw Cn(i,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(n){return Wx(this.d_,n.d_)},t.prototype.get=function(n){var r=this;return((n==null?void 0:n.source)==="cache"?function(i){i=qt(i,Gn);var s=qt(i.firestore,Se),a=Ye(s),c=new As(s);return function(l,h){var p=this,v=new kn;return l._s.Ps(function(){return R(p,void 0,void 0,function(){var m;return N(this,function(y){switch(y.label){case 0:return m=function(b,E,I){return R(this,void 0,void 0,function(){var C,P,D,F,Q;return N(this,function(U){switch(U.label){case 0:return U.trys.push([0,2,,3]),[4,Cp(b,E,!0)];case 1:return Q=U.sent(),C=new Mx(E,Q.Rc),P=C.fl(Q.documents),D=C.wi(P,!1),I.resolve(D.snapshot),[3,3];case 2:return F=U.sent(),Q=Pu(F,"Failed to execute query '"+E+" against cache"),I.reject(Q),[3,3];case 3:return[2]}})})},[4,wb(l)];case 1:return[2,m.apply(void 0,[y.sent(),h,v])]}})})}),v.promise}(a,i.C_).then(function(l){return new yo(s,c,i,l)})}(this.d_):(n==null?void 0:n.source)==="server"?function(i){i=qt(i,Gn);var s=qt(i.firestore,Se),a=Ye(s),c=new As(s);return mC(a,i.C_,{source:"server"}).then(function(l){return new yo(s,c,i,l)})}(this.d_):function(i){i=qt(i,Gn);var s=qt(i.firestore,Se),a=Ye(s),c=new As(s);return rP(i.C_),mC(a,i.C_).then(function(l){return new yo(s,c,i,l)})}(this.d_)).then(function(i){return new c_(r.firestore,new yo(r.firestore.d_,r.Xf,r.d_,i._d))})},t.prototype.onSnapshot=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=fP(r),a=hP(r,function(c){return new c_(n.firestore,new yo(n.firestore.d_,n.Xf,n.d_,c._d))});return aP(this.d_,s,a)},t.prototype.withConverter=function(n){return new t(this.firestore,this.d_.withConverter(Td.gd(this.firestore,n)))},t}(Mt),JW=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).Yf=n,i}return J(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new kl(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),t}(Mt),c_=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).Yf=n,i}return J(t,e),Object.defineProperty(t.prototype,"query",{get:function(){return new sf(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var n=this;return this.d_.docs.map(function(r){return new kl(n.Yf,r)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(n){var r=this;return this.d_.docChanges(n).map(function(i){return new JW(r.Yf,i)})},t.prototype.forEach=function(n,r){var i=this;this.d_.forEach(function(s){n.call(r,new kl(i.Yf,s))})},t.prototype.isEqual=function(n){return sP(this.d_,n.d_)},t}(Mt),xp=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).firestore=n,i.d_=r,i}return J(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this.d_.parent;return n?new Cs(this.firestore,n):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(n){try{return new Cs(this.firestore,n===void 0?Hh(this.d_):Hh(this.d_,n))}catch(r){throw Cn(r,"doc()","CollectionReference.doc()")}},t.prototype.add=function(n){var r=this;return function(i,s){var a=qt(i.firestore,Se),c=Hh(i),l=Ed(i.v_,s);return xl(a,[wd($s(i.firestore),"addDoc",c.S_,l,i.v_!==null,{}).F_(c.S_,dn.exists(!1))]).then(function(){return c})}(this.d_,n).then(function(i){return new Cs(r.firestore,i)})},t.prototype.isEqual=function(n){return Gx(this.d_,n.d_)},t.prototype.withConverter=function(n){return new t(this.firestore,this.d_.withConverter(Td.gd(this.firestore,n)))},t}(sf);function _s(e){return e instanceof Mt&&(e=e.d_),qt(e,de)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZW=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.call(this,new(Mi.bind.apply(Mi,Ae([void 0],n))))||this}return J(t,e),t.documentId=function(){return new t(Hr.ht().rt())},t.prototype.isEqual=function(n){return n instanceof Mt&&(n=n.d_),n instanceof Mi&&this.d_.f_.isEqual(n.f_)},t}(Mt),t$=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return J(t,e),t.serverTimestamp=function(){var n=new PW("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new t(n)},t.delete=function(){var n=new db("deleteField");return n._methodName="FieldValue.delete",new t(n)},t.arrayUnion=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=(function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return new kW("arrayUnion",s)}).apply(void 0,n);return i._methodName="FieldValue.arrayUnion",new t(i)},t.arrayRemove=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=(function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return new DW("arrayRemove",s)}).apply(void 0,n);return i._methodName="FieldValue.arrayRemove",new t(i)},t.increment=function(n){var r=function(i){return new LW("increment",i)}(n);return r._methodName="FieldValue.increment",new t(r)},t.prototype.isEqual=function(n){return this.d_.isEqual(n.d_)},t}(Mt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e$(e){return function(t,n){var r=Ye(t=qt(t,Se)),i=new BW;return function(s,a,c,l){var h=this,p=function(v,m){return function(y,b){return new NW(y,b)}(function(y,b){if(y instanceof Uint8Array)return uC(y,b);if(y instanceof ArrayBuffer)return uC(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(typeof v=="string"?new TextEncoder().encode(v):v),m)}(c,nf(a));s._s.Ps(function(){return R(h,void 0,void 0,function(){var v;return N(this,function(m){switch(m.label){case 0:return v=AW,[4,bb(s)];case 1:return v.apply(void 0,[m.sent(),p,l]),[2]}})})})}(r,t.I_,n,i),i}(this.d_,e)}function n$(e){var t,n,r=this;return(t=this.d_,n=e,function(i,s){var a=this;return i._s.enqueue(function(){return R(a,void 0,void 0,function(){var c;return N(this,function(l){switch(l.label){case 0:return c=function(h,p){var v=Z(h);return v.persistence.runTransaction("Get named query","readonly",function(m){return v.wo.Ms(m,p)})},[4,wb(i)];case 1:return[2,c.apply(void 0,[l.sent(),s])]}})})})}(Ye(t=qt(t,Se)),n).then(function(i){return i?new Gn(t,null,i.query):null})).then(function(i){return i?new sf(r,i):null})}var r$={Firestore:Ib,GeoPoint:_d,Timestamp:Hn,Blob:uP,Transaction:cP,WriteBatch:lP,DocumentReference:Cs,DocumentSnapshot:Pl,Query:sf,QueryDocumentSnapshot:kl,QuerySnapshot:c_,CollectionReference:xp,FieldPath:ZW,FieldValue:t$,setLogLevel:XW,CACHE_SIZE_UNLIMITED:qW};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i$(e){(function(t,n){t.INTERNAL.registerComponent(new zn("firestore",function(r){var i=r.getProvider("app").getImmediate();return n(i,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},r$)))})(e,function(t,n){return new Ib(t,new Se(t,n),new YW)}),e.registerVersion("@firebase/firestore","2.1.6")}i$(at);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(e){e.prototype.loadBundle=e$,e.prototype.namedQuery=n$}o$(Ib);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NC={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$a=function(e){J(t,e);function t(n,r,i){var s=e.call(this,r)||this;return Object.setPrototypeOf(s,t.prototype),s.code=n,s.details=i,s}return t}(Error);function s$(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function a$(e,t,n){var r=s$(e),i=r,s=void 0;try{var a=t&&t.error;if(a){var c=a.status;if(typeof c=="string"){if(!NC[c])return new $a("internal","internal");r=NC[c],i=c}var l=a.message;typeof l=="string"&&(i=l),s=a.details,s!==void 0&&(s=n.decode(s))}}catch{}return r==="ok"?null:new $a(r,i,s)}var u$=function(){function e(t,n){var r=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(function(i){return r.auth=i},function(){}),this.messaging||n.get().then(function(i){return r.messaging=i},function(){})}return e.prototype.getAuthToken=function(){return R(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:if(!this.auth)return[2,void 0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return t=n.sent(),t?[2,t.accessToken]:[2,void 0];case 3:return n.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getInstanceIdToken=function(){return R(this,void 0,void 0,function(){return N(this,function(t){if(!this.messaging||!("Notification"in self)||Notification.permission!=="granted")return[2,void 0];try{return[2,this.messaging.getToken()]}catch{return[2,void 0]}return[2]})})},e.prototype.getContext=function(){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return[4,this.getAuthToken()];case 1:return t=r.sent(),[4,this.getInstanceIdToken()];case 2:return n=r.sent(),[2,{authToken:t,instanceIdToken:n}]}})})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var c$="type.googleapis.com/google.protobuf.Int64Value",l$="type.googleapis.com/google.protobuf.UInt64Value";function RC(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var f$=function(){function e(){}return e.prototype.encode=function(t){var n=this;if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(Array.isArray(t))return t.map(function(r){return n.encode(r)});if(typeof t=="function"||typeof t=="object")return RC(t,function(r){return n.encode(r)});throw new Error("Data cannot be encoded in JSON: "+t)},e.prototype.decode=function(t){var n=this;if(t==null)return t;if(t["@type"])switch(t["@type"]){case c$:case l$:{var r=Number(t.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+t);return r}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(i){return n.decode(i)}):typeof t=="function"||typeof t=="object"?RC(t,function(i){return n.decode(i)}):t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$(e){var t,n=new Promise(function(r,i){t=setTimeout(function(){i(new $a("deadline-exceeded","deadline-exceeded"))},e)});return{timer:t,promise:n}}var OC=function(){function e(t,n,r,i,s){var a=this;i===void 0&&(i="us-central1"),this.app_=t,this.fetchImpl=s,this.serializer=new f$,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new u$(n,r),this.cancelAllRequests=new Promise(function(l){a.deleteService=function(){return l()}});try{var c=new URL(i);this.customDomain=c.origin,this.region="us-central1"}catch{this.customDomain=null,this.region=i}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(t){var n=this.app_.options.projectId;if(this.emulatorOrigin!==null){var r=this.emulatorOrigin;return r+"/"+n+"/"+this.region+"/"+t}return this.customDomain!==null?this.customDomain+"/"+t:"https://"+this.region+"-"+n+".cloudfunctions.net/"+t},e.prototype.useEmulator=function(t,n){this.emulatorOrigin="http://"+t+":"+n},e.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},e.prototype.httpsCallable=function(t,n){var r=this;return function(i){return r.call(t,i,n||{})}},e.prototype.postJSON=function(t,n,r){return R(this,void 0,void 0,function(){var i,s;return N(this,function(a){switch(a.label){case 0:r["Content-Type"]="application/json",a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(n),headers:r})];case 2:return i=a.sent(),[3,4];case 3:return a.sent(),[2,{status:0,json:null}];case 4:s=null,a.label=5;case 5:return a.trys.push([5,7,,8]),[4,i.json()];case 6:return s=a.sent(),[3,8];case 7:return a.sent(),[3,8];case 8:return[2,{status:i.status,json:s}]}})})},e.prototype.call=function(t,n,r){return R(this,void 0,void 0,function(){var i,s,a,c,l,h,p,v,m,y,b,E;return N(this,function(I){switch(I.label){case 0:return i=this._url(t),n=this.serializer.encode(n),s={data:n},a={},[4,this.contextProvider.getContext()];case 1:return c=I.sent(),c.authToken&&(a.Authorization="Bearer "+c.authToken),c.instanceIdToken&&(a["Firebase-Instance-ID-Token"]=c.instanceIdToken),l=r.timeout||7e4,h=h$(l),p=h.timer,v=h.promise,[4,Promise.race([xC(p,this.postJSON(i,s,a)),v,xC(p,this.cancelAllRequests)])];case 2:if(m=I.sent(),!m)throw new $a("cancelled","Firebase Functions instance was deleted.");if(y=a$(m.status,m.json,this.serializer),y)throw y;if(!m.json)throw new $a("internal","Response is not valid JSON object.");if(b=m.json.data,typeof b>"u"&&(b=m.json.result),typeof b>"u")throw new $a("internal","Response is missing data field.");return E=this.serializer.decode(b),[2,{data:E}]}})})},e}();function xC(e,t){return R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p$="functions";function d$(e,t){var n={Functions:OC};function r(i,s){var a=i.getProvider("app").getImmediate(),c=i.getProvider("auth-internal"),l=i.getProvider("messaging");return new OC(a,c,l,s,t)}e.INTERNAL.registerComponent(new zn(p$,r,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}var v$="@firebase/functions",g$="0.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */d$(at,fetch.bind(self));at.registerVersion(v$,g$);function m$(e){return Array.prototype.slice.call(e)}function pP(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function Sd(e,t,n){var r,i=new Promise(function(s,a){r=e[t].apply(e,n),pP(r).then(s,a)});return i.request=r,i}function y$(e,t,n){var r=Sd(e,t,n);return r.then(function(i){if(i)return new Dl(i,r.request)})}function Fu(e,t,n){n.forEach(function(r){Object.defineProperty(e.prototype,r,{get:function(){return this[t][r]},set:function(i){this[t][r]=i}})})}function Tb(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return Sd(this[t],i,arguments)})})}function Ad(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return this[t][i].apply(this[t],arguments)})})}function dP(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return y$(this[t],i,arguments)})})}function Ks(e){this._index=e}Fu(Ks,"_index",["name","keyPath","multiEntry","unique"]);Tb(Ks,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]);dP(Ks,"_index",IDBIndex,["openCursor","openKeyCursor"]);function Dl(e,t){this._cursor=e,this._request=t}Fu(Dl,"_cursor",["direction","key","primaryKey","value"]);Tb(Dl,"_cursor",IDBCursor,["update","delete"]);["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(Dl.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,n),pP(t._request).then(function(r){if(r)return new Dl(r,t._request)})})})});function gi(e){this._store=e}gi.prototype.createIndex=function(){return new Ks(this._store.createIndex.apply(this._store,arguments))};gi.prototype.index=function(){return new Ks(this._store.index.apply(this._store,arguments))};Fu(gi,"_store",["name","keyPath","indexNames","autoIncrement"]);Tb(gi,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]);dP(gi,"_store",IDBObjectStore,["openCursor","openKeyCursor"]);Ad(gi,"_store",IDBObjectStore,["deleteIndex"]);function af(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}af.prototype.objectStore=function(){return new gi(this._tx.objectStore.apply(this._tx,arguments))};Fu(af,"_tx",["objectStoreNames","mode"]);Ad(af,"_tx",IDBTransaction,["abort"]);function Cd(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new af(n)}Cd.prototype.createObjectStore=function(){return new gi(this._db.createObjectStore.apply(this._db,arguments))};Fu(Cd,"_db",["name","version","objectStoreNames"]);Ad(Cd,"_db",IDBDatabase,["deleteObjectStore","close"]);function Nd(e){this._db=e}Nd.prototype.transaction=function(){return new af(this._db.transaction.apply(this._db,arguments))};Fu(Nd,"_db",["name","version","objectStoreNames"]);Ad(Nd,"_db",IDBDatabase,["close"]);["openCursor","openKeyCursor"].forEach(function(e){[gi,Ks].forEach(function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var n=m$(arguments),r=n[n.length-1],i=this._store||this._index,s=i[e].apply(i,n.slice(0,-1));s.onsuccess=function(){r(s.result)}})})});[Ks,gi].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(s){r.iterateCursor(t,function(a){if(!a){s(i);return}if(i.push(a.value),n!==void 0&&i.length==n){s(i);return}a.continue()})})})});function Sb(e,t,n){var r=Sd(indexedDB,"open",[e,t]),i=r.request;return i&&(i.onupgradeneeded=function(s){n&&n(new Cd(i.result,s.oldVersion,i.transaction))}),r.then(function(s){return new Nd(s)})}function $m(e){return Sd(indexedDB,"deleteDatabase",[e])}var _$="@firebase/installations",vP="0.4.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gP=1e4,mP="w:"+vP,yP="FIS_v2",w$="https://firebaseinstallations.googleapis.com/v1",b$=60*60*1e3,E$="installations",I$="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var co,T$=(co={},co["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',co["not-registered"]="Firebase Installation is not registered.",co["installation-not-found"]="Firebase Installation not found.",co["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',co["app-offline"]="Could not process request. Application offline.",co["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",co),qi=new Do(E$,I$,T$);function _P(e){return e instanceof Au&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(e){var t=e.projectId;return w$+"/projects/"+t+"/installations"}function wP(e){return{token:e.token,requestStatus:2,expiresIn:S$(e.expiresIn),creationTime:Date.now()}}function Cb(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,qi.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}})})}function bP(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function EP(e,t){var n=t.refreshToken,r=bP(e);return r.append("Authorization",A$(n)),r}function Nb(e){return R(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return t=n.sent(),t.status>=500&&t.status<600?[2,e()]:[2,t]}})})}function S$(e){return Number(e.replace("s","000"))}function A$(e){return yP+" "+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C$(e,t){var n=t.fid;return R(this,void 0,void 0,function(){var r,i,s,a,c,l,h;return N(this,function(p){switch(p.label){case 0:return r=Ab(e),i=bP(e),s={fid:n,authVersion:yP,appId:e.appId,sdkVersion:mP},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,Nb(function(){return fetch(r,a)})];case 1:return c=p.sent(),c.ok?[4,c.json()]:[3,3];case 2:return l=p.sent(),h={fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:wP(l.authToken)},[2,h];case 3:return[4,Cb("Create Installation",c)];case 4:throw p.sent()}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N$(e){var t=btoa(String.fromCharCode.apply(String,Wi(e)));return t.replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var R$=/^[cdef][\w-]{21}$/,l_="";function O$(){try{var e=new Uint8Array(17),t=self.crypto||self.msCrypto;t.getRandomValues(e),e[0]=112+e[0]%16;var n=x$(e);return R$.test(n)?n:l_}catch{return l_}}function x$(e){var t=N$(e);return t.substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(e){return e.appName+"!"+e.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wu=new Map;function TP(e,t){var n=Uu(e);SP(n,t),D$(n,t)}function P$(e,t){AP();var n=Uu(e),r=wu.get(n);r||(r=new Set,wu.set(n,r)),r.add(t)}function k$(e,t){var n=Uu(e),r=wu.get(n);r&&(r.delete(t),r.size===0&&wu.delete(n),CP())}function SP(e,t){var n,r,i=wu.get(e);if(i)try{for(var s=Te(i),a=s.next();!a.done;a=s.next()){var c=a.value;c(t)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}function D$(e,t){var n=AP();n&&n.postMessage({key:e,fid:t}),CP()}var ws=null;function AP(){return!ws&&"BroadcastChannel"in self&&(ws=new BroadcastChannel("[Firebase] FID Change"),ws.onmessage=function(e){SP(e.data.key,e.data.fid)}),ws}function CP(){wu.size===0&&ws&&(ws.close(),ws=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L$="firebase-installations-database",M$=1,Ms="firebase-installations-store",zm=null;function Rb(){return zm||(zm=Sb(L$,M$,function(e){switch(e.oldVersion){case 0:e.createObjectStore(Ms)}})),zm}function Pp(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a;return N(this,function(c){switch(c.label){case 0:return n=Uu(e),[4,Rb()];case 1:return r=c.sent(),i=r.transaction(Ms,"readwrite"),s=i.objectStore(Ms),[4,s.get(n)];case 2:return a=c.sent(),[4,s.put(t,n)];case 3:return c.sent(),[4,i.complete];case 4:return c.sent(),(!a||a.fid!==t.fid)&&TP(e,t.fid),[2,t]}})})}function Ob(e){return R(this,void 0,void 0,function(){var t,n,r;return N(this,function(i){switch(i.label){case 0:return t=Uu(e),[4,Rb()];case 1:return n=i.sent(),r=n.transaction(Ms,"readwrite"),[4,r.objectStore(Ms).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function uf(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c;return N(this,function(l){switch(l.label){case 0:return n=Uu(e),[4,Rb()];case 1:return r=l.sent(),i=r.transaction(Ms,"readwrite"),s=i.objectStore(Ms),[4,s.get(n)];case 2:return a=l.sent(),c=t(a),c!==void 0?[3,4]:[4,s.delete(n)];case 3:return l.sent(),[3,6];case 4:return[4,s.put(c,n)];case 5:l.sent(),l.label=6;case 6:return[4,i.complete];case 7:return l.sent(),c&&(!a||a.fid!==c.fid)&&TP(e,c.fid),[2,c]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(e){return R(this,void 0,void 0,function(){var t,n,r;return N(this,function(i){switch(i.label){case 0:return[4,uf(e,function(s){var a=F$(s),c=U$(e,a);return t=c.registrationPromise,c.installationEntry})];case 1:return n=i.sent(),n.fid!==l_?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function F$(e){var t=e||{fid:O$(),registrationStatus:0};return NP(t)}function U$(e,t){if(t.registrationStatus===0){if(!navigator.onLine){var n=Promise.reject(qi.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=j$(e,r);return{installationEntry:r,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:V$(e)}:{installationEntry:t}}function j$(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,C$(e,t)];case 1:return n=i.sent(),[2,Pp(e,n)];case 2:return r=i.sent(),_P(r)&&r.customData.serverCode===409?[4,Ob(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Pp(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}function V$(e){return R(this,void 0,void 0,function(){var t,n,r,i;return N(this,function(s){switch(s.label){case 0:return[4,PC(e)];case 1:t=s.sent(),s.label=2;case 2:return t.registrationStatus!==1?[3,5]:[4,IP(100)];case 3:return s.sent(),[4,PC(e)];case 4:return t=s.sent(),[3,2];case 5:return t.registrationStatus!==0?[3,7]:[4,xb(e)];case 6:return n=s.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,t]}})})}function PC(e){return uf(e,function(t){if(!t)throw qi.create("installation-not-found");return NP(t)})}function NP(e){return B$(e)?{fid:e.fid,registrationStatus:0}:e}function B$(e){return e.registrationStatus===1&&e.registrationTime+gP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q$(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return R(this,void 0,void 0,function(){var i,s,a,c,l,h,p,v;return N(this,function(m){switch(m.label){case 0:return i=H$(n,t),s=EP(n,t),a=r.getImmediate({optional:!0}),a&&s.append("x-firebase-client",a.getPlatformInfoString()),c={installation:{sdkVersion:mP}},l={method:"POST",headers:s,body:JSON.stringify(c)},[4,Nb(function(){return fetch(i,l)})];case 1:return h=m.sent(),h.ok?[4,h.json()]:[3,3];case 2:return p=m.sent(),v=wP(p),[2,v];case 3:return[4,Cb("Generate Auth Token",h)];case 4:throw m.sent()}})})}function H$(e,t){var n=t.fid;return Ab(e)+"/"+n+"/authTokens:generate"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(e,t){return t===void 0&&(t=!1),R(this,void 0,void 0,function(){var n,r,i,s;return N(this,function(a){switch(a.label){case 0:return[4,uf(e.appConfig,function(c){if(!RP(c))throw qi.create("not-registered");var l=c.authToken;if(!t&&$$(l))return c;if(l.requestStatus===1)return n=G$(e,t),c;if(!navigator.onLine)throw qi.create("app-offline");var h=K$(c);return n=W$(e,h),h})];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return s=a.sent(),[3,4];case 3:s=r.authToken,a.label=4;case 4:return i=s,[2,i]}})})}function G$(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return[4,kC(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return n.authToken.requestStatus!==1?[3,5]:[4,IP(100)];case 3:return i.sent(),[4,kC(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,r.requestStatus===0?[2,Pb(e,t)]:[2,r]}})})}function kC(e){return uf(e,function(t){if(!RP(t))throw qi.create("not-registered");var n=t.authToken;return Q$(n)?ee(ee({},t),{authToken:{requestStatus:0}}):t})}function W$(e,t){return R(this,void 0,void 0,function(){var n,i,r,i;return N(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,8]),[4,q$(e,t)];case 1:return n=s.sent(),i=ee(ee({},t),{authToken:n}),[4,Pp(e.appConfig,i)];case 2:return s.sent(),[2,n];case 3:return r=s.sent(),_P(r)&&(r.customData.serverCode===401||r.customData.serverCode===404)?[4,Ob(e.appConfig)]:[3,5];case 4:return s.sent(),[3,7];case 5:return i=ee(ee({},t),{authToken:{requestStatus:0}}),[4,Pp(e.appConfig,i)];case 6:s.sent(),s.label=7;case 7:throw r;case 8:return[2]}})})}function RP(e){return e!==void 0&&e.registrationStatus===2}function $$(e){return e.requestStatus===2&&!z$(e)}function z$(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+b$}function K$(e){var t={requestStatus:1,requestTime:Date.now()};return ee(ee({},e),{authToken:t})}function Q$(e){return e.requestStatus===1&&e.requestTime+gP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y$(e){return R(this,void 0,void 0,function(){var t,n,r;return N(this,function(i){switch(i.label){case 0:return[4,xb(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,r=t.registrationPromise,r?r.catch(console.error):Pb(e).catch(console.error),[2,n.fid]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X$(e,t){return t===void 0&&(t=!1),R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return[4,J$(e.appConfig)];case 1:return r.sent(),[4,Pb(e,t)];case 2:return n=r.sent(),[2,n.token]}})})}function J$(e){return R(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return[4,xb(e)];case 1:return t=n.sent().registrationPromise,t?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(e,t){return R(this,void 0,void 0,function(){var n,r,i,s;return N(this,function(a){switch(a.label){case 0:return n=tz(e,t),r=EP(e,t),i={method:"DELETE",headers:r},[4,Nb(function(){return fetch(n,i)})];case 1:return s=a.sent(),s.ok?[3,3]:[4,Cb("Delete Installation",s)];case 2:throw a.sent();case 3:return[2]}})})}function tz(e,t){var n=t.fid;return Ab(e)+"/"+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ez(e){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return t=e.appConfig,[4,uf(t,function(i){if(!(i&&i.registrationStatus===0))return i})];case 1:if(n=r.sent(),!n)return[3,6];if(n.registrationStatus!==1)return[3,2];throw qi.create("delete-pending-registration");case 2:if(n.registrationStatus!==2)return[3,6];if(navigator.onLine)return[3,3];throw qi.create("app-offline");case 3:return[4,Z$(t,n)];case 4:return r.sent(),[4,Ob(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nz(e,t){var n=e.appConfig;return P$(n,t),function(){k$(n,t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(e){var t,n;if(!e||!e.options)throw Km("App Configuration");if(!e.name)throw Km("App Name");var r=["projectId","apiKey","appId"];try{for(var i=Te(r),s=i.next();!s.done;s=i.next()){var a=s.value;if(!e.options[a])throw Km(a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Km(e){return qi.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iz(e){var t="installations";e.INTERNAL.registerComponent(new zn(t,function(n){var r=n.getProvider("app").getImmediate(),i=rz(r),s=n.getProvider("platform-logger"),a={appConfig:i,platformLoggerProvider:s},c={app:r,getId:function(){return Y$(a)},getToken:function(l){return X$(a,l)},delete:function(){return ez(a)},onIdChange:function(l){return nz(a,l)}};return c},"PUBLIC")),e.registerVersion(_$,vP)}iz(at);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,oz=(Me={},Me["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Me["only-available-in-window"]="This method is available in a Window context.",Me["only-available-in-sw"]="This method is available in a service worker context.",Me["permission-default"]="The notification permission was not granted and dismissed instead.",Me["permission-blocked"]="The notification permission was not granted and blocked instead.",Me["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Me["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Me["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Me["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Me["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Me["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Me["token-update-no-token"]="FCM returned no token when updating the user to push.",Me["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Me["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Me["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Me["invalid-vapid-key"]="The public VAPID key must be a string.",Me["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Me),Kt=new Do("messaging","Messaging",oz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sz="/firebase-messaging-sw.js",az="/firebase-cloud-messaging-push-scope",kp="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",uz="https://fcmregistrations.googleapis.com/v1",OP="FCM_MSG",cz="FirebaseMessaging: ",lz="google.c.a.e",xP="google.c.a.c_id",fz="google.c.a.ts",hz="google.c.a.c_l",pz=1e3,dz=3e3;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Fs;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(Fs||(Fs={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(e){var t=new Uint8Array(e),n=btoa(String.fromCharCode.apply(String,Wi(t)));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vz(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qm="fcm_token_details_db",gz=5,DC="fcm_token_object_Store";function mz(e){return R(this,void 0,void 0,function(){var t,n,r,i,s=this;return N(this,function(a){switch(a.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=a.sent(),n=t.map(function(c){return c.name}),!n.includes(Qm))return[2,null];a.label=2;case 2:return r=null,[4,Sb(Qm,gz,function(c){return R(s,void 0,void 0,function(){var l,h,p,p,p,v;return N(this,function(m){switch(m.label){case 0:return c.oldVersion<2?[2]:c.objectStoreNames.contains(DC)?(l=c.transaction.objectStore(DC),[4,l.index("fcmSenderId").get(e)]):[2];case 1:return h=m.sent(),[4,l.clear()];case 2:if(m.sent(),!h)return[2];if(c.oldVersion===2){if(p=h,!p.auth||!p.p256dh||!p.endpoint)return[2];r={token:p.fcmToken,createTime:(v=p.createTime)!==null&&v!==void 0?v:Date.now(),subscriptionOptions:{auth:p.auth,p256dh:p.p256dh,endpoint:p.endpoint,swScope:p.swScope,vapidKey:typeof p.vapidKey=="string"?p.vapidKey:Ri(p.vapidKey)}}}else c.oldVersion===3?(p=h,r={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:Ri(p.auth),p256dh:Ri(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:Ri(p.vapidKey)}}):c.oldVersion===4&&(p=h,r={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:Ri(p.auth),p256dh:Ri(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:Ri(p.vapidKey)}});return[2]}})})})];case 3:return i=a.sent(),i.close(),[4,$m(Qm)];case 4:return a.sent(),[4,$m("fcm_vapid_details_db")];case 5:return a.sent(),[4,$m("undefined")];case 6:return a.sent(),[2,yz(r)?r:null]}})})}function yz(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _z="firebase-messaging-database",wz=1,Us="firebase-messaging-store",Ym=null;function kb(){return Ym||(Ym=Sb(_z,wz,function(e){switch(e.oldVersion){case 0:e.createObjectStore(Us)}})),Ym}function Dp(e){return R(this,void 0,void 0,function(){var t,n,r,i;return N(this,function(s){switch(s.label){case 0:return t=Lb(e),[4,kb()];case 1:return n=s.sent(),[4,n.transaction(Us).objectStore(Us).get(t)];case 2:return r=s.sent(),r?[2,r]:[3,3];case 3:return[4,mz(e.appConfig.senderId)];case 4:return i=s.sent(),i?[4,Db(e,i)]:[3,6];case 5:return s.sent(),[2,i];case 6:return[2]}})})}function Db(e,t){return R(this,void 0,void 0,function(){var n,r,i;return N(this,function(s){switch(s.label){case 0:return n=Lb(e),[4,kb()];case 1:return r=s.sent(),i=r.transaction(Us,"readwrite"),[4,i.objectStore(Us).put(t,n)];case 2:return s.sent(),[4,i.complete];case 3:return s.sent(),[2,t]}})})}function bz(e){return R(this,void 0,void 0,function(){var t,n,r;return N(this,function(i){switch(i.label){case 0:return t=Lb(e),[4,kb()];case 1:return n=i.sent(),r=n.transaction(Us,"readwrite"),[4,r.objectStore(Us).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Lb(e){var t=e.appConfig;return t.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ez(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return N(this,function(h){switch(h.label){case 0:return[4,Fb(e)];case 1:n=h.sent(),r=kP(t),i={method:"POST",headers:n,body:JSON.stringify(r)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(Mb(e.appConfig),i)];case 3:return a=h.sent(),[4,a.json()];case 4:return s=h.sent(),[3,6];case 5:throw c=h.sent(),Kt.create("token-subscribe-failed",{errorInfo:c});case 6:if(s.error)throw l=s.error.message,Kt.create("token-subscribe-failed",{errorInfo:l});if(!s.token)throw Kt.create("token-subscribe-no-token");return[2,s.token]}})})}function Iz(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return N(this,function(h){switch(h.label){case 0:return[4,Fb(e)];case 1:n=h.sent(),r=kP(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(Mb(e.appConfig)+"/"+t.token,i)];case 3:return a=h.sent(),[4,a.json()];case 4:return s=h.sent(),[3,6];case 5:throw c=h.sent(),Kt.create("token-update-failed",{errorInfo:c});case 6:if(s.error)throw l=s.error.message,Kt.create("token-update-failed",{errorInfo:l});if(!s.token)throw Kt.create("token-update-no-token");return[2,s.token]}})})}function PP(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c;return N(this,function(l){switch(l.label){case 0:return[4,Fb(e)];case 1:n=l.sent(),r={method:"DELETE",headers:n},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(Mb(e.appConfig)+"/"+t,r)];case 3:return i=l.sent(),[4,i.json()];case 4:if(s=l.sent(),s.error)throw a=s.error.message,Kt.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw c=l.sent(),Kt.create("token-unsubscribe-failed",{errorInfo:c});case 6:return[2]}})})}function Mb(e){var t=e.projectId;return uz+"/projects/"+t+"/registrations"}function Fb(e){var t=e.appConfig,n=e.installations;return R(this,void 0,void 0,function(){var r;return N(this,function(i){switch(i.label){case 0:return[4,n.getToken()];case 1:return r=i.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+r})]}})})}function kP(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,s={web:{endpoint:r,auth:n,p256dh:t}};return i!==kp&&(s.web.applicationPubKey=i),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tz=7*24*60*60*1e3;function f_(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a;return N(this,function(c){switch(c.label){case 0:if(Notification.permission!=="granted")throw Kt.create("permission-blocked");return[4,Az(t,n)];case 1:return r=c.sent(),[4,Dp(e)];case 2:return i=c.sent(),s={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:Ri(r.getKey("auth")),p256dh:Ri(r.getKey("p256dh"))},i?[3,3]:[2,LC(e,s)];case 3:if(Cz(i.subscriptionOptions,s))return[3,8];c.label=4;case 4:return c.trys.push([4,6,,7]),[4,PP(e,i.token)];case 5:return c.sent(),[3,7];case 6:return a=c.sent(),console.warn(a),[3,7];case 7:return[2,LC(e,s)];case 8:return Date.now()>=i.createTime+Tz?[2,Sz({token:i.token,createTime:Date.now(),subscriptionOptions:s},e,t)]:[2,i.token];case 9:return[2]}})})}function Xc(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return[4,Dp(e)];case 1:return n=i.sent(),n?[4,PP(e,n.token)]:[3,4];case 2:return i.sent(),[4,bz(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}})})}function Sz(e,t,n){return R(this,void 0,void 0,function(){var r,i,s;return N(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,Iz(t,e)];case 1:return r=a.sent(),i=ee(ee({},e),{token:r,createTime:Date.now()}),[4,Db(t,i)];case 2:return a.sent(),[2,r];case 3:return s=a.sent(),[4,Xc(t,n)];case 4:throw a.sent(),s;case 5:return[2]}})})}function LC(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return[4,Ez(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,Db(e,r)];case 2:return i.sent(),[2,r.token]}})})}function Az(e,t){return R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:vz(t)})]}})})}function Cz(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nz(e){var t={from:e.from,collapseKey:e.collapse_key};return Rz(t,e),Oz(t,e),xz(t,e),t}function Rz(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}function Oz(e,t){t.data&&(e.data=t.data)}function xz(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(e){return typeof e=="object"&&!!e&&xP in e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MC(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pz=function(){function e(t){var n=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(r){r.waitUntil(n.onPush(r))}),self.addEventListener("pushsubscriptionchange",function(r){r.waitUntil(n.onSubChange(r))}),self.addEventListener("notificationclick",function(r){r.waitUntil(n.onNotificationClick(r))})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||typeof t!="function")throw Kt.create("invalid-bg-handler");this.bgMessageHandler=t},e.prototype.onBackgroundMessage=function(t){var n=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){n.bgMessageHandler=null}},e.prototype.getToken=function(){var t,n;return R(this,void 0,void 0,function(){var r;return N(this,function(i){switch(i.label){case 0:return this.vapidKey?[3,2]:[4,Dp(this.firebaseDependencies)];case 1:r=i.sent(),this.vapidKey=(n=(t=r==null?void 0:r.subscriptionOptions)===null||t===void 0?void 0:t.vapidKey)!==null&&n!==void 0?n:kp,i.label=2;case 2:return[2,f_(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},e.prototype.deleteToken=function(){return Xc(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw Kt.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(t){if(this.vapidKey!==null)throw Kt.create("use-vapid-key-after-get-token");if(typeof t!="string"||t.length===0)throw Kt.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(){throw Kt.create("only-available-in-window")},e.prototype.onMessage=function(){throw Kt.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw Kt.create("only-available-in-window")},e.prototype.onPush=function(t){return R(this,void 0,void 0,function(){var n,r,i,s;return N(this,function(a){switch(a.label){case 0:return n=Dz(t),n?[4,LP()]:(console.debug(cz+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return r=a.sent(),Mz(r)?[2,Fz(r,n)]:(i=!1,n.notification?[4,Uz(kz(n))]:[3,3]);case 2:a.sent(),i=!0,a.label=3;case 3:return i===!0&&this.isOnBackgroundMessageUsed===!1?[2]:(this.bgMessageHandler&&(s=Nz(n),typeof this.bgMessageHandler=="function"?this.bgMessageHandler(s):this.bgMessageHandler.next(s)),[4,MC(pz)]);case 4:return a.sent(),[2]}})})},e.prototype.onSubChange=function(t){var n,r;return R(this,void 0,void 0,function(){var i,s;return N(this,function(a){switch(a.label){case 0:return i=t.newSubscription,i?[3,2]:[4,Xc(this.firebaseDependencies,self.registration)];case 1:return a.sent(),[2];case 2:return[4,Dp(this.firebaseDependencies)];case 3:return s=a.sent(),[4,Xc(this.firebaseDependencies,self.registration)];case 4:return a.sent(),[4,f_(this.firebaseDependencies,self.registration,(r=(n=s==null?void 0:s.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:kp)];case 5:return a.sent(),[2]}})})},e.prototype.onNotificationClick=function(t){var n,r;return R(this,void 0,void 0,function(){var i,s,a,c,l;return N(this,function(h){switch(h.label){case 0:if(i=(r=(n=t.notification)===null||n===void 0?void 0:n.data)===null||r===void 0?void 0:r[OP],i){if(t.action)return[2]}else return[2];return t.stopImmediatePropagation(),t.notification.close(),s=jz(i),s?(a=new URL(s,self.location.href),c=new URL(self.location.origin),a.host!==c.host?[2]:[4,Lz(a)]):[2];case 1:return l=h.sent(),l?[3,4]:[4,self.clients.openWindow(s)];case 2:return l=h.sent(),[4,MC(dz)];case 3:return h.sent(),[3,6];case 4:return[4,l.focus()];case 5:l=h.sent(),h.label=6;case 6:return l?(i.messageType=Fs.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,[2,l.postMessage(i)]):[2]}})})},e}();function kz(e){var t,n=ee({},e.notification);return n.data=(t={},t[OP]=e,t),n}function Dz(e){var t=e.data;if(!t)return null;try{return t.json()}catch{return null}}function Lz(e){return R(this,void 0,void 0,function(){var t,n,r,i,s,a,c;return N(this,function(l){switch(l.label){case 0:return[4,LP()];case 1:t=l.sent();try{for(n=Te(t),r=n.next();!r.done;r=n.next())if(i=r.value,s=new URL(i.url,self.location.href),e.host===s.host)return[2,i]}catch(h){a={error:h}}finally{try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(a)throw a.error}}return[2,null]}})})}function Mz(e){return e.some(function(t){return t.visibilityState==="visible"&&!t.url.startsWith("chrome-extension://")})}function Fz(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=Fs.PUSH_RECEIVED;try{for(var i=Te(e),s=i.next();!s.done;s=i.next()){var a=s.value;a.postMessage(t)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function LP(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Uz(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification((t=e.title)!==null&&t!==void 0?t:"",e)}function jz(e){var t,n,r,i=(n=(t=e.fcmOptions)===null||t===void 0?void 0:t.link)!==null&&n!==void 0?n:(r=e.notification)===null||r===void 0?void 0:r.click_action;return i||(DP(e.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vz=function(){function e(t){var n=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(r){return n.messageEventListener(r)})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return n=t.data,n.isFirebaseMessaging?(this.onMessageCallback&&n.messageType===Fs.PUSH_RECEIVED&&(typeof this.onMessageCallback=="function"?this.onMessageCallback(qz(Object.assign({},n))):this.onMessageCallback.next(Object.assign({},n))),r=n.data,DP(r)&&r[lz]==="1"?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(t){return R(this,void 0,void 0,function(){return N(this,function(n){switch(n.label){case 0:return Notification.permission!=="default"?[3,2]:[4,Notification.requestPermission()];case 1:n.sent(),n.label=2;case 2:if(Notification.permission!=="granted")throw Kt.create("permission-blocked");return[4,this.updateVapidKey(t==null?void 0:t.vapidKey)];case 3:return n.sent(),[4,this.updateSwReg(t==null?void 0:t.serviceWorkerRegistration)];case 4:return n.sent(),[2,f_(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},e.prototype.updateVapidKey=function(t){return R(this,void 0,void 0,function(){return N(this,function(n){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=kp),[2]})})},e.prototype.updateSwReg=function(t){return R(this,void 0,void 0,function(){return N(this,function(n){switch(n.label){case 0:return!t&&!this.swRegistration?[4,this.registerDefaultSw()]:[3,2];case 1:n.sent(),n.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Kt.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},e.prototype.registerDefaultSw=function(){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register(sz,{scope:az})];case 1:return t.swRegistration=r.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw n=r.sent(),Kt.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 3:return[2]}})})},e.prototype.deleteToken=function(){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,Xc(this.firebaseDependencies,this.swRegistration)]}})})},e.prototype.requestPermission=function(){return R(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return Notification.permission==="granted"?[2]:[4,Notification.requestPermission()];case 1:if(t=n.sent(),t==="granted")return[2];throw t==="denied"?Kt.create("permission-blocked"):Kt.create("permission-default")}})})},e.prototype.usePublicVapidKey=function(t){if(this.vapidKey!==null)throw Kt.create("use-vapid-key-after-get-token");if(typeof t!="string"||t.length===0)throw Kt.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Kt.create("invalid-sw-registration");if(this.swRegistration)throw Kt.create("use-sw-after-get-token");this.swRegistration=t},e.prototype.onMessage=function(t){var n=this;return this.onMessageCallback=t,function(){n.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw Kt.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw Kt.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(t,n){return R(this,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:return r=Bz(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return i=s.sent(),i.logEvent(r,{message_id:n[xP],message_name:n[hz],message_time:n[fz],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},e}();function Bz(e){switch(e){case Fs.NOTIFICATION_CLICKED:return"notification_open";case Fs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function qz(e){return delete e.messageType,delete e.isFirebaseMessaging,e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hz(e){var t,n;if(!e||!e.options)throw Xm("App Configuration Object");if(!e.name)throw Xm("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=e.options;try{for(var s=Te(r),a=s.next();!a.done;a=s.next()){var c=a.value;if(!i[c])throw Xm(c)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return{appName:e.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function Xm(e){return Kt.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gz="messaging";function Wz(e){var t=e.getProvider("app").getImmediate(),n=Hz(t),r=e.getProvider("installations").getImmediate(),i=e.getProvider("analytics-internal"),s={app:t,appConfig:n,installations:r,analyticsProvider:i};if(!MP())throw Kt.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Pz(s):new Vz(s)}var $z={isSupported:MP};at.INTERNAL.registerComponent(new zn(Gz,Wz,"PUBLIC").setServiceProps($z));function MP(){return self&&"ServiceWorkerGlobalScope"in self?Kz():zz()}function zz(){return"indexedDB"in window&&indexedDB!==null&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function Kz(){return"indexedDB"in self&&indexedDB!==null&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FP="firebasestorage.googleapis.com",UP="storageBucket",Qz=2*60*1e3,Yz=10*60*1e3,Ce=function(e){J(t,e);function t(n,r){var i=e.call(this,Jm(n),"Firebase Storage: "+r+" ("+Jm(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,t.prototype),i}return t.prototype.codeEquals=function(n){return Jm(n)===this.code},Object.defineProperty(t.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+`
`+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(n){this.customData.serverResponse=n},enumerable:!1,configurable:!0}),t}(Au),ve={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error",UNSUPPORTED_ENVIRONMENT:"unsupported-environment"};function Jm(e){return"storage/"+e}function Ub(){var e="An unknown error occurred, please check the error payload for server response.";return new Ce(ve.UNKNOWN,e)}function Xz(e){return new Ce(ve.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Jz(e){return new Ce(ve.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Zz(){var e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ce(ve.UNAUTHENTICATED,e)}function tK(e){return new Ce(ve.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function eK(){return new Ce(ve.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function jP(){return new Ce(ve.CANCELED,"User canceled the upload/download.")}function nK(e){return new Ce(ve.INVALID_URL,"Invalid URL '"+e+"'.")}function rK(e){return new Ce(ve.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function iK(){return new Ce(ve.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+UP+"' property when initializing the app?")}function VP(){return new Ce(ve.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function oK(){return new Ce(ve.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function sK(){return new Ce(ve.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Jc(e){return new Ce(ve.INVALID_ARGUMENT,e)}function BP(){return new Ce(ve.APP_DELETED,"The Firebase app was deleted.")}function qP(e){return new Ce(ve.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zc(e,t){return new Ce(ve.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Sh(e){throw new Ce(ve.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var or={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Zm=function(){function e(t,n){this.data=t,this.contentType=n||null}return e}();function HP(e,t){switch(e){case or.RAW:return new Zm(GP(t));case or.BASE64:case or.BASE64URL:return new Zm(WP(e,t));case or.DATA_URL:return new Zm(uK(t),cK(t))}throw Ub()}function GP(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296){var i=n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320;if(!i)t.push(239,191,189);else{var s=r,a=e.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function aK(e){var t;try{t=decodeURIComponent(e)}catch{throw Zc(or.DATA_URL,"Malformed data URL.")}return GP(t)}function WP(e,t){switch(e){case or.BASE64:{var n=t.indexOf("-")!==-1,r=t.indexOf("_")!==-1;if(n||r){var i=n?"-":"_";throw Zc(e,"Invalid character '"+i+"' found: is it base64url encoded?")}break}case or.BASE64URL:{var s=t.indexOf("+")!==-1,a=t.indexOf("/")!==-1;if(s||a){var i=s?"+":"/";throw Zc(e,"Invalid character '"+i+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}var c;try{c=atob(t)}catch{throw Zc(e,"Invalid character found")}for(var l=new Uint8Array(c.length),h=0;h<c.length;h++)l[h]=c.charCodeAt(h);return l}var $P=function(){function e(t){this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(n===null)throw Zc(or.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;r!=null&&(this.base64=lK(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}return e}();function uK(e){var t=new $P(e);return t.base64?WP(or.BASE64,t.rest):aK(t.rest)}function cK(e){var t=new $P(e);return t.contentType}function lK(e,t){var n=e.length>=t.length;return n?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fK={STATE_CHANGED:"state_changed"},At={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},Nn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ty(e){switch(e){case At.RUNNING:case At.PAUSING:case At.CANCELING:return Nn.RUNNING;case At.PAUSED:return Nn.PAUSED;case At.SUCCESS:return Nn.SUCCESS;case At.CANCELED:return Nn.CANCELED;case At.ERROR:return Nn.ERROR;default:return Nn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ns;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Ns||(Ns={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hK=function(){function e(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ns.NO_ERROR,this.sendPromise_=new Promise(function(n){t.xhr_.addEventListener("abort",function(){t.errorCode_=Ns.ABORT,n(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=Ns.NETWORK_ERROR,n(t)}),t.xhr_.addEventListener("load",function(){n(t)})})}return e.prototype.send=function(t,n,r,i){if(this.sent_)throw Sh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(var s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw Sh("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw Sh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw Sh("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},e.prototype.addUploadProgressListener=function(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)},e.prototype.removeUploadProgressListener=function(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pK=function(){function e(){}return e.prototype.createXhrIo=function(){return new hK},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dK(e){return e!==void 0}function vK(e){return typeof e=="function"}function gK(e){return typeof e=="object"&&!Array.isArray(e)}function Rd(e){return typeof e=="string"||e instanceof String}function FC(e){return jb()&&e instanceof Blob}function jb(){return typeof Blob<"u"}function h_(e,t,n,r){if(r<t)throw new Ce(ve.INVALID_ARGUMENT,"Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw new Ce(ve.INVALID_ARGUMENT,"Invalid value for '"+e+"'. Expected "+n+" or less.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mK(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function yK(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=mK();if(n!==void 0){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}else{if(jb())return new Blob(e);throw new Ce(ve.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _K(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vb=function(){function e(t,n){var r=0,i="";FC(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(FC(this.data_)){var r=this.data_,i=_K(r,t,n);return i===null?null:new e(i)}else{var s=new Uint8Array(this.data_.buffer,t,n-t);return new e(s,!0)}},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(jb()){var r=t.map(function(l){return l instanceof e?l.data_:l});return new e(yK.apply(null,r))}else{var i=t.map(function(l){return Rd(l)?HP(or.RAW,l).data:l.data_}),s=0;i.forEach(function(l){s+=l.byteLength});var a=new Uint8Array(s),c=0;return i.forEach(function(l){for(var h=0;h<l.length;h++)a[c++]=l[h]}),new e(a,!0)}},e.prototype.uploadData=function(){return this.data_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lr=function(){function e(t,n){this.bucket=t,this.path_=n}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return this.path.length===0},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},e.prototype.bucketOnlyServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch{return new e(t,"")}if(n.path==="")return n;throw rK(t)},e.makeFromUrl=function(t){var n=null,r="([A-Za-z0-9.\\-_]+)";function i(Wt){Wt.path.charAt(Wt.path.length-1)==="/"&&(Wt.path_=Wt.path_.slice(0,-1))}var s="(/(.*))?$",a=new RegExp("^gs://"+r+s,"i"),c={bucket:1,path:3};function l(Wt){Wt.path_=decodeURIComponent(Wt.path)}for(var h="v[A-Za-z0-9_]+",p=FP.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",m=new RegExp("^https?://"+p+"/"+h+"/b/"+r+"/o"+v,"i"),y={bucket:1,path:3},b="(?:storage.googleapis.com|storage.cloud.google.com)",E="([^?#]*)",I=new RegExp("^https?://"+b+"/"+r+"/"+E,"i"),C={bucket:1,path:2},P=[{regex:a,indices:c,postModify:i},{regex:m,indices:y,postModify:l},{regex:I,indices:C,postModify:l}],D=0;D<P.length;D++){var F=P[D],Q=F.regex.exec(t);if(Q){var U=Q[F.indices.bucket],_t=Q[F.indices.path];_t||(_t=""),n=new e(U,_t),F.postModify(n);break}}if(n==null)throw nK(t);return n},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(e){var t;try{t=JSON.parse(e)}catch{return null}return gK(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wK(e){if(e.length===0)return null;var t=e.lastIndexOf("/");if(t===-1)return"";var n=e.slice(0,t);return n}function bK(e,t){var n=t.split("/").filter(function(r){return r.length>0}).join("/");return e.length===0?n:e+"/"+n}function zP(e){var t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(e){return"https://"+FP+"/v0"+e}function KP(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){var i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EK(e,t){return t}var Tn=function(){function e(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||EK}return e}(),Ah=null;function IK(e){return!Rd(e)||e.length<2?e:zP(e)}function Od(){if(Ah)return Ah;var e=[];e.push(new Tn("bucket")),e.push(new Tn("generation")),e.push(new Tn("metageneration")),e.push(new Tn("name","fullPath",!0));function t(s,a){return IK(a)}var n=new Tn("name");n.xform=t,e.push(n);function r(s,a){return a!==void 0?Number(a):a}var i=new Tn("size");return i.xform=r,e.push(i),e.push(new Tn("timeCreated")),e.push(new Tn("updated")),e.push(new Tn("md5Hash",null,!0)),e.push(new Tn("cacheControl",null,!0)),e.push(new Tn("contentDisposition",null,!0)),e.push(new Tn("contentEncoding",null,!0)),e.push(new Tn("contentLanguage",null,!0)),e.push(new Tn("contentType",null,!0)),e.push(new Tn("metadata","customMetadata",!0)),Ah=e,Ah}function TK(e,t){function n(){var r=e.bucket,i=e.fullPath,s=new Lr(r,i);return t.makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function SK(e,t,n){var r={};r.type="file";for(var i=n.length,s=0;s<i;s++){var a=n[s];r[a.local]=a.xform(r,t[a.server])}return TK(r,e),r}function QP(e,t,n){var r=Bb(t);if(r===null)return null;var i=r;return SK(e,i,n)}function AK(e,t){var n=Bb(t);if(n===null||!Rd(n.downloadTokens))return null;var r=n.downloadTokens;if(r.length===0)return null;var i=encodeURIComponent,s=r.split(","),a=s.map(function(c){var l=e.bucket,h=e.fullPath,p="/b/"+i(l)+"/o/"+i(h),v=jo(p),m=KP({alt:"media",token:c});return v+m});return a[0]}function qb(e,t){for(var n={},r=t.length,i=0;i<r;i++){var s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UC="prefixes",jC="items";function CK(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[UC])for(var i=0,s=n[UC];i<s.length;i++){var a=s[i],c=a.replace(/\/$/,""),l=e.makeStorageReference(new Lr(t,c));r.prefixes.push(l)}if(n[jC])for(var h=0,p=n[jC];h<p.length;h++){var v=p[h],l=e.makeStorageReference(new Lr(t,v.name));r.items.push(l)}return r}function NK(e,t,n){var r=Bb(n);if(r===null)return null;var i=r;return CK(e,t,i)}var Ki=function(){function e(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(e){if(!e)throw Ub()}function xd(e,t){function n(r,i){var s=QP(e,i,t);return li(s!==null),s}return n}function RK(e,t){function n(r,i){var s=NK(e,t,i);return li(s!==null),s}return n}function OK(e,t){function n(r,i){var s=QP(e,i,t);return li(s!==null),AK(s,i)}return n}function ju(e){function t(n,r){var i;return n.getStatus()===401?i=Zz():n.getStatus()===402?i=Jz(e.bucket):n.getStatus()===403?i=tK(e.path):i=r,i.serverResponse=r.serverResponse,i}return t}function Pd(e){var t=ju(e);function n(r,i){var s=t(r,i);return r.getStatus()===404&&(s=Xz(e.path)),s.serverResponse=i.serverResponse,s}return n}function YP(e,t,n){var r=t.fullServerUrl(),i=jo(r),s="GET",a=e.maxOperationRetryTime,c=new Ki(i,s,xd(e,n),a);return c.errorHandler=Pd(t),c}function xK(e,t,n,r,i){var s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);var a=t.bucketOnlyServerUrl(),c=jo(a),l="GET",h=e.maxOperationRetryTime,p=new Ki(c,l,RK(e,t.bucket),h);return p.urlParams=s,p.errorHandler=ju(t),p}function PK(e,t,n){var r=t.fullServerUrl(),i=jo(r),s="GET",a=e.maxOperationRetryTime,c=new Ki(i,s,OK(e,n),a);return c.errorHandler=Pd(t),c}function kK(e,t,n,r){var i=t.fullServerUrl(),s=jo(i),a="PATCH",c=qb(n,r),l={"Content-Type":"application/json; charset=utf-8"},h=e.maxOperationRetryTime,p=new Ki(s,a,xd(e,r),h);return p.headers=l,p.body=c,p.errorHandler=Pd(t),p}function DK(e,t){var n=t.fullServerUrl(),r=jo(n),i="DELETE",s=e.maxOperationRetryTime;function a(l,h){}var c=new Ki(r,i,a,s);return c.successCodes=[200,204],c.errorHandler=Pd(t),c}function LK(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function XP(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=LK(null,t)),r}function MK(e,t,n,r,i){var s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){for(var D="",F=0;F<2;F++)D=D+Math.random().toString().slice(2);return D}var l=c();a["Content-Type"]="multipart/related; boundary="+l;var h=XP(t,r,i),p=qb(h,n),v="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,m=`\r
--`+l+"--",y=Vb.getBlob(v,r,m);if(y===null)throw VP();var b={name:h.fullPath},E=jo(s),I="POST",C=e.maxUploadRetryTime,P=new Ki(E,I,xd(e,n),C);return P.urlParams=b,P.headers=a,P.body=y.uploadData(),P.errorHandler=ju(t),P}var Lp=function(){function e(t,n,r,i){this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}return e}();function Hb(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch{li(!1)}var r=t||["active"];return li(!!n&&r.indexOf(n)!==-1),n}function FK(e,t,n,r,i){var s=t.bucketOnlyServerUrl(),a=XP(t,r,i),c={name:a.fullPath},l=jo(s),h="POST",p={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},v=qb(a,n),m=e.maxUploadRetryTime;function y(E){Hb(E);var I;try{I=E.getResponseHeader("X-Goog-Upload-URL")}catch{li(!1)}return li(Rd(I)),I}var b=new Ki(l,h,y,m);return b.urlParams=c,b.headers=p,b.body=v,b.errorHandler=ju(t),b}function UK(e,t,n,r){var i={"X-Goog-Upload-Command":"query"};function s(h){var p=Hb(h,["active","final"]),v=null;try{v=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{li(!1)}v||li(!1);var m=Number(v);return li(!isNaN(m)),new Lp(m,r.size(),p==="final")}var a="POST",c=e.maxUploadRetryTime,l=new Ki(n,a,s,c);return l.headers=i,l.errorHandler=ju(t),l}var VC=256*1024;function jK(e,t,n,r,i,s,a,c){var l=new Lp(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw oK();var h=l.total-l.current,p=h;i>0&&(p=Math.min(p,i));var v=l.current,m=v+p,y=p===h?"upload, finalize":"upload",b={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":l.current},E=r.slice(v,m);if(E===null)throw VP();function I(F,Q){var U=Hb(F,["active","final"]),_t=l.current+p,Wt=r.size(),lt;return U==="final"?lt=xd(t,s)(F,Q):lt=null,new Lp(_t,Wt,U==="final",lt)}var C="POST",P=t.maxUploadRetryTime,D=new Ki(n,C,I,P);return D.headers=b,D.body=E.uploadData(),D.progressCallback=c||null,D.errorHandler=ju(e),D}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VK=function(){function e(t,n,r){var i=vK(t)||n!=null||r!=null;if(i)this.next=t,this.error=n,this.complete=r;else{var s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}return e}(),BK=function(){function e(t,n,r,i,s,a){this.bytesTransferred=t,this.totalBytes=n,this.state=r,this.metadata=i,this.task=s,this.ref=a}return e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aa(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JP=function(){function e(t,n,r){var i=this;r===void 0&&(r=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=r,this._mappings=Od(),this._resumable=this._shouldDoResumable(this._blob),this._state=At.RUNNING,this._errorHandler=function(s){i._request=void 0,i._chunkMultiplier=1,s.codeEquals(ve.CANCELED)?(i._needToFetchStatus=!0,i.completeTransitions_()):(i._error=s,i._transition(At.ERROR))},this._metadataErrorHandler=function(s){i._request=void 0,s.codeEquals(ve.CANCELED)?i.completeTransitions_():(i._error=s,i._transition(At.ERROR))},this._promise=new Promise(function(s,a){i._resolve=s,i._reject=a,i._start()}),this._promise.then(null,function(){})}return e.prototype._makeProgressCallback=function(){var t=this,n=this._transferred;return function(r){return t._updateProgress(n+r)}},e.prototype._shouldDoResumable=function(t){return t.size()>256*1024},e.prototype._start=function(){this._state===At.RUNNING&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(t){var n=this;this._ref.storage.getAuthToken().then(function(r){switch(n._state){case At.RUNNING:t(r);break;case At.CANCELING:n._transition(At.CANCELED);break;case At.PAUSING:n._transition(At.PAUSED);break}})},e.prototype._createResumable=function(){var t=this;this._resolveToken(function(n){var r=FK(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then(function(s){t._request=void 0,t._uploadUrl=s,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},e.prototype._fetchStatus=function(){var t=this,n=this._uploadUrl;this._resolveToken(function(r){var i=UK(t._ref.storage,t._ref._location,n,t._blob),s=t._ref.storage.makeRequest(i,r);t._request=s,s.getPromise().then(function(a){a=a,t._request=void 0,t._updateProgress(a.current),t._needToFetchStatus=!1,a.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},e.prototype._continueUpload=function(){var t=this,n=VC*this._chunkMultiplier,r=new Lp(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken(function(s){var a;try{a=jK(t._ref._location,t._ref.storage,i,t._blob,n,t._mappings,r,t._makeProgressCallback())}catch(l){t._error=l,t._transition(At.ERROR);return}var c=t._ref.storage.makeRequest(a,s);t._request=c,c.getPromise().then(function(l){t._increaseMultiplier(),t._request=void 0,t._updateProgress(l.current),l.finalized?(t._metadata=l.metadata,t._transition(At.SUCCESS)):t.completeTransitions_()},t._errorHandler)})},e.prototype._increaseMultiplier=function(){var t=VC*this._chunkMultiplier;t<32*1024*1024&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(n){var r=YP(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then(function(s){t._request=void 0,t._metadata=s,t._transition(At.SUCCESS)},t._metadataErrorHandler)})},e.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(n){var r=MK(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then(function(s){t._request=void 0,t._metadata=s,t._updateProgress(t._blob.size()),t._transition(At.SUCCESS)},t._errorHandler)})},e.prototype._updateProgress=function(t){var n=this._transferred;this._transferred=t,this._transferred!==n&&this._notifyObservers()},e.prototype._transition=function(t){if(this._state!==t)switch(t){case At.CANCELING:this._state=t,this._request!==void 0&&this._request.cancel();break;case At.PAUSING:this._state=t,this._request!==void 0&&this._request.cancel();break;case At.RUNNING:var n=this._state===At.PAUSED;this._state=t,n&&(this._notifyObservers(),this._start());break;case At.PAUSED:this._state=t,this._notifyObservers();break;case At.CANCELED:this._error=jP(),this._state=t,this._notifyObservers();break;case At.ERROR:this._state=t,this._notifyObservers();break;case At.SUCCESS:this._state=t,this._notifyObservers();break}},e.prototype.completeTransitions_=function(){switch(this._state){case At.PAUSING:this._transition(At.PAUSED);break;case At.CANCELING:this._transition(At.CANCELED);break;case At.RUNNING:this._start();break}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var t=ty(this._state);return new BK(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n,r,i){var s=this,a=new VK(n,r,i);return this._addObserver(a),function(){s._removeObserver(a)}},e.prototype.then=function(t,n){return this._promise.then(t,n)},e.prototype.catch=function(t){return this.then(null,t)},e.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},e.prototype._removeObserver=function(t){var n=this._observers.indexOf(t);n!==-1&&this._observers.splice(n,1)},e.prototype._notifyObservers=function(){var t=this;this._finishPromise();var n=this._observers.slice();n.forEach(function(r){t._notifyObserver(r)})},e.prototype._finishPromise=function(){if(this._resolve!==void 0){var t=!0;switch(ty(this._state)){case Nn.SUCCESS:Aa(this._resolve.bind(null,this.snapshot))();break;case Nn.CANCELED:case Nn.ERROR:var n=this._reject;Aa(n.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(t){var n=ty(this._state);switch(n){case Nn.RUNNING:case Nn.PAUSED:t.next&&Aa(t.next.bind(t,this.snapshot))();break;case Nn.SUCCESS:t.complete&&Aa(t.complete.bind(t))();break;case Nn.CANCELED:case Nn.ERROR:t.error&&Aa(t.error.bind(t,this._error))();break;default:t.error&&Aa(t.error.bind(t,this._error))()}},e.prototype.resume=function(){var t=this._state===At.PAUSED||this._state===At.PAUSING;return t&&this._transition(At.RUNNING),t},e.prototype.pause=function(){var t=this._state===At.RUNNING;return t&&this._transition(At.PAUSING),t},e.prototype.cancel=function(){var t=this._state===At.RUNNING||this._state===At.PAUSING;return t&&this._transition(At.CANCELING),t},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kd=function(){function e(t,n){this._service=t,n instanceof Lr?this._location=n:this._location=Lr.makeFromUrl(n)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype.newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var t=new Lr(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return zP(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=wK(this._location.path);if(t===null)return null;var n=new Lr(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(t){if(this._location.path==="")throw qP(t)},e}();function qK(e,t,n){return n===void 0&&(n=null),e._throwIfRoot("uploadBytesResumable"),new JP(e,new Vb(t),n)}function HK(e,t,n,r){n===void 0&&(n=or.RAW),e._throwIfRoot("putString");var i=HP(n,t),s=ee({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new JP(e,new Vb(i.data,!0),s)}function GK(e){var t={prefixes:[],items:[]};return ZP(e,t).then(function(){return t})}function ZP(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a;return N(this,function(c){switch(c.label){case 0:return r={pageToken:n},[4,tk(e,r)];case 1:return i=c.sent(),(s=t.prefixes).push.apply(s,i.prefixes),(a=t.items).push.apply(a,i.items),i.nextPageToken==null?[3,3]:[4,ZP(e,t,i.nextPageToken)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function tk(e,t){return R(this,void 0,void 0,function(){var n,r,i;return N(this,function(s){switch(s.label){case 0:return t!=null&&typeof t.maxResults=="number"&&h_("options.maxResults",1,1e3,t.maxResults),[4,e.storage.getAuthToken()];case 1:return n=s.sent(),r=t||{},i=xK(e.storage,e._location,"/",r.pageToken,r.maxResults),[2,e.storage.makeRequest(i,n).getPromise()]}})})}function WK(e){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return e._throwIfRoot("getMetadata"),[4,e.storage.getAuthToken()];case 1:return t=r.sent(),n=YP(e.storage,e._location,Od()),[2,e.storage.makeRequest(n,t).getPromise()]}})})}function $K(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return e._throwIfRoot("updateMetadata"),[4,e.storage.getAuthToken()];case 1:return n=i.sent(),r=kK(e.storage,e._location,t,Od()),[2,e.storage.makeRequest(r,n).getPromise()]}})})}function zK(e){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return e._throwIfRoot("getDownloadURL"),[4,e.storage.getAuthToken()];case 1:return t=r.sent(),n=PK(e.storage,e._location,Od()),[2,e.storage.makeRequest(n,t).getPromise().then(function(i){if(i===null)throw sK();return i})]}})})}function KK(e){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return e._throwIfRoot("deleteObject"),[4,e.storage.getAuthToken()];case 1:return t=r.sent(),n=DK(e.storage,e._location),[2,e.storage.makeRequest(n,t).getPromise()]}})})}function ek(e,t){var n=bK(e._location.path,t),r=new Lr(e._location.bucket,n);return new kd(e.storage,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ch=function(){function e(t,n,r){this._delegate=t,this.task=n,this.ref=r}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BC=function(){function e(t,n){this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new Ch(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),e.prototype.then=function(t,n){var r=this;return this._delegate.then(function(i){if(t)return t(new Ch(i,r,r._ref))},n)},e.prototype.on=function(t,n,r,i){var s=this,a=void 0;return n&&(typeof n=="function"?a=function(c){return n(new Ch(c,s,s._ref))}:a={next:n.next?function(c){return n.next(new Ch(c,s,s._ref))}:void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(t,a,r||void 0,i||void 0)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qC=function(){function e(t,n){this._delegate=t,this._service=n}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(n){return new Ll(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(n){return new Ll(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ll=function(){function e(t,n){this._delegate=t,this.storage=n}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){var n=ek(this._delegate,t);return new e(n,this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t==null?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(t,n){return this._throwIfRoot("put"),new BC(qK(this._delegate,t,n),this)},e.prototype.putString=function(t,n,r){return n===void 0&&(n=or.RAW),this._throwIfRoot("putString"),new BC(HK(this._delegate,t,n,r),this)},e.prototype.listAll=function(){var t=this;return GK(this._delegate).then(function(n){return new qC(n,t.storage)})},e.prototype.list=function(t){var n=this;return tk(this._delegate,t).then(function(r){return new qC(r,n.storage)})},e.prototype.getMetadata=function(){return WK(this._delegate)},e.prototype.updateMetadata=function(t){return $K(this._delegate,t)},e.prototype.getDownloadURL=function(){return zK(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),KK(this._delegate)},e.prototype._throwIfRoot=function(t){if(this._delegate._location.path==="")throw qP(t)},e}(),QK=function(){function e(t){this.promise_=Promise.reject(t)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YK(e,t,n){var r=1,i=null,s=!1,a=0;function c(){return a===2}var l=!1;function h(){for(var b=[],E=0;E<arguments.length;E++)b[E]=arguments[E];l||(l=!0,t.apply(null,b))}function p(b){i=setTimeout(function(){i=null,e(v,c())},b)}function v(b){for(var E=[],I=1;I<arguments.length;I++)E[I-1]=arguments[I];if(!l){if(b){h.call.apply(h,Ae([null,b],E));return}var C=c()||s;if(C){h.call.apply(h,Ae([null,b],E));return}r<64&&(r*=2);var P;a===1?(a=2,P=0):P=(r+Math.random())*1e3,p(P)}}var m=!1;function y(b){m||(m=!0,!l&&(i!==null?(b||(a=2),clearTimeout(i),p(0)):b||(a=1)))}return p(0),setTimeout(function(){s=!0,y(!0)},n),y}function XK(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JK=function(){function e(t,n,r,i,s,a,c,l,h,p,v){var m=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s.slice(),this.additionalRetryCodes_=a.slice(),this.callback_=c,this.errorCallback_=l,this.progressCallback_=p,this.timeout_=h,this.pool_=v,this.promise_=new Promise(function(y,b){m.resolve_=y,m.reject_=b,m.start_()})}return e.prototype.start_=function(){var t=this;function n(i,s){if(s){i(!1,new Nh(!1,null,!0));return}var a=t.pool_.createXhrIo();t.pendingXhr_=a;function c(l){var h=l.loaded,p=l.lengthComputable?l.total:-1;t.progressCallback_!==null&&t.progressCallback_(h,p)}t.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(t.url_,t.method_,t.body_,t.headers_).then(function(l){t.progressCallback_!==null&&l.removeUploadProgressListener(c),t.pendingXhr_=null,l=l;var h=l.getErrorCode()===Ns.NO_ERROR,p=l.getStatus();if(!h||t.isRetryStatusCode_(p)){var v=l.getErrorCode()===Ns.ABORT;i(!1,new Nh(!1,null,v));return}var m=t.successCodes_.indexOf(p)!==-1;i(!0,new Nh(m,l))})}function r(i,s){var a=t.resolve_,c=t.reject_,l=s.xhr;if(s.wasSuccessCode)try{var h=t.callback_(l,l.getResponseText());dK(h)?a(h):a()}catch(v){c(v)}else if(l!==null){var p=Ub();p.serverResponse=l.getResponseText(),t.errorCallback_?c(t.errorCallback_(l,p)):c(p)}else if(s.canceled){var p=t.appDelete_?BP():jP();c(p)}else{var p=eK();c(p)}}this.canceled_?r(!1,new Nh(!1,null,!0)):this.backoffId_=YK(n,r,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&XK(this.backoffId_),this.pendingXhr_!==null&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(t){var n=t>=500&&t<600,r=[408,429],i=r.indexOf(t)!==-1,s=this.additionalRetryCodes_.indexOf(t)!==-1;return n||i||s},e}(),Nh=function(){function e(t,n,r){this.wasSuccessCode=t,this.xhr=n,this.canceled=!!r}return e}();function ZK(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function t6(e){var t=typeof at<"u"?at.SDK_VERSION:"AppManager";e["X-Firebase-Storage-Version"]="webjs/"+t}function e6(e,t){t&&(e["X-Firebase-GMPID"]=t)}function n6(e,t,n,r){var i=KP(e.urlParams),s=e.url+i,a=Object.assign({},e.headers);return e6(a,t),ZK(a,n),t6(a),new JK(s,e.method,a,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(e){return/^[A-Za-z]+:\/\//.test(e)}function r6(e,t){return new kd(e,t)}function nk(e,t){if(e instanceof Dd){var n=e;if(n._bucket==null)throw iK();var r=new kd(n,n._bucket);return t!=null?nk(r,t):r}else if(t!==void 0){if(t.includes(".."))throw Jc('`path` param cannot contain ".."');return ek(e,t)}else return e}function HC(e,t){if(t&&p_(t)){if(e instanceof Dd)return r6(e,t);throw Jc("To use ref(service, url), the first argument must be a Storage instance.")}else return nk(e,t)}function i6(e){var t=e==null?void 0:e[UP];return t==null?null:Lr.makeFromBucketSpec(t)}var Dd=function(){function e(t,n,r,i){this.app=t,this._authProvider=n,this._pool=r,this._url=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Qz,this._maxUploadRetryTime=Yz,this._requests=new Set,i!=null?this._bucket=Lr.makeFromBucketSpec(i):this._bucket=i6(this.app.options)}return Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){h_("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){h_("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),e.prototype.getAuthToken=function(){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return t=this._authProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:if(n=r.sent(),n!==null)return[2,n.accessToken];r.label=2;case 2:return[2,null]}})})},e.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},e.prototype.makeStorageReference=function(t){return new kd(this,t)},e.prototype.makeRequest=function(t,n){var r=this;if(this._deleted)return new QK(BP());var i=n6(t,this._appId,n,this._pool);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var o6=function(){function e(t,n){var r=this;this.app=t,this._delegate=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(t){if(p_(t))throw Jc("ref() expected a child path but got a URL, use refFromURL instead.");return new Ll(HC(this._delegate,t),this)},e.prototype.refFromURL=function(t){if(!p_(t))throw Jc("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Lr.makeFromUrl(t)}catch{throw Jc("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ll(HC(this._delegate,t),this)},e.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},e.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},e}(),s6="@firebase/storage",a6="0.4.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var u6="storage";function c6(e,t){var n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=new o6(n,new Dd(n,r,new pK,t));return i}function l6(e){var t={TaskState:Nn,TaskEvent:fK,StringFormat:or,Storage:Dd,Reference:Ll};e.INTERNAL.registerComponent(new zn(u6,c6,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(s6,a6)}l6(at);var f6="@firebase/performance",rk="0.4.5";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ik=rk,h6="FB-PERF-TRACE-START",p6="FB-PERF-TRACE-STOP",d_="FB-PERF-TRACE-MEASURE",ok="_wt_",sk="_fp",ak="_fcp",uk="_fid",ck="@firebase/performance/config",lk="@firebase/performance/configexpire",d6="performance",fk="Performance";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn,v6=(nn={},nn["trace started"]="Trace {$traceName} was started before.",nn["trace stopped"]="Trace {$traceName} is not running.",nn["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",nn["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",nn["no window"]="Window is not available.",nn["no app id"]="App id is not available.",nn["no project id"]="Project id is not available.",nn["no api key"]="Api key is not available.",nn["invalid cc log"]="Attempted to queue invalid cc event",nn["FB not default"]="Performance can only start when Firebase app instance is the default one.",nn["RC response not ok"]="RC response is not ok",nn["invalid attribute name"]="Attribute name {$attributeName} is invalid.",nn["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",nn["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",nn["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",nn),ln=new Do(d6,fk,v6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hi=new Cu(fk);Hi.logLevel=Rt.INFO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ey,hk,yn=function(){function e(t){if(this.window=t,!t)throw ln.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(t){!this.performance||!this.performance.mark||this.performance.mark(t)},e.prototype.measure=function(t,n,r){!this.performance||!this.performance.measure||this.performance.measure(t,n,r)},e.prototype.getEntriesByType=function(t){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(t)},e.prototype.getEntriesByName=function(t){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(t)},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return!fetch||!Promise||!this.navigator||!this.navigator.cookieEnabled?(Hi.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):G_()?!0:(Hi.info("IndexedDB is not supported by current browswer"),!1)},e.prototype.setupObserver=function(t,n){if(this.PerformanceObserver){var r=new this.PerformanceObserver(function(i){for(var s=0,a=i.getEntries();s<a.length;s++){var c=a[s];n(c)}});r.observe({entryTypes:[t]})}},e.getInstance=function(){return ey===void 0&&(ey=new e(hk)),ey},e}();function g6(e){hk=e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(e,t){var n=e.length-t.length;if(n<0||n>1)throw ln.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ny,Ve=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=GC("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=GC("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw ln.create("no app id");return t},e.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw ln.create("no project id");return t},e.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw ln.create("no api key");return t},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return ny===void 0&&(ny=new e),ny},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pk;function m6(){var e=Ve.getInstance().installationsService.getId();return e.then(function(t){pk=t}),e}function Gb(){return pk}function y6(){var e=Ve.getInstance().installationsService.getToken();return e.then(function(t){}),e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var za;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"})(za||(za={}));var _6=["firebase_","google_","ga_"],w6=new RegExp("^[a-zA-Z]\\w*$"),b6=40,E6=100;function I6(){var e=yn.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function dk(){var e=yn.getInstance().document,t=e.visibilityState;switch(t){case"visible":return za.VISIBLE;case"hidden":return za.HIDDEN;default:return za.UNKNOWN}}function T6(){var e=yn.getInstance().navigator,t=e.connection,n=t&&t.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function S6(e){if(e.length===0||e.length>b6)return!1;var t=_6.some(function(n){return e.startsWith(n)});return!t&&!!e.match(w6)}function A6(e){return e.length!==0&&e.length<=E6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var C6="0.0.1",N6={loggingEnabled:!0},R6="FIREBASE_INSTALLATIONS_AUTH";function O6(e){var t=x6();return t?(WC(t),Promise.resolve()):D6(e).then(WC).then(function(n){return P6(n)},function(){})}function x6(){var e=yn.getInstance().localStorage;if(e){var t=e.getItem(lk);if(!(!t||!L6(t))){var n=e.getItem(ck);if(n)try{var r=JSON.parse(n);return r}catch{return}}}}function P6(e){var t=yn.getInstance().localStorage;!e||!t||(t.setItem(ck,JSON.stringify(e)),t.setItem(lk,String(Date.now()+Ve.getInstance().configTimeToLive*60*60*1e3)))}var k6="Could not fetch config, will use default configs";function D6(e){return y6().then(function(t){var n=Ve.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+Ve.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:R6+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:Ve.getInstance().getAppId(),app_version:ik,sdk_version:C6})});return fetch(i).then(function(s){if(s.ok)return s.json();throw ln.create("RC response not ok")})}).catch(function(){Hi.info(k6)})}function WC(e){if(!e)return e;var t=Ve.getInstance(),n=e.entries||{};return n.fpr_enabled!==void 0?t.loggingEnabled=String(n.fpr_enabled)==="true":t.loggingEnabled=N6.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),n.fpr_vc_network_request_sampling_rate!==void 0&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),n.fpr_vc_trace_sampling_rate!==void 0&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=$C(t.tracesSamplingRate),t.logNetworkAfterSampling=$C(t.networkRequestsSamplingRate),e}function L6(e){return Number(e)>Date.now()}function $C(e){return Math.random()<=e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wb=1,ry;function vk(){return Wb=2,ry=ry||F6(),ry}function M6(){return Wb===3}function F6(){return U6().then(function(){return m6()}).then(function(e){return O6(e)}).then(function(){return zC()},function(){return zC()})}function U6(){var e=yn.getInstance().document;return new Promise(function(t){if(e&&e.readyState!=="complete"){var n=function(){e.readyState==="complete"&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()})}function zC(){Wb=3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $b=10*1e3,j6=5.5*1e3,gk=3,V6=1e3,Mp=gk,So=[],KC=!1;function B6(){KC||(Ld(j6),KC=!0)}function Ld(e){setTimeout(function(){if(Mp!==0){if(!So.length)return Ld($b);q6()}},e)}function q6(){var e=So.splice(0,V6),t=e.map(function(r){return{source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}}),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Ve.getInstance().logSource,log_event:t};H6(n,e).catch(function(){So=Ae(e,So),Mp--,Hi.info("Tries left: "+Mp+"."),Ld($b)})}function H6(e,t){return G6(e).then(function(n){return n.ok||Hi.info("Call to Firebase backend failed."),n.json()}).then(function(n){var r=Number(n.nextRequestWaitMillis),i=$b;isNaN(r)||(i=Math.max(r,i));var s=n.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(So=Ae(t,So),Hi.info("Retry transport request later.")),Mp=gk,Ld(i)})}function G6(e){var t=Ve.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}function W6(e){if(!e.eventTime||!e.message)throw ln.create("invalid cc log");So=Ae(So,[e])}function $6(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(void 0,t);W6({message:r,eventTime:Date.now()})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iy;function mk(e,t){iy||(iy=$6(K6)),iy(e,t)}function Rh(e){var t=Ve.getInstance();!t.instrumentationEnabled&&e.isAuto||!t.dataCollectionEnabled&&!e.isAuto||yn.getInstance().requiredApisAvailable()&&(e.isAuto&&dk()!==za.VISIBLE||(M6()?oy(e):vk().then(function(){return oy(e)},function(){return oy(e)})))}function oy(e){if(Gb()){var t=Ve.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(function(){return mk(e,1)},0)}}function z6(e){var t=Ve.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n===r||n===i||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(function(){return mk(e,0)},0)}}function K6(e,t){return t===0?Q6(e):Y6(e)}function Q6(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:yk(),network_request_metric:t};return JSON.stringify(n)}function Y6(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};Object.keys(e.counters).length!==0&&(t.counters=e.counters);var n=e.getAttributes();Object.keys(n).length!==0&&(t.custom_attributes=n);var r={application_info:yk(),trace_metric:t};return JSON.stringify(r)}function yk(){return{google_app_id:Ve.getInstance().getAppId(),app_instance_id:Gb(),web_app_info:{sdk_version:ik,page_url:yn.getInstance().getUrl(),service_worker_status:I6(),visibility_state:dk(),effective_connection_type:T6()},application_process_state:0}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var X6=100,J6="_",Z6=[sk,ak,uk];function tQ(e,t){return e.length===0||e.length>X6?!1:t&&t.startsWith(ok)&&Z6.indexOf(e)>-1||!e.startsWith(J6)}function eQ(e){var t=Math.floor(e);return t<e&&Hi.info("Metric value should be an Integer, setting the value as : "+t+"."),t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tl=function(){function e(t,n,r){n===void 0&&(n=!1),this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=yn.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=h6+"-"+this.randomId+"-"+this.name,this.traceStopMark=p6+"-"+this.randomId+"-"+this.name,this.traceMeasure=r||d_+"-"+this.randomId+"-"+this.name,r&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(this.state!==1)throw ln.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(this.state!==2)throw ln.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Rh(this)},e.prototype.record=function(t,n,r){if(t<=0)throw ln.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw ln.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(t*1e3),r&&r.attributes&&(this.customAttributes=ee({},r.attributes)),r&&r.metrics)for(var i=0,s=Object.keys(r.metrics);i<s.length;i++){var a=s[i];isNaN(Number(r.metrics[a]))||(this.counters[a]=Number(Math.floor(r.metrics[a])))}Rh(this)},e.prototype.incrementMetric=function(t,n){n===void 0&&(n=1),this.counters[t]===void 0?this.putMetric(t,n):this.putMetric(t,this.counters[t]+n)},e.prototype.putMetric=function(t,n){if(tQ(t,this.name))this.counters[t]=eQ(n);else throw ln.create("invalid custom metric name",{customMetricName:t})},e.prototype.getMetric=function(t){return this.counters[t]||0},e.prototype.putAttribute=function(t,n){var r=S6(t),i=A6(n);if(r&&i){this.customAttributes[t]=n;return}if(!r)throw ln.create("invalid attribute name",{attributeName:t});if(!i)throw ln.create("invalid attribute value",{attributeValue:n})},e.prototype.getAttribute=function(t){return this.customAttributes[t]},e.prototype.removeAttribute=function(t){this.customAttributes[t]!==void 0&&delete this.customAttributes[t]},e.prototype.getAttributes=function(){return ee({},this.customAttributes)},e.prototype.setStartTime=function(t){this.startTimeUs=t},e.prototype.setDuration=function(t){this.durationUs=t},e.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),n=t&&t[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))},e.createOobTrace=function(t,n,r){var i=yn.getInstance().getUrl();if(i){var s=new e(ok+i,!0),a=Math.floor(yn.getInstance().getTimeOrigin()*1e3);s.setStartTime(a),t&&t[0]&&(s.setDuration(Math.floor(t[0].duration*1e3)),s.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),s.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),s.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));var c="first-paint",l="first-contentful-paint";if(n){var h=n.find(function(v){return v.name===c});h&&h.startTime&&s.putMetric(sk,Math.floor(h.startTime*1e3));var p=n.find(function(v){return v.name===l});p&&p.startTime&&s.putMetric(ak,Math.floor(p.startTime*1e3)),r&&s.putMetric(uk,Math.floor(r*1e3))}Rh(s)}},e.createUserTimingTrace=function(t){var n=new e(t,!1,t);Rh(n)},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(e){var t=e;if(!(!t||t.responseStart===void 0)){var n=yn.getInstance().getTimeOrigin(),r=Math.floor((t.startTime+n)*1e3),i=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,s=Math.floor((t.responseEnd-t.startTime)*1e3),a=t.name&&t.name.split("?")[0],c={url:a,responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:s};z6(c)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nQ=5e3;function YC(){Gb()&&(setTimeout(function(){return iQ()},0),setTimeout(function(){return rQ()},0),setTimeout(function(){return oQ()},0))}function rQ(){for(var e=yn.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){var i=r[n];QC(i)}e.setupObserver("resource",QC)}function iQ(){var e=yn.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout(function(){tl.createOobTrace(t,n),r=void 0},nQ);e.onFirstInputDelay(function(i){r&&(clearTimeout(r),tl.createOobTrace(t,n,i))})}else tl.createOobTrace(t,n)}function oQ(){for(var e=yn.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){var i=r[n];XC(i)}e.setupObserver("measure",XC)}function XC(e){var t=e.name;t.substring(0,d_.length)!==d_&&tl.createUserTimingTrace(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sQ=function(){function e(t){this.app=t,yn.getInstance().requiredApisAvailable()&&W_().then(function(n){n&&(B6(),vk().then(YC,YC))}).catch(function(n){Hi.info("Environment doesn't support IndexedDB: "+n)})}return e.prototype.trace=function(t){return new tl(t)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return Ve.getInstance().instrumentationEnabled},set:function(t){Ve.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return Ve.getInstance().dataCollectionEnabled},set:function(t){Ve.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aQ="[DEFAULT]";function uQ(e){var t=function(n,r){if(n.name!==aQ)throw ln.create("FB not default");if(typeof window>"u")throw ln.create("no window");return g6(window),Ve.getInstance().firebaseAppInstance=n,Ve.getInstance().installationsService=r,new sQ(n)};e.INTERNAL.registerComponent(new zn("performance",function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return t(r,i)},"PUBLIC")),e.registerVersion(f6,rk)}uQ(at);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cQ="firebase_id",lQ="origin",fQ=60*1e3,hQ="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_k="https://www.googletagmanager.com/gtag/js",_n;(function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"})(_n||(_n={}));var v_;(function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"})(v_||(v_={}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pQ(e,t,n,r,i){return R(this,void 0,void 0,function(){var s,a;return N(this,function(c){switch(c.label){case 0:return i&&i.global?(e(_n.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:s=c.sent(),a=ee(ee({},r),{send_to:s}),e(_n.EVENT,n,a),c.label=3;case 3:return[2]}})})}function dQ(e,t,n,r){return R(this,void 0,void 0,function(){var i;return N(this,function(s){switch(s.label){case 0:return r&&r.global?(e(_n.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=s.sent(),e(_n.CONFIG,i,{update:!0,screen_name:n}),s.label=3;case 3:return[2]}})})}function vQ(e,t,n,r){return R(this,void 0,void 0,function(){var i;return N(this,function(s){switch(s.label){case 0:return r&&r.global?(e(_n.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=s.sent(),e(_n.CONFIG,i,{update:!0,user_id:n}),s.label=3;case 3:return[2]}})})}function gQ(e,t,n,r){return R(this,void 0,void 0,function(){var i,s,a,c,l;return N(this,function(h){switch(h.label){case 0:if(!(r&&r.global))return[3,1];for(i={},s=0,a=Object.keys(n);s<a.length;s++)c=a[s],i["user_properties."+c]=n[c];return e(_n.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:l=h.sent(),e(_n.CONFIG,l,{update:!0,user_properties:n}),h.label=3;case 3:return[2]}})})}function mQ(e,t){return R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn=new Cu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yQ(e){var t=document.createElement("script");t.src=_k+"?l="+e,t.async=!0,document.head.appendChild(t)}function _Q(e){var t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function wQ(e,t,n,r,i,s){return R(this,void 0,void 0,function(){var a,c,l,h;return N(this,function(p){switch(p.label){case 0:a=r[i],p.label=1;case 1:return p.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return p.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return c=p.sent(),l=c.find(function(v){return v.measurementId===i}),l?[4,t[l.appId]]:[3,6];case 5:p.sent(),p.label=6;case 6:return[3,8];case 7:return h=p.sent(),rn.error(h),[3,8];case 8:return e(_n.CONFIG,i,s),[2]}})})}function bQ(e,t,n,r,i){return R(this,void 0,void 0,function(){var s,a,c,l,h,p,v,m,y;return N(this,function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),s=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(c=b.sent(),l=function(E){var I=c.find(function(P){return P.measurementId===E}),C=I&&t[I.appId];if(C)s.push(C);else return s=[],"break"},h=0,p=a;h<p.length&&(v=p[h],m=l(v),m!=="break");h++);b.label=2;case 2:return s.length===0&&(s=Object.values(t)),[4,Promise.all(s)];case 3:return b.sent(),e(_n.EVENT,r,i||{}),[3,5];case 4:return y=b.sent(),rn.error(y),[3,5];case 5:return[2]}})})}function EQ(e,t,n,r){function i(s,a,c){return R(this,void 0,void 0,function(){var l;return N(this,function(h){switch(h.label){case 0:return h.trys.push([0,6,,7]),s!==_n.EVENT?[3,2]:[4,bQ(e,t,n,a,c)];case 1:return h.sent(),[3,5];case 2:return s!==_n.CONFIG?[3,4]:[4,wQ(e,t,n,r,a,c)];case 3:return h.sent(),[3,5];case 4:e(_n.SET,a),h.label=5;case 5:return[3,7];case 6:return l=h.sent(),rn.error(l),[3,7];case 7:return[2]}})})}return i}function IQ(e,t,n,r,i){var s=function(){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=EQ(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}function TQ(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(_k))return r}return null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cr,SQ=(Cr={},Cr["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Cr["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Cr["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Cr["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Cr["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Cr["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Cr["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Cr["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Cr["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Cr),mr=new Do("analytics","Analytics",SQ);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AQ=30,CQ=1e3,NQ=function(){function e(t,n){t===void 0&&(t={}),n===void 0&&(n=CQ),this.throttleMetadata=t,this.intervalMillis=n}return e.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},e.prototype.setThrottleMetadata=function(t,n){this.throttleMetadata[t]=n},e.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},e}(),wk=new NQ;function RQ(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function OQ(e){var t;return R(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return N(this,function(h){switch(h.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:RQ(r)},s=hQ.replace("{app-id}",n),[4,fetch(s,i)];case 1:if(a=h.sent(),!(a.status!==200&&a.status!==304))return[3,6];c="",h.label=2;case 2:return h.trys.push([2,4,,5]),[4,a.json()];case 3:return l=h.sent(),!((t=l.error)===null||t===void 0)&&t.message&&(c=l.error.message),[3,5];case 4:return h.sent(),[3,5];case 5:throw mr.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c});case 6:return[2,a.json()]}})})}function xQ(e,t,n){return t===void 0&&(t=wk),R(this,void 0,void 0,function(){var r,i,s,a,c,l,h=this;return N(this,function(p){if(r=e.options,i=r.appId,s=r.apiKey,a=r.measurementId,!i)throw mr.create("no-app-id");if(!s){if(a)return[2,{measurementId:a,appId:i}];throw mr.create("no-api-key")}return c=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new DQ,setTimeout(function(){return R(h,void 0,void 0,function(){return N(this,function(v){return l.abort(),[2]})})},n!==void 0?n:fQ),[2,bk({appId:i,apiKey:s,measurementId:a},c,l,t)]})})}function bk(e,t,n,r){var i=t.throttleEndTimeMillis,s=t.backoffCount;return r===void 0&&(r=wk),R(this,void 0,void 0,function(){var a,c,l,h,p,v,m;return N(this,function(y){switch(y.label){case 0:a=e.appId,c=e.measurementId,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,PQ(n,i)];case 2:return y.sent(),[3,4];case 3:if(l=y.sent(),c)return rn.warn("Timed out fetching this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+c)+(' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]")),[2,{appId:a,measurementId:c}];throw l;case 4:return y.trys.push([4,6,,7]),[4,OQ(e)];case 5:return h=y.sent(),r.deleteThrottleMetadata(a),[2,h];case 6:if(p=y.sent(),!kQ(p)){if(r.deleteThrottleMetadata(a),c)return rn.warn("Failed to fetch this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+c)+(' provided in the "measurementId" field in the local Firebase config. ['+p.message+"]")),[2,{appId:a,measurementId:c}];throw p}return v=Number(p.customData.httpStatus)===503?Ny(s,r.intervalMillis,AQ):Ny(s,r.intervalMillis),m={throttleEndTimeMillis:Date.now()+v,backoffCount:s+1},r.setThrottleMetadata(a,m),rn.debug("Calling attemptFetch again in "+v+" millis"),[2,bk(e,m,n,r)];case 7:return[2]}})})}function PQ(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(function(){clearTimeout(s),r(mr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function kQ(e){if(!(e instanceof Au)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var DQ=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LQ(){return R(this,void 0,void 0,function(){var e;return N(this,function(t){switch(t.label){case 0:return G_()?[3,1]:(rn.warn(mr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,W_()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),rn.warn(mr.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}function MQ(e,t,n,r,i){return R(this,void 0,void 0,function(){var s,a,c,l,h,p,v;return N(this,function(m){switch(m.label){case 0:return s=xQ(e),s.then(function(y){n[y.measurementId]=y.appId,e.options.measurementId&&y.measurementId!==e.options.measurementId&&rn.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+")"+(" does not match the measurement ID fetched from the server ("+y.measurementId+").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(y){return rn.error(y)}),t.push(s),a=LQ().then(function(y){if(y)return r.getId()}),[4,Promise.all([s,a])];case 1:return c=m.sent(),l=c[0],h=c[1],i("js",new Date),p=(v={},v[lQ]="firebase",v.update=!0,v),h!=null&&(p[cQ]=h),i(_n.CONFIG,l.measurementId,p),[2,l.measurementId]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ai={},JC=[],ZC={},Gh="dataLayer",Ek="gtag",t1,Dc,g_=!1;function FQ(e){if(g_)throw mr.create("already-initialized");e.dataLayerName&&(Gh=e.dataLayerName),e.gtagName&&(Ek=e.gtagName)}function UQ(){var e=[];if(H_()&&e.push("This is a browser extension environment."),AN()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(r,i){return"("+(i+1)+") "+r}).join(" "),n=mr.create("invalid-analytics-context",{errorInfo:t});rn.warn(n.message)}}function jQ(e,t){UQ();var n=e.options.appId;if(!n)throw mr.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)rn.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+(" measurement ID for this Firebase app. Falling back to the measurement ID "+e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.');else throw mr.create("no-api-key");if(Ai[n]!=null)throw mr.create("already-exists",{id:n});if(!g_){TQ()||yQ(Gh),_Q(Gh);var r=IQ(Ai,JC,ZC,Gh,Ek),i=r.wrappedGtag,s=r.gtagCore;Dc=i,t1=s,g_=!0}Ai[n]=MQ(e,JC,ZC,t,t1);var a={app:e,logEvent:function(c,l,h){pQ(Dc,Ai[n],c,l,h).catch(function(p){return rn.error(p)})},setCurrentScreen:function(c,l){dQ(Dc,Ai[n],c,l).catch(function(h){return rn.error(h)})},setUserId:function(c,l){vQ(Dc,Ai[n],c,l).catch(function(h){return rn.error(h)})},setUserProperties:function(c,l){gQ(Dc,Ai[n],c,l).catch(function(h){return rn.error(h)})},setAnalyticsCollectionEnabled:function(c){mQ(Ai[n],c).catch(function(l){return rn.error(l)})},INTERNAL:{delete:function(){return delete Ai[n],Promise.resolve()}}};return a}var VQ="@firebase/analytics",BQ="0.6.2",e1="analytics";function qQ(e){e.INTERNAL.registerComponent(new zn(e1,function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return jQ(r,i)},"PUBLIC").setServiceProps({settings:FQ,EventName:v_,isSupported:HQ})),e.INTERNAL.registerComponent(new zn("analytics-internal",t,"PRIVATE")),e.registerVersion(VQ,BQ);function t(n){try{var r=n.getProvider(e1).getImmediate();return{logEvent:r.logEvent}}catch(i){throw mr.create("interop-component-reg-failed",{reason:i})}}}qQ(at);function HQ(){return R(this,void 0,void 0,function(){var e;return N(this,function(t){switch(t.label){case 0:if(H_())return[2,!1];if(!AN())return[2,!1];if(!G_())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,W_()];case 2:return e=t.sent(),[2,e];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var GQ=function(){function e(t,n,r,i){this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return e.prototype.isCachedDataFresh=function(t,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var r=Date.now()-n,i=r<=t;return this.logger.debug("Config fetch cache check."+(" Cache age millis: "+r+".")+(" Cache max age millis (minimumFetchIntervalMillis setting): "+t+".")+(" Is cache hit: "+i+".")),i},e.prototype.fetch=function(t){return R(this,void 0,void 0,function(){var n,r,i,s,a;return N(this,function(c){switch(c.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return n=c.sent(),r=n[0],i=n[1],i&&this.isCachedDataFresh(t.cacheMaxAgeMillis,r)?[2,i]:(t.eTag=i&&i.eTag,[4,this.client.fetch(t)]);case 2:return s=c.sent(),a=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],s.status===200&&a.push(this.storage.setLastSuccessfulFetchResponse(s)),[4,Promise.all(a)];case 3:return c.sent(),[2,s]}})})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sn,WQ=(Sn={},Sn["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Sn["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Sn["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Sn["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Sn["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Sn["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Sn["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Sn["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Sn["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Sn["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Sn["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Sn["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Sn["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Sn),gr=new Do("remoteconfig","Remote Config",WQ);function $Q(e,t){return e instanceof Au&&e.code.indexOf(t)!==-1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zQ(e){return e===void 0&&(e=navigator),e.languages&&e.languages[0]||e.language}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KQ=function(){function e(t,n,r,i,s,a){this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=a}return e.prototype.fetch=function(t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c,l,h,p,v,m,y,b,E,I,C,P,D,F;return N(this,function(Q){switch(Q.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=Q.sent(),r=n[0],i=n[1],s=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",a=s+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},l={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:zQ()},h={method:"POST",headers:c,body:JSON.stringify(l)},p=fetch(a,h),v=new Promise(function(U,_t){t.signal.addEventListener(function(){var Wt=new Error("The operation was aborted.");Wt.name="AbortError",_t(Wt)})}),Q.label=2;case 2:return Q.trys.push([2,5,,6]),[4,Promise.race([p,v])];case 3:return Q.sent(),[4,p];case 4:return m=Q.sent(),[3,6];case 5:throw y=Q.sent(),b="fetch-client-network",y.name==="AbortError"&&(b="fetch-timeout"),gr.create(b,{originalErrorMessage:y.message});case 6:if(E=m.status,I=m.headers.get("ETag")||void 0,m.status!==200)return[3,11];D=void 0,Q.label=7;case 7:return Q.trys.push([7,9,,10]),[4,m.json()];case 8:return D=Q.sent(),[3,10];case 9:throw F=Q.sent(),gr.create("fetch-client-parse",{originalErrorMessage:F.message});case 10:C=D.entries,P=D.state,Q.label=11;case 11:if(P==="INSTANCE_STATE_UNSPECIFIED"?E=500:P==="NO_CHANGE"?E=304:(P==="NO_TEMPLATE"||P==="EMPTY_CONFIG")&&(C={}),E!==304&&E!==200)throw gr.create("fetch-status",{httpStatus:E});return[2,{status:E,eTag:I,config:C}]}})})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QQ=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YQ=!1,XQ="",n1=0,JQ=["1","true","t","yes","y","on"],sy=function(){function e(t,n){n===void 0&&(n=XQ),this._source=t,this._value=n}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return this._source==="static"?YQ:JQ.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if(this._source==="static")return n1;var t=Number(this._value);return isNaN(t)&&(t=n1),t},e.prototype.getSource=function(){return this._source},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZQ=60*1e3,t5=12*60*60*1e3,e5=function(){function e(t,n,r,i,s){this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:ZQ,minimumFetchIntervalMillis:t5},this.defaultConfig={}}return e.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Rt.DEBUG;break;case"silent":this._logger.logLevel=Rt.SILENT;break;default:this._logger.logLevel=Rt.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return R(this,void 0,void 0,function(){var t,n,r;return N(this,function(i){switch(i.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=i.sent(),n=t[0],r=t[1],!n||!n.config||!n.eTag||n.eTag===r?[2,!1]:[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])];case 2:return i.sent(),[2,!0]}})})},e.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},e.prototype.fetch=function(){return R(this,void 0,void 0,function(){var t,n,r,i=this;return N(this,function(s){switch(s.label){case 0:t=new QQ,setTimeout(function(){return R(i,void 0,void 0,function(){return N(this,function(a){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return s.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return s.sent(),[3,6];case 4:return n=s.sent(),r=$Q(n,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw s.sent(),n;case 6:return[2]}})})},e.prototype.fetchAndActivate=function(){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},e.prototype.getAll=function(){var t=this;return n5(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(n,r){return n[r]=t.getValue(r),n},{})},e.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},e.prototype.getNumber=function(t){return this.getValue(t).asNumber()},e.prototype.getString=function(t){return this.getValue(t).asString()},e.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var n=this._storageCache.getActiveConfig();return n&&n[t]!==void 0?new sy("remote",n[t]):this.defaultConfig&&this.defaultConfig[t]!==void 0?new sy("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new sy("static"))},e}();function n5(e,t){return e===void 0&&(e={}),t===void 0&&(t={}),Object.keys(ee(ee({},e),t))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(e,t){var n=e.target.error||void 0;return gr.create(t,{originalErrorMessage:n&&n.message})}var ls="app_namespace_store",r5="firebase_remote_config",i5=1;function o5(){return new Promise(function(e,t){var n=indexedDB.open(r5,i5);n.onerror=function(r){t(Wh(r,"storage-open"))},n.onsuccess=function(r){e(r.target.result)},n.onupgradeneeded=function(r){var i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ls,{keyPath:"compositeKey"})}}})}var s5=function(){function e(t,n,r,i){i===void 0&&(i=o5()),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(t){return this.set("active_config",t)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(t){return R(this,void 0,void 0,function(){var n,r=this;return N(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(s,a){var c=n.transaction([ls],"readonly"),l=c.objectStore(ls),h=r.createCompositeKey(t);try{var p=l.get(h);p.onerror=function(v){a(Wh(v,"storage-get"))},p.onsuccess=function(v){var m=v.target.result;s(m?m.value:void 0)}}catch(v){a(gr.create("storage-get",{originalErrorMessage:v&&v.message}))}})]}})})},e.prototype.set=function(t,n){return R(this,void 0,void 0,function(){var r,i=this;return N(this,function(s){switch(s.label){case 0:return[4,this.openDbPromise];case 1:return r=s.sent(),[2,new Promise(function(a,c){var l=r.transaction([ls],"readwrite"),h=l.objectStore(ls),p=i.createCompositeKey(t);try{var v=h.put({compositeKey:p,value:n});v.onerror=function(m){c(Wh(m,"storage-set"))},v.onsuccess=function(){a()}}catch(m){c(gr.create("storage-set",{originalErrorMessage:m&&m.message}))}})]}})})},e.prototype.delete=function(t){return R(this,void 0,void 0,function(){var n,r=this;return N(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(s,a){var c=n.transaction([ls],"readwrite"),l=c.objectStore(ls),h=r.createCompositeKey(t);try{var p=l.delete(h);p.onerror=function(v){a(Wh(v,"storage-delete"))},p.onsuccess=function(){s()}}catch(v){a(gr.create("storage-delete",{originalErrorMessage:v&&v.message}))}})]}})})},e.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var a5=function(){function e(t){this.storage=t}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return R(this,void 0,void 0,function(){var t,n,r,i,s,a;return N(this,function(c){switch(c.label){case 0:return t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,t];case 1:return i=c.sent(),i&&(this.lastFetchStatus=i),[4,n];case 2:return s=c.sent(),s&&(this.lastSuccessfulFetchTimestampMillis=s),[4,r];case 3:return a=c.sent(),a&&(this.activeConfig=a),[2]}})})},e.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},e.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u5(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(function(){clearTimeout(s),r(gr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function c5(e){if(!(e instanceof Au)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var l5=function(){function e(t,n){this.client=t,this.storage=n}return e.prototype.fetch=function(t){return R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return n=r.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,n)]}})})},e.prototype.attemptFetch=function(t,n){var r=n.throttleEndTimeMillis,i=n.backoffCount;return R(this,void 0,void 0,function(){var s,a,c;return N(this,function(l){switch(l.label){case 0:return[4,u5(t.signal,r)];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return s=l.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return l.sent(),[2,s];case 5:if(a=l.sent(),!c5(a))throw a;return c={throttleEndTimeMillis:Date.now()+Ny(i),backoffCount:i+1},[4,this.storage.setThrottleMetadata(c)];case 6:return l.sent(),[2,this.attemptFetch(t,c)];case 7:return[2]}})})},e}(),r1="@firebase/remote-config",f5="0.1.30";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h5(e){e.INTERNAL.registerComponent(new zn("remoteConfig",t,"PUBLIC").setMultipleInstances(!0)),e.registerVersion(r1,f5);function t(n,r){var i=n.getProvider("app").getImmediate(),s=n.getProvider("installations").getImmediate();if(typeof window>"u")throw gr.create("registration-window");var a=i.options,c=a.projectId,l=a.apiKey,h=a.appId;if(!c)throw gr.create("registration-project-id");if(!l)throw gr.create("registration-api-key");if(!h)throw gr.create("registration-app-id");r=r||"firebase";var p=new s5(h,i.name,r),v=new a5(p),m=new Cu(r1);m.logLevel=Rt.ERROR;var y=new KQ(s,e.SDK_VERSION,r,c,l,h),b=new l5(y,p),E=new GQ(b,p,v,m),I=new e5(i,E,v,p,m);return I.ensureInitialized(),I}}h5(at);var p5="firebase",d5="8.2.7";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */at.registerVersion(p5,d5,"app");var v5="firebase",g5="8.2.7";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn(`
It looks like you're using the development build of the Firebase JS SDK.
When deploying Firebase apps to production, it is advisable to only import
the individual SDK components you intend to use.

For the module builds, these are available in the following manner
(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):

CommonJS Modules:
const firebase = require('firebase/app');
require('firebase/<PACKAGE>');

ES Modules:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';

Typescript:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';
`);at.registerVersion(v5,g5);const m5={apiKey:"AIzaSyBsTEvv_k5WEyjnQy0Cdhr5ZNyZe2N00js",authDomain:"twitter-clone-inflearn-10fc8.firebaseapp.com",projectId:"twitter-clone-inflearn-10fc8",storageBucket:"twitter-clone-inflearn-10fc8.appspot.com",messagingSenderId:"325557618636",appId:"1:325557618636:web:fe74e1dad3ca4f98af3f69",measurementId:"G-NT1D3TVGPK"};at.initializeApp(m5);const Ik=at.auth(),y5=at.firestore();at.storage();const Tk=y5.collection("users"),_5={setup(){const e=Oi(""),t=Oi(""),n=Oi(""),r=Oi(!1),i=_N();return{username:e,email:t,password:n,loading:r,onRegister:async()=>{if(!e.value||!t.value||!n.value){alert(", ,   .");return}try{r.value=!0;const{user:a}=await Ik.createUserWithEmailAndPassword(t.value,n.value);await Tk.doc(a.uid).set({uid:a.uid,email:t.value,profile_image_url:"/profile.jpeg",num_tweets:0,followers:[],followings:[],created_at:Date.now()}),alert("  .   ."),i.push("/login")}catch(a){switch(a.code){case"auth/invalid-email":alert("  .");break;case"auth/weak-password":alert("  ");break;case"auth/email-already-in-use":alert("    .");break;default:alert(" ");break}}finally{r.value=!1}}}}},w5={class:"flex flex-col items-center space-y-4 mt-10"},b5=ot("span",{class:"text-2xl font-bold"}," ",-1),E5={key:0,class:"w-96 rounded bg-light text-white py-3"},I5=ot("button",{class:"text-primary"},"  ?  ",-1);function T5(e,t,n,r,i,s){const a=Br("router-link");return te(),_e("div",w5,[ot("i",{class:Eu(`fab fa-twitter text-4xl text-primary ${r.loading?"animate-bounce":""}`)},null,2),b5,Bc(ot("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>r.username=c),type:"text",class:"rounded w-96 px-4 py-3 border border-gray-300 focus:ring-2 focus:border-primary focus:outline-none",placeholder:""},null,512),[[Gc,r.username]]),Bc(ot("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>r.email=c),type:"text",class:"rounded w-96 px-4 py-3 border border-gray-300 focus:ring-2 focus:border-primary focus:outline-none",placeholder:""},null,512),[[Gc,r.email]]),Bc(ot("input",{onClick:t[2]||(t[2]=(...c)=>r.onRegister&&r.onRegister(...c)),"onUpdate:modelValue":t[3]||(t[3]=c=>r.password=c),type:"password",class:"rounded w-96 px-4 py-3 border border-gray-300 focus:ring-2 focus:border-primary focus:outline-none",placeholder:""},null,512),[[Gc,r.password]]),r.loading?(te(),_e("button",E5," .")):(te(),_e("button",{key:1,class:"w-96 rounded bg-primary text-white py-3 hover:bg-dark",onClick:t[4]||(t[4]=(...c)=>r.onRegister&&r.onRegister(...c))},"")),ye(a,{to:"/login"},{default:Wp(()=>[I5]),_:1})])}const S5=wr(_5,[["render",T5]]);/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var A5="store";function Vu(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function C5(e){return e!==null&&typeof e=="object"}function N5(e){return e&&typeof e.then=="function"}function R5(e,t){return function(){return e(t)}}function Sk(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var r=t.indexOf(e);r>-1&&t.splice(r,1)}}function Ak(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;Md(e,n,[],e._modules.root,!0),zb(e,n,t)}function zb(e,t,n){var r=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var i=e._wrappedGetters,s={};Vu(i,function(a,c){s[c]=R5(a,e),Object.defineProperty(e.getters,c,{get:function(){return s[c]()},enumerable:!0})}),e._state=Ml({data:t}),e.strict&&D5(e),r&&n&&e._withCommit(function(){r.data=null})}function Md(e,t,n,r,i){var s=!n.length,a=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[a],e._modulesNamespaceMap[a]=r),!s&&!i){var c=Kb(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit(function(){c[l]=r.state})}var h=r.context=O5(e,a,n);r.forEachMutation(function(p,v){var m=a+v;x5(e,m,p,h)}),r.forEachAction(function(p,v){var m=p.root?v:a+v,y=p.handler||p;P5(e,m,y,h)}),r.forEachGetter(function(p,v){var m=a+v;k5(e,m,p,h)}),r.forEachChild(function(p,v){Md(e,t,n.concat(v),p,i)})}function O5(e,t,n){var r=t==="",i={dispatch:r?e.dispatch:function(s,a,c){var l=Fp(s,a,c),h=l.payload,p=l.options,v=l.type;return(!p||!p.root)&&(v=t+v),e.dispatch(v,h)},commit:r?e.commit:function(s,a,c){var l=Fp(s,a,c),h=l.payload,p=l.options,v=l.type;(!p||!p.root)&&(v=t+v),e.commit(v,h,p)}};return Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return Ck(e,t)}},state:{get:function(){return Kb(e.state,n)}}}),i}function Ck(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach(function(i){if(i.slice(0,r)===t){var s=i.slice(r);Object.defineProperty(n,s,{get:function(){return e.getters[i]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function x5(e,t,n,r){var i=e._mutations[t]||(e._mutations[t]=[]);i.push(function(a){n.call(e,r.state,a)})}function P5(e,t,n,r){var i=e._actions[t]||(e._actions[t]=[]);i.push(function(a){var c=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},a);return N5(c)||(c=Promise.resolve(c)),e._devtoolHook?c.catch(function(l){throw e._devtoolHook.emit("vuex:error",l),l}):c})}function k5(e,t,n,r){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(s){return n(r.state,r.getters,s.state,s.getters)})}function D5(e){qa(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function Kb(e,t){return t.reduce(function(n,r){return n[r]},e)}function Fp(e,t,n){return C5(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var L5="vuex bindings",i1="vuex:mutations",ay="vuex:actions",Ca="vuex",M5=0;function F5(e,t){tj({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[L5]},function(n){n.addTimelineLayer({id:i1,label:"Vuex Mutations",color:o1}),n.addTimelineLayer({id:ay,label:"Vuex Actions",color:o1}),n.addInspector({id:Ca,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===e&&r.inspectorId===Ca)if(r.filter){var i=[];xk(i,t._modules.root,r.filter,""),r.rootNodes=i}else r.rootNodes=[Ok(t._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===e&&r.inspectorId===Ca){var i=r.nodeId;Ck(t,i),r.state=V5(q5(t._modules,i),i==="root"?t.getters:t._makeLocalGettersCache,i)}}),n.on.editInspectorState(function(r){if(r.app===e&&r.inspectorId===Ca){var i=r.nodeId,s=r.path;i!=="root"&&(s=i.split("/").filter(Boolean).concat(s)),t._withCommit(function(){r.set(t._state.data,s,r.state.value)})}}),t.subscribe(function(r,i){var s={};r.payload&&(s.payload=r.payload),s.state=i,n.notifyComponentUpdate(),n.sendInspectorTree(Ca),n.sendInspectorState(Ca),n.addTimelineEvent({layerId:i1,event:{time:Date.now(),title:r.type,data:s}})}),t.subscribeAction({before:function(r,i){var s={};r.payload&&(s.payload=r.payload),r._id=M5++,r._time=Date.now(),s.state=i,n.addTimelineEvent({layerId:ay,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:s}})},after:function(r,i){var s={},a=Date.now()-r._time;s.duration={_custom:{type:"duration",display:a+"ms",tooltip:"Action duration",value:a}},r.payload&&(s.payload=r.payload),s.state=i,n.addTimelineEvent({layerId:ay,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:s}})}})})}var o1=8702998,U5=6710886,j5=16777215,Nk={label:"namespaced",textColor:j5,backgroundColor:U5};function Rk(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function Ok(e,t){return{id:t||"root",label:Rk(t),tags:e.namespaced?[Nk]:[],children:Object.keys(e._children).map(function(n){return Ok(e._children[n],t+n+"/")})}}function xk(e,t,n,r){r.includes(n)&&e.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:t.namespaced?[Nk]:[]}),Object.keys(t._children).forEach(function(i){xk(e,t._children[i],n,r+i+"/")})}function V5(e,t,n){t=n==="root"?t:t[n];var r=Object.keys(t),i={state:Object.keys(e.state).map(function(a){return{key:a,editable:!0,value:e.state[a]}})};if(r.length){var s=B5(t);i.getters=Object.keys(s).map(function(a){return{key:a.endsWith("/")?Rk(a):a,editable:!1,value:m_(function(){return s[a]})}})}return i}function B5(e){var t={};return Object.keys(e).forEach(function(n){var r=n.split("/");if(r.length>1){var i=t,s=r.pop();r.forEach(function(a){i[a]||(i[a]={_custom:{value:{},display:a,tooltip:"Module",abstract:!0}}),i=i[a]._custom.value}),i[s]=m_(function(){return e[n]})}else t[n]=m_(function(){return e[n]})}),t}function q5(e,t){var n=t.split("/").filter(function(r){return r});return n.reduce(function(r,i,s){var a=r[i];if(!a)throw new Error('Missing module "'+i+'" for path "'+t+'".');return s===n.length-1?a:a._children},t==="root"?e:e.root._children)}function m_(e){try{return e()}catch(t){return t}}var Gr=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var r=t.state;this.state=(typeof r=="function"?r():r)||{}},Pk={namespaced:{configurable:!0}};Pk.namespaced.get=function(){return!!this._rawModule.namespaced};Gr.prototype.addChild=function(t,n){this._children[t]=n};Gr.prototype.removeChild=function(t){delete this._children[t]};Gr.prototype.getChild=function(t){return this._children[t]};Gr.prototype.hasChild=function(t){return t in this._children};Gr.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};Gr.prototype.forEachChild=function(t){Vu(this._children,t)};Gr.prototype.forEachGetter=function(t){this._rawModule.getters&&Vu(this._rawModule.getters,t)};Gr.prototype.forEachAction=function(t){this._rawModule.actions&&Vu(this._rawModule.actions,t)};Gr.prototype.forEachMutation=function(t){this._rawModule.mutations&&Vu(this._rawModule.mutations,t)};Object.defineProperties(Gr.prototype,Pk);var Qs=function(t){this.register([],t,!1)};Qs.prototype.get=function(t){return t.reduce(function(n,r){return n.getChild(r)},this.root)};Qs.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(r,i){return n=n.getChild(i),r+(n.namespaced?i+"/":"")},"")};Qs.prototype.update=function(t){kk([],this.root,t)};Qs.prototype.register=function(t,n,r){var i=this;r===void 0&&(r=!0);var s=new Gr(n,r);if(t.length===0)this.root=s;else{var a=this.get(t.slice(0,-1));a.addChild(t[t.length-1],s)}n.modules&&Vu(n.modules,function(c,l){i.register(t.concat(l),c,r)})};Qs.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),r=t[t.length-1],i=n.getChild(r);i&&i.runtime&&n.removeChild(r)};Qs.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),r=t[t.length-1];return n?n.hasChild(r):!1};function kk(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return;kk(e.concat(r),t.getChild(r),n.modules[r])}}function H5(e){return new Qn(e)}var Qn=function(t){var n=this;t===void 0&&(t={});var r=t.plugins;r===void 0&&(r=[]);var i=t.strict;i===void 0&&(i=!1);var s=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Qs(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=s;var a=this,c=this,l=c.dispatch,h=c.commit;this.dispatch=function(m,y){return l.call(a,m,y)},this.commit=function(m,y,b){return h.call(a,m,y,b)},this.strict=i;var p=this._modules.root.state;Md(this,p,[],this._modules.root),zb(this,p),r.forEach(function(v){return v(n)})},Qb={state:{configurable:!0}};Qn.prototype.install=function(t,n){t.provide(n||A5,this),t.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&F5(t,this)};Qb.state.get=function(){return this._state.data};Qb.state.set=function(e){};Qn.prototype.commit=function(t,n,r){var i=this,s=Fp(t,n,r),a=s.type,c=s.payload,l={type:a,payload:c},h=this._mutations[a];h&&(this._withCommit(function(){h.forEach(function(v){v(c)})}),this._subscribers.slice().forEach(function(p){return p(l,i.state)}))};Qn.prototype.dispatch=function(t,n){var r=this,i=Fp(t,n),s=i.type,a=i.payload,c={type:s,payload:a},l=this._actions[s];if(l){try{this._actionSubscribers.slice().filter(function(p){return p.before}).forEach(function(p){return p.before(c,r.state)})}catch{}var h=l.length>1?Promise.all(l.map(function(p){return p(a)})):l[0](a);return new Promise(function(p,v){h.then(function(m){try{r._actionSubscribers.filter(function(y){return y.after}).forEach(function(y){return y.after(c,r.state)})}catch{}p(m)},function(m){try{r._actionSubscribers.filter(function(y){return y.error}).forEach(function(y){return y.error(c,r.state,m)})}catch{}v(m)})})}};Qn.prototype.subscribe=function(t,n){return Sk(t,this._subscribers,n)};Qn.prototype.subscribeAction=function(t,n){var r=typeof t=="function"?{before:t}:t;return Sk(r,this._actionSubscribers,n)};Qn.prototype.watch=function(t,n,r){var i=this;return qa(function(){return t(i.state,i.getters)},n,Object.assign({},r))};Qn.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};Qn.prototype.registerModule=function(t,n,r){r===void 0&&(r={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),Md(this,this.state,t,this._modules.get(t),r.preserveState),zb(this,this.state)};Qn.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var r=Kb(n.state,t.slice(0,-1));delete r[t[t.length-1]]}),Ak(this)};Qn.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};Qn.prototype.hotUpdate=function(t){this._modules.update(t),Ak(this,!0)};Qn.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(Qn.prototype,Qb);var G5=function(e){return function(t){return!!t&&typeof t=="object"}(e)&&!function(t){var n=Object.prototype.toString.call(t);return n==="[object RegExp]"||n==="[object Date]"||function(r){return r.$$typeof===W5}(t)}(e)},W5=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function Vc(e,t){return t.clone!==!1&&t.isMergeableObject(e)?bu(Array.isArray(e)?[]:{},e,t):e}function $5(e,t,n){return e.concat(t).map(function(r){return Vc(r,n)})}function s1(e){return Object.keys(e).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(n){return t.propertyIsEnumerable(n)}):[]}(e))}function a1(e,t){try{return t in e}catch{return!1}}function bu(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||$5,n.isMergeableObject=n.isMergeableObject||G5,n.cloneUnlessOtherwiseSpecified=Vc;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(i,s,a){var c={};return a.isMergeableObject(i)&&s1(i).forEach(function(l){c[l]=Vc(i[l],a)}),s1(s).forEach(function(l){(function(h,p){return a1(h,p)&&!(Object.hasOwnProperty.call(h,p)&&Object.propertyIsEnumerable.call(h,p))})(i,l)||(c[l]=a1(i,l)&&a.isMergeableObject(s[l])?function(h,p){if(!p.customMerge)return bu;var v=p.customMerge(h);return typeof v=="function"?v:bu}(l,a)(i[l],s[l],a):Vc(s[l],a))}),c}(e,t,n):Vc(t,n)}bu.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,r){return bu(n,r,t)},{})};var z5=bu;function K5(e){var t=(e=e||{}).storage||window&&window.localStorage,n=e.key||"vuex";function r(p,v){var m=v.getItem(p);try{return typeof m=="string"?JSON.parse(m):typeof m=="object"?m:void 0}catch{}}function i(){return!0}function s(p,v,m){return m.setItem(p,JSON.stringify(v))}function a(p,v){return Array.isArray(v)?v.reduce(function(m,y){return function(I,C,P,D){return!/^(__proto__|constructor|prototype)$/.test(C)&&((C=C.split?C.split("."):C.slice(0)).slice(0,-1).reduce(function(F,Q){return F[Q]=F[Q]||{}},I)[C.pop()]=P),I}(m,y,(b=p,(b=((E=y).split?E.split("."):E).reduce(function(I,C){return I&&I[C]},b))===void 0?void 0:b));var b,E},{}):p}function c(p){return function(v){return p.subscribe(v)}}(e.assertStorage||function(){t.setItem("@@",1),t.removeItem("@@")})(t);var l,h=function(){return(e.getState||r)(n,t)};return e.fetchBeforeUse&&(l=h()),function(p){e.fetchBeforeUse||(l=h()),typeof l=="object"&&l!==null&&(p.replaceState(e.overwrite?l:z5(p.state,l,{arrayMerge:e.arrayMerger||function(v,m){return m},clone:!1})),(e.rehydrated||function(){})(p)),(e.subscriber||c)(p)(function(v,m){(e.filter||i)(v)&&(e.setState||s)(n,(e.reducer||a)(m,e.paths),t)})}}const $h=H5({state(){return{user:null}},mutations:{SET_USER:(e,t)=>{e.user=t}},plugins:[K5()]}),Q5={setup(){const e=Oi(""),t=Oi(""),n=Oi(!1);return _N(),W1(()=>{console.log($h.state.user)}),{email:e,password:t,loading:n,onLogin:async()=>{if(!e.value||!t.value){alert(",   .");return}try{n.value=!0;const{user:i}=await Ik.signInWithEmailAndPassword(e.value,t.value),s=await Tk.doc(i.uid).get();$h.commit("SET_USER",s.data()),console.log("######: "+$h.state.user)}catch(i){switch(i.code){case"auth/invalid-email":alert("  .");break;case"auth/invalid-password":alert(" .");break;case"auth/user-not-found":alert("  .");break;default:alert(i.message);break}}finally{n.value=!1}}}}},Y5={class:"flex flex-col items-center space-y-4 mt-10"},X5=ot("span",{class:"text-2xl font-bold"}," ",-1),J5={key:0,class:"w-96 rounded bg-light text-white py-3"},Z5=ot("button",{class:"text-primary"}," ?  ",-1);function tY(e,t,n,r,i,s){const a=Br("router-link");return te(),_e("div",Y5,[ot("i",{class:Eu(`fab fa-twitter text-4xl text-primary ${r.loading?"animate-bounce":""}`)},null,2),X5,Bc(ot("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>r.email=c),type:"text",class:"rounded w-96 px-4 py-3 border border-gray-300 focus:ring-2 focus:border-primary focus:outline-none",placeholder:""},null,512),[[Gc,r.email]]),Bc(ot("input",{onKeyup:t[1]||(t[1]=qU((...c)=>r.onLogin&&r.onLogin(...c),["enter"])),"onUpdate:modelValue":t[2]||(t[2]=c=>r.password=c),type:"password",class:"rounded w-96 px-4 py-3 border border-gray-300 focus:ring-2 focus:border-primary focus:outline-none",placeholder:""},null,544),[[Gc,r.password]]),r.loading?(te(),_e("button",J5," .")):(te(),_e("button",{key:1,class:"w-96 rounded bg-primary text-white py-3 hover:bg-dark",onClick:t[3]||(t[3]=(...c)=>r.onLogin&&r.onLogin(...c))},"")),ye(a,{to:"/register"},{default:Wp(()=>[Z5]),_:1})])}const eY=wr(Q5,[["render",tY]]),nY=[{path:"/",component:NS,title:"",icon:"fas fa-home fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout"}},{path:"/",component:NS,title:"",icon:"fas fa-hashtag fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout"}},{path:"/notifications",component:LV,title:"",icon:"far fa-bell fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout"}},{path:"/Messages",component:mm,title:"",icon:"far fa-envelope fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout"}},{path:"/",component:mm,title:"",icon:"far fa-bookmark fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout"}},{path:"/",component:mm,title:"",icon:"far fa-list-alt fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout"}},{path:"/Profile",component:RS,title:"",icon:"far fa-user fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout"}},{path:"/",component:RS,title:"",icon:"fas fa-ellipsis-h fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout"}},{path:"/register",component:S5,meta:{isMenu:!1,layout:"EmptyLayout"}},{path:"/login",component:eY,meta:{isMenu:!1,layout:"EmptyLayout"}}],Yb=nV({history:yj(),routes:nY});Yb.beforeEach((e,t,n)=>{n()});const rY={setup(){const e=Oi([]);return G1(()=>{e.value=Yb.options.routes}),{routes:e}}},iY={class:"flex h-screen container mx-auto"},oY={class:"w-20 xl:w-1/4 pt-5 xl:ml-10 flex flex-col justify-between border-r border-gray-100"},sY={class:"flex flex-col items-center xl:items-start"},aY=ot("i",{class:"fab fa-twitter text-3xl text-primary xl:ml-4 mb-3"},null,-1),uY={class:"flex flex-col items-start space-y-1"},cY={key:0},lY={class:"ml-5 text-xl hidden xl:inline-block"},fY=ot("div",{class:"w-full xl:pr-3 flex justify-center"},[ot("button",{class:"mt-3 bg-primary text-white xl:w-full w-12 h-12 rounded-full hover:bg-dark"},[ot("span",{class:"hidden xl:block"},""),ot("i",{class:"fas fa-plus xl:hidden"})])],-1),hY=di('<div class="xl:mr-3 mb-3"><button class="hidden xl:flex mt-3 px-2 py-1 w-full h-12 rounded-full hover:bg-blue-50 items-center"><img src="http://picsum.photos/100" class="w-10 h-10 rounded-full"><div class="xl:ml-2 hidden xl:block"><div class="text-sm font-bold">jjw.com</div><div class="text-xs text-gray-500 text-left">@jjw</div></div><i class="ml-auto fas fa-ellipsis-h fa-fw text-xs hidden xl:block"></i></button><div class="xl:hidden flex justify-center"><img src="http://picsum.photos/100" class="w-10 h-10 rounded-full cursor-pointer hover:opacity-80"></div></div>',1),pY={class:"flex-1 flex h-screen"};function dY(e,t,n,r,i,s){const a=Br("router-link"),c=Br("router-view");return te(),_e("div",iY,[ot("div",oY,[ot("div",sY,[aY,ot("div",uY,[(te(!0),_e(Fe,null,Co(r.routes,l=>(te(),Fl(a,{to:l.path,class:"hover:text-primary hover:bg-blue-50 px-4 py-2 rounded-full cursor-pointer",key:l},{default:Wp(()=>[l.meta.isMenu?(te(),_e("div",cY,[ot("i",{class:Eu(l.icon)},null,2),ot("span",lY,UF(l.title),1)])):lU("",!0)]),_:2},1032,["to"]))),128))]),fY]),hY]),ot("div",pY,[ye(c)])])}const vY=wr(rY,[["render",dY]]),gY={};function mY(e,t,n,r,i,s){const a=Br("router-view");return te(),Fl(a)}const yY=wr(gY,[["render",mY]]),_Y={components:{DefaultLayout:vY,EmptyLayout:yY},setup(){const e=iV();return{layout:dr(()=>e.meta.layout||"DefaultLayout")}}};function wY(e,t,n,r,i,s){return te(),Fl(q2(r.layout))}const bY=wr(_Y,[["render",wY]]),EY={components:{Layout:bY}};function IY(e,t,n,r,i,s){const a=Br("Layout");return te(),Fl(a)}const TY=wr(EY,[["render",IY]]);WU(TY).use(Yb).use($h).mount("#app");
