(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function w_(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?i=>!!n[i.toLowerCase()]:i=>!!n[i]}const ie={},ja=[],Fr=()=>{},AF=()=>!1,CF=/^on[^a-z]/,Bp=e=>CF.test(e),b_=e=>e.startsWith("onUpdate:"),Je=Object.assign,E_=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},NF=Object.prototype.hasOwnProperty,jt=(e,t)=>NF.call(e,t),Et=Array.isArray,Va=e=>qp(e)==="[object Map]",cC=e=>qp(e)==="[object Set]",Ct=e=>typeof e=="function",ke=e=>typeof e=="string",I_=e=>typeof e=="symbol",fe=e=>e!==null&&typeof e=="object",lC=e=>fe(e)&&Ct(e.then)&&Ct(e.catch),fC=Object.prototype.toString,qp=e=>fC.call(e),RF=e=>qp(e).slice(8,-1),hC=e=>qp(e)==="[object Object]",T_=e=>ke(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Dh=w_(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Hp=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},OF=/-(\w)/g,hi=Hp(e=>e.replace(OF,(t,n)=>n?n.toUpperCase():"")),xF=/\B([A-Z])/g,Vs=Hp(e=>e.replace(xF,"-$1").toLowerCase()),Gp=Hp(e=>e.charAt(0).toUpperCase()+e.slice(1)),hm=Hp(e=>e?`on${Gp(e)}`:""),ol=(e,t)=>!Object.is(e,t),Lh=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},Yh=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},ly=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let MT;const fy=()=>MT||(MT=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function S_(e){if(Et(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=ke(r)?LF(r):S_(r);if(i)for(const s in i)t[s]=i[s]}return t}else{if(ke(e))return e;if(fe(e))return e}}const PF=/;(?![^(]*\))/g,kF=/:([^]+)/,DF=/\/\*[^]*?\*\//g;function LF(e){const t={};return e.replace(DF,"").split(PF).forEach(n=>{if(n){const r=n.split(kF);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Rs(e){let t="";if(ke(e))t=e;else if(Et(e))for(let n=0;n<e.length;n++){const r=Rs(e[n]);r&&(t+=r+" ")}else if(fe(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const MF="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",FF=w_(MF);function pC(e){return!!e||e===""}const ba=e=>ke(e)?e:e==null?"":Et(e)||fe(e)&&(e.toString===fC||!Ct(e.toString))?JSON.stringify(e,dC,2):String(e),dC=(e,t)=>t&&t.__v_isRef?dC(e,t.value):Va(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,i])=>(n[`${r} =>`]=i,n),{})}:cC(t)?{[`Set(${t.size})`]:[...t.values()]}:fe(t)&&!Et(t)&&!hC(t)?String(t):t;let Rr;class UF{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Rr,!t&&Rr&&(this.index=(Rr.scopes||(Rr.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const n=Rr;try{return Rr=this,t()}finally{Rr=n}}}on(){Rr=this}off(){Rr=this.parent}stop(t){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function jF(e,t=Rr){t&&t.active&&t.effects.push(e)}function VF(){return Rr}const A_=e=>{const t=new Set(e);return t.w=0,t.n=0,t},vC=e=>(e.w&So)>0,gC=e=>(e.n&So)>0,BF=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=So},qF=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];vC(i)&&!gC(i)?i.delete(e):t[n++]=i,i.w&=~So,i.n&=~So}t.length=n}},hy=new WeakMap;let Vc=0,So=1;const py=30;let xr;const bs=Symbol(""),dy=Symbol("");class C_{constructor(t,n=null,r){this.fn=t,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,jF(this,r)}run(){if(!this.active)return this.fn();let t=xr,n=wo;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=xr,xr=this,wo=!0,So=1<<++Vc,Vc<=py?BF(this):FT(this),this.fn()}finally{Vc<=py&&qF(this),So=1<<--Vc,xr=this.parent,wo=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){xr===this?this.deferStop=!0:this.active&&(FT(this),this.onStop&&this.onStop(),this.active=!1)}}function FT(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}let wo=!0;const mC=[];function Cu(){mC.push(wo),wo=!1}function Nu(){const e=mC.pop();wo=e===void 0?!0:e}function $n(e,t,n){if(wo&&xr){let r=hy.get(e);r||hy.set(e,r=new Map);let i=r.get(n);i||r.set(n,i=A_()),yC(i)}}function yC(e,t){let n=!1;Vc<=py?gC(e)||(e.n|=So,n=!vC(e)):n=!e.has(xr),n&&(e.add(xr),xr.deps.push(e))}function Fi(e,t,n,r,i,s){const a=hy.get(e);if(!a)return;let c=[];if(t==="clear")c=[...a.values()];else if(n==="length"&&Et(e)){const l=Number(r);a.forEach((h,p)=>{(p==="length"||p>=l)&&c.push(h)})}else switch(n!==void 0&&c.push(a.get(n)),t){case"add":Et(e)?T_(n)&&c.push(a.get("length")):(c.push(a.get(bs)),Va(e)&&c.push(a.get(dy)));break;case"delete":Et(e)||(c.push(a.get(bs)),Va(e)&&c.push(a.get(dy)));break;case"set":Va(e)&&c.push(a.get(bs));break}if(c.length===1)c[0]&&vy(c[0]);else{const l=[];for(const h of c)h&&l.push(...h);vy(A_(l))}}function vy(e,t){const n=Et(e)?e:[...e];for(const r of n)r.computed&&UT(r);for(const r of n)r.computed||UT(r)}function UT(e,t){(e!==xr||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const HF=w_("__proto__,__v_isRef,__isVue"),_C=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(I_)),GF=N_(),WF=N_(!1,!0),$F=N_(!0),jT=zF();function zF(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const r=Gt(this);for(let s=0,a=this.length;s<a;s++)$n(r,"get",s+"");const i=r[t](...n);return i===-1||i===!1?r[t](...n.map(Gt)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){Cu();const r=Gt(this)[t].apply(this,n);return Nu(),r}}),e}function KF(e){const t=Gt(this);return $n(t,"has",e),t.hasOwnProperty(e)}function N_(e=!1,t=!1){return function(r,i,s){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&s===(e?t?l2:TC:t?IC:EC).get(r))return r;const a=Et(r);if(!e){if(a&&jt(jT,i))return Reflect.get(jT,i,s);if(i==="hasOwnProperty")return KF}const c=Reflect.get(r,i,s);return(I_(i)?_C.has(i):HF(i))||(e||$n(r,"get",i),t)?c:pn(c)?a&&T_(i)?c:c.value:fe(c)?e?AC(c):Vl(c):c}}const QF=wC(),YF=wC(!0);function wC(e=!1){return function(n,r,i,s){let a=n[r];if(Ja(a)&&pn(a)&&!pn(i))return!1;if(!e&&(!Xh(i)&&!Ja(i)&&(a=Gt(a),i=Gt(i)),!Et(n)&&pn(a)&&!pn(i)))return a.value=i,!0;const c=Et(n)&&T_(r)?Number(r)<n.length:jt(n,r),l=Reflect.set(n,r,i,s);return n===Gt(s)&&(c?ol(i,a)&&Fi(n,"set",r,i):Fi(n,"add",r,i)),l}}function XF(e,t){const n=jt(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Fi(e,"delete",t,void 0),r}function JF(e,t){const n=Reflect.has(e,t);return(!I_(t)||!_C.has(t))&&$n(e,"has",t),n}function ZF(e){return $n(e,"iterate",Et(e)?"length":bs),Reflect.ownKeys(e)}const bC={get:GF,set:QF,deleteProperty:XF,has:JF,ownKeys:ZF},t2={get:$F,set(e,t){return!0},deleteProperty(e,t){return!0}},e2=Je({},bC,{get:WF,set:YF}),R_=e=>e,Wp=e=>Reflect.getPrototypeOf(e);function hh(e,t,n=!1,r=!1){e=e.__v_raw;const i=Gt(e),s=Gt(t);n||(t!==s&&$n(i,"get",t),$n(i,"get",s));const{has:a}=Wp(i),c=r?R_:n?P_:sl;if(a.call(i,t))return c(e.get(t));if(a.call(i,s))return c(e.get(s));e!==i&&e.get(t)}function ph(e,t=!1){const n=this.__v_raw,r=Gt(n),i=Gt(e);return t||(e!==i&&$n(r,"has",e),$n(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function dh(e,t=!1){return e=e.__v_raw,!t&&$n(Gt(e),"iterate",bs),Reflect.get(e,"size",e)}function VT(e){e=Gt(e);const t=Gt(this);return Wp(t).has.call(t,e)||(t.add(e),Fi(t,"add",e,e)),this}function BT(e,t){t=Gt(t);const n=Gt(this),{has:r,get:i}=Wp(n);let s=r.call(n,e);s||(e=Gt(e),s=r.call(n,e));const a=i.call(n,e);return n.set(e,t),s?ol(t,a)&&Fi(n,"set",e,t):Fi(n,"add",e,t),this}function qT(e){const t=Gt(this),{has:n,get:r}=Wp(t);let i=n.call(t,e);i||(e=Gt(e),i=n.call(t,e)),r&&r.call(t,e);const s=t.delete(e);return i&&Fi(t,"delete",e,void 0),s}function HT(){const e=Gt(this),t=e.size!==0,n=e.clear();return t&&Fi(e,"clear",void 0,void 0),n}function vh(e,t){return function(r,i){const s=this,a=s.__v_raw,c=Gt(a),l=t?R_:e?P_:sl;return!e&&$n(c,"iterate",bs),a.forEach((h,p)=>r.call(i,l(h),l(p),s))}}function gh(e,t,n){return function(...r){const i=this.__v_raw,s=Gt(i),a=Va(s),c=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,h=i[e](...r),p=n?R_:t?P_:sl;return!t&&$n(s,"iterate",l?dy:bs),{next(){const{value:v,done:m}=h.next();return m?{value:v,done:m}:{value:c?[p(v[0]),p(v[1])]:p(v),done:m}},[Symbol.iterator](){return this}}}}function no(e){return function(...t){return e==="delete"?!1:this}}function n2(){const e={get(s){return hh(this,s)},get size(){return dh(this)},has:ph,add:VT,set:BT,delete:qT,clear:HT,forEach:vh(!1,!1)},t={get(s){return hh(this,s,!1,!0)},get size(){return dh(this)},has:ph,add:VT,set:BT,delete:qT,clear:HT,forEach:vh(!1,!0)},n={get(s){return hh(this,s,!0)},get size(){return dh(this,!0)},has(s){return ph.call(this,s,!0)},add:no("add"),set:no("set"),delete:no("delete"),clear:no("clear"),forEach:vh(!0,!1)},r={get(s){return hh(this,s,!0,!0)},get size(){return dh(this,!0)},has(s){return ph.call(this,s,!0)},add:no("add"),set:no("set"),delete:no("delete"),clear:no("clear"),forEach:vh(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=gh(s,!1,!1),n[s]=gh(s,!0,!1),t[s]=gh(s,!1,!0),r[s]=gh(s,!0,!0)}),[e,n,t,r]}const[r2,i2,o2,s2]=n2();function O_(e,t){const n=t?e?s2:o2:e?i2:r2;return(r,i,s)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?r:Reflect.get(jt(n,i)&&i in r?n:r,i,s)}const a2={get:O_(!1,!1)},u2={get:O_(!1,!0)},c2={get:O_(!0,!1)},EC=new WeakMap,IC=new WeakMap,TC=new WeakMap,l2=new WeakMap;function f2(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function h2(e){return e.__v_skip||!Object.isExtensible(e)?0:f2(RF(e))}function Vl(e){return Ja(e)?e:x_(e,!1,bC,a2,EC)}function SC(e){return x_(e,!1,e2,u2,IC)}function AC(e){return x_(e,!0,t2,c2,TC)}function x_(e,t,n,r,i){if(!fe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=i.get(e);if(s)return s;const a=h2(e);if(a===0)return e;const c=new Proxy(e,a===2?r:n);return i.set(e,c),c}function Ba(e){return Ja(e)?Ba(e.__v_raw):!!(e&&e.__v_isReactive)}function Ja(e){return!!(e&&e.__v_isReadonly)}function Xh(e){return!!(e&&e.__v_isShallow)}function CC(e){return Ba(e)||Ja(e)}function Gt(e){const t=e&&e.__v_raw;return t?Gt(t):e}function NC(e){return Yh(e,"__v_skip",!0),e}const sl=e=>fe(e)?Vl(e):e,P_=e=>fe(e)?AC(e):e;function RC(e){wo&&xr&&(e=Gt(e),yC(e.dep||(e.dep=A_())))}function OC(e,t){e=Gt(e);const n=e.dep;n&&vy(n)}function pn(e){return!!(e&&e.__v_isRef===!0)}function Pr(e){return xC(e,!1)}function p2(e){return xC(e,!0)}function xC(e,t){return pn(e)?e:new d2(e,t)}class d2{constructor(t,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?t:Gt(t),this._value=n?t:sl(t)}get value(){return RC(this),this._value}set value(t){const n=this.__v_isShallow||Xh(t)||Ja(t);t=n?t:Gt(t),ol(t,this._rawValue)&&(this._rawValue=t,this._value=n?t:sl(t),OC(this))}}function qa(e){return pn(e)?e.value:e}const v2={get:(e,t,n)=>qa(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return pn(i)&&!pn(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function PC(e){return Ba(e)?e:new Proxy(e,v2)}class g2{constructor(t,n,r,i){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new C_(t,()=>{this._dirty||(this._dirty=!0,OC(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=Gt(this);return RC(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function m2(e,t,n=!1){let r,i;const s=Ct(e);return s?(r=e,i=Fr):(r=e.get,i=e.set),new g2(r,i,s||!i,n)}function bo(e,t,n,r){let i;try{i=r?e(...r):e()}catch(s){$p(s,t,n)}return i}function Ur(e,t,n,r){if(Ct(e)){const s=bo(e,t,n,r);return s&&lC(s)&&s.catch(a=>{$p(a,t,n)}),s}const i=[];for(let s=0;s<e.length;s++)i.push(Ur(e[s],t,n,r));return i}function $p(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let s=t.parent;const a=t.proxy,c=n;for(;s;){const h=s.ec;if(h){for(let p=0;p<h.length;p++)if(h[p](e,a,c)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){bo(l,null,10,[e,a,c]);return}}y2(e,n,i,r)}function y2(e,t,n,r=!0){console.error(e)}let al=!1,gy=!1;const hn=[];let oi=0;const Ha=[];let Ni=null,fs=0;const kC=Promise.resolve();let k_=null;function DC(e){const t=k_||kC;return e?t.then(this?e.bind(this):e):t}function _2(e){let t=oi+1,n=hn.length;for(;t<n;){const r=t+n>>>1;ul(hn[r])<e?t=r+1:n=r}return t}function D_(e){(!hn.length||!hn.includes(e,al&&e.allowRecurse?oi+1:oi))&&(e.id==null?hn.push(e):hn.splice(_2(e.id),0,e),LC())}function LC(){!al&&!gy&&(gy=!0,k_=kC.then(FC))}function w2(e){const t=hn.indexOf(e);t>oi&&hn.splice(t,1)}function b2(e){Et(e)?Ha.push(...e):(!Ni||!Ni.includes(e,e.allowRecurse?fs+1:fs))&&Ha.push(e),LC()}function GT(e,t=al?oi+1:0){for(;t<hn.length;t++){const n=hn[t];n&&n.pre&&(hn.splice(t,1),t--,n())}}function MC(e){if(Ha.length){const t=[...new Set(Ha)];if(Ha.length=0,Ni){Ni.push(...t);return}for(Ni=t,Ni.sort((n,r)=>ul(n)-ul(r)),fs=0;fs<Ni.length;fs++)Ni[fs]();Ni=null,fs=0}}const ul=e=>e.id==null?1/0:e.id,E2=(e,t)=>{const n=ul(e)-ul(t);if(n===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function FC(e){gy=!1,al=!0,hn.sort(E2);const t=Fr;try{for(oi=0;oi<hn.length;oi++){const n=hn[oi];n&&n.active!==!1&&bo(n,null,14)}}finally{oi=0,hn.length=0,MC(),al=!1,k_=null,(hn.length||Ha.length)&&FC()}}function I2(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||ie;let i=n;const s=t.startsWith("update:"),a=s&&t.slice(7);if(a&&a in r){const p=`${a==="modelValue"?"model":a}Modifiers`,{number:v,trim:m}=r[p]||ie;m&&(i=n.map(y=>ke(y)?y.trim():y)),v&&(i=n.map(ly))}let c,l=r[c=hm(t)]||r[c=hm(hi(t))];!l&&s&&(l=r[c=hm(Vs(t))]),l&&Ur(l,e,6,i);const h=r[c+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[c])return;e.emitted[c]=!0,Ur(h,e,6,i)}}function UC(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(i!==void 0)return i;const s=e.emits;let a={},c=!1;if(!Ct(e)){const l=h=>{const p=UC(h,t,!0);p&&(c=!0,Je(a,p))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!c?(fe(e)&&r.set(e,null),null):(Et(s)?s.forEach(l=>a[l]=null):Je(a,s),fe(e)&&r.set(e,a),a)}function zp(e,t){return!e||!Bp(t)?!1:(t=t.slice(2).replace(/Once$/,""),jt(e,t[0].toLowerCase()+t.slice(1))||jt(e,Vs(t))||jt(e,t))}let vr=null,jC=null;function Jh(e){const t=vr;return vr=e,jC=e&&e.type.__scopeId||null,t}function Kp(e,t=vr,n){if(!t||e._n)return e;const r=(...i)=>{r._d&&eS(-1);const s=Jh(t);let a;try{a=e(...i)}finally{Jh(s),r._d&&eS(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function pm(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:s,propsOptions:[a],slots:c,attrs:l,emit:h,render:p,renderCache:v,data:m,setupState:y,ctx:b,inheritAttrs:E}=e;let I,C;const P=Jh(e);try{if(n.shapeFlag&4){const F=i||r;I=ii(p.call(F,F,v,s,y,m,b)),C=l}else{const F=t;I=ii(F.length>1?F(s,{attrs:l,slots:c,emit:h}):F(s,null)),C=t.props?l:T2(l)}}catch(F){zc.length=0,$p(F,e,1),I=_e(Os)}let D=I;if(C&&E!==!1){const F=Object.keys(C),{shapeFlag:Y}=D;F.length&&Y&7&&(a&&F.some(b_)&&(C=S2(C,a)),D=Za(D,C))}return n.dirs&&(D=Za(D),D.dirs=D.dirs?D.dirs.concat(n.dirs):n.dirs),n.transition&&(D.transition=n.transition),I=D,Jh(P),I}const T2=e=>{let t;for(const n in e)(n==="class"||n==="style"||Bp(n))&&((t||(t={}))[n]=e[n]);return t},S2=(e,t)=>{const n={};for(const r in e)(!b_(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function A2(e,t,n){const{props:r,children:i,component:s}=e,{props:a,children:c,patchFlag:l}=t,h=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?WT(r,a,h):!!a;if(l&8){const p=t.dynamicProps;for(let v=0;v<p.length;v++){const m=p[v];if(a[m]!==r[m]&&!zp(h,m))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:r===a?!1:r?a?WT(r,a,h):!0:!!a;return!1}function WT(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(t[s]!==e[s]&&!zp(n,s))return!0}return!1}function C2({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const N2=e=>e.__isSuspense;function R2(e,t){t&&t.pendingBranch?Et(e)?t.effects.push(...e):t.effects.push(e):b2(e)}const mh={};function Ga(e,t,n){return VC(e,t,n)}function VC(e,t,{immediate:n,deep:r,flush:i,onTrack:s,onTrigger:a}=ie){var c;const l=VF()===((c=on)==null?void 0:c.scope)?on:null;let h,p=!1,v=!1;if(pn(e)?(h=()=>e.value,p=Xh(e)):Ba(e)?(h=()=>e,r=!0):Et(e)?(v=!0,p=e.some(F=>Ba(F)||Xh(F)),h=()=>e.map(F=>{if(pn(F))return F.value;if(Ba(F))return vs(F);if(Ct(F))return bo(F,l,2)})):Ct(e)?t?h=()=>bo(e,l,2):h=()=>{if(!(l&&l.isUnmounted))return m&&m(),Ur(e,l,3,[y])}:h=Fr,t&&r){const F=h;h=()=>vs(F())}let m,y=F=>{m=P.onStop=()=>{bo(F,l,4)}},b;if(ll)if(y=Fr,t?n&&Ur(t,l,3,[h(),v?[]:void 0,y]):h(),i==="sync"){const F=bU();b=F.__watcherHandles||(F.__watcherHandles=[])}else return Fr;let E=v?new Array(e.length).fill(mh):mh;const I=()=>{if(P.active)if(t){const F=P.run();(r||p||(v?F.some((Y,U)=>ol(Y,E[U])):ol(F,E)))&&(m&&m(),Ur(t,l,3,[F,E===mh?void 0:v&&E[0]===mh?[]:E,y]),E=F)}else P.run()};I.allowRecurse=!!t;let C;i==="sync"?C=I:i==="post"?C=()=>Vn(I,l&&l.suspense):(I.pre=!0,l&&(I.id=l.uid),C=()=>D_(I));const P=new C_(h,C);t?n?I():E=P.run():i==="post"?Vn(P.run.bind(P),l&&l.suspense):P.run();const D=()=>{P.stop(),l&&l.scope&&E_(l.scope.effects,P)};return b&&b.push(D),D}function O2(e,t,n){const r=this.proxy,i=ke(e)?e.includes(".")?BC(r,e):()=>r[e]:e.bind(r,r);let s;Ct(t)?s=t:(s=t.handler,n=t);const a=on;tu(this);const c=VC(i,s.bind(r),n);return a?tu(a):Es(),c}function BC(e,t){const n=t.split(".");return()=>{let r=e;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function vs(e,t){if(!fe(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),pn(e))vs(e.value,t);else if(Et(e))for(let n=0;n<e.length;n++)vs(e[n],t);else if(cC(e)||Va(e))e.forEach(n=>{vs(n,t)});else if(hC(e))for(const n in e)vs(e[n],t);return e}function Wa(e,t){const n=vr;if(n===null)return e;const r=Jp(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[a,c,l,h=ie]=t[s];a&&(Ct(a)&&(a={mounted:a,updated:a}),a.deep&&vs(c),i.push({dir:a,instance:r,value:c,oldValue:void 0,arg:l,modifiers:h}))}return e}function as(e,t,n,r){const i=e.dirs,s=t&&t.dirs;for(let a=0;a<i.length;a++){const c=i[a];s&&(c.oldValue=s[a].value);let l=c.dir[r];l&&(Cu(),Ur(l,n,8,[e.el,c,e,t]),Nu())}}function qC(e,t){return Ct(e)?(()=>Je({name:e.name},t,{setup:e}))():e}const Mh=e=>!!e.type.__asyncLoader,HC=e=>e.type.__isKeepAlive;function x2(e,t){GC(e,"a",t)}function P2(e,t){GC(e,"da",t)}function GC(e,t,n=on){const r=e.__wdc||(e.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(Qp(t,r,n),n){let i=n.parent;for(;i&&i.parent;)HC(i.parent.vnode)&&k2(r,t,n,i),i=i.parent}}function k2(e,t,n,r){const i=Qp(t,e,r,!0);$C(()=>{E_(r[t],i)},n)}function Qp(e,t,n=on,r=!1){if(n){const i=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...a)=>{if(n.isUnmounted)return;Cu(),tu(n);const c=Ur(t,n,e,a);return Es(),Nu(),c});return r?i.unshift(s):i.push(s),s}}const Hi=e=>(t,n=on)=>(!ll||e==="sp")&&Qp(e,(...r)=>t(...r),n),WC=Hi("bm"),D2=Hi("m"),L2=Hi("bu"),M2=Hi("u"),F2=Hi("bum"),$C=Hi("um"),U2=Hi("sp"),j2=Hi("rtg"),V2=Hi("rtc");function B2(e,t=on){Qp("ec",e,t)}const L_="components";function qr(e,t){return KC(L_,e,!0,t)||e}const zC=Symbol.for("v-ndc");function q2(e){return ke(e)?KC(L_,e,!1)||e:e||zC}function KC(e,t,n=!0,r=!1){const i=vr||on;if(i){const s=i.type;if(e===L_){const c=yU(s,!1);if(c&&(c===t||c===hi(t)||c===Gp(hi(t))))return s}const a=$T(i[e]||s[e],t)||$T(i.appContext[e],t);return!a&&r?s:a}}function $T(e,t){return e&&(e[t]||e[hi(t)]||e[Gp(hi(t))])}function Ao(e,t,n,r){let i;const s=n&&n[r];if(Et(e)||ke(e)){i=new Array(e.length);for(let a=0,c=e.length;a<c;a++)i[a]=t(e[a],a,void 0,s&&s[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,s&&s[a])}else if(fe(e))if(e[Symbol.iterator])i=Array.from(e,(a,c)=>t(a,c,void 0,s&&s[c]));else{const a=Object.keys(e);i=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const h=a[c];i[c]=t(e[h],h,c,s&&s[c])}}else i=[];return n&&(n[r]=i),i}const my=e=>e?oN(e)?Jp(e)||e.proxy:my(e.parent):null,$c=Je(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>my(e.parent),$root:e=>my(e.root),$emit:e=>e.emit,$options:e=>M_(e),$forceUpdate:e=>e.f||(e.f=()=>D_(e.update)),$nextTick:e=>e.n||(e.n=DC.bind(e.proxy)),$watch:e=>O2.bind(e)}),dm=(e,t)=>e!==ie&&!e.__isScriptSetup&&jt(e,t),H2={get({_:e},t){const{ctx:n,setupState:r,data:i,props:s,accessCache:a,type:c,appContext:l}=e;let h;if(t[0]!=="$"){const y=a[t];if(y!==void 0)switch(y){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return s[t]}else{if(dm(r,t))return a[t]=1,r[t];if(i!==ie&&jt(i,t))return a[t]=2,i[t];if((h=e.propsOptions[0])&&jt(h,t))return a[t]=3,s[t];if(n!==ie&&jt(n,t))return a[t]=4,n[t];yy&&(a[t]=0)}}const p=$c[t];let v,m;if(p)return t==="$attrs"&&$n(e,"get",t),p(e);if((v=c.__cssModules)&&(v=v[t]))return v;if(n!==ie&&jt(n,t))return a[t]=4,n[t];if(m=l.config.globalProperties,jt(m,t))return m[t]},set({_:e},t,n){const{data:r,setupState:i,ctx:s}=e;return dm(i,t)?(i[t]=n,!0):r!==ie&&jt(r,t)?(r[t]=n,!0):jt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:s}},a){let c;return!!n[a]||e!==ie&&jt(e,a)||dm(t,a)||(c=s[0])&&jt(c,a)||jt(r,a)||jt($c,a)||jt(i.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:jt(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function zT(e){return Et(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let yy=!0;function G2(e){const t=M_(e),n=e.proxy,r=e.ctx;yy=!1,t.beforeCreate&&KT(t.beforeCreate,e,"bc");const{data:i,computed:s,methods:a,watch:c,provide:l,inject:h,created:p,beforeMount:v,mounted:m,beforeUpdate:y,updated:b,activated:E,deactivated:I,beforeDestroy:C,beforeUnmount:P,destroyed:D,unmounted:F,render:Y,renderTracked:U,renderTriggered:_t,errorCaptured:Wt,serverPrefetch:lt,expose:Ze,inheritAttrs:O,components:$r,directives:cn,filters:Vo}=t;if(h&&W2(h,r,null),a)for(const Ft in a){const Ut=a[Ft];Ct(Ut)&&(r[Ft]=Ut.bind(n))}if(i){const Ft=i.call(n,n);fe(Ft)&&(e.data=Vl(Ft))}if(yy=!0,s)for(const Ft in s){const Ut=s[Ft],he=Ct(Ut)?Ut.bind(n,n):Ct(Ut.get)?Ut.get.bind(n,n):Fr,cr=!Ct(Ut)&&Ct(Ut.set)?Ut.set.bind(n):Fr,tn=Bn({get:he,set:cr});Object.defineProperty(r,Ft,{enumerable:!0,configurable:!0,get:()=>tn.value,set:Ge=>tn.value=Ge})}if(c)for(const Ft in c)QC(c[Ft],r,n,Ft);if(l){const Ft=Ct(l)?l.call(n):l;Reflect.ownKeys(Ft).forEach(Ut=>{Fh(Ut,Ft[Ut])})}p&&KT(p,e,"c");function se(Ft,Ut){Et(Ut)?Ut.forEach(he=>Ft(he.bind(n))):Ut&&Ft(Ut.bind(n))}if(se(WC,v),se(D2,m),se(L2,y),se(M2,b),se(x2,E),se(P2,I),se(B2,Wt),se(V2,U),se(j2,_t),se(F2,P),se($C,F),se(U2,lt),Et(Ze))if(Ze.length){const Ft=e.exposed||(e.exposed={});Ze.forEach(Ut=>{Object.defineProperty(Ft,Ut,{get:()=>n[Ut],set:he=>n[Ut]=he})})}else e.exposed||(e.exposed={});Y&&e.render===Fr&&(e.render=Y),O!=null&&(e.inheritAttrs=O),$r&&(e.components=$r),cn&&(e.directives=cn)}function W2(e,t,n=Fr){Et(e)&&(e=_y(e));for(const r in e){const i=e[r];let s;fe(i)?"default"in i?s=jr(i.from||r,i.default,!0):s=jr(i.from||r):s=jr(i),pn(s)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[r]=s}}function KT(e,t,n){Ur(Et(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function QC(e,t,n,r){const i=r.includes(".")?BC(n,r):()=>n[r];if(ke(e)){const s=t[e];Ct(s)&&Ga(i,s)}else if(Ct(e))Ga(i,e.bind(n));else if(fe(e))if(Et(e))e.forEach(s=>QC(s,t,n,r));else{const s=Ct(e.handler)?e.handler.bind(n):t[e.handler];Ct(s)&&Ga(i,s,e)}}function M_(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,c=s.get(t);let l;return c?l=c:!i.length&&!n&&!r?l=t:(l={},i.length&&i.forEach(h=>Zh(l,h,a,!0)),Zh(l,t,a)),fe(t)&&s.set(t,l),l}function Zh(e,t,n,r=!1){const{mixins:i,extends:s}=t;s&&Zh(e,s,n,!0),i&&i.forEach(a=>Zh(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const c=$2[a]||n&&n[a];e[a]=c?c(e[a],t[a]):t[a]}return e}const $2={data:QT,props:YT,emits:YT,methods:Bc,computed:Bc,beforeCreate:An,created:An,beforeMount:An,mounted:An,beforeUpdate:An,updated:An,beforeDestroy:An,beforeUnmount:An,destroyed:An,unmounted:An,activated:An,deactivated:An,errorCaptured:An,serverPrefetch:An,components:Bc,directives:Bc,watch:K2,provide:QT,inject:z2};function QT(e,t){return t?e?function(){return Je(Ct(e)?e.call(this,this):e,Ct(t)?t.call(this,this):t)}:t:e}function z2(e,t){return Bc(_y(e),_y(t))}function _y(e){if(Et(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function An(e,t){return e?[...new Set([].concat(e,t))]:t}function Bc(e,t){return e?Je(Object.create(null),e,t):t}function YT(e,t){return e?Et(e)&&Et(t)?[...new Set([...e,...t])]:Je(Object.create(null),zT(e),zT(t??{})):t}function K2(e,t){if(!e)return t;if(!t)return e;const n=Je(Object.create(null),e);for(const r in t)n[r]=An(e[r],t[r]);return n}function YC(){return{app:null,config:{isNativeTag:AF,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Q2=0;function Y2(e,t){return function(r,i=null){Ct(r)||(r=Je({},r)),i!=null&&!fe(i)&&(i=null);const s=YC(),a=new Set;let c=!1;const l=s.app={_uid:Q2++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:EU,get config(){return s.config},set config(h){},use(h,...p){return a.has(h)||(h&&Ct(h.install)?(a.add(h),h.install(l,...p)):Ct(h)&&(a.add(h),h(l,...p))),l},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),l},component(h,p){return p?(s.components[h]=p,l):s.components[h]},directive(h,p){return p?(s.directives[h]=p,l):s.directives[h]},mount(h,p,v){if(!c){const m=_e(r,i);return m.appContext=s,p&&t?t(m,h):e(m,h,v),c=!0,l._container=h,h.__vue_app__=l,Jp(m.component)||m.component.proxy}},unmount(){c&&(e(null,l._container),delete l._container.__vue_app__)},provide(h,p){return s.provides[h]=p,l},runWithContext(h){tp=l;try{return h()}finally{tp=null}}};return l}}let tp=null;function Fh(e,t){if(on){let n=on.provides;const r=on.parent&&on.parent.provides;r===n&&(n=on.provides=Object.create(r)),n[e]=t}}function jr(e,t,n=!1){const r=on||vr;if(r||tp){const i=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:tp._context.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&Ct(t)?t.call(r&&r.proxy):t}}function X2(e,t,n,r=!1){const i={},s={};Yh(s,Xp,1),e.propsDefaults=Object.create(null),XC(e,t,i,s);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:SC(i):e.type.props?e.props=i:e.props=s,e.attrs=s}function J2(e,t,n,r){const{props:i,attrs:s,vnode:{patchFlag:a}}=e,c=Gt(i),[l]=e.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const p=e.vnode.dynamicProps;for(let v=0;v<p.length;v++){let m=p[v];if(zp(e.emitsOptions,m))continue;const y=t[m];if(l)if(jt(s,m))y!==s[m]&&(s[m]=y,h=!0);else{const b=hi(m);i[b]=wy(l,c,b,y,e,!1)}else y!==s[m]&&(s[m]=y,h=!0)}}}else{XC(e,t,i,s)&&(h=!0);let p;for(const v in c)(!t||!jt(t,v)&&((p=Vs(v))===v||!jt(t,p)))&&(l?n&&(n[v]!==void 0||n[p]!==void 0)&&(i[v]=wy(l,c,v,void 0,e,!0)):delete i[v]);if(s!==c)for(const v in s)(!t||!jt(t,v))&&(delete s[v],h=!0)}h&&Fi(e,"set","$attrs")}function XC(e,t,n,r){const[i,s]=e.propsOptions;let a=!1,c;if(t)for(let l in t){if(Dh(l))continue;const h=t[l];let p;i&&jt(i,p=hi(l))?!s||!s.includes(p)?n[p]=h:(c||(c={}))[p]=h:zp(e.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,a=!0)}if(s){const l=Gt(n),h=c||ie;for(let p=0;p<s.length;p++){const v=s[p];n[v]=wy(i,l,v,h[v],e,!jt(h,v))}}return a}function wy(e,t,n,r,i,s){const a=e[n];if(a!=null){const c=jt(a,"default");if(c&&r===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Ct(l)){const{propsDefaults:h}=i;n in h?r=h[n]:(tu(i),r=h[n]=l.call(null,t),Es())}else r=l}a[0]&&(s&&!c?r=!1:a[1]&&(r===""||r===Vs(n))&&(r=!0))}return r}function JC(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const s=e.props,a={},c=[];let l=!1;if(!Ct(e)){const p=v=>{l=!0;const[m,y]=JC(v,t,!0);Je(a,m),y&&c.push(...y)};!n&&t.mixins.length&&t.mixins.forEach(p),e.extends&&p(e.extends),e.mixins&&e.mixins.forEach(p)}if(!s&&!l)return fe(e)&&r.set(e,ja),ja;if(Et(s))for(let p=0;p<s.length;p++){const v=hi(s[p]);XT(v)&&(a[v]=ie)}else if(s)for(const p in s){const v=hi(p);if(XT(v)){const m=s[p],y=a[v]=Et(m)||Ct(m)?{type:m}:Je({},m);if(y){const b=tS(Boolean,y.type),E=tS(String,y.type);y[0]=b>-1,y[1]=E<0||b<E,(b>-1||jt(y,"default"))&&c.push(v)}}}const h=[a,c];return fe(e)&&r.set(e,h),h}function XT(e){return e[0]!=="$"}function JT(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function ZT(e,t){return JT(e)===JT(t)}function tS(e,t){return Et(t)?t.findIndex(n=>ZT(n,e)):Ct(t)&&ZT(t,e)?0:-1}const ZC=e=>e[0]==="_"||e==="$stable",F_=e=>Et(e)?e.map(ii):[ii(e)],Z2=(e,t,n)=>{if(t._n)return t;const r=Kp((...i)=>F_(t(...i)),n);return r._c=!1,r},tN=(e,t,n)=>{const r=e._ctx;for(const i in e){if(ZC(i))continue;const s=e[i];if(Ct(s))t[i]=Z2(i,s,r);else if(s!=null){const a=F_(s);t[i]=()=>a}}},eN=(e,t)=>{const n=F_(t);e.slots.default=()=>n},tU=(e,t)=>{if(e.vnode.shapeFlag&32){const n=t._;n?(e.slots=Gt(t),Yh(t,"_",n)):tN(t,e.slots={})}else e.slots={},t&&eN(e,t);Yh(e.slots,Xp,1)},eU=(e,t,n)=>{const{vnode:r,slots:i}=e;let s=!0,a=ie;if(r.shapeFlag&32){const c=t._;c?n&&c===1?s=!1:(Je(i,t),!n&&c===1&&delete i._):(s=!t.$stable,tN(t,i)),a=t}else t&&(eN(e,t),a={default:1});if(s)for(const c in i)!ZC(c)&&!(c in a)&&delete i[c]};function by(e,t,n,r,i=!1){if(Et(e)){e.forEach((m,y)=>by(m,t&&(Et(t)?t[y]:t),n,r,i));return}if(Mh(r)&&!i)return;const s=r.shapeFlag&4?Jp(r.component)||r.component.proxy:r.el,a=i?null:s,{i:c,r:l}=e,h=t&&t.r,p=c.refs===ie?c.refs={}:c.refs,v=c.setupState;if(h!=null&&h!==l&&(ke(h)?(p[h]=null,jt(v,h)&&(v[h]=null)):pn(h)&&(h.value=null)),Ct(l))bo(l,c,12,[a,p]);else{const m=ke(l),y=pn(l);if(m||y){const b=()=>{if(e.f){const E=m?jt(v,l)?v[l]:p[l]:l.value;i?Et(E)&&E_(E,s):Et(E)?E.includes(s)||E.push(s):m?(p[l]=[s],jt(v,l)&&(v[l]=p[l])):(l.value=[s],e.k&&(p[e.k]=l.value))}else m?(p[l]=a,jt(v,l)&&(v[l]=a)):y&&(l.value=a,e.k&&(p[e.k]=a))};a?(b.id=-1,Vn(b,n)):b()}}}const Vn=R2;function nU(e){return rU(e)}function rU(e,t){const n=fy();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:a,createText:c,createComment:l,setText:h,setElementText:p,parentNode:v,nextSibling:m,setScopeId:y=Fr,insertStaticContent:b}=e,E=(S,A,x,L=null,V=null,B=null,et=!1,z=null,J=!!A.dynamicChildren)=>{if(S===A)return;S&&!Oc(S,A)&&(L=j(S),Ge(S,V,B,!0),S=null),A.patchFlag===-2&&(J=!1,A.dynamicChildren=null);const{type:W,ref:pt,shapeFlag:st}=A;switch(W){case Yp:I(S,A,x,L);break;case Os:C(S,A,x,L);break;case Uh:S==null&&P(A,x,L,et);break;case Fe:$r(S,A,x,L,V,B,et,z,J);break;default:st&1?Y(S,A,x,L,V,B,et,z,J):st&6?cn(S,A,x,L,V,B,et,z,J):(st&64||st&128)&&W.process(S,A,x,L,V,B,et,z,J,H)}pt!=null&&V&&by(pt,S&&S.ref,B,A||S,!A)},I=(S,A,x,L)=>{if(S==null)r(A.el=c(A.children),x,L);else{const V=A.el=S.el;A.children!==S.children&&h(V,A.children)}},C=(S,A,x,L)=>{S==null?r(A.el=l(A.children||""),x,L):A.el=S.el},P=(S,A,x,L)=>{[S.el,S.anchor]=b(S.children,A,x,L,S.el,S.anchor)},D=({el:S,anchor:A},x,L)=>{let V;for(;S&&S!==A;)V=m(S),r(S,x,L),S=V;r(A,x,L)},F=({el:S,anchor:A})=>{let x;for(;S&&S!==A;)x=m(S),i(S),S=x;i(A)},Y=(S,A,x,L,V,B,et,z,J)=>{et=et||A.type==="svg",S==null?U(A,x,L,V,B,et,z,J):lt(S,A,V,B,et,z,J)},U=(S,A,x,L,V,B,et,z)=>{let J,W;const{type:pt,props:st,shapeFlag:dt,transition:wt,dirs:Nt}=S;if(J=S.el=a(S.type,B,st&&st.is,st),dt&8?p(J,S.children):dt&16&&Wt(S.children,J,null,L,V,B&&pt!=="foreignObject",et,z),Nt&&as(S,null,L,"created"),_t(J,S,S.scopeId,et,L),st){for(const vt in st)vt!=="value"&&!Dh(vt)&&s(J,vt,null,st[vt],B,S.children,L,V,We);"value"in st&&s(J,"value",null,st.value),(W=st.onVnodeBeforeMount)&&ni(W,L,S)}Nt&&as(S,null,L,"beforeMount");const Xt=(!V||V&&!V.pendingBranch)&&wt&&!wt.persisted;Xt&&wt.beforeEnter(J),r(J,A,x),((W=st&&st.onVnodeMounted)||Xt||Nt)&&Vn(()=>{W&&ni(W,L,S),Xt&&wt.enter(J),Nt&&as(S,null,L,"mounted")},V)},_t=(S,A,x,L,V)=>{if(x&&y(S,x),L)for(let B=0;B<L.length;B++)y(S,L[B]);if(V){let B=V.subTree;if(A===B){const et=V.vnode;_t(S,et,et.scopeId,et.slotScopeIds,V.parent)}}},Wt=(S,A,x,L,V,B,et,z,J=0)=>{for(let W=J;W<S.length;W++){const pt=S[W]=z?co(S[W]):ii(S[W]);E(null,pt,A,x,L,V,B,et,z)}},lt=(S,A,x,L,V,B,et)=>{const z=A.el=S.el;let{patchFlag:J,dynamicChildren:W,dirs:pt}=A;J|=S.patchFlag&16;const st=S.props||ie,dt=A.props||ie;let wt;x&&us(x,!1),(wt=dt.onVnodeBeforeUpdate)&&ni(wt,x,A,S),pt&&as(A,S,x,"beforeUpdate"),x&&us(x,!0);const Nt=V&&A.type!=="foreignObject";if(W?Ze(S.dynamicChildren,W,z,x,L,Nt,B):et||Ut(S,A,z,null,x,L,Nt,B,!1),J>0){if(J&16)O(z,A,st,dt,x,L,V);else if(J&2&&st.class!==dt.class&&s(z,"class",null,dt.class,V),J&4&&s(z,"style",st.style,dt.style,V),J&8){const Xt=A.dynamicProps;for(let vt=0;vt<Xt.length;vt++){const ae=Xt[vt],$e=st[ae],_i=dt[ae];(_i!==$e||ae==="value")&&s(z,ae,$e,_i,V,S.children,x,L,We)}}J&1&&S.children!==A.children&&p(z,A.children)}else!et&&W==null&&O(z,A,st,dt,x,L,V);((wt=dt.onVnodeUpdated)||pt)&&Vn(()=>{wt&&ni(wt,x,A,S),pt&&as(A,S,x,"updated")},L)},Ze=(S,A,x,L,V,B,et)=>{for(let z=0;z<A.length;z++){const J=S[z],W=A[z],pt=J.el&&(J.type===Fe||!Oc(J,W)||J.shapeFlag&70)?v(J.el):x;E(J,W,pt,null,L,V,B,et,!0)}},O=(S,A,x,L,V,B,et)=>{if(x!==L){if(x!==ie)for(const z in x)!Dh(z)&&!(z in L)&&s(S,z,x[z],null,et,A.children,V,B,We);for(const z in L){if(Dh(z))continue;const J=L[z],W=x[z];J!==W&&z!=="value"&&s(S,z,W,J,et,A.children,V,B,We)}"value"in L&&s(S,"value",x.value,L.value)}},$r=(S,A,x,L,V,B,et,z,J)=>{const W=A.el=S?S.el:c(""),pt=A.anchor=S?S.anchor:c("");let{patchFlag:st,dynamicChildren:dt,slotScopeIds:wt}=A;wt&&(z=z?z.concat(wt):wt),S==null?(r(W,x,L),r(pt,x,L),Wt(A.children,x,pt,V,B,et,z,J)):st>0&&st&64&&dt&&S.dynamicChildren?(Ze(S.dynamicChildren,dt,x,V,B,et,z),(A.key!=null||V&&A===V.subTree)&&nN(S,A,!0)):Ut(S,A,x,pt,V,B,et,z,J)},cn=(S,A,x,L,V,B,et,z,J)=>{A.slotScopeIds=z,S==null?A.shapeFlag&512?V.ctx.activate(A,x,L,et,J):Vo(A,x,L,V,B,et,J):zr(S,A,J)},Vo=(S,A,x,L,V,B,et)=>{const z=S.component=pU(S,L,V);if(HC(S)&&(z.ctx.renderer=H),dU(z),z.asyncDep){if(V&&V.registerDep(z,se),!S.el){const J=z.subTree=_e(Os);C(null,J,A,x)}return}se(z,S,A,x,V,B,et)},zr=(S,A,x)=>{const L=A.component=S.component;if(A2(S,A,x))if(L.asyncDep&&!L.asyncResolved){Ft(L,A,x);return}else L.next=A,w2(L.update),L.update();else A.el=S.el,L.vnode=A},se=(S,A,x,L,V,B,et)=>{const z=()=>{if(S.isMounted){let{next:pt,bu:st,u:dt,parent:wt,vnode:Nt}=S,Xt=pt,vt;us(S,!1),pt?(pt.el=Nt.el,Ft(S,pt,et)):pt=Nt,st&&Lh(st),(vt=pt.props&&pt.props.onVnodeBeforeUpdate)&&ni(vt,wt,pt,Nt),us(S,!0);const ae=pm(S),$e=S.subTree;S.subTree=ae,E($e,ae,v($e.el),j($e),S,V,B),pt.el=ae.el,Xt===null&&C2(S,ae.el),dt&&Vn(dt,V),(vt=pt.props&&pt.props.onVnodeUpdated)&&Vn(()=>ni(vt,wt,pt,Nt),V)}else{let pt;const{el:st,props:dt}=A,{bm:wt,m:Nt,parent:Xt}=S,vt=Mh(A);if(us(S,!1),wt&&Lh(wt),!vt&&(pt=dt&&dt.onVnodeBeforeMount)&&ni(pt,Xt,A),us(S,!0),st&&Vt){const ae=()=>{S.subTree=pm(S),Vt(st,S.subTree,S,V,null)};vt?A.type.__asyncLoader().then(()=>!S.isUnmounted&&ae()):ae()}else{const ae=S.subTree=pm(S);E(null,ae,x,L,S,V,B),A.el=ae.el}if(Nt&&Vn(Nt,V),!vt&&(pt=dt&&dt.onVnodeMounted)){const ae=A;Vn(()=>ni(pt,Xt,ae),V)}(A.shapeFlag&256||Xt&&Mh(Xt.vnode)&&Xt.vnode.shapeFlag&256)&&S.a&&Vn(S.a,V),S.isMounted=!0,A=x=L=null}},J=S.effect=new C_(z,()=>D_(W),S.scope),W=S.update=()=>J.run();W.id=S.uid,us(S,!0),W()},Ft=(S,A,x)=>{A.component=S;const L=S.vnode.props;S.vnode=A,S.next=null,J2(S,A.props,L,x),eU(S,A.children,x),Cu(),GT(),Nu()},Ut=(S,A,x,L,V,B,et,z,J=!1)=>{const W=S&&S.children,pt=S?S.shapeFlag:0,st=A.children,{patchFlag:dt,shapeFlag:wt}=A;if(dt>0){if(dt&128){cr(W,st,x,L,V,B,et,z,J);return}else if(dt&256){he(W,st,x,L,V,B,et,z,J);return}}wt&8?(pt&16&&We(W,V,B),st!==W&&p(x,st)):pt&16?wt&16?cr(W,st,x,L,V,B,et,z,J):We(W,V,B,!0):(pt&8&&p(x,""),wt&16&&Wt(st,x,L,V,B,et,z,J))},he=(S,A,x,L,V,B,et,z,J)=>{S=S||ja,A=A||ja;const W=S.length,pt=A.length,st=Math.min(W,pt);let dt;for(dt=0;dt<st;dt++){const wt=A[dt]=J?co(A[dt]):ii(A[dt]);E(S[dt],wt,x,null,V,B,et,z,J)}W>pt?We(S,V,B,!0,!1,st):Wt(A,x,L,V,B,et,z,J,st)},cr=(S,A,x,L,V,B,et,z,J)=>{let W=0;const pt=A.length;let st=S.length-1,dt=pt-1;for(;W<=st&&W<=dt;){const wt=S[W],Nt=A[W]=J?co(A[W]):ii(A[W]);if(Oc(wt,Nt))E(wt,Nt,x,null,V,B,et,z,J);else break;W++}for(;W<=st&&W<=dt;){const wt=S[st],Nt=A[dt]=J?co(A[dt]):ii(A[dt]);if(Oc(wt,Nt))E(wt,Nt,x,null,V,B,et,z,J);else break;st--,dt--}if(W>st){if(W<=dt){const wt=dt+1,Nt=wt<pt?A[wt].el:L;for(;W<=dt;)E(null,A[W]=J?co(A[W]):ii(A[W]),x,Nt,V,B,et,z,J),W++}}else if(W>dt)for(;W<=st;)Ge(S[W],V,B,!0),W++;else{const wt=W,Nt=W,Xt=new Map;for(W=Nt;W<=dt;W++){const we=A[W]=J?co(A[W]):ii(A[W]);we.key!=null&&Xt.set(we.key,W)}let vt,ae=0;const $e=dt-Nt+1;let _i=!1,Wu=0;const ne=new Array($e);for(W=0;W<$e;W++)ne[W]=0;for(W=wt;W<=st;W++){const we=S[W];if(ae>=$e){Ge(we,V,B,!0);continue}let De;if(we.key!=null)De=Xt.get(we.key);else for(vt=Nt;vt<=dt;vt++)if(ne[vt-Nt]===0&&Oc(we,A[vt])){De=vt;break}De===void 0?Ge(we,V,B,!0):(ne[De-Nt]=W+1,De>=Wu?Wu=De:_i=!0,E(we,A[De],x,null,V,B,et,z,J),ae++)}const $u=_i?iU(ne):ja;for(vt=$u.length-1,W=$e-1;W>=0;W--){const we=Nt+W,De=A[we],zu=we+1<pt?A[we+1].el:L;ne[W]===0?E(null,De,x,zu,V,B,et,z,J):_i&&(vt<0||W!==$u[vt]?tn(De,x,zu,2):vt--)}}},tn=(S,A,x,L,V=null)=>{const{el:B,type:et,transition:z,children:J,shapeFlag:W}=S;if(W&6){tn(S.component.subTree,A,x,L);return}if(W&128){S.suspense.move(A,x,L);return}if(W&64){et.move(S,A,x,H);return}if(et===Fe){r(B,A,x);for(let st=0;st<J.length;st++)tn(J[st],A,x,L);r(S.anchor,A,x);return}if(et===Uh){D(S,A,x);return}if(L!==2&&W&1&&z)if(L===0)z.beforeEnter(B),r(B,A,x),Vn(()=>z.enter(B),V);else{const{leave:st,delayLeave:dt,afterLeave:wt}=z,Nt=()=>r(B,A,x),Xt=()=>{st(B,()=>{Nt(),wt&&wt()})};dt?dt(B,Nt,Xt):Xt()}else r(B,A,x)},Ge=(S,A,x,L=!1,V=!1)=>{const{type:B,props:et,ref:z,children:J,dynamicChildren:W,shapeFlag:pt,patchFlag:st,dirs:dt}=S;if(z!=null&&by(z,null,x,S,!0),pt&256){A.ctx.deactivate(S);return}const wt=pt&1&&dt,Nt=!Mh(S);let Xt;if(Nt&&(Xt=et&&et.onVnodeBeforeUnmount)&&ni(Xt,A,S),pt&6)Bo(S.component,x,L);else{if(pt&128){S.suspense.unmount(x,L);return}wt&&as(S,null,A,"beforeUnmount"),pt&64?S.type.remove(S,A,x,V,H,L):W&&(B!==Fe||st>0&&st&64)?We(W,A,x,!1,!0):(B===Fe&&st&384||!V&&pt&16)&&We(J,A,x),L&&mi(S)}(Nt&&(Xt=et&&et.onVnodeUnmounted)||wt)&&Vn(()=>{Xt&&ni(Xt,A,S),wt&&as(S,null,A,"unmounted")},x)},mi=S=>{const{type:A,el:x,anchor:L,transition:V}=S;if(A===Fe){yi(x,L);return}if(A===Uh){F(S);return}const B=()=>{i(x),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(S.shapeFlag&1&&V&&!V.persisted){const{leave:et,delayLeave:z}=V,J=()=>et(x,B);z?z(S.el,B,J):J()}else B()},yi=(S,A)=>{let x;for(;S!==A;)x=m(S),i(S),S=x;i(A)},Bo=(S,A,x)=>{const{bum:L,scope:V,update:B,subTree:et,um:z}=S;L&&Lh(L),V.stop(),B&&(B.active=!1,Ge(et,S,A,x)),z&&Vn(z,A),Vn(()=>{S.isUnmounted=!0},A),A&&A.pendingBranch&&!A.isUnmounted&&S.asyncDep&&!S.asyncResolved&&S.suspenseId===A.pendingId&&(A.deps--,A.deps===0&&A.resolve())},We=(S,A,x,L=!1,V=!1,B=0)=>{for(let et=B;et<S.length;et++)Ge(S[et],A,x,L,V)},j=S=>S.shapeFlag&6?j(S.component.subTree):S.shapeFlag&128?S.suspense.next():m(S.anchor||S.el),rt=(S,A,x)=>{S==null?A._vnode&&Ge(A._vnode,null,null,!0):E(A._vnode||null,S,A,null,null,null,x),GT(),MC(),A._vnode=S},H={p:E,um:Ge,m:tn,r:mi,mt:Vo,mc:Wt,pc:Ut,pbc:Ze,n:j,o:e};let ft,Vt;return t&&([ft,Vt]=t(H)),{render:rt,hydrate:ft,createApp:Y2(rt,ft)}}function us({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function nN(e,t,n=!1){const r=e.children,i=t.children;if(Et(r)&&Et(i))for(let s=0;s<r.length;s++){const a=r[s];let c=i[s];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[s]=co(i[s]),c.el=a.el),n||nN(a,c)),c.type===Yp&&(c.el=a.el)}}function iU(e){const t=e.slice(),n=[0];let r,i,s,a,c;const l=e.length;for(r=0;r<l;r++){const h=e[r];if(h!==0){if(i=n[n.length-1],e[i]<h){t[r]=i,n.push(r);continue}for(s=0,a=n.length-1;s<a;)c=s+a>>1,e[n[c]]<h?s=c+1:a=c;h<e[n[s]]&&(s>0&&(t[r]=n[s-1]),n[s]=r)}}for(s=n.length,a=n[s-1];s-- >0;)n[s]=a,a=t[a];return n}const oU=e=>e.__isTeleport,Fe=Symbol.for("v-fgt"),Yp=Symbol.for("v-txt"),Os=Symbol.for("v-cmt"),Uh=Symbol.for("v-stc"),zc=[];let kr=null;function $t(e=!1){zc.push(kr=e?null:[])}function sU(){zc.pop(),kr=zc[zc.length-1]||null}let cl=1;function eS(e){cl+=e}function rN(e){return e.dynamicChildren=cl>0?kr||ja:null,sU(),cl>0&&kr&&kr.push(e),e}function oe(e,t,n,r,i,s){return rN(Q(e,t,n,r,i,s,!0))}function Bl(e,t,n,r,i){return rN(_e(e,t,n,r,i,!0))}function Ey(e){return e?e.__v_isVNode===!0:!1}function Oc(e,t){return e.type===t.type&&e.key===t.key}const Xp="__vInternal",iN=({key:e})=>e??null,jh=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?ke(e)||pn(e)||Ct(e)?{i:vr,r:e,k:t,f:!!n}:e:null);function Q(e,t=null,n=null,r=0,i=null,s=e===Fe?0:1,a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&iN(t),ref:t&&jh(t),scopeId:jC,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:vr};return c?(U_(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=ke(n)?8:16),cl>0&&!a&&kr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&kr.push(l),l}const _e=aU;function aU(e,t=null,n=null,r=0,i=null,s=!1){if((!e||e===zC)&&(e=Os),Ey(e)){const c=Za(e,t,!0);return n&&U_(c,n),cl>0&&!s&&kr&&(c.shapeFlag&6?kr[kr.indexOf(e)]=c:kr.push(c)),c.patchFlag|=-2,c}if(_U(e)&&(e=e.__vccOpts),t){t=uU(t);let{class:c,style:l}=t;c&&!ke(c)&&(t.class=Rs(c)),fe(l)&&(CC(l)&&!Et(l)&&(l=Je({},l)),t.style=S_(l))}const a=ke(e)?1:N2(e)?128:oU(e)?64:fe(e)?4:Ct(e)?2:0;return Q(e,t,n,r,i,a,s,!0)}function uU(e){return e?CC(e)||Xp in e?Je({},e):e:null}function Za(e,t,n=!1){const{props:r,ref:i,patchFlag:s,children:a}=e,c=t?lU(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&iN(c),ref:t&&t.ref?n&&i?Et(i)?i.concat(jh(t)):[i,jh(t)]:jh(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fe?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Za(e.ssContent),ssFallback:e.ssFallback&&Za(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function cU(e=" ",t=0){return _e(Yp,null,e,t)}function ko(e,t){const n=_e(Uh,null,e);return n.staticCount=t,n}function nS(e="",t=!1){return t?($t(),Bl(Os,null,e)):_e(Os,null,e)}function ii(e){return e==null||typeof e=="boolean"?_e(Os):Et(e)?_e(Fe,null,e.slice()):typeof e=="object"?co(e):_e(Yp,null,String(e))}function co(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Za(e)}function U_(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(Et(t))n=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),U_(e,i()),i._c&&(i._d=!0));return}else{n=32;const i=t._;!i&&!(Xp in t)?t._ctx=vr:i===3&&vr&&(vr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Ct(t)?(t={default:t,_ctx:vr},n=32):(t=String(t),r&64?(n=16,t=[cU(t)]):n=8);e.children=t,e.shapeFlag|=n}function lU(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=Rs([t.class,r.class]));else if(i==="style")t.style=S_([t.style,r.style]);else if(Bp(i)){const s=t[i],a=r[i];a&&s!==a&&!(Et(s)&&s.includes(a))&&(t[i]=s?[].concat(s,a):a)}else i!==""&&(t[i]=r[i])}return t}function ni(e,t,n,r=null){Ur(e,t,7,[n,r])}const fU=YC();let hU=0;function pU(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||fU,s={uid:hU++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new UF(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:JC(r,i),emitsOptions:UC(r,i),emit:null,emitted:null,propsDefaults:ie,inheritAttrs:r.inheritAttrs,ctx:ie,data:ie,props:ie,attrs:ie,slots:ie,refs:ie,setupState:ie,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=I2.bind(null,s),e.ce&&e.ce(s),s}let on=null,j_,Ea,rS="__VUE_INSTANCE_SETTERS__";(Ea=fy()[rS])||(Ea=fy()[rS]=[]),Ea.push(e=>on=e),j_=e=>{Ea.length>1?Ea.forEach(t=>t(e)):Ea[0](e)};const tu=e=>{j_(e),e.scope.on()},Es=()=>{on&&on.scope.off(),j_(null)};function oN(e){return e.vnode.shapeFlag&4}let ll=!1;function dU(e,t=!1){ll=t;const{props:n,children:r}=e.vnode,i=oN(e);X2(e,n,i,t),tU(e,r);const s=i?vU(e,t):void 0;return ll=!1,s}function vU(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=NC(new Proxy(e.ctx,H2));const{setup:r}=n;if(r){const i=e.setupContext=r.length>1?mU(e):null;tu(e),Cu();const s=bo(r,e,0,[e.props,i]);if(Nu(),Es(),lC(s)){if(s.then(Es,Es),t)return s.then(a=>{iS(e,a,t)}).catch(a=>{$p(a,e,0)});e.asyncDep=s}else iS(e,s,t)}else sN(e,t)}function iS(e,t,n){Ct(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:fe(t)&&(e.setupState=PC(t)),sN(e,n)}let oS;function sN(e,t,n){const r=e.type;if(!e.render){if(!t&&oS&&!r.render){const i=r.template||M_(e).template;if(i){const{isCustomElement:s,compilerOptions:a}=e.appContext.config,{delimiters:c,compilerOptions:l}=r,h=Je(Je({isCustomElement:s,delimiters:c},a),l);r.render=oS(i,h)}}e.render=r.render||Fr}tu(e),Cu(),G2(e),Nu(),Es()}function gU(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,n){return $n(e,"get","$attrs"),t[n]}}))}function mU(e){const t=n=>{e.exposed=n||{}};return{get attrs(){return gU(e)},slots:e.slots,emit:e.emit,expose:t}}function Jp(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(PC(NC(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in $c)return $c[n](e)},has(t,n){return n in t||n in $c}}))}function yU(e,t=!0){return Ct(e)?e.displayName||e.name:e.name||t&&e.__name}function _U(e){return Ct(e)&&"__vccOpts"in e}const Bn=(e,t)=>m2(e,t,ll);function aN(e,t,n){const r=arguments.length;return r===2?fe(t)&&!Et(t)?Ey(t)?_e(e,null,[t]):_e(e,t):_e(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ey(n)&&(n=[n]),_e(e,t,n))}const wU=Symbol.for("v-scx"),bU=()=>jr(wU),EU="3.3.4",IU="http://www.w3.org/2000/svg",hs=typeof document<"u"?document:null,sS=hs&&hs.createElement("template"),TU={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?hs.createElementNS(IU,e):hs.createElement(e,n?{is:n}:void 0);return e==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:e=>hs.createTextNode(e),createComment:e=>hs.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>hs.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,s){const a=n?n.previousSibling:t.lastChild;if(i&&(i===s||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{sS.innerHTML=r?`<svg>${e}</svg>`:e;const c=sS.content;if(r){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}t.insertBefore(c,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function SU(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function AU(e,t,n){const r=e.style,i=ke(n);if(n&&!i){if(t&&!ke(t))for(const s in t)n[s]==null&&Iy(r,s,"");for(const s in n)Iy(r,s,n[s])}else{const s=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=s)}}const aS=/\s*!important$/;function Iy(e,t,n){if(Et(n))n.forEach(r=>Iy(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=CU(e,t);aS.test(n)?e.setProperty(Vs(r),n.replace(aS,""),"important"):e[r]=n}}const uS=["Webkit","Moz","ms"],vm={};function CU(e,t){const n=vm[t];if(n)return n;let r=hi(t);if(r!=="filter"&&r in e)return vm[t]=r;r=Gp(r);for(let i=0;i<uS.length;i++){const s=uS[i]+r;if(s in e)return vm[t]=s}return t}const cS="http://www.w3.org/1999/xlink";function NU(e,t,n,r,i){if(r&&t.startsWith("xlink:"))n==null?e.removeAttributeNS(cS,t.slice(6,t.length)):e.setAttributeNS(cS,t,n);else{const s=FF(t);n==null||s&&!pC(n)?e.removeAttribute(t):e.setAttribute(t,s?"":n)}}function RU(e,t,n,r,i,s,a){if(t==="innerHTML"||t==="textContent"){r&&a(r,i,s),e[t]=n??"";return}const c=e.tagName;if(t==="value"&&c!=="PROGRESS"&&!c.includes("-")){e._value=n;const h=c==="OPTION"?e.getAttribute("value"):e.value,p=n??"";h!==p&&(e.value=p),n==null&&e.removeAttribute(t);return}let l=!1;if(n===""||n==null){const h=typeof e[t];h==="boolean"?n=pC(n):n==null&&h==="string"?(n="",l=!0):h==="number"&&(n=0,l=!0)}try{e[t]=n}catch{}l&&e.removeAttribute(t)}function Oa(e,t,n,r){e.addEventListener(t,n,r)}function OU(e,t,n,r){e.removeEventListener(t,n,r)}function xU(e,t,n,r,i=null){const s=e._vei||(e._vei={}),a=s[t];if(r&&a)a.value=r;else{const[c,l]=PU(t);if(r){const h=s[t]=LU(r,i);Oa(e,c,h,l)}else a&&(OU(e,c,a,l),s[t]=void 0)}}const lS=/(?:Once|Passive|Capture)$/;function PU(e){let t;if(lS.test(e)){t={};let r;for(;r=e.match(lS);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Vs(e.slice(2)),t]}let gm=0;const kU=Promise.resolve(),DU=()=>gm||(kU.then(()=>gm=0),gm=Date.now());function LU(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ur(MU(r,n.value),t,5,[r])};return n.value=e,n.attached=DU(),n}function MU(e,t){if(Et(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const fS=/^on[a-z]/,FU=(e,t,n,r,i=!1,s,a,c,l)=>{t==="class"?SU(e,r,i):t==="style"?AU(e,n,r):Bp(t)?b_(t)||xU(e,t,n,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):UU(e,t,r,i))?RU(e,t,r,s,a,c,l):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),NU(e,t,r,i))};function UU(e,t,n,r){return r?!!(t==="innerHTML"||t==="textContent"||t in e&&fS.test(t)&&Ct(n)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||fS.test(t)&&ke(n)?!1:t in e}const hS=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Et(t)?n=>Lh(t,n):t};function jU(e){e.target.composing=!0}function pS(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const $a={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=hS(i);const s=r||i.props&&i.props.type==="number";Oa(e,t?"change":"input",a=>{if(a.target.composing)return;let c=e.value;n&&(c=c.trim()),s&&(c=ly(c)),e._assign(c)}),n&&Oa(e,"change",()=>{e.value=e.value.trim()}),t||(Oa(e,"compositionstart",jU),Oa(e,"compositionend",pS),Oa(e,"change",pS))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},s){if(e._assign=hS(s),e.composing||document.activeElement===e&&e.type!=="range"&&(n||r&&e.value.trim()===t||(i||e.type==="number")&&ly(e.value)===t))return;const a=t??"";e.value!==a&&(e.value=a)}},VU={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},BU=(e,t)=>n=>{if(!("key"in n))return;const r=Vs(n.key);if(t.some(i=>i===r||VU[i]===r))return e(n)},qU=Je({patchProp:FU},TU);let dS;function HU(){return dS||(dS=nU(qU))}const GU=(...e)=>{const t=HU().createApp(...e),{mount:n}=t;return t.mount=r=>{const i=WU(r);if(!i)return;const s=t._component;!Ct(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.innerHTML="";const a=n(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function WU(e){return ke(e)?document.querySelector(e):e}function $U(){return uN().__VUE_DEVTOOLS_GLOBAL_HOOK__}function uN(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const zU=typeof Proxy=="function",KU="devtools-plugin:setup",QU="plugin:settings:set";let Ia,Ty;function YU(){var e;return Ia!==void 0||(typeof window<"u"&&window.performance?(Ia=!0,Ty=window.performance):typeof global<"u"&&(!((e=global.perf_hooks)===null||e===void 0)&&e.performance)?(Ia=!0,Ty=global.perf_hooks.performance):Ia=!1),Ia}function XU(){return YU()?Ty.now():Date.now()}class JU{constructor(t,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=n;const r={};if(t.settings)for(const a in t.settings){const c=t.settings[a];r[a]=c.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let s=Object.assign({},r);try{const a=localStorage.getItem(i),c=JSON.parse(a);Object.assign(s,c)}catch{}this.fallbacks={getSettings(){return s},setSettings(a){try{localStorage.setItem(i,JSON.stringify(a))}catch{}s=a},now(){return XU()}},n&&n.on(QU,(a,c)=>{a===this.plugin.id&&this.fallbacks.setSettings(c)}),this.proxiedOn=new Proxy({},{get:(a,c)=>this.target?this.target.on[c]:(...l)=>{this.onQueue.push({method:c,args:l})}}),this.proxiedTarget=new Proxy({},{get:(a,c)=>this.target?this.target[c]:c==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(c)?(...l)=>(this.targetQueue.push({method:c,args:l,resolve:()=>{}}),this.fallbacks[c](...l)):(...l)=>new Promise(h=>{this.targetQueue.push({method:c,args:l,resolve:h})})})}async setRealTarget(t){this.target=t;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function ZU(e,t){const n=e,r=uN(),i=$U(),s=zU&&n.enableEarlyProxy;if(i&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))i.emit(KU,e,t);else{const a=s?new JU(n,i):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:t,proxy:a}),a&&t(a.proxiedTarget)}}/*!
  * vue-router v4.2.5
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const xa=typeof window<"u";function tj(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Kt=Object.assign;function mm(e,t){const n={};for(const r in t){const i=t[r];n[r]=Hr(i)?i.map(e):e(i)}return n}const Kc=()=>{},Hr=Array.isArray,ej=/\/$/,nj=e=>e.replace(ej,"");function ym(e,t,n="/"){let r,i={},s="",a="";const c=t.indexOf("#");let l=t.indexOf("?");return c<l&&c>=0&&(l=-1),l>-1&&(r=t.slice(0,l),s=t.slice(l+1,c>-1?c:t.length),i=e(s)),c>-1&&(r=r||t.slice(0,c),a=t.slice(c,t.length)),r=sj(r??t,n),{fullPath:r+(s&&"?")+s+a,path:r,query:i,hash:a}}function rj(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function vS(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function ij(e,t,n){const r=t.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&eu(t.matched[r],n.matched[i])&&cN(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function eu(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function cN(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!oj(e[n],t[n]))return!1;return!0}function oj(e,t){return Hr(e)?gS(e,t):Hr(t)?gS(t,e):e===t}function gS(e,t){return Hr(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function sj(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,a,c;for(a=0;a<r.length;a++)if(c=r[a],c!==".")if(c==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(a-(a===r.length?1:0)).join("/")}var fl;(function(e){e.pop="pop",e.push="push"})(fl||(fl={}));var Qc;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Qc||(Qc={}));function aj(e){if(!e)if(xa){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),nj(e)}const uj=/^[^#]+#/;function cj(e,t){return e.replace(uj,"#")+t}function lj(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Zp=()=>({left:window.pageXOffset,top:window.pageYOffset});function fj(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;t=lj(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function mS(e,t){return(history.state?history.state.position-t:-1)+e}const Sy=new Map;function hj(e,t){Sy.set(e,t)}function pj(e){const t=Sy.get(e);return Sy.delete(e),t}let dj=()=>location.protocol+"//"+location.host;function lN(e,t){const{pathname:n,search:r,hash:i}=t,s=e.indexOf("#");if(s>-1){let c=i.includes(e.slice(s))?e.slice(s).length:1,l=i.slice(c);return l[0]!=="/"&&(l="/"+l),vS(l,"")}return vS(n,e)+r+i}function vj(e,t,n,r){let i=[],s=[],a=null;const c=({state:m})=>{const y=lN(e,location),b=n.value,E=t.value;let I=0;if(m){if(n.value=y,t.value=m,a&&a===b){a=null;return}I=E?m.position-E.position:0}else r(y);i.forEach(C=>{C(n.value,b,{delta:I,type:fl.pop,direction:I?I>0?Qc.forward:Qc.back:Qc.unknown})})};function l(){a=n.value}function h(m){i.push(m);const y=()=>{const b=i.indexOf(m);b>-1&&i.splice(b,1)};return s.push(y),y}function p(){const{history:m}=window;m.state&&m.replaceState(Kt({},m.state,{scroll:Zp()}),"")}function v(){for(const m of s)m();s=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",p)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",p,{passive:!0}),{pauseListeners:l,listen:h,destroy:v}}function yS(e,t,n,r=!1,i=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:i?Zp():null}}function gj(e){const{history:t,location:n}=window,r={value:lN(e,n)},i={value:t.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(l,h,p){const v=e.indexOf("#"),m=v>-1?(n.host&&document.querySelector("base")?e:e.slice(v))+l:dj()+e+l;try{t[p?"replaceState":"pushState"](h,"",m),i.value=h}catch(y){console.error(y),n[p?"replace":"assign"](m)}}function a(l,h){const p=Kt({},t.state,yS(i.value.back,l,i.value.forward,!0),h,{position:i.value.position});s(l,p,!0),r.value=l}function c(l,h){const p=Kt({},i.value,t.state,{forward:l,scroll:Zp()});s(p.current,p,!0);const v=Kt({},yS(r.value,l,null),{position:p.position+1},h);s(l,v,!1),r.value=l}return{location:r,state:i,push:c,replace:a}}function mj(e){e=aj(e);const t=gj(e),n=vj(e,t.state,t.location,t.replace);function r(s,a=!0){a||n.pauseListeners(),history.go(s)}const i=Kt({location:"",base:e,go:r,createHref:cj.bind(null,e)},t,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function yj(e){return typeof e=="string"||e&&typeof e=="object"}function fN(e){return typeof e=="string"||typeof e=="symbol"}const ro={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},hN=Symbol("");var _S;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(_S||(_S={}));function nu(e,t){return Kt(new Error,{type:e,[hN]:!0},t)}function Si(e,t){return e instanceof Error&&hN in e&&(t==null||!!(e.type&t))}const wS="[^/]+?",_j={sensitive:!1,strict:!1,start:!0,end:!0},wj=/[.+*?^${}()[\]/\\]/g;function bj(e,t){const n=Kt({},_j,t),r=[];let i=n.start?"^":"";const s=[];for(const h of e){const p=h.length?[]:[90];n.strict&&!h.length&&(i+="/");for(let v=0;v<h.length;v++){const m=h[v];let y=40+(n.sensitive?.25:0);if(m.type===0)v||(i+="/"),i+=m.value.replace(wj,"\\$&"),y+=40;else if(m.type===1){const{value:b,repeatable:E,optional:I,regexp:C}=m;s.push({name:b,repeatable:E,optional:I});const P=C||wS;if(P!==wS){y+=10;try{new RegExp(`(${P})`)}catch(F){throw new Error(`Invalid custom RegExp for param "${b}" (${P}): `+F.message)}}let D=E?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;v||(D=I&&h.length<2?`(?:/${D})`:"/"+D),I&&(D+="?"),i+=D,y+=20,I&&(y+=-8),E&&(y+=-20),P===".*"&&(y+=-50)}p.push(y)}r.push(p)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const a=new RegExp(i,n.sensitive?"":"i");function c(h){const p=h.match(a),v={};if(!p)return null;for(let m=1;m<p.length;m++){const y=p[m]||"",b=s[m-1];v[b.name]=y&&b.repeatable?y.split("/"):y}return v}function l(h){let p="",v=!1;for(const m of e){(!v||!p.endsWith("/"))&&(p+="/"),v=!1;for(const y of m)if(y.type===0)p+=y.value;else if(y.type===1){const{value:b,repeatable:E,optional:I}=y,C=b in h?h[b]:"";if(Hr(C)&&!E)throw new Error(`Provided param "${b}" is an array but it is not repeatable (* or + modifiers)`);const P=Hr(C)?C.join("/"):C;if(!P)if(I)m.length<2&&(p.endsWith("/")?p=p.slice(0,-1):v=!0);else throw new Error(`Missing required param "${b}"`);p+=P}}return p||"/"}return{re:a,score:r,keys:s,parse:c,stringify:l}}function Ej(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function Ij(e,t){let n=0;const r=e.score,i=t.score;for(;n<r.length&&n<i.length;){const s=Ej(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(bS(r))return 1;if(bS(i))return-1}return i.length-r.length}function bS(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Tj={type:0,value:""},Sj=/[a-zA-Z0-9_]/;function Aj(e){if(!e)return[[]];if(e==="/")return[[Tj]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(y){throw new Error(`ERR (${n})/"${h}": ${y}`)}let n=0,r=n;const i=[];let s;function a(){s&&i.push(s),s=[]}let c=0,l,h="",p="";function v(){h&&(n===0?s.push({type:0,value:h}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:h,regexp:p,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),h="")}function m(){h+=l}for(;c<e.length;){if(l=e[c++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(h&&v(),a()):l===":"?(v(),n=1):m();break;case 4:m(),n=r;break;case 1:l==="("?n=2:Sj.test(l)?m():(v(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case 2:l===")"?p[p.length-1]=="\\"?p=p.slice(0,-1)+l:n=3:p+=l;break;case 3:v(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&c--,p="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${h}"`),v(),a(),i}function Cj(e,t,n){const r=bj(Aj(e.path),n),i=Kt(r,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function Nj(e,t){const n=[],r=new Map;t=TS({strict:!1,end:!0,sensitive:!1},t);function i(p){return r.get(p)}function s(p,v,m){const y=!m,b=Rj(p);b.aliasOf=m&&m.record;const E=TS(t,p),I=[b];if("alias"in p){const D=typeof p.alias=="string"?[p.alias]:p.alias;for(const F of D)I.push(Kt({},b,{components:m?m.record.components:b.components,path:F,aliasOf:m?m.record:b}))}let C,P;for(const D of I){const{path:F}=D;if(v&&F[0]!=="/"){const Y=v.record.path,U=Y[Y.length-1]==="/"?"":"/";D.path=v.record.path+(F&&U+F)}if(C=Cj(D,v,E),m?m.alias.push(C):(P=P||C,P!==C&&P.alias.push(C),y&&p.name&&!IS(C)&&a(p.name)),b.children){const Y=b.children;for(let U=0;U<Y.length;U++)s(Y[U],C,m&&m.children[U])}m=m||C,(C.record.components&&Object.keys(C.record.components).length||C.record.name||C.record.redirect)&&l(C)}return P?()=>{a(P)}:Kc}function a(p){if(fN(p)){const v=r.get(p);v&&(r.delete(p),n.splice(n.indexOf(v),1),v.children.forEach(a),v.alias.forEach(a))}else{const v=n.indexOf(p);v>-1&&(n.splice(v,1),p.record.name&&r.delete(p.record.name),p.children.forEach(a),p.alias.forEach(a))}}function c(){return n}function l(p){let v=0;for(;v<n.length&&Ij(p,n[v])>=0&&(p.record.path!==n[v].record.path||!pN(p,n[v]));)v++;n.splice(v,0,p),p.record.name&&!IS(p)&&r.set(p.record.name,p)}function h(p,v){let m,y={},b,E;if("name"in p&&p.name){if(m=r.get(p.name),!m)throw nu(1,{location:p});E=m.record.name,y=Kt(ES(v.params,m.keys.filter(P=>!P.optional).map(P=>P.name)),p.params&&ES(p.params,m.keys.map(P=>P.name))),b=m.stringify(y)}else if("path"in p)b=p.path,m=n.find(P=>P.re.test(b)),m&&(y=m.parse(b),E=m.record.name);else{if(m=v.name?r.get(v.name):n.find(P=>P.re.test(v.path)),!m)throw nu(1,{location:p,currentLocation:v});E=m.record.name,y=Kt({},v.params,p.params),b=m.stringify(y)}const I=[];let C=m;for(;C;)I.unshift(C.record),C=C.parent;return{name:E,path:b,params:y,matched:I,meta:xj(I)}}return e.forEach(p=>s(p)),{addRoute:s,resolve:h,removeRoute:a,getRoutes:c,getRecordMatcher:i}}function ES(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Rj(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:Oj(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function Oj(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function IS(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function xj(e){return e.reduce((t,n)=>Kt(t,n.meta),{})}function TS(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function pN(e,t){return t.children.some(n=>n===e||pN(e,n))}const dN=/#/g,Pj=/&/g,kj=/\//g,Dj=/=/g,Lj=/\?/g,vN=/\+/g,Mj=/%5B/g,Fj=/%5D/g,gN=/%5E/g,Uj=/%60/g,mN=/%7B/g,jj=/%7C/g,yN=/%7D/g,Vj=/%20/g;function V_(e){return encodeURI(""+e).replace(jj,"|").replace(Mj,"[").replace(Fj,"]")}function Bj(e){return V_(e).replace(mN,"{").replace(yN,"}").replace(gN,"^")}function Ay(e){return V_(e).replace(vN,"%2B").replace(Vj,"+").replace(dN,"%23").replace(Pj,"%26").replace(Uj,"`").replace(mN,"{").replace(yN,"}").replace(gN,"^")}function qj(e){return Ay(e).replace(Dj,"%3D")}function Hj(e){return V_(e).replace(dN,"%23").replace(Lj,"%3F")}function Gj(e){return e==null?"":Hj(e).replace(kj,"%2F")}function ep(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function Wj(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(vN," "),a=s.indexOf("="),c=ep(a<0?s:s.slice(0,a)),l=a<0?null:ep(s.slice(a+1));if(c in t){let h=t[c];Hr(h)||(h=t[c]=[h]),h.push(l)}else t[c]=l}return t}function SS(e){let t="";for(let n in e){const r=e[n];if(n=qj(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Hr(r)?r.map(s=>s&&Ay(s)):[r&&Ay(r)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+n,s!=null&&(t+="="+s))})}return t}function $j(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Hr(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}const zj=Symbol(""),AS=Symbol(""),td=Symbol(""),B_=Symbol(""),Cy=Symbol("");function xc(){let e=[];function t(r){return e.push(r),()=>{const i=e.indexOf(r);i>-1&&e.splice(i,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function lo(e,t,n,r,i){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const l=v=>{v===!1?c(nu(4,{from:n,to:t})):v instanceof Error?c(v):yj(v)?c(nu(2,{from:t,to:v})):(s&&r.enterCallbacks[i]===s&&typeof v=="function"&&s.push(v),a())},h=e.call(r&&r.instances[i],t,n,l);let p=Promise.resolve(h);e.length<3&&(p=p.then(l)),p.catch(v=>c(v))})}function _m(e,t,n,r){const i=[];for(const s of e)for(const a in s.components){let c=s.components[a];if(!(t!=="beforeRouteEnter"&&!s.instances[a]))if(Kj(c)){const h=(c.__vccOpts||c)[t];h&&i.push(lo(h,n,r,s,a))}else{let l=c();i.push(()=>l.then(h=>{if(!h)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${s.path}"`));const p=tj(h)?h.default:h;s.components[a]=p;const m=(p.__vccOpts||p)[t];return m&&lo(m,n,r,s,a)()}))}}return i}function Kj(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function CS(e){const t=jr(td),n=jr(B_),r=Bn(()=>t.resolve(qa(e.to))),i=Bn(()=>{const{matched:l}=r.value,{length:h}=l,p=l[h-1],v=n.matched;if(!p||!v.length)return-1;const m=v.findIndex(eu.bind(null,p));if(m>-1)return m;const y=NS(l[h-2]);return h>1&&NS(p)===y&&v[v.length-1].path!==y?v.findIndex(eu.bind(null,l[h-2])):m}),s=Bn(()=>i.value>-1&&Jj(n.params,r.value.params)),a=Bn(()=>i.value>-1&&i.value===n.matched.length-1&&cN(n.params,r.value.params));function c(l={}){return Xj(l)?t[qa(e.replace)?"replace":"push"](qa(e.to)).catch(Kc):Promise.resolve()}return{route:r,href:Bn(()=>r.value.href),isActive:s,isExactActive:a,navigate:c}}const Qj=qC({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:CS,setup(e,{slots:t}){const n=Vl(CS(e)),{options:r}=jr(td),i=Bn(()=>({[RS(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[RS(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=t.default&&t.default(n);return e.custom?s:aN("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),Yj=Qj;function Xj(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Jj(e,t){for(const n in t){const r=t[n],i=e[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Hr(i)||i.length!==r.length||r.some((s,a)=>s!==i[a]))return!1}return!0}function NS(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const RS=(e,t,n)=>e??t??n,Zj=qC({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=jr(Cy),i=Bn(()=>e.route||r.value),s=jr(AS,0),a=Bn(()=>{let h=qa(s);const{matched:p}=i.value;let v;for(;(v=p[h])&&!v.components;)h++;return h}),c=Bn(()=>i.value.matched[a.value]);Fh(AS,Bn(()=>a.value+1)),Fh(zj,c),Fh(Cy,i);const l=Pr();return Ga(()=>[l.value,c.value,e.name],([h,p,v],[m,y,b])=>{p&&(p.instances[v]=h,y&&y!==p&&h&&h===m&&(p.leaveGuards.size||(p.leaveGuards=y.leaveGuards),p.updateGuards.size||(p.updateGuards=y.updateGuards))),h&&p&&(!y||!eu(p,y)||!m)&&(p.enterCallbacks[v]||[]).forEach(E=>E(h))},{flush:"post"}),()=>{const h=i.value,p=e.name,v=c.value,m=v&&v.components[p];if(!m)return OS(n.default,{Component:m,route:h});const y=v.props[p],b=y?y===!0?h.params:typeof y=="function"?y(h):y:null,I=aN(m,Kt({},b,t,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(v.instances[p]=null)},ref:l}));return OS(n.default,{Component:I,route:h})||I}}});function OS(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const tV=Zj;function eV(e){const t=Nj(e.routes,e),n=e.parseQuery||Wj,r=e.stringifyQuery||SS,i=e.history,s=xc(),a=xc(),c=xc(),l=p2(ro);let h=ro;xa&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const p=mm.bind(null,j=>""+j),v=mm.bind(null,Gj),m=mm.bind(null,ep);function y(j,rt){let H,ft;return fN(j)?(H=t.getRecordMatcher(j),ft=rt):ft=j,t.addRoute(ft,H)}function b(j){const rt=t.getRecordMatcher(j);rt&&t.removeRoute(rt)}function E(){return t.getRoutes().map(j=>j.record)}function I(j){return!!t.getRecordMatcher(j)}function C(j,rt){if(rt=Kt({},rt||l.value),typeof j=="string"){const x=ym(n,j,rt.path),L=t.resolve({path:x.path},rt),V=i.createHref(x.fullPath);return Kt(x,L,{params:m(L.params),hash:ep(x.hash),redirectedFrom:void 0,href:V})}let H;if("path"in j)H=Kt({},j,{path:ym(n,j.path,rt.path).path});else{const x=Kt({},j.params);for(const L in x)x[L]==null&&delete x[L];H=Kt({},j,{params:v(x)}),rt.params=v(rt.params)}const ft=t.resolve(H,rt),Vt=j.hash||"";ft.params=p(m(ft.params));const S=rj(r,Kt({},j,{hash:Bj(Vt),path:ft.path})),A=i.createHref(S);return Kt({fullPath:S,hash:Vt,query:r===SS?$j(j.query):j.query||{}},ft,{redirectedFrom:void 0,href:A})}function P(j){return typeof j=="string"?ym(n,j,l.value.path):Kt({},j)}function D(j,rt){if(h!==j)return nu(8,{from:rt,to:j})}function F(j){return _t(j)}function Y(j){return F(Kt(P(j),{replace:!0}))}function U(j){const rt=j.matched[j.matched.length-1];if(rt&&rt.redirect){const{redirect:H}=rt;let ft=typeof H=="function"?H(j):H;return typeof ft=="string"&&(ft=ft.includes("?")||ft.includes("#")?ft=P(ft):{path:ft},ft.params={}),Kt({query:j.query,hash:j.hash,params:"path"in ft?{}:j.params},ft)}}function _t(j,rt){const H=h=C(j),ft=l.value,Vt=j.state,S=j.force,A=j.replace===!0,x=U(H);if(x)return _t(Kt(P(x),{state:typeof x=="object"?Kt({},Vt,x.state):Vt,force:S,replace:A}),rt||H);const L=H;L.redirectedFrom=rt;let V;return!S&&ij(r,ft,H)&&(V=nu(16,{to:L,from:ft}),tn(ft,ft,!0,!1)),(V?Promise.resolve(V):Ze(L,ft)).catch(B=>Si(B)?Si(B,2)?B:cr(B):Ut(B,L,ft)).then(B=>{if(B){if(Si(B,2))return _t(Kt({replace:A},P(B.to),{state:typeof B.to=="object"?Kt({},Vt,B.to.state):Vt,force:S}),rt||L)}else B=$r(L,ft,!0,A,Vt);return O(L,ft,B),B})}function Wt(j,rt){const H=D(j,rt);return H?Promise.reject(H):Promise.resolve()}function lt(j){const rt=yi.values().next().value;return rt&&typeof rt.runWithContext=="function"?rt.runWithContext(j):j()}function Ze(j,rt){let H;const[ft,Vt,S]=nV(j,rt);H=_m(ft.reverse(),"beforeRouteLeave",j,rt);for(const x of ft)x.leaveGuards.forEach(L=>{H.push(lo(L,j,rt))});const A=Wt.bind(null,j,rt);return H.push(A),We(H).then(()=>{H=[];for(const x of s.list())H.push(lo(x,j,rt));return H.push(A),We(H)}).then(()=>{H=_m(Vt,"beforeRouteUpdate",j,rt);for(const x of Vt)x.updateGuards.forEach(L=>{H.push(lo(L,j,rt))});return H.push(A),We(H)}).then(()=>{H=[];for(const x of S)if(x.beforeEnter)if(Hr(x.beforeEnter))for(const L of x.beforeEnter)H.push(lo(L,j,rt));else H.push(lo(x.beforeEnter,j,rt));return H.push(A),We(H)}).then(()=>(j.matched.forEach(x=>x.enterCallbacks={}),H=_m(S,"beforeRouteEnter",j,rt),H.push(A),We(H))).then(()=>{H=[];for(const x of a.list())H.push(lo(x,j,rt));return H.push(A),We(H)}).catch(x=>Si(x,8)?x:Promise.reject(x))}function O(j,rt,H){c.list().forEach(ft=>lt(()=>ft(j,rt,H)))}function $r(j,rt,H,ft,Vt){const S=D(j,rt);if(S)return S;const A=rt===ro,x=xa?history.state:{};H&&(ft||A?i.replace(j.fullPath,Kt({scroll:A&&x&&x.scroll},Vt)):i.push(j.fullPath,Vt)),l.value=j,tn(j,rt,H,A),cr()}let cn;function Vo(){cn||(cn=i.listen((j,rt,H)=>{if(!Bo.listening)return;const ft=C(j),Vt=U(ft);if(Vt){_t(Kt(Vt,{replace:!0}),ft).catch(Kc);return}h=ft;const S=l.value;xa&&hj(mS(S.fullPath,H.delta),Zp()),Ze(ft,S).catch(A=>Si(A,12)?A:Si(A,2)?(_t(A.to,ft).then(x=>{Si(x,20)&&!H.delta&&H.type===fl.pop&&i.go(-1,!1)}).catch(Kc),Promise.reject()):(H.delta&&i.go(-H.delta,!1),Ut(A,ft,S))).then(A=>{A=A||$r(ft,S,!1),A&&(H.delta&&!Si(A,8)?i.go(-H.delta,!1):H.type===fl.pop&&Si(A,20)&&i.go(-1,!1)),O(ft,S,A)}).catch(Kc)}))}let zr=xc(),se=xc(),Ft;function Ut(j,rt,H){cr(j);const ft=se.list();return ft.length?ft.forEach(Vt=>Vt(j,rt,H)):console.error(j),Promise.reject(j)}function he(){return Ft&&l.value!==ro?Promise.resolve():new Promise((j,rt)=>{zr.add([j,rt])})}function cr(j){return Ft||(Ft=!j,Vo(),zr.list().forEach(([rt,H])=>j?H(j):rt()),zr.reset()),j}function tn(j,rt,H,ft){const{scrollBehavior:Vt}=e;if(!xa||!Vt)return Promise.resolve();const S=!H&&pj(mS(j.fullPath,0))||(ft||!H)&&history.state&&history.state.scroll||null;return DC().then(()=>Vt(j,rt,S)).then(A=>A&&fj(A)).catch(A=>Ut(A,j,rt))}const Ge=j=>i.go(j);let mi;const yi=new Set,Bo={currentRoute:l,listening:!0,addRoute:y,removeRoute:b,hasRoute:I,getRoutes:E,resolve:C,options:e,push:F,replace:Y,go:Ge,back:()=>Ge(-1),forward:()=>Ge(1),beforeEach:s.add,beforeResolve:a.add,afterEach:c.add,onError:se.add,isReady:he,install(j){const rt=this;j.component("RouterLink",Yj),j.component("RouterView",tV),j.config.globalProperties.$router=rt,Object.defineProperty(j.config.globalProperties,"$route",{enumerable:!0,get:()=>qa(l)}),xa&&!mi&&l.value===ro&&(mi=!0,F(i.location).catch(Vt=>{}));const H={};for(const Vt in ro)Object.defineProperty(H,Vt,{get:()=>l.value[Vt],enumerable:!0});j.provide(td,rt),j.provide(B_,SC(H)),j.provide(Cy,l);const ft=j.unmount;yi.add(j),j.unmount=function(){yi.delete(j),yi.size<1&&(h=ro,cn&&cn(),cn=null,l.value=ro,mi=!1,Ft=!1),ft()}}};function We(j){return j.reduce((rt,H)=>rt.then(()=>lt(H)),Promise.resolve())}return Bo}function nV(e,t){const n=[],r=[],i=[],s=Math.max(t.matched.length,e.matched.length);for(let a=0;a<s;a++){const c=t.matched[a];c&&(e.matched.find(h=>eu(h,c))?r.push(c):n.push(c));const l=e.matched[a];l&&(t.matched.find(h=>eu(h,l))||i.push(l))}return[n,r,i]}function _N(){return jr(td)}function rV(){return jr(B_)}const wr=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},iV={},oV={class:"hidden lg:block lg:w-2/5 px-4 py-2"},sV=Q("div",{class:"relative mb-5"},[Q("input",{placeholder:"트위터 검색",type:"text",class:"pl-10 rounded-full w-full p-2 bg-gray-100 text-sm focus:ring-1 focus:ring-primary focus:bg-white focus:outline-none"}),Q("i",{class:"fas fa-search absolute left-0 mt-2 ml-3 text-sm text-light"})],-1),aV={class:"w-full rounded-lg bg-gray-50 flex flex-col"},uV=Q("div",{class:"flex items-center justify-between px-3 py-1 border-b border-gray-100"},[Q("span",{class:"text-lg font-bold"},"나를 위한 트렌드"),Q("i",{class:"text-center fas fa-cog text-lg text-primary hover:bg-blue-50 p-2 rounded-full"})],-1),cV=ko('<div class="flex"><div class="flex-1 flex flex-col"><div class="text-gray-500">대한민국에서 트렌드 중</div><div class="font-bold text-lg">하하하</div><div class="text-gray-500">3,564 트윗</div></div><i class="fas fa-ellipsis-h text-gray-500"></i></div>',1),lV=[cV],fV=Q("div",{class:"px-4 py-2 hover:bg-gray-100"},[Q("span",{class:"text-primary text-lg px-4 py-2 rounded-xl"},"더 보기")],-1),hV={class:"mt-5 w-full rounded-lg bg-gray-50 flex flex-col"},pV=Q("div",{class:"px-3 py-3 border-b border-gray-100"},[Q("span",{class:"text-lg font-bold"},"팔로우 추천")],-1),dV=ko('<div class="flex items-center"><img src="http://picsum.photos/200" class="w-12 h-12 rounded-full mr-2"><div class="flex-1 flex flex-col"><div class="font-bold">정재웅</div><div class="text-gray-500 text-sm">@jung_jaeWoong</div></div><div><button class="border-2 border-primary hover:bg-blue-100 px-2 py-1 rounded-full text-primary text-sm">팔로우</button></div></div>',1),vV=[dV],gV=Q("div",{class:"px-4 py-2 hover:bg-gray-100"},[Q("span",{class:"text-primary text-lg px-4 py-2 rounded-xl"},"더 보기")],-1);function mV(e,t,n,r,i,s){return $t(),oe("div",oV,[sV,Q("div",aV,[uV,($t(),oe(Fe,null,Ao(3,a=>Q("div",{class:"border-b border-gray-100 hover:bg-gray-100 px-4 py-2 cursor-pointer",key:a},lV)),64)),fV]),Q("div",hV,[pV,($t(),oe(Fe,null,Ao(3,a=>Q("div",{class:"border-b border-gray-100 hover:bg-gray-100 px-4 py-2 cursor-pointer",key:a},vV)),64)),gV])])}const q_=wr(iV,[["render",mV]]),yV={props:["currentUser"]},_V={class:"flex px-3 py-3 border-b border-gray-100 hover:bg-gray-50 cursor-pointer"},wV=["src"],bV=ko('<div class="ml-3 flex-1 flex flex-col space-y-1"><div class="text-sm space-x-1"><span class="font-bold">정재웅</span><span class="text-gray-500 text-xs">@jjw</span><span>•</span><span class="text-gray-500 text-xs">7분</span></div><div> 안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요. 안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요. 안녕하세요.안녕하세요.안녕하세요.안녕하세요.안녕하세요. </div><div class="flex justify-between"><div class="text-gray-500 hover:text-primary"><i class="far fa-comment hover:bg-blue-50 rounded-full p-2"></i><span class="ml-1 text-gray-500 text-sm">1</span></div><div class="text-gray-500 hover:text-green-500"><i class="fa fa-retweet hover:bg-green-50 rounded-full p-2"></i><span class="ml-1 text-gray-500 text-sm">1</span></div><div class="text-gray-500 hover:text-red-500"><i class="far fa-heart hover:bg-red-50 rounded-full p-2"></i><span class="ml-1 text-gray-500 text-sm">1</span></div><div class="text-gray-500 hover:text-primary"><i class="far fa-share-square hover:bg-blue-50 rounded-full p-2"></i></div></div></div>',1);function EV(e,t,n,r,i,s){return $t(),oe("div",_V,[Q("img",{src:n.currentUser.profile_image_url,class:"w-10 h-10 rounded-full hover:opacity-80 cursor-pointer"},null,8,wV),bV])}const wN=wr(yV,[["render",EV]]);/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var IV="store";function Ru(e,t){Object.keys(e).forEach(function(n){return t(e[n],n)})}function TV(e){return e!==null&&typeof e=="object"}function SV(e){return e&&typeof e.then=="function"}function AV(e,t){return function(){return e(t)}}function bN(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var r=t.indexOf(e);r>-1&&t.splice(r,1)}}function EN(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;ed(e,n,[],e._modules.root,!0),H_(e,n,t)}function H_(e,t,n){var r=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var i=e._wrappedGetters,s={};Ru(i,function(a,c){s[c]=AV(a,e),Object.defineProperty(e.getters,c,{get:function(){return s[c]()},enumerable:!0})}),e._state=Vl({data:t}),e.strict&&xV(e),r&&n&&e._withCommit(function(){r.data=null})}function ed(e,t,n,r,i){var s=!n.length,a=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[a],e._modulesNamespaceMap[a]=r),!s&&!i){var c=G_(t,n.slice(0,-1)),l=n[n.length-1];e._withCommit(function(){c[l]=r.state})}var h=r.context=CV(e,a,n);r.forEachMutation(function(p,v){var m=a+v;NV(e,m,p,h)}),r.forEachAction(function(p,v){var m=p.root?v:a+v,y=p.handler||p;RV(e,m,y,h)}),r.forEachGetter(function(p,v){var m=a+v;OV(e,m,p,h)}),r.forEachChild(function(p,v){ed(e,t,n.concat(v),p,i)})}function CV(e,t,n){var r=t==="",i={dispatch:r?e.dispatch:function(s,a,c){var l=np(s,a,c),h=l.payload,p=l.options,v=l.type;return(!p||!p.root)&&(v=t+v),e.dispatch(v,h)},commit:r?e.commit:function(s,a,c){var l=np(s,a,c),h=l.payload,p=l.options,v=l.type;(!p||!p.root)&&(v=t+v),e.commit(v,h,p)}};return Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return IN(e,t)}},state:{get:function(){return G_(e.state,n)}}}),i}function IN(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach(function(i){if(i.slice(0,r)===t){var s=i.slice(r);Object.defineProperty(n,s,{get:function(){return e.getters[i]},enumerable:!0})}}),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function NV(e,t,n,r){var i=e._mutations[t]||(e._mutations[t]=[]);i.push(function(a){n.call(e,r.state,a)})}function RV(e,t,n,r){var i=e._actions[t]||(e._actions[t]=[]);i.push(function(a){var c=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},a);return SV(c)||(c=Promise.resolve(c)),e._devtoolHook?c.catch(function(l){throw e._devtoolHook.emit("vuex:error",l),l}):c})}function OV(e,t,n,r){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(s){return n(r.state,r.getters,s.state,s.getters)})}function xV(e){Ga(function(){return e._state.data},function(){},{deep:!0,flush:"sync"})}function G_(e,t){return t.reduce(function(n,r){return n[r]},e)}function np(e,t,n){return TV(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}var PV="vuex bindings",xS="vuex:mutations",wm="vuex:actions",Ta="vuex",kV=0;function DV(e,t){ZU({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[PV]},function(n){n.addTimelineLayer({id:xS,label:"Vuex Mutations",color:PS}),n.addTimelineLayer({id:wm,label:"Vuex Actions",color:PS}),n.addInspector({id:Ta,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===e&&r.inspectorId===Ta)if(r.filter){var i=[];CN(i,t._modules.root,r.filter,""),r.rootNodes=i}else r.rootNodes=[AN(t._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===e&&r.inspectorId===Ta){var i=r.nodeId;IN(t,i),r.state=FV(jV(t._modules,i),i==="root"?t.getters:t._makeLocalGettersCache,i)}}),n.on.editInspectorState(function(r){if(r.app===e&&r.inspectorId===Ta){var i=r.nodeId,s=r.path;i!=="root"&&(s=i.split("/").filter(Boolean).concat(s)),t._withCommit(function(){r.set(t._state.data,s,r.state.value)})}}),t.subscribe(function(r,i){var s={};r.payload&&(s.payload=r.payload),s.state=i,n.notifyComponentUpdate(),n.sendInspectorTree(Ta),n.sendInspectorState(Ta),n.addTimelineEvent({layerId:xS,event:{time:Date.now(),title:r.type,data:s}})}),t.subscribeAction({before:function(r,i){var s={};r.payload&&(s.payload=r.payload),r._id=kV++,r._time=Date.now(),s.state=i,n.addTimelineEvent({layerId:wm,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:s}})},after:function(r,i){var s={},a=Date.now()-r._time;s.duration={_custom:{type:"duration",display:a+"ms",tooltip:"Action duration",value:a}},r.payload&&(s.payload=r.payload),s.state=i,n.addTimelineEvent({layerId:wm,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:s}})}})})}var PS=8702998,LV=6710886,MV=16777215,TN={label:"namespaced",textColor:MV,backgroundColor:LV};function SN(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function AN(e,t){return{id:t||"root",label:SN(t),tags:e.namespaced?[TN]:[],children:Object.keys(e._children).map(function(n){return AN(e._children[n],t+n+"/")})}}function CN(e,t,n,r){r.includes(n)&&e.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:t.namespaced?[TN]:[]}),Object.keys(t._children).forEach(function(i){CN(e,t._children[i],n,r+i+"/")})}function FV(e,t,n){t=n==="root"?t:t[n];var r=Object.keys(t),i={state:Object.keys(e.state).map(function(a){return{key:a,editable:!0,value:e.state[a]}})};if(r.length){var s=UV(t);i.getters=Object.keys(s).map(function(a){return{key:a.endsWith("/")?SN(a):a,editable:!1,value:Ny(function(){return s[a]})}})}return i}function UV(e){var t={};return Object.keys(e).forEach(function(n){var r=n.split("/");if(r.length>1){var i=t,s=r.pop();r.forEach(function(a){i[a]||(i[a]={_custom:{value:{},display:a,tooltip:"Module",abstract:!0}}),i=i[a]._custom.value}),i[s]=Ny(function(){return e[n]})}else t[n]=Ny(function(){return e[n]})}),t}function jV(e,t){var n=t.split("/").filter(function(r){return r});return n.reduce(function(r,i,s){var a=r[i];if(!a)throw new Error('Missing module "'+i+'" for path "'+t+'".');return s===n.length-1?a:a._children},t==="root"?e:e.root._children)}function Ny(e){try{return e()}catch(t){return t}}var Wr=function(t,n){this.runtime=n,this._children=Object.create(null),this._rawModule=t;var r=t.state;this.state=(typeof r=="function"?r():r)||{}},NN={namespaced:{configurable:!0}};NN.namespaced.get=function(){return!!this._rawModule.namespaced};Wr.prototype.addChild=function(t,n){this._children[t]=n};Wr.prototype.removeChild=function(t){delete this._children[t]};Wr.prototype.getChild=function(t){return this._children[t]};Wr.prototype.hasChild=function(t){return t in this._children};Wr.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};Wr.prototype.forEachChild=function(t){Ru(this._children,t)};Wr.prototype.forEachGetter=function(t){this._rawModule.getters&&Ru(this._rawModule.getters,t)};Wr.prototype.forEachAction=function(t){this._rawModule.actions&&Ru(this._rawModule.actions,t)};Wr.prototype.forEachMutation=function(t){this._rawModule.mutations&&Ru(this._rawModule.mutations,t)};Object.defineProperties(Wr.prototype,NN);var Bs=function(t){this.register([],t,!1)};Bs.prototype.get=function(t){return t.reduce(function(n,r){return n.getChild(r)},this.root)};Bs.prototype.getNamespace=function(t){var n=this.root;return t.reduce(function(r,i){return n=n.getChild(i),r+(n.namespaced?i+"/":"")},"")};Bs.prototype.update=function(t){RN([],this.root,t)};Bs.prototype.register=function(t,n,r){var i=this;r===void 0&&(r=!0);var s=new Wr(n,r);if(t.length===0)this.root=s;else{var a=this.get(t.slice(0,-1));a.addChild(t[t.length-1],s)}n.modules&&Ru(n.modules,function(c,l){i.register(t.concat(l),c,r)})};Bs.prototype.unregister=function(t){var n=this.get(t.slice(0,-1)),r=t[t.length-1],i=n.getChild(r);i&&i.runtime&&n.removeChild(r)};Bs.prototype.isRegistered=function(t){var n=this.get(t.slice(0,-1)),r=t[t.length-1];return n?n.hasChild(r):!1};function RN(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return;RN(e.concat(r),t.getChild(r),n.modules[r])}}function VV(e){return new Qn(e)}var Qn=function(t){var n=this;t===void 0&&(t={});var r=t.plugins;r===void 0&&(r=[]);var i=t.strict;i===void 0&&(i=!1);var s=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Bs(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=s;var a=this,c=this,l=c.dispatch,h=c.commit;this.dispatch=function(m,y){return l.call(a,m,y)},this.commit=function(m,y,b){return h.call(a,m,y,b)},this.strict=i;var p=this._modules.root.state;ed(this,p,[],this._modules.root),H_(this,p),r.forEach(function(v){return v(n)})},W_={state:{configurable:!0}};Qn.prototype.install=function(t,n){t.provide(n||IV,this),t.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&DV(t,this)};W_.state.get=function(){return this._state.data};W_.state.set=function(e){};Qn.prototype.commit=function(t,n,r){var i=this,s=np(t,n,r),a=s.type,c=s.payload,l={type:a,payload:c},h=this._mutations[a];h&&(this._withCommit(function(){h.forEach(function(v){v(c)})}),this._subscribers.slice().forEach(function(p){return p(l,i.state)}))};Qn.prototype.dispatch=function(t,n){var r=this,i=np(t,n),s=i.type,a=i.payload,c={type:s,payload:a},l=this._actions[s];if(l){try{this._actionSubscribers.slice().filter(function(p){return p.before}).forEach(function(p){return p.before(c,r.state)})}catch{}var h=l.length>1?Promise.all(l.map(function(p){return p(a)})):l[0](a);return new Promise(function(p,v){h.then(function(m){try{r._actionSubscribers.filter(function(y){return y.after}).forEach(function(y){return y.after(c,r.state)})}catch{}p(m)},function(m){try{r._actionSubscribers.filter(function(y){return y.error}).forEach(function(y){return y.error(c,r.state,m)})}catch{}v(m)})})}};Qn.prototype.subscribe=function(t,n){return bN(t,this._subscribers,n)};Qn.prototype.subscribeAction=function(t,n){var r=typeof t=="function"?{before:t}:t;return bN(r,this._actionSubscribers,n)};Qn.prototype.watch=function(t,n,r){var i=this;return Ga(function(){return t(i.state,i.getters)},n,Object.assign({},r))};Qn.prototype.replaceState=function(t){var n=this;this._withCommit(function(){n._state.data=t})};Qn.prototype.registerModule=function(t,n,r){r===void 0&&(r={}),typeof t=="string"&&(t=[t]),this._modules.register(t,n),ed(this,this.state,t,this._modules.get(t),r.preserveState),H_(this,this.state)};Qn.prototype.unregisterModule=function(t){var n=this;typeof t=="string"&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var r=G_(n.state,t.slice(0,-1));delete r[t[t.length-1]]}),EN(this)};Qn.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),this._modules.isRegistered(t)};Qn.prototype.hotUpdate=function(t){this._modules.update(t),EN(this,!0)};Qn.prototype._withCommit=function(t){var n=this._committing;this._committing=!0,t(),this._committing=n};Object.defineProperties(Qn.prototype,W_);var BV=function(e){return function(t){return!!t&&typeof t=="object"}(e)&&!function(t){var n=Object.prototype.toString.call(t);return n==="[object RegExp]"||n==="[object Date]"||function(r){return r.$$typeof===qV}(t)}(e)},qV=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function qc(e,t){return t.clone!==!1&&t.isMergeableObject(e)?ru(Array.isArray(e)?[]:{},e,t):e}function HV(e,t,n){return e.concat(t).map(function(r){return qc(r,n)})}function kS(e){return Object.keys(e).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(n){return t.propertyIsEnumerable(n)}):[]}(e))}function DS(e,t){try{return t in e}catch{return!1}}function ru(e,t,n){(n=n||{}).arrayMerge=n.arrayMerge||HV,n.isMergeableObject=n.isMergeableObject||BV,n.cloneUnlessOtherwiseSpecified=qc;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):function(i,s,a){var c={};return a.isMergeableObject(i)&&kS(i).forEach(function(l){c[l]=qc(i[l],a)}),kS(s).forEach(function(l){(function(h,p){return DS(h,p)&&!(Object.hasOwnProperty.call(h,p)&&Object.propertyIsEnumerable.call(h,p))})(i,l)||(c[l]=DS(i,l)&&a.isMergeableObject(s[l])?function(h,p){if(!p.customMerge)return ru;var v=p.customMerge(h);return typeof v=="function"?v:ru}(l,a)(i[l],s[l],a):qc(s[l],a))}),c}(e,t,n):qc(t,n)}ru.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,r){return ru(n,r,t)},{})};var GV=ru;function WV(e){var t=(e=e||{}).storage||window&&window.localStorage,n=e.key||"vuex";function r(p,v){var m=v.getItem(p);try{return typeof m=="string"?JSON.parse(m):typeof m=="object"?m:void 0}catch{}}function i(){return!0}function s(p,v,m){return m.setItem(p,JSON.stringify(v))}function a(p,v){return Array.isArray(v)?v.reduce(function(m,y){return function(I,C,P,D){return!/^(__proto__|constructor|prototype)$/.test(C)&&((C=C.split?C.split("."):C.slice(0)).slice(0,-1).reduce(function(F,Y){return F[Y]=F[Y]||{}},I)[C.pop()]=P),I}(m,y,(b=p,(b=((E=y).split?E.split("."):E).reduce(function(I,C){return I&&I[C]},b))===void 0?void 0:b));var b,E},{}):p}function c(p){return function(v){return p.subscribe(v)}}(e.assertStorage||function(){t.setItem("@@",1),t.removeItem("@@")})(t);var l,h=function(){return(e.getState||r)(n,t)};return e.fetchBeforeUse&&(l=h()),function(p){e.fetchBeforeUse||(l=h()),typeof l=="object"&&l!==null&&(p.replaceState(e.overwrite?l:GV(p.state,l,{arrayMerge:e.arrayMerger||function(v,m){return m},clone:!1})),(e.rehydrated||function(){})(p)),(e.subscriber||c)(p)(function(v,m){(e.filter||i)(v)&&(e.setState||s)(n,(e.reducer||a)(m,e.paths),t)})}}const iu=VV({state(){return{user:null}},mutations:{SET_USER:(e,t)=>{e.user=t}},plugins:[WV()]});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ry=function(e,t){return Ry=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])},Ry(e,t)};function Z(e,t){Ry(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var ee=function(){return ee=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ee.apply(this,arguments)};function R(e,t,n,r){function i(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function c(p){try{h(r.next(p))}catch(v){a(v)}}function l(p){try{h(r.throw(p))}catch(v){a(v)}}function h(p){p.done?s(p.value):i(p.value).then(c,l)}h((r=r.apply(e,t||[])).next())})}function N(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(h){return function(p){return l([h,p])}}function l(h){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=h[0]&2?i.return:h[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,h[1])).done)return s;switch(i=0,s&&(h=[h[0]&2,s.value]),h[0]){case 0:case 1:s=h;break;case 4:return n.label++,{value:h[1],done:!1};case 5:n.label++,i=h[1],h=[0];continue;case 7:h=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(h[0]===6||h[0]===2)){n=0;continue}if(h[0]===3&&(!s||h[1]>s[0]&&h[1]<s[3])){n.label=h[1];break}if(h[0]===6&&n.label<s[1]){n.label=s[1],s=h;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(h);break}s[2]&&n.ops.pop(),n.trys.pop();continue}h=t.call(e,n)}catch(p){h=[6,p],i=0}finally{r=s=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Te(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function hl(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],a;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return s}function Gi(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(hl(arguments[t]));return e}function Ae(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],a=0,c=s.length;a<c;a++,i++)r[i]=s[a];return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ON={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K=function(e,t){if(!e)throw Ou(t)},Ou=function(e){return new Error("Firebase Database ("+ON.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xN=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},$V=function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){var s=e[n++],a=e[n++],c=e[n++],l=((i&7)<<18|(s&63)<<12|(a&63)<<6|c&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{var s=e[n++],a=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return t.join("")},$_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var s=e[i],a=i+1<e.length,c=a?e[i+1]:0,l=i+2<e.length,h=l?e[i+2]:0,p=s>>2,v=(s&3)<<4|c>>4,m=(c&15)<<2|h>>6,y=h&63;l||(y=64,a||(m=64)),r.push(n[p],n[v],n[m],n[y])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(xN(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):$V(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var s=n[e.charAt(i++)],a=i<e.length,c=a?n[e.charAt(i)]:0;++i;var l=i<e.length,h=l?n[e.charAt(i)]:64;++i;var p=i<e.length,v=p?n[e.charAt(i)]:64;if(++i,s==null||c==null||h==null||v==null)throw Error();var m=s<<2|c>>4;if(r.push(m),h!==64){var y=c<<4&240|h>>2;if(r.push(y),v!==64){var b=h<<6&192|v;r.push(b)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},zV=function(e){var t=xN(e);return $_.encodeByteArray(t,!0)},LS=function(e){try{return $_.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(e){return pl(void 0,e)}function pl(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)!t.hasOwnProperty(r)||!KV(r)||(e[r]=pl(e[r],t[r]));return e}function KV(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn=function(){function e(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(n,r){t.resolve=n,t.reject=r})}return e.prototype.wrapCallback=function(t){var n=this;return function(r,i){r?n.reject(r):n.resolve(i),typeof t=="function"&&(n.promise.catch(function(){}),t.length===1?t(r):t(r,i))}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function z_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xs())}function QV(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YV(){return typeof self=="object"&&self.self===self}function K_(){var e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function kN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XV(){return xs().indexOf("Electron/")>=0}function JV(){var e=xs();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ZV(){return xs().indexOf("MSAppHost/")>=0}function DN(){return ON.NODE_ADMIN===!0}function Q_(){return"indexedDB"in self&&indexedDB!=null}function Y_(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(s){t(s)}})}function LN(){return!(!navigator||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t4="FirebaseError",xu=function(e){Z(t,e);function t(n,r,i){var s=e.call(this,r)||this;return s.code=n,s.customData=i,s.name=t4,Object.setPrototypeOf(s,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(s,Do.prototype.create),s}return t}(Error),Do=function(){function e(t,n,r){this.service=t,this.serviceName=n,this.errors=r}return e.prototype.create=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=n[0]||{},s=this.service+"/"+t,a=this.errors[t],c=a?e4(a,i):"Error",l=this.serviceName+": "+c+" ("+s+").",h=new xu(s,l,i);return h},e}();function e4(e,t){return e.replace(n4,function(n,r){var i=t[r];return i!=null?String(i):"<"+r+"?>"})}var n4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dl(e){return JSON.parse(e)}function Ue(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MN=function(e){var t={},n={},r={},i="";try{var s=e.split(".");t=dl(LS(s[0])||""),n=dl(LS(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:t,claims:n,data:r,signature:i}},r4=function(e){var t=MN(e),n=t.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},i4=function(e){var t=MN(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Dr(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function Oy(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function rp(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o4(e){for(var t=[],n=function(l,h){Array.isArray(h)?h.forEach(function(p){t.push(encodeURIComponent(l)+"="+encodeURIComponent(p))}):t.push(encodeURIComponent(l)+"="+encodeURIComponent(h))},r=0,i=Object.entries(e);r<i.length;r++){var s=i[r],a=s[0],c=s[1];n(a,c)}return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var s4=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(t,n){n||(n=0);var r=this.W_;if(typeof t=="string")for(var i=0;i<16;i++)r[i]=t.charCodeAt(n)<<24|t.charCodeAt(n+1)<<16|t.charCodeAt(n+2)<<8|t.charCodeAt(n+3),n+=4;else for(var i=0;i<16;i++)r[i]=t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3],n+=4;for(var i=16;i<80;i++){var s=r[i-3]^r[i-8]^r[i-14]^r[i-16];r[i]=(s<<1|s>>>31)&4294967295}for(var a=this.chain_[0],c=this.chain_[1],l=this.chain_[2],h=this.chain_[3],p=this.chain_[4],v,m,i=0;i<80;i++){i<40?i<20?(v=h^c&(l^h),m=1518500249):(v=c^l^h,m=1859775393):i<60?(v=c&l|h&(c|l),m=2400959708):(v=c^l^h,m=3395469782);var s=(a<<5|a>>>27)+v+p+m+r[i]&4294967295;p=h,h=l,l=(c<<30|c>>>2)&4294967295,c=a,a=s}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295},e.prototype.update=function(t,n){if(t!=null){n===void 0&&(n=t.length);for(var r=n-this.blockSize,i=0,s=this.buf_,a=this.inbuf_;i<n;){if(a===0)for(;i<=r;)this.compress_(t,i),i+=this.blockSize;if(typeof t=="string"){for(;i<n;)if(s[a]=t.charCodeAt(i),++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}else for(;i<n;)if(s[a]=t[i],++a,++i,a===this.blockSize){this.compress_(s),a=0;break}}this.inbuf_=a,this.total_+=n}},e.prototype.digest=function(){var t=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);for(var i=0,r=0;r<5;r++)for(var s=24;s>=0;s-=8)t[i]=this.chain_[r]>>s&255,++i;return t},e}();function a4(e,t){var n=new u4(e,t);return n.subscribe.bind(n)}var u4=function(){function e(t,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(i){r.error(i)})}return e.prototype.next=function(t){this.forEachObserver(function(n){n.next(t)})},e.prototype.error=function(t){this.forEachObserver(function(n){n.error(t)}),this.close(t)},e.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},e.prototype.subscribe=function(t,n,r){var i=this,s;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");c4(t,["next","error","complete"])?s=t:s={next:t,error:n,complete:r},s.next===void 0&&(s.next=bm),s.error===void 0&&(s.error=bm),s.complete===void 0&&(s.complete=bm);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?s.error(i.finalError):s.complete()}catch{}}),this.observers.push(s),a},e.prototype.unsubscribeOne=function(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))},e.prototype.forEachObserver=function(t){if(!this.finalized)for(var n=0;n<this.observers.length;n++)this.sendOne(n,t)},e.prototype.sendOne=function(t,n){var r=this;this.task.then(function(){if(r.observers!==void 0&&r.observers[t]!==void 0)try{n(r.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})},e.prototype.close=function(t){var n=this;this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(function(){n.observers=void 0,n.onNoObservers=void 0}))},e}();function c4(e,t){if(typeof e!="object"||e===null)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&typeof e[i]=="function")return!0}return!1}function bm(){}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=n===0?"none":"no more than "+n),i){var s=e+" failed: Was called with "+r+(r===1?" argument.":" arguments.")+" Expects "+i+".";throw new Error(s)}};function yr(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument ",i}function Qe(e,t,n,r){if(!(r&&!n)&&typeof n!="function")throw new Error(yr(e,t,r)+"must be a valid function.")}function MS(e,t,n,r){if(!(r&&!n)&&(typeof n!="object"||n===null))throw new Error(yr(e,t,r)+"must be a valid context object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l4=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,K(r<e.length,"Surrogate pair missing trail surrogate.");var a=e.charCodeAt(r)-56320;i=65536+(s<<10)+a}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Vh=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f4=1e3,h4=2,p4=4*60*60*1e3,d4=.5;function xy(e,t,n){t===void 0&&(t=f4),n===void 0&&(n=h4);var r=t*Math.pow(n,e),i=Math.round(d4*r*(Math.random()-.5)*2);return Math.min(p4,r+i)}var Kn=function(){function e(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},e.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},e.prototype.setServiceProps=function(t){return this.serviceProps=t,this},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var FN=function(){function e(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(t){t===void 0&&(t=Pa);var n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){var r=new qn;this.instancesDeferred.set(n,r);try{var i=this.getOrInitializeService(n);i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise},e.prototype.getImmediate=function(t){var n=ee({identifier:Pa,optional:!1},t),r=n.identifier,i=n.optional,s=this.normalizeInstanceIdentifier(r);try{var a=this.getOrInitializeService(s);if(!a){if(i)return null;throw Error("Service "+this.name+" is not available")}return a}catch(c){if(i)return null;throw c}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(t){var n,r;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,g4(t))try{this.getOrInitializeService(Pa)}catch{}try{for(var i=Te(this.instancesDeferred.entries()),s=i.next();!s.done;s=i.next()){var a=hl(s.value,2),c=a[0],l=a[1],h=this.normalizeInstanceIdentifier(c);try{var p=this.getOrInitializeService(h);l.resolve(p)}catch{}}}catch(v){n={error:v}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.clearInstance=function(t){t===void 0&&(t=Pa),this.instancesDeferred.delete(t),this.instances.delete(t)},e.prototype.delete=function(){return R(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Gi(t.filter(function(r){return"INTERNAL"in r}).map(function(r){return r.INTERNAL.delete()}),t.filter(function(r){return"_delete"in r}).map(function(r){return r._delete()})))];case 1:return n.sent(),[2]}})})},e.prototype.isComponentSet=function(){return this.component!=null},e.prototype.getOrInitializeService=function(t){var n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,v4(t)),this.instances.set(t,n)),n||null},e.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:Pa:t},e}();function v4(e){return e===Pa?void 0:e}function g4(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var UN=function(){function e(t){this.name=t,this.providers=new Map}return e.prototype.addComponent=function(t){var n=this.getProvider(t.name);if(n.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);n.setComponent(t)},e.prototype.addOrOverwriteComponent=function(t){var n=this.getProvider(t.name);n.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},e.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var n=new FN(t,this);return this.providers.set(t,n),n},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}();/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Nr(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var s=arguments[t],a=0,c=s.length;a<c;a++,i++)r[i]=s[a];return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cs,X_=[],Rt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Rt||(Rt={}));var jN={debug:Rt.DEBUG,verbose:Rt.VERBOSE,info:Rt.INFO,warn:Rt.WARN,error:Rt.ERROR,silent:Rt.SILENT},m4=Rt.INFO,y4=(cs={},cs[Rt.DEBUG]="log",cs[Rt.VERBOSE]="log",cs[Rt.INFO]="info",cs[Rt.WARN]="warn",cs[Rt.ERROR]="error",cs),_4=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=new Date().toISOString(),s=y4[t];if(s)console[s].apply(console,Nr(["["+i+"]  "+e.name+":"],n));else throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}},Pu=function(){function e(t){this.name=t,this._logLevel=m4,this._logHandler=_4,this._userLogHandler=null,X_.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Rt))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(t){this._logLevel=typeof t=="string"?jN[t]:t},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Nr([this,Rt.DEBUG],t)),this._logHandler.apply(this,Nr([this,Rt.DEBUG],t))},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Nr([this,Rt.VERBOSE],t)),this._logHandler.apply(this,Nr([this,Rt.VERBOSE],t))},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Nr([this,Rt.INFO],t)),this._logHandler.apply(this,Nr([this,Rt.INFO],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Nr([this,Rt.WARN],t)),this._logHandler.apply(this,Nr([this,Rt.WARN],t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,Nr([this,Rt.ERROR],t)),this._logHandler.apply(this,Nr([this,Rt.ERROR],t))},e}();function w4(e){X_.forEach(function(t){t.setLogLevel(e)})}function b4(e,t){for(var n=function(a){var c=null;t&&t.level&&(c=jN[t.level]),e===null?a.userLogHandler=null:a.userLogHandler=function(l,h){for(var p=[],v=2;v<arguments.length;v++)p[v-2]=arguments[v];var m=p.map(function(y){if(y==null)return null;if(typeof y=="string")return y;if(typeof y=="number"||typeof y=="boolean")return y.toString();if(y instanceof Error)return y.message;try{return JSON.stringify(y)}catch{return null}}).filter(function(y){return y}).join(" ");h>=(c??l.logLevel)&&e({level:Rt[h].toLowerCase(),message:m,args:p,type:l.name})}},r=0,i=X_;r<i.length;r++){var s=i[r];n(s)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var io,E4=(io={},io["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",io["bad-app-name"]="Illegal App name: '{$appName}",io["duplicate-app"]="Firebase App named '{$appName}' already exists",io["app-deleted"]="Firebase App named '{$appName}' already deleted",io["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",io["invalid-log-argument"]="First argument to `onLog` must be null or a function.",io),ka=new Do("app","Firebase",E4),VN="@firebase/app",I4="0.6.14",T4="@firebase/analytics",S4="@firebase/auth",A4="@firebase/database",C4="@firebase/functions",N4="@firebase/installations",R4="@firebase/messaging",O4="@firebase/performance",x4="@firebase/remote-config",P4="@firebase/storage",k4="@firebase/firestore",D4="firebase-wrapper";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var In,ip="[DEFAULT]",L4=(In={},In[VN]="fire-core",In[T4]="fire-analytics",In[S4]="fire-auth",In[A4]="fire-rtdb",In[C4]="fire-fn",In[N4]="fire-iid",In[R4]="fire-fcm",In[O4]="fire-perf",In[x4]="fire-rc",In[P4]="fire-gcs",In[k4]="fire-fst",In["fire-js"]="fire-js",In[D4]="fire-js-all",In);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ou=new Pu("@firebase/app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bh=function(){function e(t,n,r){var i,s,a=this;this.firebase_=r,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=PN(t),this.container=new UN(n.name),this._addComponent(new Kn("app",function(){return a},"PUBLIC"));try{for(var c=Te(this.firebase_.INTERNAL.components.values()),l=c.next();!l.done;l=c.next()){var h=l.value;this._addComponent(h)}}catch(p){i={error:p}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(i)throw i.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var t=this;return new Promise(function(n){t.checkDestroyed_(),n()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(n){return n.delete()}))}).then(function(){t.isDeleted_=!0})},e.prototype._getService=function(t,n){return n===void 0&&(n=ip),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:n})},e.prototype._removeServiceInstance=function(t,n){n===void 0&&(n=ip),this.container.getProvider(t).clearInstance(n)},e.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(n){ou.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,n)}},e.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ka.create("app-deleted",{appName:this.name_})},e}();Bh.prototype.name&&Bh.prototype.options||Bh.prototype.delete||console.log("dc");var M4="8.2.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(e){var t={},n=new Map,r={__esModule:!0,initializeApp:a,app:s,registerVersion:h,setLogLevel:w4,onLog:p,apps:null,SDK_VERSION:M4,INTERNAL:{registerComponent:l,removeApp:i,components:n,useAsService:v}};r.default=r,Object.defineProperty(r,"apps",{get:c});function i(m){delete t[m]}function s(m){if(m=m||ip,!zn(t,m))throw ka.create("no-app",{appName:m});return t[m]}s.App=e;function a(m,y){if(y===void 0&&(y={}),typeof y!="object"||y===null){var b=y;y={name:b}}var E=y;E.name===void 0&&(E.name=ip);var I=E.name;if(typeof I!="string"||!I)throw ka.create("bad-app-name",{appName:String(I)});if(zn(t,I))throw ka.create("duplicate-app",{appName:I});var C=new e(m,E,r);return t[I]=C,C}function c(){return Object.keys(t).map(function(m){return t[m]})}function l(m){var y,b,E=m.name;if(n.has(E))return ou.debug("There were multiple attempts to register component "+E+"."),m.type==="PUBLIC"?r[E]:null;if(n.set(E,m),m.type==="PUBLIC"){var I=function(F){if(F===void 0&&(F=s()),typeof F[E]!="function")throw ka.create("invalid-app-argument",{appName:E});return F[E]()};m.serviceProps!==void 0&&pl(I,m.serviceProps),r[E]=I,e.prototype[E]=function(){for(var F=[],Y=0;Y<arguments.length;Y++)F[Y]=arguments[Y];var U=this._getService.bind(this,E);return U.apply(this,m.multipleInstances?F:[])}}try{for(var C=Te(Object.keys(t)),P=C.next();!P.done;P=C.next()){var D=P.value;t[D]._addComponent(m)}}catch(F){y={error:F}}finally{try{P&&!P.done&&(b=C.return)&&b.call(C)}finally{if(y)throw y.error}}return m.type==="PUBLIC"?r[E]:null}function h(m,y,b){var E,I=(E=L4[m])!==null&&E!==void 0?E:m;b&&(I+="-"+b);var C=I.match(/\s|\//),P=y.match(/\s|\//);if(C||P){var D=['Unable to register library "'+I+'" with version "'+y+'":'];C&&D.push('library name "'+I+'" contains illegal characters (whitespace or "/")'),C&&P&&D.push("and"),P&&D.push('version name "'+y+'" contains illegal characters (whitespace or "/")'),ou.warn(D.join(" "));return}l(new Kn(I+"-version",function(){return{library:I,version:y}},"VERSION"))}function p(m,y){if(m!==null&&typeof m!="function")throw ka.create("invalid-log-argument",{appName:name});b4(m,y)}function v(m,y){if(y==="serverAuth")return null;var b=y;return b}return r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(){var e=F4(Bh);e.INTERNAL=ee(ee({},e.INTERNAL),{createFirebaseNamespace:BN,extendNamespace:t,createSubscribe:a4,ErrorFactory:Do,deepExtend:pl});function t(n){pl(e,n)}return e}var J_=BN();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U4=function(){function e(t){this.container=t}return e.prototype.getPlatformInfoString=function(){var t=this.container.getProviders();return t.map(function(n){if(j4(n)){var r=n.getImmediate();return r.library+"/"+r.version}else return null}).filter(function(n){return n}).join(" ")},e}();function j4(e){var t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(e,t){e.INTERNAL.registerComponent(new Kn("platform-logger",function(n){return new U4(n)},"PRIVATE")),e.registerVersion(VN,I4,t),e.registerVersion("fire-js","")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(YV()&&self.firebase!==void 0){ou.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);var FS=self.firebase.SDK_VERSION;FS&&FS.indexOf("LITE")>=0&&ou.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}var B4=J_.initializeApp;J_.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return QV()&&ou.warn(`
      Warning: This is a browser-targeted Firebase bundle but it appears it is being
      run in a Node environment.  If running in a Node environment, make sure you
      are using the bundle specified by the "main" field in package.json.
      
      If you are using Webpack, you can specify "main" as the first item in
      "resolve.mainFields":
      https://webpack.js.org/configuration/resolve/#resolvemainfields
      
      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"
      as the first item in "mainFields", e.g. ['main', 'module'].
      https://github.com/rollup/@rollup/plugin-node-resolve
      `),B4.apply(void 0,e)};var at=J_;V4(at);(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,f){o!=Array.prototype&&o!=Object.prototype&&(o[u]=f.value)};function n(o){o=[typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global,o];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}return globalThis}var r=n(this);function i(o,u){if(u){var f=r;o=o.split(".");for(var d=0;d<o.length-1;d++){var g=o[d];g in f||(f[g]={}),f=f[g]}o=o[o.length-1],d=f[o],u=u(d),u!=d&&u!=null&&t(f,o,{configurable:!0,writable:!0,value:u})}}function s(o){var u=0;return function(){return u<o.length?{done:!1,value:o[u++]}:{done:!0}}}function a(o){var u=typeof Symbol<"u"&&Symbol.iterator&&o[Symbol.iterator];return u?u.call(o):{next:s(o)}}i("Promise",function(o){function u(w){this.b=0,this.c=void 0,this.a=[];var T=this.f();try{w(T.resolve,T.reject)}catch(M){T.reject(M)}}function f(){this.a=null}function d(w){return w instanceof u?w:new u(function(T){T(w)})}if(o)return o;f.prototype.b=function(w){if(this.a==null){this.a=[];var T=this;this.c(function(){T.g()})}this.a.push(w)};var g=r.setTimeout;f.prototype.c=function(w){g(w,0)},f.prototype.g=function(){for(;this.a&&this.a.length;){var w=this.a;this.a=[];for(var T=0;T<w.length;++T){var M=w[T];w[T]=null;try{M()}catch(q){this.f(q)}}}this.a=null},f.prototype.f=function(w){this.c(function(){throw w})},u.prototype.f=function(){function w(q){return function(bt){M||(M=!0,q.call(T,bt))}}var T=this,M=!1;return{resolve:w(this.m),reject:w(this.g)}},u.prototype.m=function(w){if(w===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(w instanceof u)this.s(w);else{t:switch(typeof w){case"object":var T=w!=null;break t;case"function":T=!0;break t;default:T=!1}T?this.v(w):this.h(w)}},u.prototype.v=function(w){var T=void 0;try{T=w.then}catch(M){this.g(M);return}typeof T=="function"?this.u(T,w):this.h(w)},u.prototype.g=function(w){this.i(2,w)},u.prototype.h=function(w){this.i(1,w)},u.prototype.i=function(w,T){if(this.b!=0)throw Error("Cannot settle("+w+", "+T+"): Promise already settled in state"+this.b);this.b=w,this.c=T,this.l()},u.prototype.l=function(){if(this.a!=null){for(var w=0;w<this.a.length;++w)_.b(this.a[w]);this.a=null}};var _=new f;return u.prototype.s=function(w){var T=this.f();w.Qa(T.resolve,T.reject)},u.prototype.u=function(w,T){var M=this.f();try{w.call(T,M.resolve,M.reject)}catch(q){M.reject(q)}},u.prototype.then=function(w,T){function M(Bt,ze){return typeof Bt=="function"?function(Ti){try{q(Bt(Ti))}catch(fm){bt(fm)}}:ze}var q,bt,zt=new u(function(Bt,ze){q=Bt,bt=ze});return this.Qa(M(w,q),M(T,bt)),zt},u.prototype.catch=function(w){return this.then(void 0,w)},u.prototype.Qa=function(w,T){function M(){switch(q.b){case 1:w(q.c);break;case 2:T(q.c);break;default:throw Error("Unexpected state: "+q.b)}}var q=this;this.a==null?_.b(M):this.a.push(M)},u.resolve=d,u.reject=function(w){return new u(function(T,M){M(w)})},u.race=function(w){return new u(function(T,M){for(var q=a(w),bt=q.next();!bt.done;bt=q.next())d(bt.value).Qa(T,M)})},u.all=function(w){var T=a(w),M=T.next();return M.done?d([]):new u(function(q,bt){function zt(Ti){return function(fm){Bt[Ti]=fm,ze--,ze==0&&q(Bt)}}var Bt=[],ze=0;do Bt.push(void 0),ze++,d(M.value).Qa(zt(Bt.length-1),bt),M=T.next();while(!M.done)})},u});var c=c||{},l=this||self,h=/^[\w+/_-]+[=]{0,2}$/,p=null;function v(o){return(o=o.querySelector&&o.querySelector("script[nonce]"))&&(o=o.nonce||o.getAttribute("nonce"))&&h.test(o)?o:""}function m(){}function y(o){var u=typeof o;return u!="object"?u:o?Array.isArray(o)?"array":u:"null"}function b(o){var u=y(o);return u=="array"||u=="object"&&typeof o.length=="number"}function E(o){return y(o)=="function"}function I(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function C(o){return Object.prototype.hasOwnProperty.call(o,P)&&o[P]||(o[P]=++D)}var P="closure_uid_"+(1e9*Math.random()>>>0),D=0;function F(o,u,f){return o.call.apply(o.bind,arguments)}function Y(o,u,f){if(!o)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var g=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(g,d),o.apply(u,g)}}return function(){return o.apply(u,arguments)}}function U(o,u,f){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?U=F:U=Y,U.apply(null,arguments)}function _t(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var d=f.slice();return d.push.apply(d,arguments),o.apply(this,d)}}var Wt=Date.now;function lt(o,u){function f(){}f.prototype=u.prototype,o.ab=u.prototype,o.prototype=new f,o.prototype.constructor=o}function Ze(o){return o}function O(o,u,f){this.code=cn+o,this.message=u||Vo[o]||"",this.a=f||null}lt(O,Error),O.prototype.w=function(){var o={code:this.code,message:this.message};return this.a&&(o.serverResponse=this.a),o},O.prototype.toJSON=function(){return this.w()};function $r(o){var u=o&&o.code;return u?new O(u.substring(cn.length),o.message,o.serverResponse):null}var cn="auth/",Vo={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},zr={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function se(o){for(var u in zr)if(zr[u].id===o)return o=zr[u],{firebaseEndpoint:o.Ta,secureTokenEndpoint:o.Za,identityPlatformEndpoint:o.Wa};return null}var Ft;Ft=se("__EID__")?"__EID__":void 0;function Ut(o){if(!o)return!1;try{return!!o.$goog_Thenable}catch{return!1}}function he(o){if(Error.captureStackTrace)Error.captureStackTrace(this,he);else{var u=Error().stack;u&&(this.stack=u)}o&&(this.message=String(o))}lt(he,Error),he.prototype.name="CustomError";function cr(o,u){o=o.split("%s");for(var f="",d=o.length-1,g=0;g<d;g++)f+=o[g]+(g<u.length?u[g]:"%s");he.call(this,f+o[d])}lt(cr,he),cr.prototype.name="AssertionError";function tn(o,u){throw new cr("Failure"+(o?": "+o:""),Array.prototype.slice.call(arguments,1))}function Ge(o,u){this.c=o,this.f=u,this.b=0,this.a=null}Ge.prototype.get=function(){if(0<this.b){this.b--;var o=this.a;this.a=o.next,o.next=null}else o=this.c();return o};function mi(o,u){o.f(u),100>o.b&&(o.b++,u.next=o.a,o.a=u)}function yi(){this.b=this.a=null}var Bo=new Ge(function(){return new j},function(o){o.reset()});yi.prototype.add=function(o,u){var f=Bo.get();f.set(o,u),this.b?this.b.next=f:this.a=f,this.b=f};function We(){var o=_0,u=null;return o.a&&(u=o.a,o.a=o.a.next,o.a||(o.b=null),u.next=null),u}function j(){this.next=this.b=this.a=null}j.prototype.set=function(o,u){this.a=o,this.b=u,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var rt=Array.prototype.indexOf?function(o,u){return Array.prototype.indexOf.call(o,u,void 0)}:function(o,u){if(typeof o=="string")return typeof u!="string"||u.length!=1?-1:o.indexOf(u,0);for(var f=0;f<o.length;f++)if(f in o&&o[f]===u)return f;return-1},H=Array.prototype.forEach?function(o,u,f){Array.prototype.forEach.call(o,u,f)}:function(o,u,f){for(var d=o.length,g=typeof o=="string"?o.split(""):o,_=0;_<d;_++)_ in g&&u.call(f,g[_],_,o)};function ft(o,u){for(var f=typeof o=="string"?o.split(""):o,d=o.length-1;0<=d;--d)d in f&&u.call(void 0,f[d],d,o)}var Vt=Array.prototype.filter?function(o,u){return Array.prototype.filter.call(o,u,void 0)}:function(o,u){for(var f=o.length,d=[],g=0,_=typeof o=="string"?o.split(""):o,w=0;w<f;w++)if(w in _){var T=_[w];u.call(void 0,T,w,o)&&(d[g++]=T)}return d},S=Array.prototype.map?function(o,u){return Array.prototype.map.call(o,u,void 0)}:function(o,u){for(var f=o.length,d=Array(f),g=typeof o=="string"?o.split(""):o,_=0;_<f;_++)_ in g&&(d[_]=u.call(void 0,g[_],_,o));return d},A=Array.prototype.some?function(o,u){return Array.prototype.some.call(o,u,void 0)}:function(o,u){for(var f=o.length,d=typeof o=="string"?o.split(""):o,g=0;g<f;g++)if(g in d&&u.call(void 0,d[g],g,o))return!0;return!1};function x(o){t:{for(var u=oL,f=o.length,d=typeof o=="string"?o.split(""):o,g=0;g<f;g++)if(g in d&&u.call(void 0,d[g],g,o)){u=g;break t}u=-1}return 0>u?null:typeof o=="string"?o.charAt(u):o[u]}function L(o,u){return 0<=rt(o,u)}function V(o,u){u=rt(o,u);var f;return(f=0<=u)&&Array.prototype.splice.call(o,u,1),f}function B(o,u){var f=0;ft(o,function(d,g){u.call(void 0,d,g,o)&&Array.prototype.splice.call(o,g,1).length==1&&f++})}function et(o){return Array.prototype.concat.apply([],arguments)}function z(o){var u=o.length;if(0<u){for(var f=Array(u),d=0;d<u;d++)f[d]=o[d];return f}return[]}var J=String.prototype.trim?function(o){return o.trim()}:function(o){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(o)[1]},W=/&/g,pt=/</g,st=/>/g,dt=/"/g,wt=/'/g,Nt=/\x00/g,Xt=/[\x00&<>"']/;function vt(o,u){return o.indexOf(u)!=-1}function ae(o,u){return o<u?-1:o>u?1:0}var $e;t:{var _i=l.navigator;if(_i){var Wu=_i.userAgent;if(Wu){$e=Wu;break t}}$e=""}function ne(o){return vt($e,o)}function $u(o,u){for(var f in o)u.call(void 0,o[f],f,o)}function we(o){for(var u in o)return!1;return!0}function De(o){var u={},f;for(f in o)u[f]=o[f];return u}var zu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ln(o,u){for(var f,d,g=1;g<arguments.length;g++){d=arguments[g];for(f in d)o[f]=d[f];for(var _=0;_<zu.length;_++)f=zu[_],Object.prototype.hasOwnProperty.call(d,f)&&(o[f]=d[f])}}function Zb(o,u){t:{try{var f=o&&o.ownerDocument,d=f&&(f.defaultView||f.parentWindow);if(d=d||l,d.Element&&d.Location){var g=d;break t}}catch{}g=null}if(g&&typeof g[u]<"u"&&(!o||!(o instanceof g[u])&&(o instanceof g.Location||o instanceof g.Element))){if(I(o))try{var _=o.constructor.displayName||o.constructor.name||Object.prototype.toString.call(o)}catch{_="<object could not be stringified>"}else _=o===void 0?"undefined":o===null?"null":typeof o;tn("Argument is not a %s (or a non-Element, non-Location mock); got: %s",u,_)}}function Kr(o,u){this.a=o===pf&&u||"",this.b=t0}Kr.prototype.sa=!0,Kr.prototype.ra=function(){return this.a},Kr.prototype.toString=function(){return"Const{"+this.a+"}"};function Vd(o){return o instanceof Kr&&o.constructor===Kr&&o.b===t0?o.a:(tn("expected object of type Const, got '"+o+"'"),"type_error:Const")}var t0={},pf={},df;function e0(){if(df===void 0){var o=null,u=l.trustedTypes;if(u&&u.createPolicy){try{o=u.createPolicy("goog#html",{createHTML:Ze,createScript:Ze,createScriptURL:Ze})}catch(f){l.console&&l.console.error(f.message)}df=o}else df=o}return df}function Xs(o,u){this.a=u===r0?o:""}Xs.prototype.sa=!0,Xs.prototype.ra=function(){return this.a.toString()},Xs.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};function n0(o){return o instanceof Xs&&o.constructor===Xs?o.a:(tn("expected object of type TrustedResourceUrl, got '"+o+"' of type "+y(o)),"type_error:TrustedResourceUrl")}function Bd(o,u){var f=Vd(o);if(!Lk.test(f))throw Error("Invalid TrustedResourceUrl format: "+f);return o=f.replace(Dk,function(d,g){if(!Object.prototype.hasOwnProperty.call(u,g))throw Error('Found marker, "'+g+'", in format string, "'+f+'", but no valid label mapping found in args: '+JSON.stringify(u));return d=u[g],d instanceof Kr?Vd(d):encodeURIComponent(String(d))}),Mk(o)}var Dk=/%{(\w+)}/g,Lk=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,r0={};function Mk(o){var u=e0();return o=u?u.createScriptURL(o):o,new Xs(o,r0)}function Mn(o,u){this.a=u===Ku?o:""}Mn.prototype.sa=!0,Mn.prototype.ra=function(){return this.a.toString()},Mn.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};function vf(o){return o instanceof Mn&&o.constructor===Mn?o.a:(tn("expected object of type SafeUrl, got '"+o+"' of type "+y(o)),"type_error:SafeUrl")}var Fk=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Uk=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,i0=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function o0(o){if(o instanceof Mn)return o;if(o=typeof o=="object"&&o.sa?o.ra():String(o),i0.test(o))o=new Mn(o,Ku);else{o=String(o),o=o.replace(/(%0A|%0D)/g,"");var u=o.match(Uk);o=u&&Fk.test(u[1])?new Mn(o,Ku):null}return o}function s0(o){return o instanceof Mn?o:(o=typeof o=="object"&&o.sa?o.ra():String(o),i0.test(o)||(o="about:invalid#zClosurez"),new Mn(o,Ku))}var Ku={},a0=new Mn("about:invalid#zClosurez",Ku);function Js(o,u,f){this.a=f===u0?o:""}Js.prototype.sa=!0,Js.prototype.ra=function(){return this.a.toString()},Js.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};function jk(o){return o instanceof Js&&o.constructor===Js?o.a:(tn("expected object of type SafeHtml, got '"+o+"' of type "+y(o)),"type_error:SafeHtml")}var u0={};function Vk(o,u){Zb(o,"HTMLScriptElement"),o.src=n0(u),(u=o.ownerDocument&&o.ownerDocument.defaultView)&&u!=l?u=v(u.document):(p===null&&(p=v(l.document)),u=p),u&&o.setAttribute("nonce",u)}function c0(o,u,f,d){return o=o instanceof Mn?o:s0(o),u=u||l,f=f instanceof Kr?Vd(f):f||"",u.open(vf(o),f,d,void 0)}function l0(o,u){for(var f=o.split("%s"),d="",g=Array.prototype.slice.call(arguments,1);g.length&&1<f.length;)d+=f.shift()+g.shift();return d+f.join("%s")}function qd(o){return Xt.test(o)&&(o.indexOf("&")!=-1&&(o=o.replace(W,"&amp;")),o.indexOf("<")!=-1&&(o=o.replace(pt,"&lt;")),o.indexOf(">")!=-1&&(o=o.replace(st,"&gt;")),o.indexOf('"')!=-1&&(o=o.replace(dt,"&quot;")),o.indexOf("'")!=-1&&(o=o.replace(wt,"&#39;")),o.indexOf("\0")!=-1&&(o=o.replace(Nt,"&#0;"))),o}function Hd(o){return Hd[" "](o),o}Hd[" "]=m;function Bk(o,u){var f=Wk;return Object.prototype.hasOwnProperty.call(f,o)?f[o]:f[o]=u(o)}var qk=ne("Opera"),br=ne("Trident")||ne("MSIE"),f0=ne("Edge"),Hk=f0||br,h0=ne("Gecko")&&!(vt($e.toLowerCase(),"webkit")&&!ne("Edge"))&&!(ne("Trident")||ne("MSIE"))&&!ne("Edge"),Gk=vt($e.toLowerCase(),"webkit")&&!ne("Edge");function p0(){var o=l.document;return o?o.documentMode:void 0}var gf;t:{var Gd="",Wd=function(){var o=$e;if(h0)return/rv:([^\);]+)(\)|;)/.exec(o);if(f0)return/Edge\/([\d\.]+)/.exec(o);if(br)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o);if(Gk)return/WebKit\/(\S+)/.exec(o);if(qk)return/(?:Version)[ \/]?(\S+)/.exec(o)}();if(Wd&&(Gd=Wd?Wd[1]:""),br){var $d=p0();if($d!=null&&$d>parseFloat(Gd)){gf=String($d);break t}}gf=Gd}var Wk={};function d0(o){return Bk(o,function(){for(var u=0,f=J(String(gf)).split("."),d=J(String(o)).split("."),g=Math.max(f.length,d.length),_=0;u==0&&_<g;_++){var w=f[_]||"",T=d[_]||"";do{if(w=/(\d*)(\D*)(.*)/.exec(w)||["","","",""],T=/(\d*)(\D*)(.*)/.exec(T)||["","","",""],w[0].length==0&&T[0].length==0)break;u=ae(w[1].length==0?0:parseInt(w[1],10),T[1].length==0?0:parseInt(T[1],10))||ae(w[2].length==0,T[2].length==0)||ae(w[2],T[2]),w=w[3],T=T[3]}while(u==0)}return 0<=u})}var zd;if(l.document&&br){var v0=p0();zd=v0||parseInt(gf,10)||void 0}else zd=void 0;var Ki=zd;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch{}var $k=!br||9<=Number(Ki);function Qu(o){var u=document;return typeof o=="string"?u.getElementById(o):o}function g0(o,u){$u(u,function(f,d){f&&typeof f=="object"&&f.sa&&(f=f.ra()),d=="style"?o.style.cssText=f:d=="class"?o.className=f:d=="for"?o.htmlFor=f:m0.hasOwnProperty(d)?o.setAttribute(m0[d],f):d.lastIndexOf("aria-",0)==0||d.lastIndexOf("data-",0)==0?o.setAttribute(d,f):o[d]=f})}var m0={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function zk(o,u,f){var d=arguments,g=document,_=String(d[0]),w=d[1];if(!$k&&w&&(w.name||w.type)){if(_=["<",_],w.name&&_.push(' name="',qd(w.name),'"'),w.type){_.push(' type="',qd(w.type),'"');var T={};Ln(T,w),delete T.type,w=T}_.push(">"),_=_.join("")}return _=mf(g,_),w&&(typeof w=="string"?_.className=w:Array.isArray(w)?_.className=w.join(" "):g0(_,w)),2<d.length&&Kk(g,_,d),_}function Kk(o,u,f){function d(T){T&&u.appendChild(typeof T=="string"?o.createTextNode(T):T)}for(var g=2;g<f.length;g++){var _=f[g];if(!b(_)||I(_)&&0<_.nodeType)d(_);else{t:{if(_&&typeof _.length=="number"){if(I(_)){var w=typeof _.item=="function"||typeof _.item=="string";break t}if(E(_)){w=typeof _.item=="function";break t}}w=!1}H(w?z(_):_,d)}}}function mf(o,u){return u=String(u),o.contentType==="application/xhtml+xml"&&(u=u.toLowerCase()),o.createElement(u)}function y0(o){l.setTimeout(function(){throw o},0)}var Kd;function Qk(){var o=l.MessageChannel;if(typeof o>"u"&&typeof window<"u"&&window.postMessage&&window.addEventListener&&!ne("Presto")&&(o=function(){var g=mf(document,"IFRAME");g.style.display="none",document.documentElement.appendChild(g);var _=g.contentWindow;g=_.document,g.open(),g.close();var w="callImmediate"+Math.random(),T=_.location.protocol=="file:"?"*":_.location.protocol+"//"+_.location.host;g=U(function(M){(T=="*"||M.origin==T)&&M.data==w&&this.port1.onmessage()},this),_.addEventListener("message",g,!1),this.port1={},this.port2={postMessage:function(){_.postMessage(w,T)}}}),typeof o<"u"&&!ne("Trident")&&!ne("MSIE")){var u=new o,f={},d=f;return u.port1.onmessage=function(){if(f.next!==void 0){f=f.next;var g=f.Gb;f.Gb=null,g()}},function(g){d.next={Gb:g},d=d.next,u.port2.postMessage(0)}}return function(g){l.setTimeout(g,0)}}function yf(o,u){_f||Yk(),Qd||(_f(),Qd=!0),_0.add(o,u)}var _f;function Yk(){if(l.Promise&&l.Promise.resolve){var o=l.Promise.resolve(void 0);_f=function(){o.then(w0)}}else _f=function(){var u=w0;!E(l.setImmediate)||l.Window&&l.Window.prototype&&!ne("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(Kd||(Kd=Qk()),Kd(u)):l.setImmediate(u)}}var Qd=!1,_0=new yi;function w0(){for(var o;o=We();){try{o.a.call(o.b)}catch(u){y0(u)}mi(Bo,o)}Qd=!1}function xt(o,u){if(this.a=qo,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,o!=m)try{var f=this;o.call(u,function(d){Ho(f,Yu,d)},function(d){if(!(d instanceof Zs))try{throw d instanceof Error?d:Error("Promise rejected.")}catch{}Ho(f,wi,d)})}catch(d){Ho(this,wi,d)}}var qo=0,Yu=2,wi=3;function b0(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}b0.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var E0=new Ge(function(){return new b0},function(o){o.reset()});function Yd(o,u,f){var d=E0.get();return d.g=o,d.b=u,d.f=f,d}function gt(o){if(o instanceof xt)return o;var u=new xt(m);return Ho(u,Yu,o),u}function ue(o){return new xt(function(u,f){f(o)})}function I0(o,u,f){C0(o,u,f,null)||yf(_t(u,o))}function Xk(o){return new xt(function(u,f){var d=o.length,g=[];if(d)for(var _=function(q,bt){d--,g[q]=bt,d==0&&u(g)},w=function(q){f(q)},T=0,M;T<o.length;T++)M=o[T],I0(M,_t(_,T),w);else u(g)})}function T0(o){return new xt(function(u){var f=o.length,d=[];if(f)for(var g=function(T,M,q){f--,d[T]=M?{Pb:!0,value:q}:{Pb:!1,reason:q},f==0&&u(d)},_=0,w;_<o.length;_++)w=o[_],I0(w,_t(g,_,!0),_t(g,_,!1));else u(d)})}xt.prototype.then=function(o,u,f){return A0(this,E(o)?o:null,E(u)?u:null,f)},xt.prototype.$goog_Thenable=!0,e=xt.prototype,e.oa=function(o,u){return o=Yd(o,o,u),o.c=!0,Xd(this,o),this},e.o=function(o,u){return A0(this,null,o,u)},e.cancel=function(o){if(this.a==qo){var u=new Zs(o);yf(function(){S0(this,u)},this)}};function S0(o,u){if(o.a==qo)if(o.c){var f=o.c;if(f.b){for(var d=0,g=null,_=null,w=f.b;w&&(w.c||(d++,w.a==o&&(g=w),!(g&&1<d)));w=w.next)g||(_=w);g&&(f.a==qo&&d==1?S0(f,u):(_?(d=_,d.next==f.f&&(f.f=d),d.next=d.next.next):R0(f),O0(f,g,wi,u)))}o.c=null}else Ho(o,wi,u)}function Xd(o,u){o.b||o.a!=Yu&&o.a!=wi||N0(o),o.f?o.f.next=u:o.b=u,o.f=u}function A0(o,u,f,d){var g=Yd(null,null,null);return g.a=new xt(function(_,w){g.g=u?function(T){try{var M=u.call(d,T);_(M)}catch(q){w(q)}}:_,g.b=f?function(T){try{var M=f.call(d,T);M===void 0&&T instanceof Zs?w(T):_(M)}catch(q){w(q)}}:w}),g.a.c=o,Xd(o,g),g.a}e.$c=function(o){this.a=qo,Ho(this,Yu,o)},e.ad=function(o){this.a=qo,Ho(this,wi,o)};function Ho(o,u,f){o.a==qo&&(o===f&&(u=wi,f=new TypeError("Promise cannot resolve to itself")),o.a=1,C0(f,o.$c,o.ad,o)||(o.i=f,o.a=u,o.c=null,N0(o),u!=wi||f instanceof Zs||Zk(o,f)))}function C0(o,u,f,d){if(o instanceof xt)return Xd(o,Yd(u||m,f||null,d)),!0;if(Ut(o))return o.then(u,f,d),!0;if(I(o))try{var g=o.then;if(E(g))return Jk(o,g,u,f,d),!0}catch(_){return f.call(d,_),!0}return!1}function Jk(o,u,f,d,g){function _(M){T||(T=!0,d.call(g,M))}function w(M){T||(T=!0,f.call(g,M))}var T=!1;try{u.call(o,w,_)}catch(M){_(M)}}function N0(o){o.h||(o.h=!0,yf(o.gc,o))}function R0(o){var u=null;return o.b&&(u=o.b,o.b=u.next,u.next=null),o.b||(o.f=null),u}e.gc=function(){for(var o;o=R0(this);)O0(this,o,this.a,this.i);this.h=!1};function O0(o,u,f,d){if(f==wi&&u.b&&!u.c)for(;o&&o.g;o=o.c)o.g=!1;if(u.a)u.a.c=null,x0(u,f,d);else try{u.c?u.g.call(u.f):x0(u,f,d)}catch(g){P0.call(null,g)}mi(E0,u)}function x0(o,u,f){u==Yu?o.g.call(o.f,f):o.b&&o.b.call(o.f,f)}function Zk(o,u){o.g=!0,yf(function(){o.g&&P0.call(null,u)})}var P0=y0;function Zs(o){he.call(this,o)}lt(Zs,he),Zs.prototype.name="cancel";function wf(){this.xa=this.xa,this.pa=this.pa}var tD=0;wf.prototype.xa=!1;function k0(o){!o.xa&&(o.xa=!0,o.Da(),tD!=0)&&C(o)}wf.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var eD=Object.freeze||function(o){return o},D0=!br||9<=Number(Ki),nD=br&&!d0("9"),rD=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{l.addEventListener("test",m,u),l.removeEventListener("test",m,u)}catch{}return o}();function Fn(o,u){this.type=o,this.b=this.target=u,this.defaultPrevented=!1}Fn.prototype.preventDefault=function(){this.defaultPrevented=!0};function Go(o,u){if(Fn.call(this,o?o.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,o){var f=this.type=o.type,d=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.b=u,u=o.relatedTarget){if(h0){t:{try{Hd(u.nodeName);var g=!0;break t}catch{}g=!1}g||(u=null)}}else f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement);this.relatedTarget=u,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:iD[o.pointerType]||"",this.a=o,o.defaultPrevented&&this.preventDefault()}}lt(Go,Fn);var iD=eD({2:"touch",3:"pen",4:"mouse"});Go.prototype.preventDefault=function(){Go.ab.preventDefault.call(this);var o=this.a;if(o.preventDefault)o.preventDefault();else if(o.returnValue=!1,nD)try{(o.ctrlKey||112<=o.keyCode&&123>=o.keyCode)&&(o.keyCode=-1)}catch{}},Go.prototype.g=function(){return this.a};var Xu="closure_listenable_"+(1e6*Math.random()|0),oD=0;function sD(o,u,f,d,g){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!d,this.Va=g,this.key=++oD,this.va=this.Pa=!1}function bf(o){o.va=!0,o.listener=null,o.proxy=null,o.src=null,o.Va=null}function Ef(o){this.src=o,this.a={},this.b=0}Ef.prototype.add=function(o,u,f,d,g){var _=o.toString();o=this.a[_],o||(o=this.a[_]=[],this.b++);var w=Zd(o,u,d,g);return-1<w?(u=o[w],f||(u.Pa=!1)):(u=new sD(u,this.src,_,!!d,g),u.Pa=f,o.push(u)),u};function Jd(o,u){var f=u.type;f in o.a&&V(o.a[f],u)&&(bf(u),o.a[f].length==0&&(delete o.a[f],o.b--))}function Zd(o,u,f,d){for(var g=0;g<o.length;++g){var _=o[g];if(!_.va&&_.listener==u&&_.capture==!!f&&_.Va==d)return g}return-1}var tv="closure_lm_"+(1e6*Math.random()|0),ev={};function lr(o,u,f,d,g){if(d&&d.once)nv(o,u,f,d,g);else if(Array.isArray(u))for(var _=0;_<u.length;_++)lr(o,u[_],f,d,g);else f=iv(f),o&&o[Xu]?V0(o,u,f,I(d)?!!d.capture:!!d,g):L0(o,u,f,!1,d,g)}function L0(o,u,f,d,g,_){if(!u)throw Error("Invalid event type");var w=I(g)?!!g.capture:!!g,T=If(o);if(T||(o[tv]=T=new Ef(o)),f=T.add(u,f,d,w,_),!f.proxy)if(d=aD(),f.proxy=d,d.src=o,d.listener=f,o.addEventListener)rD||(g=w),g===void 0&&(g=!1),o.addEventListener(u.toString(),d,g);else if(o.attachEvent)o.attachEvent(F0(u.toString()),d);else if(o.addListener&&o.removeListener)o.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.")}function aD(){var o=uD,u=D0?function(f){return o.call(u.src,u.listener,f)}:function(f){if(f=o.call(u.src,u.listener,f),!f)return f};return u}function nv(o,u,f,d,g){if(Array.isArray(u))for(var _=0;_<u.length;_++)nv(o,u[_],f,d,g);else f=iv(f),o&&o[Xu]?ov(o,u,f,I(d)?!!d.capture:!!d,g):L0(o,u,f,!0,d,g)}function Xn(o,u,f,d,g){if(Array.isArray(u))for(var _=0;_<u.length;_++)Xn(o,u[_],f,d,g);else d=I(d)?!!d.capture:!!d,f=iv(f),o&&o[Xu]?(o=o.v,u=String(u).toString(),u in o.a&&(_=o.a[u],f=Zd(_,f,d,g),-1<f&&(bf(_[f]),Array.prototype.splice.call(_,f,1),_.length==0&&(delete o.a[u],o.b--)))):o&&(o=If(o))&&(u=o.a[u.toString()],o=-1,u&&(o=Zd(u,f,d,g)),(f=-1<o?u[o]:null)&&M0(f))}function M0(o){if(typeof o!="number"&&o&&!o.va){var u=o.src;if(u&&u[Xu])Jd(u.v,o);else{var f=o.type,d=o.proxy;u.removeEventListener?u.removeEventListener(f,d,o.capture):u.detachEvent?u.detachEvent(F0(f),d):u.addListener&&u.removeListener&&u.removeListener(d),(f=If(u))?(Jd(f,o),f.b==0&&(f.src=null,u[tv]=null)):bf(o)}}}function F0(o){return o in ev?ev[o]:ev[o]="on"+o}function U0(o,u,f,d){var g=!0;if((o=If(o))&&(u=o.a[u.toString()]))for(u=u.concat(),o=0;o<u.length;o++){var _=u[o];_&&_.capture==f&&!_.va&&(_=j0(_,d),g=g&&_!==!1)}return g}function j0(o,u){var f=o.listener,d=o.Va||o.src;return o.Pa&&M0(o),f.call(d,u)}function uD(o,u){if(o.va)return!0;if(!D0){if(!u)t:{u=["window","event"];for(var f=l,d=0;d<u.length;d++)if(f=f[u[d]],f==null){u=null;break t}u=f}if(d=u,u=new Go(d,this),f=!0,!(0>d.keyCode||d.returnValue!=null)){t:{var g=!1;if(d.keyCode==0)try{d.keyCode=-1;break t}catch{g=!0}(g||d.returnValue==null)&&(d.returnValue=!0)}for(d=[],g=u.b;g;g=g.parentNode)d.push(g);for(o=o.type,g=d.length-1;0<=g;g--){u.b=d[g];var _=U0(d[g],o,!0,u);f=f&&_}for(g=0;g<d.length;g++)u.b=d[g],_=U0(d[g],o,!1,u),f=f&&_}return f}return j0(o,new Go(u,this))}function If(o){return o=o[tv],o instanceof Ef?o:null}var rv="__closure_events_fn_"+(1e9*Math.random()>>>0);function iv(o){return E(o)?o:(o[rv]||(o[rv]=function(u){return o.handleEvent(u)}),o[rv])}function bn(){wf.call(this),this.v=new Ef(this),this.ac=this,this.gb=null}lt(bn,wf),bn.prototype[Xu]=!0,bn.prototype.addEventListener=function(o,u,f,d){lr(this,o,u,f,d)},bn.prototype.removeEventListener=function(o,u,f,d){Xn(this,o,u,f,d)},bn.prototype.dispatchEvent=function(o){var u,f=this.gb;if(f)for(u=[];f;f=f.gb)u.push(f);f=this.ac;var d=o.type||o;if(typeof o=="string")o=new Fn(o,f);else if(o instanceof Fn)o.target=o.target||f;else{var g=o;o=new Fn(d,f),Ln(o,g)}if(g=!0,u)for(var _=u.length-1;0<=_;_--){var w=o.b=u[_];g=Tf(w,d,!0,o)&&g}if(w=o.b=f,g=Tf(w,d,!0,o)&&g,g=Tf(w,d,!1,o)&&g,u)for(_=0;_<u.length;_++)w=o.b=u[_],g=Tf(w,d,!1,o)&&g;return g},bn.prototype.Da=function(){if(bn.ab.Da.call(this),this.v){var o=this.v,u;for(u in o.a){for(var f=o.a[u],d=0;d<f.length;d++)bf(f[d]);delete o.a[u],o.b--}}this.gb=null};function V0(o,u,f,d,g){o.v.add(String(u),f,!1,d,g)}function ov(o,u,f,d,g){o.v.add(String(u),f,!0,d,g)}function Tf(o,u,f,d){if(u=o.v.a[String(u)],!u)return!0;u=u.concat();for(var g=!0,_=0;_<u.length;++_){var w=u[_];if(w&&!w.va&&w.capture==f){var T=w.listener,M=w.Va||w.src;w.Pa&&Jd(o.v,w),g=T.call(M,d)!==!1&&g}}return g&&!d.defaultPrevented}function sv(o,u,f){if(E(o))f&&(o=U(o,f));else if(o&&typeof o.handleEvent=="function")o=U(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function ta(o){var u=null;return new xt(function(f,d){u=sv(function(){f(void 0)},o),u==-1&&d(Error("Failed to schedule timer."))}).o(function(f){throw l.clearTimeout(u),f})}function B0(o){if(o.W&&typeof o.W=="function")return o.W();if(typeof o=="string")return o.split("");if(b(o)){for(var u=[],f=o.length,d=0;d<f;d++)u.push(o[d]);return u}u=[],f=0;for(d in o)u[f++]=o[d];return u}function q0(o){if(o.Y&&typeof o.Y=="function")return o.Y();if(!o.W||typeof o.W!="function"){if(b(o)||typeof o=="string"){var u=[];o=o.length;for(var f=0;f<o;f++)u.push(f);return u}u=[],f=0;for(var d in o)u[f++]=d;return u}}function cD(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(b(o)||typeof o=="string")H(o,u,void 0);else for(var f=q0(o),d=B0(o),g=d.length,_=0;_<g;_++)u.call(void 0,d[_],f&&f[_],o)}function ea(o,u){this.b={},this.a=[],this.c=0;var f=arguments.length;if(1<f){if(f%2)throw Error("Uneven number of arguments");for(var d=0;d<f;d+=2)this.set(arguments[d],arguments[d+1])}else if(o)if(o instanceof ea)for(f=o.Y(),d=0;d<f.length;d++)this.set(f[d],o.get(f[d]));else for(d in o)this.set(d,o[d])}e=ea.prototype,e.W=function(){av(this);for(var o=[],u=0;u<this.a.length;u++)o.push(this.b[this.a[u]]);return o},e.Y=function(){return av(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0};function av(o){if(o.c!=o.a.length){for(var u=0,f=0;u<o.a.length;){var d=o.a[u];Wo(o.b,d)&&(o.a[f++]=d),u++}o.a.length=f}if(o.c!=o.a.length){var g={};for(f=u=0;u<o.a.length;)d=o.a[u],Wo(g,d)||(o.a[f++]=d,g[d]=1),u++;o.a.length=f}}e.get=function(o,u){return Wo(this.b,o)?this.b[o]:u},e.set=function(o,u){Wo(this.b,o)||(this.c++,this.a.push(o)),this.b[o]=u},e.forEach=function(o,u){for(var f=this.Y(),d=0;d<f.length;d++){var g=f[d],_=this.get(g);o.call(u,_,g,this)}};function Wo(o,u){return Object.prototype.hasOwnProperty.call(o,u)}var H0=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function lD(o,u){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var d=o[f].indexOf("="),g=null;if(0<=d){var _=o[f].substring(0,d);g=o[f].substring(d+1)}else _=o[f];u(_,g?decodeURIComponent(g.replace(/\+/g," ")):"")}}}function Qi(o,u){this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1;var f;o instanceof Qi?(this.i=u!==void 0?u:o.i,Ju(this,o.c),this.l=o.l,this.a=o.a,Zu(this,o.g),this.f=o.f,uv(this,z0(o.b)),this.h=o.h):o&&(f=String(o).match(H0))?(this.i=!!u,Ju(this,f[1]||"",!0),this.l=tc(f[2]||""),this.a=tc(f[3]||"",!0),Zu(this,f[4]),this.f=tc(f[5]||"",!0),uv(this,f[6]||"",!0),this.h=tc(f[7]||"")):(this.i=!!u,this.b=new $o(null,this.i))}Qi.prototype.toString=function(){var o=[],u=this.c;u&&o.push(ec(u,G0,!0),":");var f=this.a;return(f||u=="file")&&(o.push("//"),(u=this.l)&&o.push(ec(u,G0,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.g,f!=null&&o.push(":",String(f))),(f=this.f)&&(this.a&&f.charAt(0)!="/"&&o.push("/"),o.push(ec(f,f.charAt(0)=="/"?pD:hD,!0))),(f=this.b.toString())&&o.push("?",f),(f=this.h)&&o.push("#",ec(f,vD)),o.join("")},Qi.prototype.resolve=function(o){var u=new Qi(this),f=!!o.c;f?Ju(u,o.c):f=!!o.l,f?u.l=o.l:f=!!o.a,f?u.a=o.a:f=o.g!=null;var d=o.f;if(f)Zu(u,o.g);else if(f=!!o.f){if(d.charAt(0)!="/")if(this.a&&!this.f)d="/"+d;else{var g=u.f.lastIndexOf("/");g!=-1&&(d=u.f.substr(0,g+1)+d)}if(g=d,g==".."||g==".")d="";else if(vt(g,"./")||vt(g,"/.")){d=g.lastIndexOf("/",0)==0,g=g.split("/");for(var _=[],w=0;w<g.length;){var T=g[w++];T=="."?d&&w==g.length&&_.push(""):T==".."?((1<_.length||_.length==1&&_[0]!="")&&_.pop(),d&&w==g.length&&_.push("")):(_.push(T),d=!0)}d=_.join("/")}else d=g}return f?u.f=d:f=o.b.toString()!=="",f?uv(u,z0(o.b)):f=!!o.h,f&&(u.h=o.h),u};function Ju(o,u,f){o.c=f?tc(u,!0):u,o.c&&(o.c=o.c.replace(/:$/,""))}function Zu(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.g=u}else o.g=null}function uv(o,u,f){u instanceof $o?(o.b=u,gD(o.b,o.i)):(f||(u=ec(u,dD)),o.b=new $o(u,o.i))}function be(o,u,f){o.b.set(u,f)}function fr(o,u){return o.b.get(u)}function Un(o){return o instanceof Qi?new Qi(o):new Qi(o,void 0)}function Sf(o,u,f,d){var g=new Qi(null,void 0);return o&&Ju(g,o),u&&(g.a=u),f&&Zu(g,f),d&&(g.f=d),g}function tc(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function ec(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,fD),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function fD(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var G0=/[#\/\?@]/g,hD=/[#\?:]/g,pD=/[#\?]/g,dD=/[#\?@]/g,vD=/#/g;function $o(o,u){this.b=this.a=null,this.c=o||null,this.f=!!u}function Yi(o){o.a||(o.a=new ea,o.b=0,o.c&&lD(o.c,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}function W0(o){var u=q0(o);if(typeof u>"u")throw Error("Keys are undefined");var f=new $o(null,void 0);o=B0(o);for(var d=0;d<u.length;d++){var g=u[d],_=o[d];Array.isArray(_)?$0(f,g,_):f.add(g,_)}return f}e=$o.prototype,e.add=function(o,u){Yi(this),this.c=null,o=na(this,o);var f=this.a.get(o);return f||this.a.set(o,f=[]),f.push(u),this.b+=1,this};function Qr(o,u){Yi(o),u=na(o,u),Wo(o.a.b,u)&&(o.c=null,o.b-=o.a.get(u).length,o=o.a,Wo(o.b,u)&&(delete o.b[u],o.c--,o.a.length>2*o.c&&av(o)))}e.clear=function(){this.a=this.c=null,this.b=0};function cv(o,u){return Yi(o),u=na(o,u),Wo(o.a.b,u)}e.forEach=function(o,u){Yi(this),this.a.forEach(function(f,d){H(f,function(g){o.call(u,g,d,this)},this)},this)},e.Y=function(){Yi(this);for(var o=this.a.W(),u=this.a.Y(),f=[],d=0;d<u.length;d++)for(var g=o[d],_=0;_<g.length;_++)f.push(u[d]);return f},e.W=function(o){Yi(this);var u=[];if(typeof o=="string")cv(this,o)&&(u=et(u,this.a.get(na(this,o))));else{o=this.a.W();for(var f=0;f<o.length;f++)u=et(u,o[f])}return u},e.set=function(o,u){return Yi(this),this.c=null,o=na(this,o),cv(this,o)&&(this.b-=this.a.get(o).length),this.a.set(o,[u]),this.b+=1,this},e.get=function(o,u){return o?(o=this.W(o),0<o.length?String(o[0]):u):u};function $0(o,u,f){Qr(o,u),0<f.length&&(o.c=null,o.a.set(na(o,u),z(f)),o.b+=f.length)}e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var o=[],u=this.a.Y(),f=0;f<u.length;f++){var d=u[f],g=encodeURIComponent(String(d));d=this.W(d);for(var _=0;_<d.length;_++){var w=g;d[_]!==""&&(w+="="+encodeURIComponent(String(d[_]))),o.push(w)}}return this.c=o.join("&")};function z0(o){var u=new $o;return u.c=o.c,o.a&&(u.a=new ea(o.a),u.b=o.b),u}function na(o,u){return u=String(u),o.f&&(u=u.toLowerCase()),u}function gD(o,u){u&&!o.f&&(Yi(o),o.c=null,o.a.forEach(function(f,d){var g=d.toLowerCase();d!=g&&(Qr(this,d),$0(this,g,f))},o)),o.f=u}function K0(o){var u=[];return lv(new mD,o,u),u.join("")}function mD(){}function lv(o,u,f){if(u==null)f.push("null");else{if(typeof u=="object"){if(Array.isArray(u)){var d=u;u=d.length,f.push("[");for(var g="",_=0;_<u;_++)f.push(g),lv(o,d[_],f),g=",";f.push("]");return}if(u instanceof String||u instanceof Number||u instanceof Boolean)u=u.valueOf();else{f.push("{"),g="";for(d in u)Object.prototype.hasOwnProperty.call(u,d)&&(_=u[d],typeof _!="function"&&(f.push(g),Y0(d,f),f.push(":"),lv(o,_,f),g=","));f.push("}");return}}switch(typeof u){case"string":Y0(u,f);break;case"number":f.push(isFinite(u)&&!isNaN(u)?String(u):"null");break;case"boolean":f.push(String(u));break;case"function":f.push("null");break;default:throw Error("Unknown type: "+typeof u)}}}var Q0={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\u000b"},yD=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Y0(o,u){u.push('"',o.replace(yD,function(f){var d=Q0[f];return d||(d="\\u"+(f.charCodeAt(0)|65536).toString(16).substr(1),Q0[f]=d),d}),'"')}function fv(){var o=en();return br&&!!Ki&&Ki==11||/Edge\/\d+/.test(o)}function nc(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function X0(o,u){u=u||l.window;var f="about:blank";o&&(f=vf(o0(o)||a0)),u.location.href=f}function J0(o,u){var f=[],d;for(d in o)d in u?typeof o[d]!=typeof u[d]?f.push(d):typeof o[d]=="object"&&o[d]!=null&&u[d]!=null?0<J0(o[d],u[d]).length&&f.push(d):o[d]!==u[d]&&f.push(d):f.push(d);for(d in u)d in o||f.push(d);return f}function _D(){var o=en();return o=ra(o)!=nE?null:(o=o.match(/\sChrome\/(\d+)/i))&&o.length==2?parseInt(o[1],10):null,o&&30>o?!1:!br||!Ki||9<Ki}function Z0(o){return o=(o||en()).toLowerCase(),!!(o.match(/android/)||o.match(/webos/)||o.match(/iphone|ipad|ipod/)||o.match(/blackberry/)||o.match(/windows phone/)||o.match(/iemobile/))}function zo(o){o=o||l.window;try{o.close()}catch{}}function tE(o,u,f){var d=Math.floor(1e9*Math.random()).toString();u=u||500,f=f||600;var g=(window.screen.availHeight-f)/2,_=(window.screen.availWidth-u)/2;u={width:u,height:f,top:0<g?g:0,left:0<_?_:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},f=en().toLowerCase(),d&&(u.target=d,vt(f,"crios/")&&(u.target="_blank")),ra(en())==dv&&(o=o||"http://localhost",u.scrollbars=!0),f=o||"",(o=u)||(o={}),d=window,u=f instanceof Mn?f:o0(typeof f.href<"u"?f.href:String(f))||a0,f=o.target||f.target,g=[];for(w in o)switch(w){case"width":case"height":case"top":case"left":g.push(w+"="+o[w]);break;case"target":case"noopener":case"noreferrer":break;default:g.push(w+"="+(o[w]?1:0))}var w=g.join(",");if((ne("iPhone")&&!ne("iPod")&&!ne("iPad")||ne("iPad")||ne("iPod"))&&d.navigator&&d.navigator.standalone&&f&&f!="_self"?(w=mf(document,"A"),Zb(w,"HTMLAnchorElement"),u=u instanceof Mn?u:s0(u),w.href=vf(u),w.setAttribute("target",f),o.noreferrer&&w.setAttribute("rel","noreferrer"),o=document.createEvent("MouseEvent"),o.initMouseEvent("click",!0,!0,d,1),w.dispatchEvent(o),w={}):o.noreferrer?(w=c0("",d,f,w),o=vf(u),w&&(Hk&&vt(o,";")&&(o="'"+o.replace(/'/g,"%27")+"'"),w.opener=null,o='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+qd(o)+'">',o=(d=e0())?d.createHTML(o):o,o=new Js(o,null,u0),d=w.document)&&(d.write(jk(o)),d.close())):(w=c0(u,d,f,w))&&o.noopener&&(w.opener=null),w)try{w.focus()}catch{}return w}function wD(o){return new xt(function(u){function f(){ta(2e3).then(function(){if(!o||o.closed)u();else return f()})}return f()})}var bD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ED=/^[^@]+@[^@]+$/;function Af(){var o=null;return new xt(function(u){l.document.readyState=="complete"?u():(o=function(){u()},nv(window,"load",o))}).o(function(u){throw Xn(window,"load",o),u})}function ID(){return hv(void 0)?Af().then(function(){return new xt(function(o,u){var f=l.document,d=setTimeout(function(){u(Error("Cordova framework is not ready."))},1e3);f.addEventListener("deviceready",function(){clearTimeout(d),o()},!1)})}):ue(Error("Cordova must run in an Android or iOS file scheme."))}function hv(o){return o=o||en(),!(oa()!=="file:"&&oa()!=="ionic:"||!o.toLowerCase().match(/iphone|ipad|ipod|android/))}function pv(){var o=l.window;try{return!(!o||o==o.top)}catch{return!1}}function Er(){return typeof l.WorkerGlobalScope<"u"&&typeof l.importScripts=="function"}function Yr(){return at.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":at.INTERNAL.hasOwnProperty("node")?"Node":Er()?"Worker":"Browser"}function eE(){var o=Yr();return o==="ReactNative"||o==="Node"}function TD(){for(var o=50,u=[];0<o;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return u.join("")}var dv="Firefox",nE="Chrome";function ra(o){var u=o.toLowerCase();if(vt(u,"opera/")||vt(u,"opr/")||vt(u,"opios/"))return"Opera";if(vt(u,"iemobile"))return"IEMobile";if(vt(u,"msie")||vt(u,"trident/"))return"IE";if(vt(u,"edge/"))return"Edge";if(vt(u,"firefox/"))return dv;if(vt(u,"silk/"))return"Silk";if(vt(u,"blackberry"))return"Blackberry";if(vt(u,"webos"))return"Webos";if(!vt(u,"safari/")||vt(u,"chrome/")||vt(u,"crios/")||vt(u,"android"))if(!vt(u,"chrome/")&&!vt(u,"crios/")||vt(u,"edge/")){if(vt(u,"android"))return"Android";if((o=o.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&o.length==2)return o[1]}else return nE;else return"Safari";return"Other"}var rE={md:"FirebaseCore-web",od:"FirebaseUI-web"};function ia(o,u){u=u||[];var f=[],d={},g;for(g in rE)d[rE[g]]=!0;for(g=0;g<u.length;g++)typeof d[u[g]]<"u"&&(delete d[u[g]],f.push(u[g]));return f.sort(),u=f,u.length||(u=["FirebaseCore-web"]),f=Yr(),f==="Browser"?(d=en(),f=ra(d)):f==="Worker"&&(d=en(),f=ra(d)+"-"+f),f+"/JsCore/"+o+"/"+u.join(",")}function en(){return l.navigator&&l.navigator.userAgent||""}function ce(o,u){o=o.split("."),u=u||l;for(var f=0;f<o.length&&typeof u=="object"&&u!=null;f++)u=u[o[f]];return f!=o.length&&(u=void 0),u}function vv(){try{var o=l.localStorage,u=Qo();if(o)return o.setItem(u,"1"),o.removeItem(u),fv()?!!l.indexedDB:!0}catch{return Er()&&!!l.indexedDB}return!1}function Ko(){return(Cf()||oa()==="chrome-extension:"||hv())&&!eE()&&vv()&&!Er()}function Cf(){return oa()==="http:"||oa()==="https:"}function oa(){return l.location&&l.location.protocol||null}function rc(o){return o=o||en(),!(Z0(o)||ra(o)==dv)}function ic(o){return typeof o>"u"?null:K0(o)}function iE(o){var u={},f;for(f in o)o.hasOwnProperty(f)&&o[f]!==null&&o[f]!==void 0&&(u[f]=o[f]);return u}function sa(o){if(o!==null)return JSON.parse(o)}function Qo(o){return o||Math.floor(1e9*Math.random()).toString()}function oE(o){return o=o||en(),!(ra(o)=="Safari"||o.toLowerCase().match(/iphone|ipad|ipod/))}function sE(){var o=l.___jsl;if(o&&o.H){for(var u in o.H)if(o.H[u].r=o.H[u].r||[],o.H[u].L=o.H[u].L||[],o.H[u].r=o.H[u].L.concat(),o.CP)for(var f=0;f<o.CP.length;f++)o.CP[f]=null}}function Xi(o,u){if(o>u)throw Error("Short delay should be less than long delay!");this.a=o,this.c=u,o=en(),u=Yr(),this.b=Z0(o)||u==="ReactNative"}Xi.prototype.get=function(){var o=l.navigator;return!(o&&typeof o.onLine=="boolean"&&(Cf()||oa()==="chrome-extension:"||typeof o.connection<"u"))||o.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};function gv(){var o=l.document;return o&&typeof o.visibilityState<"u"?o.visibilityState=="visible":!0}function SD(){var o=l.document,u=null;return gv()||!o?gt():new xt(function(f){u=function(){gv()&&(o.removeEventListener("visibilitychange",u,!1),f())},o.addEventListener("visibilitychange",u,!1)}).o(function(f){throw o.removeEventListener("visibilitychange",u,!1),f})}function oc(o){try{var u=new Date(parseInt(o,10));if(!isNaN(u.getTime())&&!/[^0-9]/.test(o))return u.toUTCString()}catch{}return null}function aE(){return!(!ce("fireauth.oauthhelper",l)&&!ce("fireauth.iframe",l))}function AD(){var o=l.navigator;return o&&o.serviceWorker&&o.serviceWorker.controller||null}function CD(){var o=l.navigator;return o&&o.serviceWorker?gt().then(function(){return o.serviceWorker.ready}).then(function(u){return u.active||null}).o(function(){return null}):gt(null)}var uE={};function mv(o){uE[o]||(uE[o]=!0,typeof console<"u"&&typeof console.warn=="function"&&console.warn(o))}var yv;try{var _v={};Object.defineProperty(_v,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(_v,"abcd",{configurable:!0,enumerable:!0,value:2}),yv=_v.abcd==2}catch{yv=!1}function ot(o,u,f){yv?Object.defineProperty(o,u,{configurable:!0,enumerable:!0,value:f}):o[u]=f}function En(o,u){if(u)for(var f in u)u.hasOwnProperty(f)&&ot(o,f,u[f])}function Xr(o){var u={};return En(u,o),u}function ND(o){var u={},f;for(f in o)o.hasOwnProperty(f)&&(u[f]=o[f]);return u}function RD(o,u){if(!u||!u.length)return!0;if(!o)return!1;for(var f=0;f<u.length;f++){var d=o[u[f]];if(d==null||d==="")return!1}return!0}function wv(o){var u=o;if(typeof o=="object"&&o!=null){u="length"in o?[]:{};for(var f in o)ot(u,f,wv(o[f]))}return u}function bv(o){var u=o&&(o[Sv]?"phone":null);if(u&&o&&o[Tv]){ot(this,"uid",o[Tv]),ot(this,"displayName",o[cE]||null);var f=null;o[Iv]&&(f=new Date(o[Iv]).toUTCString()),ot(this,"enrollmentTime",f),ot(this,"factorId",u)}else throw new O("internal-error","Internal assert: invalid MultiFactorInfo object")}bv.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};function Ev(o){try{var u=new sc(o)}catch{u=null}return u}var cE="displayName",Iv="enrolledAt",Tv="mfaEnrollmentId",Sv="phoneInfo";function sc(o){bv.call(this,o),ot(this,"phoneNumber",o[Sv])}lt(sc,bv),sc.prototype.w=function(){var o=sc.ab.w.call(this);return o.phoneNumber=this.phoneNumber,o};function OD(o){var u={},f=o[xD],d=o[kD],g=o[DD];if(o=Ev(o[PD]),!g||g!=Nf&&g!=ac&&!f||g==ac&&!d||g==Av&&!o)throw Error("Invalid checkActionCode response!");g==ac?(u[fE]=f||null,u[hE]=f||null,u[lE]=d):(u[fE]=d||null,u[hE]=d||null,u[lE]=f||null),u[LD]=o||null,ot(this,FD,g),ot(this,MD,wv(u))}var Av="REVERT_SECOND_FACTOR_ADDITION",Nf="EMAIL_SIGNIN",ac="VERIFY_AND_CHANGE_EMAIL",xD="email",PD="mfaInfo",kD="newEmail",DD="requestType",lE="email",fE="fromEmail",LD="multiFactorInfo",hE="previousEmail",MD="data",FD="operation";function Cv(o){o=Un(o);var u=fr(o,pE)||null,f=fr(o,dE)||null,d=fr(o,vE)||null;if(d=d&&BD[d]||null,!u||!f||!d)throw new O("argument-error",pE+", "+dE+"and "+vE+" are required in a valid action code URL.");En(this,{apiKey:u,operation:d,code:f,continueUrl:fr(o,UD)||null,languageCode:fr(o,jD)||null,tenantId:fr(o,VD)||null})}var pE="apiKey",dE="oobCode",UD="continueUrl",jD="languageCode",vE="mode",VD="tenantId",BD={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Av,signIn:Nf,verifyAndChangeEmail:ac,verifyEmail:"VERIFY_EMAIL"};function gE(o){try{return new Cv(o)}catch{return null}}function Rf(o){var u=o[qD];if(typeof u>"u")throw new O("missing-continue-uri");if(typeof u!="string"||typeof u=="string"&&!u.length)throw new O("invalid-continue-uri");this.h=u,this.b=this.a=null,this.g=!1;var f=o[mE];if(f&&typeof f=="object"){u=f[EE];var d=f[wE];if(f=f[bE],typeof u=="string"&&u.length){if(this.a=u,typeof d<"u"&&typeof d!="boolean")throw new O("argument-error",wE+" property must be a boolean when specified.");if(this.g=!!d,typeof f<"u"&&(typeof f!="string"||typeof f=="string"&&!f.length))throw new O("argument-error",bE+" property must be a non empty string when specified.");this.b=f||null}else{if(typeof u<"u")throw new O("argument-error",EE+" property must be a non empty string when specified.");if(typeof d<"u"||typeof f<"u")throw new O("missing-android-pkg-name")}}else if(typeof f<"u")throw new O("argument-error",mE+" property must be a non null object when specified.");if(this.f=null,(u=o[_E])&&typeof u=="object"){if(u=u[IE],typeof u=="string"&&u.length)this.f=u;else if(typeof u<"u")throw new O("argument-error",IE+" property must be a non empty string when specified.")}else if(typeof u<"u")throw new O("argument-error",_E+" property must be a non null object when specified.");if(u=o[Nv],typeof u<"u"&&typeof u!="boolean")throw new O("argument-error",Nv+" property must be a boolean when specified.");if(this.c=!!u,o=o[yE],typeof o<"u"&&(typeof o!="string"||typeof o=="string"&&!o.length))throw new O("argument-error",yE+" property must be a non empty string when specified.");this.i=o||null}var mE="android",yE="dynamicLinkDomain",Nv="handleCodeInApp",_E="iOS",qD="url",wE="installApp",bE="minimumVersion",EE="packageName",IE="bundleId";function Of(o){var u={};u.continueUrl=o.h,u.canHandleCodeInApp=o.c,(u.androidPackageName=o.a)&&(u.androidMinimumVersion=o.b,u.androidInstallApp=o.g),u.iOSBundleId=o.f,u.dynamicLinkDomain=o.i;for(var f in u)u[f]===null&&delete u[f];return u}function HD(o){return S(o,function(u){return u=u.toString(16),1<u.length?u:"0"+u}).join("")}var uc=null;function GD(o){var u=[];return WD(o,function(f){u.push(f)}),u}function WD(o,u){function f(M){for(;d<o.length;){var q=o.charAt(d++),bt=uc[q];if(bt!=null)return bt;if(!/^[\s\xa0]*$/.test(q))throw Error("Unknown base64 encoding at char: "+q)}return M}$D();for(var d=0;;){var g=f(-1),_=f(0),w=f(64),T=f(64);if(T===64&&g===-1)break;u(g<<2|_>>4),w!=64&&(u(_<<4&240|w>>2),T!=64&&u(w<<6&192|T))}}function $D(){if(!uc){uc={};for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),u=["+/=","+/","-_=","-_.","-_"],f=0;5>f;f++)for(var d=o.concat(u[f].split("")),g=0;g<d.length;g++){var _=d[g];uc[_]===void 0&&(uc[_]=g)}}}function xf(o){var u=TE(o);if(!(u&&u.sub&&u.iss&&u.aud&&u.exp))throw Error("Invalid JWT");this.h=o,this.a=u.exp,this.i=u.sub,o=Date.now()/1e3,this.g=u.iat||(o>this.a?this.a:o),this.b=u.provider_id||u.firebase&&u.firebase.sign_in_provider||null,this.f=u.firebase&&u.firebase.tenant||null,this.c=!!u.is_anonymous||this.b=="anonymous"}xf.prototype.T=function(){return this.f},xf.prototype.l=function(){return this.c},xf.prototype.toString=function(){return this.h};function Pf(o){try{return new xf(o)}catch{return null}}function TE(o){if(!o||(o=o.split("."),o.length!=3))return null;o=o[1];for(var u=(4-o.length%4)%4,f=0;f<u;f++)o+=".";try{var d=GD(o);for(o=[],f=u=0;u<d.length;){var g=d[u++];if(128>g)o[f++]=String.fromCharCode(g);else if(191<g&&224>g){var _=d[u++];o[f++]=String.fromCharCode((g&31)<<6|_&63)}else if(239<g&&365>g){_=d[u++];var w=d[u++],T=d[u++],M=((g&7)<<18|(_&63)<<12|(w&63)<<6|T&63)-65536;o[f++]=String.fromCharCode(55296+(M>>10)),o[f++]=String.fromCharCode(56320+(M&1023))}else _=d[u++],w=d[u++],o[f++]=String.fromCharCode((g&15)<<12|(_&63)<<6|w&63)}return JSON.parse(o.join(""))}catch{}return null}var SE="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),kf=["client_id","response_type","scope","redirect_uri","state"],Rv={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:kf},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:kf},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:kf},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:SE},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Ov(o){for(var u in Rv)if(Rv[u].fa==o)return Rv[u];return null}function AE(o){var u={};u["facebook.com"]=NE,u["google.com"]=OE,u["github.com"]=RE,u["twitter.com"]=xE;var f=o&&o[CE];try{if(f)return u[f]?new u[f](o):new Jr(o);if(typeof o[xv]<"u")return new Pv(o)}catch{}return null}var xv="idToken",CE="providerId";function Pv(o){var u=o[CE];if(!u&&o[xv]){var f=Pf(o[xv]);f&&f.b&&(u=f.b)}if(!u)throw Error("Invalid additional user info!");(u=="anonymous"||u=="custom")&&(u=null),f=!1,typeof o.isNewUser<"u"?f=!!o.isNewUser:o.kind==="identitytoolkit#SignupNewUserResponse"&&(f=!0),ot(this,"providerId",u),ot(this,"isNewUser",f)}function Jr(o){Pv.call(this,o),o=sa(o.rawUserInfo||"{}"),ot(this,"profile",wv(o||{}))}lt(Jr,Pv);function NE(o){if(Jr.call(this,o),this.providerId!="facebook.com")throw Error("Invalid provider ID!")}lt(NE,Jr);function RE(o){if(Jr.call(this,o),this.providerId!="github.com")throw Error("Invalid provider ID!");ot(this,"username",this.profile&&this.profile.login||null)}lt(RE,Jr);function OE(o){if(Jr.call(this,o),this.providerId!="google.com")throw Error("Invalid provider ID!")}lt(OE,Jr);function xE(o){if(Jr.call(this,o),this.providerId!="twitter.com")throw Error("Invalid provider ID!");ot(this,"username",o.screenName||null)}lt(xE,Jr);function PE(o){var u=Un(o),f=fr(u,"link"),d=fr(Un(f),"link");return u=fr(u,"deep_link_id"),fr(Un(u),"link")||u||d||f||o}function Df(o,u){if(!o&&!u)throw new O("internal-error","Internal assert: no raw session string available");if(o&&u)throw new O("internal-error","Internal assert: unable to determine the session type");this.a=o||null,this.b=u||null,this.type=this.a?cc:Lf}var cc="enroll",Lf="signin";Df.prototype.Ha=function(){return this.a?gt(this.a):gt(this.b)},Df.prototype.w=function(){return this.type==cc?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}};function aa(){}aa.prototype.ka=function(){},aa.prototype.b=function(){},aa.prototype.c=function(){},aa.prototype.w=function(){};function ua(o,u){return o.then(function(f){if(f[Sr]){var d=Pf(f[Sr]);if(!d||u!=d.i)throw new O("user-mismatch");return f}throw new O("user-mismatch")}).o(function(f){throw f&&f.code&&f.code==cn+"user-not-found"?new O("user-mismatch"):f})}function Yo(o,u){if(u)this.a=u;else throw new O("internal-error","failed to construct a credential");ot(this,"providerId",o),ot(this,"signInMethod",o)}Yo.prototype.ka=function(o){return ng(o,kv(this))},Yo.prototype.b=function(o,u){var f=kv(this);return f.idToken=u,rg(o,f)},Yo.prototype.c=function(o,u){return ua(ig(o,kv(this)),u)};function kv(o){return{pendingToken:o.a,requestUri:"http://localhost"}}Yo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}};function zD(o){if(o&&o.providerId&&o.signInMethod&&o.providerId.indexOf("saml.")==0&&o.pendingToken)try{return new Yo(o.providerId,o.pendingToken)}catch{}return null}function bi(o,u,f){if(this.a=null,u.idToken||u.accessToken)u.idToken&&ot(this,"idToken",u.idToken),u.accessToken&&ot(this,"accessToken",u.accessToken),u.nonce&&!u.pendingToken&&ot(this,"nonce",u.nonce),u.pendingToken&&(this.a=u.pendingToken);else if(u.oauthToken&&u.oauthTokenSecret)ot(this,"accessToken",u.oauthToken),ot(this,"secret",u.oauthTokenSecret);else throw new O("internal-error","failed to construct a credential");ot(this,"providerId",o),ot(this,"signInMethod",f)}bi.prototype.ka=function(o){return ng(o,Dv(this))},bi.prototype.b=function(o,u){var f=Dv(this);return f.idToken=u,rg(o,f)},bi.prototype.c=function(o,u){var f=Dv(this);return ua(ig(o,f),u)};function Dv(o){var u={};return o.idToken&&(u.id_token=o.idToken),o.accessToken&&(u.access_token=o.accessToken),o.secret&&(u.oauth_token_secret=o.secret),u.providerId=o.providerId,o.nonce&&!o.a&&(u.nonce=o.nonce),u={postBody:W0(u).toString(),requestUri:"http://localhost"},o.a&&(delete u.postBody,u.pendingToken=o.a),u}bi.prototype.w=function(){var o={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(o.oauthIdToken=this.idToken),this.accessToken&&(o.oauthAccessToken=this.accessToken),this.secret&&(o.oauthTokenSecret=this.secret),this.nonce&&(o.nonce=this.nonce),this.a&&(o.pendingToken=this.a),o};function KD(o){if(o&&o.providerId&&o.signInMethod){var u={idToken:o.oauthIdToken,accessToken:o.oauthTokenSecret?null:o.oauthAccessToken,oauthTokenSecret:o.oauthTokenSecret,oauthToken:o.oauthTokenSecret&&o.oauthAccessToken,nonce:o.nonce,pendingToken:o.pendingToken};try{return new bi(o.providerId,u,o.signInMethod)}catch{}}return null}function Xo(o,u){this.Qc=u||[],En(this,{providerId:o,isOAuthProvider:!0}),this.Ib={},this.pb=(Ov(o)||{}).Ja||null,this.ob=null}Xo.prototype.Ka=function(o){return this.Ib=De(o),this};function kE(o){if(typeof o!="string"||o.indexOf("saml.")!=0)throw new O("argument-error",'SAML provider IDs must be prefixed with "saml."');Xo.call(this,o,[])}lt(kE,Xo);function Jn(o){Xo.call(this,o,kf),this.a=[]}lt(Jn,Xo),Jn.prototype.Ca=function(o){return L(this.a,o)||this.a.push(o),this},Jn.prototype.Qb=function(){return z(this.a)},Jn.prototype.credential=function(o,u){var f;if(I(o)?f={idToken:o.idToken||null,accessToken:o.accessToken||null,nonce:o.rawNonce||null}:f={idToken:o||null,accessToken:u||null},!f.idToken&&!f.accessToken)throw new O("argument-error","credential failed: must provide the ID token and/or the access token.");return new bi(this.providerId,f,this.providerId)};function Jo(){Jn.call(this,"facebook.com")}lt(Jo,Jn),ot(Jo,"PROVIDER_ID","facebook.com"),ot(Jo,"FACEBOOK_SIGN_IN_METHOD","facebook.com");function DE(o){if(!o)throw new O("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=o;return I(o)&&(u=o.accessToken),new Jo().credential({accessToken:u})}function Zo(){Jn.call(this,"github.com")}lt(Zo,Jn),ot(Zo,"PROVIDER_ID","github.com"),ot(Zo,"GITHUB_SIGN_IN_METHOD","github.com");function LE(o){if(!o)throw new O("argument-error","credential failed: expected 1 argument (the OAuth access token).");var u=o;return I(o)&&(u=o.accessToken),new Zo().credential({accessToken:u})}function ts(){Jn.call(this,"google.com"),this.Ca("profile")}lt(ts,Jn),ot(ts,"PROVIDER_ID","google.com"),ot(ts,"GOOGLE_SIGN_IN_METHOD","google.com");function ME(o,u){var f=o;return I(o)&&(f=o.idToken,u=o.accessToken),new ts().credential({idToken:f,accessToken:u})}function ca(){Xo.call(this,"twitter.com",SE)}lt(ca,Xo),ot(ca,"PROVIDER_ID","twitter.com"),ot(ca,"TWITTER_SIGN_IN_METHOD","twitter.com");function FE(o,u){var f=o;if(I(f)||(f={oauthToken:o,oauthTokenSecret:u}),!f.oauthToken||!f.oauthTokenSecret)throw new O("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new bi("twitter.com",f,"twitter.com")}function Ji(o,u,f){this.a=o,this.f=u,ot(this,"providerId","password"),ot(this,"signInMethod",f===hr.EMAIL_LINK_SIGN_IN_METHOD?hr.EMAIL_LINK_SIGN_IN_METHOD:hr.EMAIL_PASSWORD_SIGN_IN_METHOD)}Ji.prototype.ka=function(o){return this.signInMethod==hr.EMAIL_LINK_SIGN_IN_METHOD?Pt(o,PL,{email:this.a,oobCode:this.f}):Pt(o,fI,{email:this.a,password:this.f})},Ji.prototype.b=function(o,u){return this.signInMethod==hr.EMAIL_LINK_SIGN_IN_METHOD?Pt(o,kL,{idToken:u,email:this.a,oobCode:this.f}):Pt(o,lI,{idToken:u,email:this.a,password:this.f})},Ji.prototype.c=function(o,u){return ua(this.ka(o),u)},Ji.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}};function QD(o){return o&&o.email&&o.password?new Ji(o.email,o.password,o.signInMethod):null}function hr(){En(this,{providerId:"password",isOAuthProvider:!1})}function UE(o,u){if(u=Lv(u),!u)throw new O("argument-error","Invalid email link!");return new Ji(o,u.code,hr.EMAIL_LINK_SIGN_IN_METHOD)}function Lv(o){return o=PE(o),(o=gE(o))&&o.operation===Nf?o:null}En(hr,{PROVIDER_ID:"password"}),En(hr,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),En(hr,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"});function Zi(o){if(!(o.eb&&o.cb||o.La&&o.ea))throw new O("internal-error");this.a=o,ot(this,"providerId","phone"),this.fa="phone",ot(this,"signInMethod","phone")}Zi.prototype.ka=function(o){return o.fb(lc(this))},Zi.prototype.b=function(o,u){var f=lc(this);return f.idToken=u,Pt(o,ZL,f)},Zi.prototype.c=function(o,u){var f=lc(this);return f.operation="REAUTH",o=Pt(o,tM,f),ua(o,u)},Zi.prototype.w=function(){var o={providerId:"phone"};return this.a.eb&&(o.verificationId=this.a.eb),this.a.cb&&(o.verificationCode=this.a.cb),this.a.La&&(o.temporaryProof=this.a.La),this.a.ea&&(o.phoneNumber=this.a.ea),o};function YD(o){if(o&&o.providerId==="phone"&&(o.verificationId&&o.verificationCode||o.temporaryProof&&o.phoneNumber)){var u={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(f){o[f]&&(u[f]=o[f])}),new Zi(u)}return null}function lc(o){return o.a.La&&o.a.ea?{temporaryProof:o.a.La,phoneNumber:o.a.ea}:{sessionInfo:o.a.eb,code:o.a.cb}}function Ei(o){try{this.a=o||at.auth()}catch{throw new O("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}En(this,{providerId:"phone",isOAuthProvider:!1})}Ei.prototype.fb=function(o,u){var f=this.a.a;return gt(u.verify()).then(function(d){if(typeof d!="string")throw new O("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(u.type){case"recaptcha":var g=I(o)?o.session:null,_=I(o)?o.phoneNumber:o,w;return g&&g.type==cc?w=g.Ha().then(function(T){return IL(f,{idToken:T,phoneEnrollmentInfo:{phoneNumber:_,recaptchaToken:d}})}):g&&g.type==Lf?w=g.Ha().then(function(T){return TL(f,{mfaPendingCredential:T,mfaEnrollmentId:o.multiFactorHint&&o.multiFactorHint.uid||o.multiFactorUid,phoneSignInInfo:{recaptchaToken:d}})}):w=EL(f,{phoneNumber:_,recaptchaToken:d}),w.then(function(T){return typeof u.reset=="function"&&u.reset(),T},function(T){throw typeof u.reset=="function"&&u.reset(),T});default:throw new O("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})};function jE(o,u){if(!o)throw new O("missing-verification-id");if(!u)throw new O("missing-verification-code");return new Zi({eb:o,cb:u})}En(Ei,{PROVIDER_ID:"phone"}),En(Ei,{PHONE_SIGN_IN_METHOD:"phone"});function Mv(o){if(o.temporaryProof&&o.phoneNumber)return new Zi({La:o.temporaryProof,ea:o.phoneNumber});var u=o&&o.providerId;if(!u||u==="password")return null;var f=o&&o.oauthAccessToken,d=o&&o.oauthTokenSecret,g=o&&o.nonce,_=o&&o.oauthIdToken,w=o&&o.pendingToken;try{switch(u){case"google.com":return ME(_,f);case"facebook.com":return DE(f);case"github.com":return LE(f);case"twitter.com":return FE(f,d);default:return f||d||_||w?w?u.indexOf("saml.")==0?new Yo(u,w):new bi(u,{pendingToken:w,idToken:o.oauthIdToken,accessToken:o.oauthAccessToken},u):new Jn(u).credential({idToken:_,accessToken:f,rawNonce:g}):null}}catch{return null}}function Fv(o){if(!o.isOAuthProvider)throw new O("invalid-oauth-provider")}function Ir(o,u,f,d,g,_,w){if(this.c=o,this.b=u||null,this.g=f||null,this.f=d||null,this.i=_||null,this.h=w||null,this.a=g||null,this.g||this.a){if(this.g&&this.a)throw new O("invalid-auth-event");if(this.g&&!this.f)throw new O("invalid-auth-event")}else throw new O("invalid-auth-event")}Ir.prototype.getUid=function(){var o=[];return o.push(this.c),this.b&&o.push(this.b),this.f&&o.push(this.f),this.h&&o.push(this.h),o.join("-")},Ir.prototype.T=function(){return this.h},Ir.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};function VE(o){return o=o||{},o.type?new Ir(o.type,o.eventId,o.urlResponse,o.sessionId,o.error&&$r(o.error),o.postBody,o.tenantId):null}function XD(){this.b=null,this.a=[]}var Uv=null;function JD(o){var u=Uv;u.a.push(o),u.b||(u.b=function(f){for(var d=0;d<u.a.length;d++)u.a[d](f)},o=ce("universalLinks.subscribe",l),typeof o=="function"&&o(null,u.b))}function jv(o){var u="unauthorized-domain",f=void 0,d=Un(o);o=d.a,d=d.c,d=="chrome-extension"?f=l0("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):d=="http"||d=="https"?f=l0("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",o):u="operation-not-supported-in-this-environment",O.call(this,u,f)}lt(jv,O);function fc(o,u,f){O.call(this,o,f),o=u||{},o.Jb&&ot(this,"email",o.Jb),o.ea&&ot(this,"phoneNumber",o.ea),o.credential&&ot(this,"credential",o.credential),o.Zb&&ot(this,"tenantId",o.Zb)}lt(fc,O),fc.prototype.w=function(){var o={code:this.code,message:this.message};this.email&&(o.email=this.email),this.phoneNumber&&(o.phoneNumber=this.phoneNumber),this.tenantId&&(o.tenantId=this.tenantId);var u=this.credential&&this.credential.w();return u&&Ln(o,u),o},fc.prototype.toJSON=function(){return this.w()};function Mf(o){if(o.code){var u=o.code||"";u.indexOf(cn)==0&&(u=u.substring(cn.length));var f={credential:Mv(o),Zb:o.tenantId};if(o.email)f.Jb=o.email;else if(o.phoneNumber)f.ea=o.phoneNumber;else if(!f.credential)return new O(u,o.message||void 0);return new fc(u,f,o.message)}return null}function hc(){}hc.prototype.c=null;function BE(o){return o.c||(o.c=o.b())}var Vv;function Ff(){}lt(Ff,hc),Ff.prototype.a=function(){var o=qE(this);return o?new ActiveXObject(o):new XMLHttpRequest},Ff.prototype.b=function(){var o={};return qE(this)&&(o[0]=!0,o[1]=!0),o};function qE(o){if(!o.f&&typeof XMLHttpRequest>"u"&&typeof ActiveXObject<"u"){for(var u=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],f=0;f<u.length;f++){var d=u[f];try{return new ActiveXObject(d),o.f=d}catch{}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return o.f}Vv=new Ff;function Uf(){}lt(Uf,hc),Uf.prototype.a=function(){var o=new XMLHttpRequest;if("withCredentials"in o)return o;if(typeof XDomainRequest<"u")return new HE;throw Error("Unsupported browser")},Uf.prototype.b=function(){return{}};function HE(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=U(this.qc,this),this.a.onerror=U(this.Sb,this),this.a.onprogress=U(this.rc,this),this.a.ontimeout=U(this.vc,this)}e=HE.prototype,e.open=function(o,u,f){if(f!=null&&!f)throw Error("Only async requests are supported.");this.a.open(o,u)},e.send=function(o){if(o)if(typeof o=="string")this.a.send(o);else throw Error("Only string data is supported");else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(o){return o.toLowerCase()=="content-type"?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Bv(this,4)},e.Sb=function(){this.status=500,this.response=this.responseText="",Bv(this,4)},e.vc=function(){this.Sb()},e.rc=function(){this.status=200,Bv(this,1)};function Bv(o,u){o.readyState=u,o.onreadystatechange&&o.onreadystatechange()}e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType};function qv(o,u,f){this.reset(o,u,f,void 0,void 0)}qv.prototype.a=null,qv.prototype.reset=function(o,u,f,d,g){delete this.a};function Hv(o){this.f=o,this.b=this.c=this.a=null}function pc(o,u){this.name=o,this.value=u}pc.prototype.toString=function(){return this.name};var GE=new pc("SEVERE",1e3),Gv=new pc("WARNING",900),ZD=new pc("CONFIG",700),tL=new pc("FINE",500);function WE(o){return o.c?o.c:o.a?WE(o.a):(tn("Root logger has no level set."),null)}Hv.prototype.log=function(o,u,f){if(o.value>=WE(this).value)for(E(u)&&(u=u()),o=new qv(o,String(u),this.f),f&&(o.a=f),f=this;f;)f=f.a};var Wv={},jf=null;function $v(o){jf||(jf=new Hv(""),Wv[""]=jf,jf.c=ZD);var u;if(!(u=Wv[o])){u=new Hv(o);var f=o.lastIndexOf("."),d=o.substr(f+1);f=$v(o.substr(0,f)),f.b||(f.b={}),f.b[d]=u,u.a=f,Wv[o]=u}return u}function pr(o,u){o&&o.log(tL,u,void 0)}function Vf(o){this.f=o}lt(Vf,hc),Vf.prototype.a=function(){return new Bf(this.f)},Vf.prototype.b=function(o){return function(){return o}}({});function Bf(o){bn.call(this),this.u=o,this.h=void 0,this.readyState=zv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=$v("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}lt(Bf,bn);var zv=0;e=Bf.prototype,e.open=function(o,u){if(this.readyState!=zv)throw this.abort(),Error("Error reopening a connection");this.s=o,this.f=u,this.readyState=1,vc(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.a=!0;var u={headers:this.l,method:this.s,credentials:this.h,cache:void 0};o&&(u.body=o),this.u.fetch(new Request(this.f,u)).then(this.uc.bind(this),this.Ua.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&this.readyState!=4&&(this.a=!1,dc(this)),this.readyState=zv},e.uc=function(o){this.a&&(this.g=o,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=o.headers,this.readyState=2,vc(this)),this.a&&(this.readyState=3,vc(this),this.a&&(this.responseType==="arraybuffer"?o.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):typeof l.ReadableStream<"u"&&"body"in o?(this.response=this.responseText="",this.c=o.body.getReader(),this.m=new TextDecoder,$E(this)):o.text().then(this.tc.bind(this),this.Ua.bind(this)))))};function $E(o){o.c.read().then(o.pc.bind(o)).catch(o.Ua.bind(o))}e.pc=function(o){if(this.a){var u=this.m.decode(o.value?o.value:new Uint8Array(0),{stream:!o.done});u&&(this.response=this.responseText+=u),o.done?dc(this):vc(this),this.readyState==3&&$E(this)}},e.tc=function(o){this.a&&(this.response=this.responseText=o,dc(this))},e.sc=function(o){this.a&&(this.response=o,dc(this))},e.Ua=function(o){var u=this.i;u&&u.log(Gv,"Failed to fetch url "+this.f,o instanceof Error?o:Error(o)),this.a&&dc(this)};function dc(o){o.readyState=4,o.g=null,o.c=null,o.m=null,vc(o)}e.setRequestHeader=function(o,u){this.l.append(o,u)},e.getResponseHeader=function(o){return this.b?this.b.get(o.toLowerCase())||"":((o=this.i)&&o.log(Gv,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var o=this.i;return o&&o.log(Gv,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}o=[];for(var u=this.b.entries(),f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function vc(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Bf.prototype,"withCredentials",{get:function(){return this.h==="include"},set:function(o){this.h=o?"include":"same-origin"}});function gc(o){bn.call(this),this.headers=new ea,this.D=o||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=zE,this.u=this.S=!1}lt(gc,bn);var zE="";gc.prototype.b=$v("goog.net.XhrIo");var eL=/^https?$/i,nL=["POST","PUT"];function rL(o,u,f,d,g){if(o.a)throw Error("[goog.net.XhrIo] Object is active with another request="+o.l+"; newUri="+u);f=f?f.toUpperCase():"GET",o.l=u,o.h="",o.R=f,o.J=!1,o.c=!0,o.a=o.D?o.D.a():Vv.a(),o.C=o.D?BE(o.D):BE(Vv),o.a.onreadystatechange=U(o.Vb,o);try{pr(o.b,Ii(o,"Opening Xhr")),o.O=!0,o.a.open(f,String(u),!0),o.O=!1}catch(w){pr(o.b,Ii(o,"Error opening Xhr: "+w.message)),KE(o,w);return}u=d||"";var _=new ea(o.headers);g&&cD(g,function(w,T){_.set(T,w)}),g=x(_.Y()),d=l.FormData&&u instanceof l.FormData,!L(nL,f)||g||d||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),_.forEach(function(w,T){this.a.setRequestHeader(T,w)},o),o.m&&(o.a.responseType=o.m),"withCredentials"in o.a&&o.a.withCredentials!==o.S&&(o.a.withCredentials=o.S);try{XE(o),0<o.g&&(o.u=iL(o.a),pr(o.b,Ii(o,"Will abort after "+o.g+"ms if incomplete, xhr2 "+o.u)),o.u?(o.a.timeout=o.g,o.a.ontimeout=U(o.Ma,o)):o.s=sv(o.Ma,o.g,o)),pr(o.b,Ii(o,"Sending request")),o.i=!0,o.a.send(u),o.i=!1}catch(w){pr(o.b,Ii(o,"Send error: "+w.message)),KE(o,w)}}function iL(o){return br&&d0(9)&&typeof o.timeout=="number"&&o.ontimeout!==void 0}function oL(o){return o.toLowerCase()=="content-type"}e=gc.prototype,e.Ma=function(){typeof c<"u"&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",pr(this.b,Ii(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))};function KE(o,u){o.c=!1,o.a&&(o.f=!0,o.a.abort(),o.f=!1),o.h=u,QE(o),qf(o)}function QE(o){o.J||(o.J=!0,o.dispatchEvent("complete"),o.dispatchEvent("error"))}e.abort=function(){this.a&&this.c&&(pr(this.b,Ii(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),qf(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),qf(this,!0)),gc.ab.Da.call(this)},e.Vb=function(){this.xa||(this.O||this.i||this.f?YE(this):this.Jc())},e.Jc=function(){YE(this)};function YE(o){if(o.c&&typeof c<"u"){if(o.C[1]&&mc(o)==4&&Hf(o)==2)pr(o.b,Ii(o,"Local request error detected and ignored"));else if(o.i&&mc(o)==4)sv(o.Vb,0,o);else if(o.dispatchEvent("readystatechange"),mc(o)==4){pr(o.b,Ii(o,"Request complete")),o.c=!1;try{var u=Hf(o);t:switch(u){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var d;if(!(d=f)){var g;if(g=u===0){var _=String(o.l).match(H0)[1]||null;if(!_&&l.self&&l.self.location){var w=l.self.location.protocol;_=w.substr(0,w.length-1)}g=!eL.test(_?_.toLowerCase():"")}d=g}if(d)o.dispatchEvent("complete"),o.dispatchEvent("success");else{try{var T=2<mc(o)?o.a.statusText:""}catch(M){pr(o.b,"Can not get status: "+M.message),T=""}o.h=T+" ["+Hf(o)+"]",QE(o)}}finally{qf(o)}}}}function qf(o,u){if(o.a){XE(o);var f=o.a,d=o.C[0]?m:null;o.a=null,o.C=null,u||o.dispatchEvent("ready");try{f.onreadystatechange=d}catch(g){(o=o.b)&&o.log(GE,"Problem encountered resetting onreadystatechange: "+g.message,void 0)}}}function XE(o){o.a&&o.u&&(o.a.ontimeout=null),o.s&&(l.clearTimeout(o.s),o.s=null)}function mc(o){return o.a?o.a.readyState:0}function Hf(o){try{return 2<mc(o)?o.a.status:-1}catch{return-1}}function sL(o){try{return o.a?o.a.responseText:""}catch(u){return pr(o.b,"Can not get responseText: "+u.message),""}}e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case zE:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var o=this.b;return o&&o.log(GE,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(u){return pr(this.b,"Can not get response: "+u.message),null}};function Ii(o,u){return u+" ["+o.R+" "+o.l+" "+Hf(o)+"]"}function es(o){var u=cL;this.g=[],this.u=u,this.s=o||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}es.prototype.cancel=function(o){if(this.a)this.c instanceof es&&this.c.cancel();else{if(this.b){var u=this.b;delete this.b,o?u.cancel(o):(u.l--,0>=u.l&&u.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(o=new _c,Gf(this),yc(this,!1,o))}},es.prototype.m=function(o,u){this.i=!1,yc(this,o,u)};function yc(o,u,f){o.a=!0,o.c=f,o.f=!u,ZE(o)}function Gf(o){if(o.a){if(!o.v)throw new Wf;o.v=!1}}function aL(o,u){Kv(o,null,u,void 0)}function Kv(o,u,f,d){o.g.push([u,f,d]),o.a&&ZE(o)}es.prototype.then=function(o,u,f){var d,g,_=new xt(function(w,T){d=w,g=T});return Kv(this,d,function(w){w instanceof _c?_.cancel():g(w)}),_.then(o,u,f)},es.prototype.$goog_Thenable=!0;function JE(o){return A(o.g,function(u){return E(u[1])})}function ZE(o){if(o.h&&o.a&&JE(o)){var u=o.h,f=$f[u];f&&(l.clearTimeout(f.a),delete $f[u]),o.h=0}o.b&&(o.b.l--,delete o.b),u=o.c;for(var d=f=!1;o.g.length&&!o.i;){var g=o.g.shift(),_=g[0],w=g[1];if(g=g[2],_=o.f?w:_)try{var T=_.call(g||o.s,u);T!==void 0&&(o.f=o.f&&(T==u||T instanceof Error),o.c=u=T),(Ut(u)||typeof l.Promise=="function"&&u instanceof l.Promise)&&(d=!0,o.i=!0)}catch(M){u=M,o.f=!0,JE(o)||(f=!0)}}o.c=u,d&&(T=U(o.m,o,!0),d=U(o.m,o,!1),u instanceof es?(Kv(u,T,d),u.C=!0):u.then(T,d)),f&&(u=new tI(u),$f[u.a]=u,o.h=u.a)}function Wf(){he.call(this)}lt(Wf,he),Wf.prototype.message="Deferred has already fired",Wf.prototype.name="AlreadyCalledError";function _c(){he.call(this)}lt(_c,he),_c.prototype.message="Deferred was canceled",_c.prototype.name="CanceledError";function tI(o){this.a=l.setTimeout(U(this.c,this),0),this.b=o}tI.prototype.c=function(){throw delete $f[this.a],this.b};var $f={};function Qv(o){var u={},f=u.document||document,d=n0(o).toString(),g=mf(document,"SCRIPT"),_={Wb:g,Ma:void 0},w=new es(_),T=null,M=u.timeout!=null?u.timeout:5e3;return 0<M&&(T=window.setTimeout(function(){zf(g,!0);var q=new Yv(fL,"Timeout reached for loading script "+d);Gf(w),yc(w,!1,q)},M),_.Ma=T),g.onload=g.onreadystatechange=function(){g.readyState&&g.readyState!="loaded"&&g.readyState!="complete"||(zf(g,u.xd||!1,T),Gf(w),yc(w,!0,null))},g.onerror=function(){zf(g,!0,T);var q=new Yv(lL,"Error while loading script "+d);Gf(w),yc(w,!1,q)},_=u.attributes||{},Ln(_,{type:"text/javascript",charset:"UTF-8"}),g0(g,_),Vk(g,o),uL(f).appendChild(g),w}function uL(o){var u;return(u=(o||document).getElementsByTagName("HEAD"))&&u.length!=0?u[0]:o.documentElement}function cL(){if(this&&this.Wb){var o=this.Wb;o&&o.tagName=="SCRIPT"&&zf(o,!0,this.Ma)}}function zf(o,u,f){f!=null&&l.clearTimeout(f),o.onload=m,o.onerror=m,o.onreadystatechange=m,u&&window.setTimeout(function(){o&&o.parentNode&&o.parentNode.removeChild(o)},0)}var lL=0,fL=1;function Yv(o,u){var f="Jsloader error (code #"+o+")";u&&(f+=": "+u),he.call(this,f),this.code=o}lt(Yv,he);function Kf(o){this.f=o}lt(Kf,hc),Kf.prototype.a=function(){return new this.f},Kf.prototype.b=function(){return{}};function Tr(o,u,f){if(this.c=o,o=u||{},this.l=o.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=o.secureTokenTimeout||hL,this.g=De(o.secureTokenHeaders||pL),this.h=o.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=o.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=o.firebaseTimeout||dL,this.a=De(o.firebaseHeaders||vL),f&&(this.a["X-Client-Version"]=f,this.g["X-Client-Version"]=f),f=Yr()=="Node",f=l.XMLHttpRequest||f&&at.INTERNAL.node&&at.INTERNAL.node.XMLHttpRequest,!f&&!Er())throw new O("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Er()?this.f=new Vf(self):eE()?this.f=new Kf(f):this.f=new Uf,this.b=null}var Xv,Sr="idToken",hL=new Xi(3e4,6e4),pL={"Content-Type":"application/x-www-form-urlencoded"},dL=new Xi(3e4,6e4),vL={"Content-Type":"application/json"};function eI(o,u){u?o.a["X-Firebase-Locale"]=u:delete o.a["X-Firebase-Locale"]}function la(o,u){u&&(o.l=Jv("https://securetoken.googleapis.com/v1/token",u),o.h=Jv("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",u),o.i=Jv("https://identitytoolkit.googleapis.com/v2/",u))}function Jv(o,u){return o=Un(o),u=Un(u.url),o.f=o.a+o.f,Ju(o,u.c),o.a=u.a,Zu(o,u.g),o.toString()}function nI(o,u){u?(o.a["X-Client-Version"]=u,o.g["X-Client-Version"]=u):(delete o.a["X-Client-Version"],delete o.g["X-Client-Version"])}Tr.prototype.T=function(){return this.b};function rI(o,u,f,d,g,_,w){_D()||Er()?o=U(o.u,o):(Xv||(Xv=new xt(function(T,M){mL(T,M)})),o=U(o.s,o)),o(u,f,d,g,_,w)}Tr.prototype.u=function(o,u,f,d,g,_){if(Er()&&(typeof l.fetch>"u"||typeof l.Headers>"u"||typeof l.Request>"u"))throw new O("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var w=new gc(this.f);if(_){w.g=Math.max(0,_);var T=setTimeout(function(){w.dispatchEvent("timeout")},_)}V0(w,"complete",function(){T&&clearTimeout(T);var M=null;try{M=JSON.parse(sL(this))||null}catch{M=null}u&&u(M)}),ov(w,"ready",function(){T&&clearTimeout(T),k0(this)}),ov(w,"timeout",function(){T&&clearTimeout(T),k0(this),u&&u(null)}),rL(w,o,f,d,g)};var gL=new Kr(pf,"https://apis.google.com/js/client.js?onload=%{onload}"),iI="__fcb"+Math.floor(1e6*Math.random()).toString();function mL(o,u){if(((window.gapi||{}).client||{}).request)o();else{l[iI]=function(){((window.gapi||{}).client||{}).request?o():u(Error("CORS_UNSUPPORTED"))};var f=Bd(gL,{onload:iI});aL(Qv(f),function(){u(Error("CORS_UNSUPPORTED"))})}}Tr.prototype.s=function(o,u,f,d,g){var _=this;Xv.then(function(){window.gapi.client.setApiKey(_.c);var w=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:o,method:f,body:d,headers:g,authType:"none",callback:function(T){window.gapi.auth.setToken(w),u&&u(T)}})}).o(function(w){u&&u({error:{message:w&&w.message||"CORS_UNSUPPORTED"}})})};function yL(o,u){return new xt(function(f,d){u.grant_type=="refresh_token"&&u.refresh_token||u.grant_type=="authorization_code"&&u.code?rI(o,o.l+"?key="+encodeURIComponent(o.c),function(g){g?g.error?d(sg(g)):g.access_token&&g.refresh_token?f(g):d(new O("internal-error")):d(new O("network-request-failed"))},"POST",W0(u).toString(),o.g,o.m.get()):d(new O("internal-error"))})}function oI(o,u,f,d,g,_,w){var T=Un(u+f);be(T,"key",o.c),w&&be(T,"cb",Wt().toString());var M=d=="GET";if(M)for(var q in g)g.hasOwnProperty(q)&&be(T,q,g[q]);return new xt(function(bt,zt){rI(o,T.toString(),function(Bt){Bt?Bt.error?zt(sg(Bt,_||{})):bt(Bt):zt(new O("network-request-failed"))},d,M?void 0:K0(iE(g)),o.a,o.v.get())})}function ns(o){if(o=o.email,typeof o!="string"||!ED.test(o))throw new O("invalid-email")}function sI(o){"email"in o&&ns(o)}function _L(o,u){return Pt(o,RL,{identifier:u,continueUri:Cf()?nc():"http://localhost"}).then(function(f){return f.signinMethods||[]})}function wL(o){return Pt(o,BL,{}).then(function(u){return u.authorizedDomains||[]})}function jn(o){if(!o[Sr])throw o.mfaPendingCredential?new O("multi-factor-auth-required",null,De(o)):new O("internal-error")}function Zv(o){if(o.phoneNumber||o.temporaryProof){if(!o.phoneNumber||!o.temporaryProof)throw new O("internal-error")}else{if(!o.sessionInfo)throw new O("missing-verification-id");if(!o.code)throw new O("missing-verification-code")}}Tr.prototype.zb=function(){return Pt(this,WL,{})},Tr.prototype.Bb=function(o,u){return Pt(this,cI,{idToken:o,email:u})},Tr.prototype.Cb=function(o,u){return Pt(this,lI,{idToken:o,password:u})};var bL={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};e=Tr.prototype,e.Db=function(o,u){var f={idToken:o},d=[];return $u(bL,function(g,_){var w=u[_];w===null?d.push(g):_ in u&&(f[_]=w)}),d.length&&(f.deleteAttribute=d),Pt(this,cI,f)},e.vb=function(o,u){return o={requestType:"PASSWORD_RESET",email:o},Ln(o,u),Pt(this,VL,o)},e.wb=function(o,u){return o={requestType:"EMAIL_SIGNIN",email:o},Ln(o,u),Pt(this,FL,o)},e.ub=function(o,u){return o={requestType:"VERIFY_EMAIL",idToken:o},Ln(o,u),Pt(this,UL,o)},e.Eb=function(o,u,f){return o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:o,newEmail:u},Ln(o,f),Pt(this,jL,o)};function EL(o,u){return Pt(o,GL,u)}e.fb=function(o){return Pt(this,JL,o)};function IL(o,u){return Pt(o,$L,u).then(function(f){return f.phoneSessionInfo.sessionInfo})}function aI(o){if(!o.phoneVerificationInfo)throw new O("internal-error");if(!o.phoneVerificationInfo.sessionInfo)throw new O("missing-verification-id");if(!o.phoneVerificationInfo.code)throw new O("missing-verification-code")}function TL(o,u){return Pt(o,zL,u).then(function(f){return f.phoneResponseInfo.sessionInfo})}function SL(o,u,f){return Pt(o,xL,{idToken:u,deleteProvider:f})}function tg(o){if(!o.requestUri||!o.sessionId&&!o.postBody&&!o.pendingToken)throw new O("internal-error")}function eg(o,u){return u.oauthIdToken&&u.providerId&&u.providerId.indexOf("oidc.")==0&&!u.pendingToken&&(o.sessionId?u.nonce=o.sessionId:o.postBody&&(o=new $o(o.postBody),cv(o,"nonce")&&(u.nonce=o.get("nonce")))),u}function uI(o){var u=null;if(o.needConfirmation?(o.code="account-exists-with-different-credential",u=Mf(o)):o.errorMessage=="FEDERATED_USER_ID_ALREADY_LINKED"?(o.code="credential-already-in-use",u=Mf(o)):o.errorMessage=="EMAIL_EXISTS"?(o.code="email-already-in-use",u=Mf(o)):o.errorMessage&&(u=hI(o.errorMessage)),u)throw u;jn(o)}function ng(o,u){return u.returnIdpCredential=!0,Pt(o,KL,u)}function rg(o,u){return u.returnIdpCredential=!0,Pt(o,YL,u)}function ig(o,u){return u.returnIdpCredential=!0,u.autoCreate=!1,Pt(o,QL,u)}function og(o){if(!o.oobCode)throw new O("invalid-action-code")}e.nb=function(o,u){return Pt(this,HL,{oobCode:o,newPassword:u})},e.Ra=function(o){return Pt(this,CL,{oobCode:o})},e.jb=function(o){return Pt(this,AL,{oobCode:o})};var AL={endpoint:"setAccountInfo",A:og,Z:"email",B:!0},CL={endpoint:"resetPassword",A:og,G:function(o){var u=o.requestType;if(!u||!o.email&&u!="EMAIL_SIGNIN"&&u!="VERIFY_AND_CHANGE_EMAIL")throw new O("internal-error")},B:!0},NL={endpoint:"signupNewUser",A:function(o){if(ns(o),!o.password)throw new O("weak-password")},G:jn,V:!0,B:!0},RL={endpoint:"createAuthUri",B:!0},OL={endpoint:"deleteAccount",N:["idToken"]},xL={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(o){if(!Array.isArray(o.deleteProvider))throw new O("internal-error")}},PL={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ns,G:jn,V:!0,B:!0},kL={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ns,G:jn,V:!0},DL={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:aI,G:jn,B:!0,Na:!0},LL={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:aI,G:jn,B:!0,Na:!0},ML={endpoint:"getAccountInfo"},FL={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(o){if(o.requestType!="EMAIL_SIGNIN")throw new O("internal-error");ns(o)},Z:"email",B:!0},UL={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(o){if(o.requestType!="VERIFY_EMAIL")throw new O("internal-error")},Z:"email",B:!0},jL={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(o){if(o.requestType!="VERIFY_AND_CHANGE_EMAIL")throw new O("internal-error")},Z:"email",B:!0},VL={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(o){if(o.requestType!="PASSWORD_RESET")throw new O("internal-error");ns(o)},Z:"email",B:!0},BL={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},qL={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(o){if(!o.recaptchaSiteKey)throw new O("internal-error")}},HL={endpoint:"resetPassword",A:og,Z:"email",B:!0},GL={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},cI={endpoint:"setAccountInfo",N:["idToken"],A:sI,V:!0},lI={endpoint:"setAccountInfo",N:["idToken"],A:function(o){if(sI(o),!o.password)throw new O("weak-password")},G:jn,V:!0},WL={endpoint:"signupNewUser",G:jn,V:!0,B:!0},$L={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(o){if(!o.phoneEnrollmentInfo)throw new O("internal-error");if(!o.phoneEnrollmentInfo.phoneNumber)throw new O("missing-phone-number");if(!o.phoneEnrollmentInfo.recaptchaToken)throw new O("missing-app-credential")},G:function(o){if(!o.phoneSessionInfo||!o.phoneSessionInfo.sessionInfo)throw new O("internal-error")},B:!0,Na:!0},zL={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(o){if(!o.phoneSignInInfo||!o.phoneSignInInfo.recaptchaToken)throw new O("missing-app-credential")},G:function(o){if(!o.phoneResponseInfo||!o.phoneResponseInfo.sessionInfo)throw new O("internal-error")},B:!0,Na:!0},KL={endpoint:"verifyAssertion",A:tg,Ya:eg,G:uI,V:!0,B:!0},QL={endpoint:"verifyAssertion",A:tg,Ya:eg,G:function(o){if(o.errorMessage&&o.errorMessage=="USER_NOT_FOUND")throw new O("user-not-found");if(o.errorMessage)throw hI(o.errorMessage);jn(o)},V:!0,B:!0},YL={endpoint:"verifyAssertion",A:function(o){if(tg(o),!o.idToken)throw new O("internal-error")},Ya:eg,G:uI,V:!0},XL={endpoint:"verifyCustomToken",A:function(o){if(!o.token)throw new O("invalid-custom-token")},G:jn,V:!0,B:!0},fI={endpoint:"verifyPassword",A:function(o){if(ns(o),!o.password)throw new O("wrong-password")},G:jn,V:!0,B:!0},JL={endpoint:"verifyPhoneNumber",A:Zv,G:jn,B:!0},ZL={endpoint:"verifyPhoneNumber",A:function(o){if(!o.idToken)throw new O("internal-error");Zv(o)},G:function(o){if(o.temporaryProof)throw o.code="credential-already-in-use",Mf(o);jn(o)}},tM={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:Zv,G:jn,B:!0},eM={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(o){if(!!o[Sr]^!!o.refreshToken)throw new O("internal-error")},B:!0,Na:!0};function Pt(o,u,f){if(!RD(f,u.N))return ue(new O("internal-error"));var d=!!u.Na,g=u.Ub||"POST",_;return gt(f).then(u.A).then(function(){return u.V&&(f.returnSecureToken=!0),u.B&&o.b&&typeof f.tenantId>"u"&&(f.tenantId=o.b),d?oI(o,o.i,u.endpoint,g,f,u.Hb,u.lb||!1):oI(o,o.h,u.endpoint,g,f,u.Hb,u.lb||!1)}).then(function(w){return _=w,u.Ya?u.Ya(f,_):_}).then(u.G).then(function(){if(!u.Z)return _;if(!(u.Z in _))throw new O("internal-error");return _[u.Z]})}function hI(o){return sg({error:{errors:[{message:o}],code:400,message:o}})}function sg(o,u){var f=(o.error&&o.error.errors&&o.error.errors[0]||{}).reason||"",d={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(f=d[f]?new O(d[f]):null)return f;f=o.error&&o.error.message||"",d={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},Ln(d,u||{}),u=(u=f.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<u.length?u[1]:void 0;for(var g in d)if(f.indexOf(g)===0)return new O(d[g],u);return!u&&o&&(u=ic(o)),new O("internal-error",u)}function nM(o){this.b=o,this.a=null,this.rb=rM(this)}function rM(o){return cM().then(function(){return new xt(function(u,f){ce("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:ce("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(d){function g(){clearTimeout(_),u()}o.a=d,o.a.restyle({setHideOnLeave:!1});var _=setTimeout(function(){f(Error("Network Error"))},uM.get());d.ping(g).then(g,function(){f(Error("Network Error"))})})})})}function iM(o,u){return o.rb.then(function(){return new xt(function(f){o.a.send(u.type,u,f,ce("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}function oM(o,u){o.rb.then(function(){o.a.register("authEvent",u,ce("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}var sM=new Kr(pf,"https://apis.google.com/js/api.js?onload=%{onload}"),aM=new Xi(3e4,6e4),uM=new Xi(5e3,15e3),Qf=null;function cM(){return Qf||(Qf=new xt(function(o,u){function f(){sE(),ce("gapi.load")("gapi.iframes",{callback:o,ontimeout:function(){sE(),u(Error("Network Error"))},timeout:aM.get()})}if(ce("gapi.iframes.Iframe"))o();else if(ce("gapi.load"))f();else{var d="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[d]=function(){ce("gapi.load")?f():u(Error("Network Error"))},d=Bd(sM,{onload:d}),gt(Qv(d)).o(function(){u(Error("Network Error"))})}}).o(function(o){throw Qf=null,o}))}function pI(o,u,f,d){this.l=o,this.h=u,this.i=f,this.g=d,this.f=null,this.g?(o=Un(this.g.url),o=Sf(o.c,o.a,o.g,"/emulator/auth/iframe")):o=Sf("https",this.l,null,"/__/auth/iframe"),this.a=o,be(this.a,"apiKey",this.h),be(this.a,"appName",this.i),this.b=null,this.c=[]}pI.prototype.toString=function(){return this.f?be(this.a,"v",this.f):Qr(this.a.b,"v"),this.b?be(this.a,"eid",this.b):Qr(this.a.b,"eid"),this.c.length?be(this.a,"fw",this.c.join(",")):Qr(this.a.b,"fw"),this.a.toString()};function ag(o,u,f,d,g,_){this.u=o,this.s=u,this.c=f,this.m=d,this.v=_,this.i=this.g=this.l=null,this.a=g,this.h=this.f=null}ag.prototype.yb=function(o){return this.h=o,this},ag.prototype.toString=function(){if(this.v){var o=Un(this.v.url);o=Sf(o.c,o.a,o.g,"/emulator/auth/handler")}else o=Sf("https",this.u,null,"/__/auth/handler");if(be(o,"apiKey",this.s),be(o,"appName",this.c),be(o,"authType",this.m),this.a.isOAuthProvider){var u=this.a;try{var f=at.app(this.c).auth().la()}catch{f=null}u.ob=f,be(o,"providerId",this.a.providerId),f=this.a,u=iE(f.Ib);for(var d in u)u[d]=u[d].toString();d=f.Qc,u=De(u);for(var g=0;g<d.length;g++){var _=d[g];_ in u&&delete u[_]}f.pb&&f.ob&&!u[f.pb]&&(u[f.pb]=f.ob),we(u)||be(o,"customParameters",ic(u))}if(typeof this.a.Qb=="function"&&(f=this.a.Qb(),f.length&&be(o,"scopes",f.join(","))),this.l?be(o,"redirectUrl",this.l):Qr(o.b,"redirectUrl"),this.g?be(o,"eventId",this.g):Qr(o.b,"eventId"),this.i?be(o,"v",this.i):Qr(o.b,"v"),this.b)for(var w in this.b)this.b.hasOwnProperty(w)&&!fr(o,w)&&be(o,w,this.b[w]);return this.h?be(o,"tid",this.h):Qr(o.b,"tid"),this.f?be(o,"eid",this.f):Qr(o.b,"eid"),w=ug(this.c),w.length&&be(o,"fw",w.join(",")),o.toString()};function ug(o){try{return at.app(o).auth().Ga()}catch{return[]}}function dI(o,u,f,d,g,_){this.s=o,this.g=u,this.b=f,this.f=_,this.c=d||null,this.i=g||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vI(o){var u=nc();return wL(o).then(function(f){t:{var d=Un(u),g=d.c;d=d.a;for(var _=0;_<f.length;_++){var w=f[_],T=d,M=g;if(w.indexOf("chrome-extension://")==0?T=Un(w).a==T&&M=="chrome-extension":M!="http"&&M!="https"?T=!1:bD.test(w)?T=T==w:(w=w.split(".").join("\\."),T=new RegExp("^(.+\\."+w+"|"+w+")$","i").test(T)),T){f=!0;break t}}f=!1}if(!f)throw new jv(nc())})}function gI(o){return o.m||(o.m=Af().then(function(){if(!o.u){var u=o.c,f=o.i,d=ug(o.b),g=new pI(o.s,o.g,o.b,o.f);g.f=u,g.b=f,g.c=z(d||[]),o.u=g.toString()}o.v=new nM(o.u),lM(o)})),o.m}e=dI.prototype,e.Ob=function(o,u,f){var d=new O("popup-closed-by-user"),g=new O("web-storage-unsupported"),_=this,w=!1;return this.ma().then(function(){fM(_).then(function(T){T||(o&&zo(o),u(g),w=!0)})}).o(function(){}).then(function(){if(!w)return wD(o)}).then(function(){if(!w)return ta(f).then(function(){u(d)})})},e.Xb=function(){var o=en();return!rc(o)&&!oE(o)},e.Tb=function(){return!1},e.Mb=function(o,u,f,d,g,_,w,T){if(!o)return ue(new O("popup-blocked"));if(w&&!rc())return this.ma().o(function(q){zo(o),g(q)}),d(),gt();this.a||(this.a=vI(mI(this)));var M=this;return this.a.then(function(){var q=M.ma().o(function(bt){throw zo(o),g(bt),bt});return d(),q}).then(function(){if(Fv(f),!w){var q=wc(M.s,M.g,M.b,u,f,null,_,M.c,void 0,M.i,T,M.f);X0(q,o)}}).o(function(q){throw q.code=="auth/network-request-failed"&&(M.a=null),q})};function mI(o){return o.l||(o.C=o.c?ia(o.c,ug(o.b)):null,o.l=new Tr(o.g,se(o.i),o.C),o.f&&la(o.l,o.f)),o.l}e.Nb=function(o,u,f,d){this.a||(this.a=vI(mI(this)));var g=this;return this.a.then(function(){Fv(u);var _=wc(g.s,g.g,g.b,o,u,nc(),f,g.c,void 0,g.i,d,g.f);X0(_)}).o(function(_){throw _.code=="auth/network-request-failed"&&(g.a=null),_})},e.ma=function(){var o=this;return gI(this).then(function(){return o.v.rb}).o(function(){throw o.a=null,new O("network-request-failed")})},e.$b=function(){return!0};function wc(o,u,f,d,g,_,w,T,M,q,bt,zt){return o=new ag(o,u,f,d,g,zt),o.l=_,o.g=w,o.i=T,o.b=De(M||null),o.f=q,o.yb(bt).toString()}function lM(o){if(!o.v)throw Error("IfcHandler must be initialized!");oM(o.v,function(u){var f={};if(u&&u.authEvent){var d=!1;for(u=VE(u.authEvent),f=0;f<o.h.length;f++)d=o.h[f](u)||d;return f={},f.status=d?"ACK":"ERROR",gt(f)}return f.status="ERROR",gt(f)})}function fM(o){var u={type:"webStorageSupport"};return gI(o).then(function(){return iM(o.v,u)}).then(function(f){if(f&&f.length&&typeof f[0].webStorageSupport<"u")return f[0].webStorageSupport;throw Error()})}e.Ea=function(o){this.h.push(o)},e.Sa=function(o){B(this.h,function(u){return u==o})};function yI(o){if(this.a=o||at.INTERNAL.reactNative&&at.INTERNAL.reactNative.AsyncStorage,!this.a)throw new O("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}e=yI.prototype,e.get=function(o){return gt(this.a.getItem(o)).then(function(u){return u&&sa(u)})},e.set=function(o,u){return gt(this.a.setItem(o,ic(u)))},e.U=function(o){return gt(this.a.removeItem(o))},e.ca=function(){},e.ia=function(){};function _I(o){this.b=o,this.a={},this.f=U(this.c,this)}var wI=[];function hM(){var o=Er()?self:null;if(H(wI,function(f){f.b==o&&(u=f)}),!u){var u=new _I(o);wI.push(u)}return u}_I.prototype.c=function(o){var u=o.data.eventType,f=o.data.eventId,d=this.a[u];if(d&&0<d.length){o.ports[0].postMessage({status:"ack",eventId:f,eventType:u,response:null});var g=[];H(d,function(_){g.push(gt().then(function(){return _(o.origin,o.data.data)}))}),T0(g).then(function(_){var w=[];H(_,function(T){w.push({fulfilled:T.Pb,value:T.value,reason:T.reason?T.reason.message:void 0})}),H(w,function(T){for(var M in T)typeof T[M]>"u"&&delete T[M]}),o.ports[0].postMessage({status:"done",eventId:f,eventType:u,response:w})})}};function bI(o,u,f){we(o.a)&&o.b.addEventListener("message",o.f),typeof o.a[u]>"u"&&(o.a[u]=[]),o.a[u].push(f)}function EI(o){this.a=o}EI.prototype.postMessage=function(o,u){this.a.postMessage(o,u)};function II(o){this.c=o,this.b=!1,this.a=[]}function TI(o,u,f,d){var g,_=f||{},w,T,M,q=null;if(o.b)return ue(Error("connection_unavailable"));var bt=d?800:50,zt=typeof MessageChannel<"u"?new MessageChannel:null;return new xt(function(Bt,ze){zt?(g=Math.floor(Math.random()*Math.pow(10,20)).toString(),zt.port1.start(),T=setTimeout(function(){ze(Error("unsupported_event"))},bt),w=function(Ti){Ti.data.eventId===g&&(Ti.data.status==="ack"?(clearTimeout(T),M=setTimeout(function(){ze(Error("timeout"))},3e3)):Ti.data.status==="done"?(clearTimeout(M),typeof Ti.data.response<"u"?Bt(Ti.data.response):ze(Error("unknown_error"))):(clearTimeout(T),clearTimeout(M),ze(Error("invalid_response"))))},q={messageChannel:zt,onMessage:w},o.a.push(q),zt.port1.addEventListener("message",w),o.c.postMessage({eventType:u,eventId:g,data:_},[zt.port2])):ze(Error("connection_unavailable"))}).then(function(Bt){return cg(o,q),Bt}).o(function(Bt){throw cg(o,q),Bt})}function cg(o,u){if(u){var f=u.messageChannel,d=u.onMessage;f&&(f.port1.removeEventListener("message",d),f.port1.close()),B(o.a,function(g){return g==u})}}II.prototype.close=function(){for(;0<this.a.length;)cg(this,this.a[0]);this.b=!0};function SI(){if(!hg())throw new O("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var o=this;Er()&&self?(this.v=hM(),bI(this.v,"keyChanged",function(u,f){return NI(o).then(function(d){return 0<d.length&&H(o.a,function(g){g(d)}),{keyProcessed:L(d,f.key)}})}),bI(this.v,"ping",function(){return gt(["keyChanged"])})):CD().then(function(u){(o.h=u)&&(o.g=new II(new EI(u)),TI(o.g,"ping",null,!0).then(function(f){f[0].fulfilled&&L(f[0].value,"keyChanged")&&(o.s=!0)}).o(function(){}))})}var lg;function pM(o){return new xt(function(u,f){var d=o.m.deleteDatabase("firebaseLocalStorageDb");d.onsuccess=function(){u()},d.onerror=function(g){f(Error(g.target.error))}})}function AI(o){return new xt(function(u,f){var d=o.m.open("firebaseLocalStorageDb",1);d.onerror=function(g){try{g.preventDefault()}catch{}f(Error(g.target.error))},d.onupgradeneeded=function(g){g=g.target.result;try{g.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(_){f(_)}},d.onsuccess=function(g){g=g.target.result,g.objectStoreNames.contains("firebaseLocalStorage")?u(g):pM(o).then(function(){return AI(o)}).then(function(_){u(_)}).o(function(_){f(_)})}})}function fg(o){return o.i||(o.i=AI(o)),o.i}function Yf(o,u){function f(g,_){fg(o).then(u).then(g).o(function(w){if(3<++d)_(w);else return fg(o).then(function(T){return T.close(),o.i=void 0,f(g,_)}).o(function(T){_(T)})})}var d=0;return new xt(f)}function hg(){try{return!!l.indexedDB}catch{return!1}}function bc(o){return o.objectStore("firebaseLocalStorage")}function Ec(o,u){return o.transaction(["firebaseLocalStorage"],u?"readwrite":"readonly")}function fa(o){return new xt(function(u,f){o.onsuccess=function(d){d&&d.target?u(d.target.result):u()},o.onerror=function(d){f(d.target.error)}})}e=SI.prototype,e.set=function(o,u){var f=this,d=!1;return Yf(this,function(g){return g=bc(Ec(g,!0)),fa(g.get(o))}).then(function(g){return Yf(f,function(_){if(_=bc(Ec(_,!0)),g)return g.value=u,fa(_.put(g));f.b++,d=!0;var w={};return w.fbase_key=o,w.value=u,fa(_.add(w))})}).then(function(){return f.c[o]=u,CI(f,o)}).oa(function(){d&&f.b--})};function CI(o,u){return o.g&&o.h&&AD()===o.h?TI(o.g,"keyChanged",{key:u},o.s).then(function(){}).o(function(){}):gt()}e.get=function(o){return Yf(this,function(u){return fa(bc(Ec(u,!1)).get(o))}).then(function(u){return u&&u.value})},e.U=function(o){var u=this,f=!1;return Yf(this,function(d){return f=!0,u.b++,fa(bc(Ec(d,!0)).delete(o))}).then(function(){return delete u.c[o],CI(u,o)}).oa(function(){f&&u.b--})};function NI(o){return fg(o).then(function(u){var f=bc(Ec(u,!1));return f.getAll?fa(f.getAll()):new xt(function(d,g){var _=[],w=f.openCursor();w.onsuccess=function(T){(T=T.target.result)?(_.push(T.value),T.continue()):d(_)},w.onerror=function(T){g(T.target.error)}})}).then(function(u){var f={},d=[];if(o.b==0){for(d=0;d<u.length;d++)f[u[d].fbase_key]=u[d].value;d=J0(o.c,f),o.c=f}return d})}e.ca=function(o){this.a.length==0&&dM(this),this.a.push(o)},e.ia=function(o){B(this.a,function(u){return u==o}),this.a.length==0&&RI(this)};function dM(o){function u(){o.f=setTimeout(function(){o.l=NI(o).then(function(f){0<f.length&&H(o.a,function(d){d(f)})}).then(function(){u()}).o(function(f){f.message!="STOP_EVENT"&&u()})},800)}RI(o),u()}function RI(o){o.l&&o.l.cancel("STOP_EVENT"),o.f&&(clearTimeout(o.f),o.f=null)}function OI(o){var u=this,f=null;this.a=[],this.type="indexedDB",this.c=o,this.b=gt().then(function(){if(hg()){var d=Qo(),g="__sak"+d;return lg||(lg=new SI),f=lg,f.set(g,d).then(function(){return f.get(g)}).then(function(_){if(_!==d)throw Error("indexedDB not supported!");return f.U(g)}).then(function(){return f}).o(function(){return u.c})}return u.c}).then(function(d){return u.type=d.type,d.ca(function(g){H(u.a,function(_){_(g)})}),d})}e=OI.prototype,e.get=function(o){return this.b.then(function(u){return u.get(o)})},e.set=function(o,u){return this.b.then(function(f){return f.set(o,u)})},e.U=function(o){return this.b.then(function(u){return u.U(o)})},e.ca=function(o){this.a.push(o)},e.ia=function(o){B(this.a,function(u){return u==o})};function Ic(){this.a={},this.type="inMemory"}e=Ic.prototype,e.get=function(o){return gt(this.a[o])},e.set=function(o,u){return this.a[o]=u,gt()},e.U=function(o){return delete this.a[o],gt()},e.ca=function(){},e.ia=function(){};function Xf(){if(!vM())throw Yr()=="Node"?new O("internal-error","The LocalStorage compatibility library was not found."):new O("web-storage-unsupported");this.a=xI()||at.INTERNAL.node.localStorage,this.type="localStorage"}function xI(){try{var o=l.localStorage,u=Qo();return o&&(o.setItem(u,"1"),o.removeItem(u)),o}catch{return null}}function vM(){var o=Yr()=="Node";if(o=xI()||o&&at.INTERNAL.node&&at.INTERNAL.node.localStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch{return!1}}e=Xf.prototype,e.get=function(o){var u=this;return gt().then(function(){var f=u.a.getItem(o);return sa(f)})},e.set=function(o,u){var f=this;return gt().then(function(){var d=ic(u);d===null?f.U(o):f.a.setItem(o,d)})},e.U=function(o){var u=this;return gt().then(function(){u.a.removeItem(o)})},e.ca=function(o){l.window&&lr(l.window,"storage",o)},e.ia=function(o){l.window&&Xn(l.window,"storage",o)};function pg(){this.type="nullStorage"}e=pg.prototype,e.get=function(){return gt(null)},e.set=function(){return gt()},e.U=function(){return gt()},e.ca=function(){},e.ia=function(){};function dg(){if(!gM())throw Yr()=="Node"?new O("internal-error","The SessionStorage compatibility library was not found."):new O("web-storage-unsupported");this.a=PI()||at.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function PI(){try{var o=l.sessionStorage,u=Qo();return o&&(o.setItem(u,"1"),o.removeItem(u)),o}catch{return null}}function gM(){var o=Yr()=="Node";if(o=PI()||o&&at.INTERNAL.node&&at.INTERNAL.node.sessionStorage,!o)return!1;try{return o.setItem("__sak","1"),o.removeItem("__sak"),!0}catch{return!1}}e=dg.prototype,e.get=function(o){var u=this;return gt().then(function(){var f=u.a.getItem(o);return sa(f)})},e.set=function(o,u){var f=this;return gt().then(function(){var d=ic(u);d===null?f.U(o):f.a.setItem(o,d)})},e.U=function(o){var u=this;return gt().then(function(){u.a.removeItem(o)})},e.ca=function(){},e.ia=function(){};function mM(){var o={};o.Browser=yM,o.Node=_M,o.ReactNative=wM,o.Worker=bM,this.a=o[Yr()]}var vg,yM={F:Xf,bb:dg},_M={F:Xf,bb:dg},wM={F:yI,bb:pg},bM={F:Xf,bb:pg},ha={rd:"local",NONE:"none",td:"session"};function EM(o){var u=new O("invalid-persistence-type"),f=new O("unsupported-persistence-type");t:{for(d in ha)if(ha[d]==o){var d=!0;break t}d=!1}if(!d||typeof o!="string")throw u;switch(Yr()){case"ReactNative":if(o==="session")throw f;break;case"Node":if(o!=="none")throw f;break;case"Worker":if(o==="session"||!hg()&&o!=="none")throw f;break;default:if(!vv()&&o!=="none")throw f}}function kI(){var o=!!(!oE(en())&&pv()),u=rc(),f=vv();this.m=o,this.h=u,this.l=f,this.a={},vg||(vg=new mM),o=vg;try{this.g=!fv()&&aE()||!l.indexedDB?new o.a.F:new OI(Er()?new Ic:new o.a.F)}catch{this.g=new Ic,this.h=!0}try{this.i=new o.a.bb}catch{this.i=new Ic}this.v=new Ic,this.f=U(this.Yb,this),this.b={}}var gg;function Tc(){return gg||(gg=new kI),gg}function rs(o,u){switch(u){case"session":return o.i;case"none":return o.v;default:return o.g}}function pa(o,u){return"firebase:"+o.name+(u?":"+u:"")}function IM(o,u,f){var d=pa(u,f),g=rs(o,u.F);return o.get(u,f).then(function(_){var w=null;try{w=sa(l.localStorage.getItem(d))}catch{}if(w&&!_)return l.localStorage.removeItem(d),o.set(u,w,f);w&&_&&g.type!="localStorage"&&l.localStorage.removeItem(d)})}e=kI.prototype,e.get=function(o,u){return rs(this,o.F).get(pa(o,u))};function da(o,u,f){return f=pa(u,f),u.F=="local"&&(o.b[f]=null),rs(o,u.F).U(f)}e.set=function(o,u,f){var d=pa(o,f),g=this,_=rs(this,o.F);return _.set(d,u).then(function(){return _.get(d)}).then(function(w){o.F=="local"&&(g.b[d]=w)})},e.addListener=function(o,u,f){o=pa(o,u),this.l&&(this.b[o]=l.localStorage.getItem(o)),we(this.a)&&(rs(this,"local").ca(this.f),this.h||(fv()||!aE())&&l.indexedDB||!this.l||TM(this)),this.a[o]||(this.a[o]=[]),this.a[o].push(f)},e.removeListener=function(o,u,f){o=pa(o,u),this.a[o]&&(B(this.a[o],function(d){return d==f}),this.a[o].length==0&&delete this.a[o]),we(this.a)&&(rs(this,"local").ia(this.f),mg(this))};function TM(o){mg(o),o.c=setInterval(function(){for(var u in o.a){var f=l.localStorage.getItem(u),d=o.b[u];f!=d&&(o.b[u]=f,f=new Go({type:"storage",key:u,target:window,oldValue:d,newValue:f,a:!0}),o.Yb(f))}},1e3)}function mg(o){o.c&&(clearInterval(o.c),o.c=null)}e.Yb=function(o){if(o&&o.g){var u=o.a.key;if(u==null)for(var f in this.a){var d=this.b[f];typeof d>"u"&&(d=null);var g=l.localStorage.getItem(f);g!==d&&(this.b[f]=g,this.mb(f))}else if(u.indexOf("firebase:")==0&&this.a[u]){if(typeof o.a.a<"u"?rs(this,"local").ia(this.f):mg(this),this.m){if(f=l.localStorage.getItem(u),d=o.a.newValue,d!==f)d!==null?l.localStorage.setItem(u,d):l.localStorage.removeItem(u);else if(this.b[u]===d&&typeof o.a.a>"u")return}var _=this;f=function(){(typeof o.a.a<"u"||_.b[u]!==l.localStorage.getItem(u))&&(_.b[u]=l.localStorage.getItem(u),_.mb(u))},br&&Ki&&Ki==10&&l.localStorage.getItem(u)!==o.a.newValue&&o.a.newValue!==o.a.oldValue?setTimeout(f,10):f()}}else H(o,U(this.mb,this))},e.mb=function(o){this.a[o]&&H(this.a[o],function(u){u()})};function SM(o){this.a=o,this.b=Tc()}var yg={name:"authEvent",F:"local"};function AM(o){return o.b.get(yg,o.a).then(function(u){return VE(u)})}function CM(){this.a=Tc()}function NM(){this.b=-1}function Jf(o,u){this.b=DI,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=o,this.h=u,this.l=l.Int32Array?new Int32Array(64):Array(64),Zf===void 0&&(l.Int32Array?Zf=new Int32Array(FI):Zf=FI),this.reset()}var Zf;lt(Jf,NM);for(var DI=64,RM=DI-1,LI=[],_g=0;_g<RM;_g++)LI[_g]=0;var MI=et(128,LI);Jf.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):z(this.h)};function wg(o){for(var u=o.f,f=o.l,d=0,g=0;g<u.length;)f[d++]=u[g]<<24|u[g+1]<<16|u[g+2]<<8|u[g+3],g=4*d;for(u=16;64>u;u++){g=f[u-15]|0,d=f[u-2]|0;var _=(f[u-16]|0)+((g>>>7|g<<25)^(g>>>18|g<<14)^g>>>3)|0,w=(f[u-7]|0)+((d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10)|0;f[u]=_+w|0}d=o.a[0]|0,g=o.a[1]|0;var T=o.a[2]|0,M=o.a[3]|0,q=o.a[4]|0,bt=o.a[5]|0,zt=o.a[6]|0;for(_=o.a[7]|0,u=0;64>u;u++){var Bt=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&g^d&T^g&T)|0;w=q&bt^~q&zt,_=_+((q>>>6|q<<26)^(q>>>11|q<<21)^(q>>>25|q<<7))|0,w=w+(Zf[u]|0)|0,w=_+(w+(f[u]|0)|0)|0,_=zt,zt=bt,bt=q,q=M+w|0,M=T,T=g,g=d,d=w+Bt|0}o.a[0]=o.a[0]+d|0,o.a[1]=o.a[1]+g|0,o.a[2]=o.a[2]+T|0,o.a[3]=o.a[3]+M|0,o.a[4]=o.a[4]+q|0,o.a[5]=o.a[5]+bt|0,o.a[6]=o.a[6]+zt|0,o.a[7]=o.a[7]+_|0}function bg(o,u,f){f===void 0&&(f=u.length);var d=0,g=o.c;if(typeof u=="string")for(;d<f;)o.f[g++]=u.charCodeAt(d++),g==o.b&&(wg(o),g=0);else if(b(u))for(;d<f;){var _=u[d++];if(!(typeof _=="number"&&0<=_&&255>=_&&_==(_|0)))throw Error("message must be a byte array");o.f[g++]=_,g==o.b&&(wg(o),g=0)}else throw Error("message must be string or array");o.c=g,o.g+=f}var FI=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function UI(){Jf.call(this,8,OM)}lt(UI,Jf);var OM=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function jI(o,u,f,d,g,_){this.v=o,this.i=u,this.l=f,this.m=d||null,this.u=g||null,this.s=_,this.h=u+":"+f,this.C=new CM,this.g=new SM(this.h),this.f=null,this.b=[],this.a=this.c=null}function th(o){return new O("invalid-cordova-configuration",o)}e=jI.prototype,e.ma=function(){return this.Ia?this.Ia:this.Ia=ID().then(function(){if(typeof ce("universalLinks.subscribe",l)!="function")throw th("cordova-universal-links-plugin-fix is not installed");if(typeof ce("BuildInfo.packageName",l)>"u")throw th("cordova-plugin-buildinfo is not installed");if(typeof ce("cordova.plugins.browsertab.openUrl",l)!="function")throw th("cordova-plugin-browsertab is not installed");if(typeof ce("cordova.InAppBrowser.open",l)!="function")throw th("cordova-plugin-inappbrowser is not installed")},function(){throw new O("cordova-not-ready")})};function xM(){for(var o=20,u=[];0<o;)u.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),o--;return u.join("")}function PM(o){var u=new UI;bg(u,o),o=[];var f=8*u.g;56>u.c?bg(u,MI,56-u.c):bg(u,MI,u.b-(u.c-56));for(var d=63;56<=d;d--)u.f[d]=f&255,f/=256;for(wg(u),d=f=0;d<u.i;d++)for(var g=24;0<=g;g-=8)o[f++]=u.a[d]>>g&255;return HD(o)}e.Ob=function(o,u){return u(new O("operation-not-supported-in-this-environment")),gt()},e.Mb=function(){return ue(new O("operation-not-supported-in-this-environment"))},e.$b=function(){return!1},e.Xb=function(){return!0},e.Tb=function(){return!0},e.Nb=function(o,u,f,d){if(this.c)return ue(new O("redirect-operation-pending"));var g=this,_=l.document,w=null,T=null,M=null,q=null;return this.c=gt().then(function(){return Fv(u),BI(g)}).then(function(){return kM(g,o,u,f,d)}).then(function(){return new xt(function(bt,zt){T=function(){var Bt=ce("cordova.plugins.browsertab.close",l);return bt(),typeof Bt=="function"&&Bt(),g.a&&typeof g.a.close=="function"&&(g.a.close(),g.a=null),!1},g.Ea(T),M=function(){w||(w=ta(2e3).then(function(){zt(new O("redirect-cancelled-by-user"))}))},q=function(){gv()&&M()},_.addEventListener("resume",M,!1),en().toLowerCase().match(/android/)||_.addEventListener("visibilitychange",q,!1)}).o(function(bt){return Eg(g).then(function(){throw bt})})}).oa(function(){M&&_.removeEventListener("resume",M,!1),q&&_.removeEventListener("visibilitychange",q,!1),w&&w.cancel(),T&&g.Sa(T),g.c=null})};function kM(o,u,f,d,g){var _=xM(),w=new Ir(u,d,null,_,new O("no-auth-event"),null,g),T=ce("BuildInfo.packageName",l);if(typeof T!="string")throw new O("invalid-cordova-configuration");var M=ce("BuildInfo.displayName",l),q={};if(en().toLowerCase().match(/iphone|ipad|ipod/))q.ibi=T;else if(en().toLowerCase().match(/android/))q.apn=T;else return ue(new O("operation-not-supported-in-this-environment"));M&&(q.appDisplayName=M),_=PM(_),q.sessionId=_;var bt=wc(o.v,o.i,o.l,u,f,null,d,o.m,q,o.u,g,o.s);return o.ma().then(function(){var zt=o.h;return o.C.a.set(yg,w.w(),zt)}).then(function(){var zt=ce("cordova.plugins.browsertab.isAvailable",l);if(typeof zt!="function")throw new O("invalid-cordova-configuration");var Bt=null;zt(function(ze){if(ze){if(Bt=ce("cordova.plugins.browsertab.openUrl",l),typeof Bt!="function")throw new O("invalid-cordova-configuration");Bt(bt)}else{if(Bt=ce("cordova.InAppBrowser.open",l),typeof Bt!="function")throw new O("invalid-cordova-configuration");ze=en(),o.a=Bt(bt,ze.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||ze.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}function VI(o,u){for(var f=0;f<o.b.length;f++)try{o.b[f](u)}catch{}}function BI(o){return o.f||(o.f=o.ma().then(function(){return new xt(function(u){function f(d){return u(d),o.Sa(f),!1}o.Ea(f),DM(o)})})),o.f}function Eg(o){var u=null;return AM(o.g).then(function(f){return u=f,f=o.g,da(f.b,yg,f.a)}).then(function(){return u})}function DM(o){function u(w){d=!0,g&&g.cancel(),Eg(o).then(function(T){var M=f;if(T&&w&&w.url){var q=null;M=PE(w.url),M.indexOf("/__/auth/callback")!=-1&&(q=Un(M),q=sa(fr(q,"firebaseError")||null),q=(q=typeof q=="object"?$r(q):null)?new Ir(T.c,T.b,null,null,q,null,T.T()):new Ir(T.c,T.b,M,T.f,null,null,T.T())),M=q||f}VI(o,M)})}var f=new Ir("unknown",null,null,null,new O("no-auth-event")),d=!1,g=ta(500).then(function(){return Eg(o).then(function(){d||VI(o,f)})}),_=l.handleOpenURL;l.handleOpenURL=function(w){if(w.toLowerCase().indexOf(ce("BuildInfo.packageName",l).toLowerCase()+"://")==0&&u({url:w}),typeof _=="function")try{_(w)}catch(T){console.error(T)}},Uv||(Uv=new XD),JD(u)}e.Ea=function(o){this.b.push(o),BI(this).o(function(u){u.code==="auth/invalid-cordova-configuration"&&(u=new Ir("unknown",null,null,null,new O("no-auth-event")),o(u))})},e.Sa=function(o){B(this.b,function(u){return u==o})};function LM(o){this.a=o,this.b=Tc()}var Ig={name:"pendingRedirect",F:"session"};function MM(o){return o.b.set(Ig,"pending",o.a)}function Tg(o){return da(o.b,Ig,o.a)}function FM(o){return o.b.get(Ig,o.a).then(function(u){return u=="pending"})}function eh(o,u,f,d){this.i={},this.u=0,this.D=o,this.v=u,this.m=f,this.J=d,this.h=[],this.f=!1,this.l=U(this.s,this),this.b=new nh,this.C=new ZI,this.g=new LM(QI(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=qI(this.D,this.v,this.m,Ft,this.J)}function qI(o,u,f,d,g){var _=at.SDK_VERSION||null;return hv()?new jI(o,u,f,_,d,g):new dI(o,u,f,_,d,g)}eh.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=qI(this.D,this.v,this.m,null,this.J),this.i={}};function HI(o){o.f||(o.f=!0,o.a.Ea(o.l));var u=o.a;return o.a.ma().o(function(f){throw o.a==u&&o.reset(),f})}function GI(o){o.a.Xb()&&HI(o).o(function(u){var f=new Ir("unknown",null,null,null,new O("operation-not-supported-in-this-environment"));Ag(u)&&o.s(f)}),o.a.Tb()||XI(o.b)}function Sg(o,u){L(o.h,u)||o.h.push(u),o.f||FM(o.g).then(function(f){f?Tg(o.g).then(function(){HI(o).o(function(d){var g=new Ir("unknown",null,null,null,new O("operation-not-supported-in-this-environment"));Ag(d)&&o.s(g)})}):GI(o)}).o(function(){GI(o)})}function WI(o,u){B(o.h,function(f){return f==u})}eh.prototype.s=function(o){if(!o)throw new O("invalid-auth-event");if(6e5<=Wt()-this.u&&(this.i={},this.u=0),o&&o.getUid()&&this.i.hasOwnProperty(o.getUid()))return!1;for(var u=!1,f=0;f<this.h.length;f++){var d=this.h[f];if(d.Fb(o.c,o.b)){(u=this.c[o.c])&&(u.h(o,d),o&&(o.f||o.b)&&(this.i[o.getUid()]=!0,this.u=Wt())),u=!0;break}}return XI(this.b),u};var UM=new Xi(2e3,1e4),jM=new Xi(3e4,6e4);eh.prototype.qa=function(){return this.b.qa()};function $I(o,u,f,d,g,_,w){return o.a.Mb(u,f,d,function(){o.f||(o.f=!0,o.a.Ea(o.l))},function(){o.reset()},g,_,w)}function Ag(o){return!!(o&&o.code=="auth/cordova-not-ready")}function zI(o,u,f,d,g){var _;return MM(o.g).then(function(){return o.a.Nb(u,f,d,g).o(function(w){if(Ag(w))throw new O("operation-not-supported-in-this-environment");return _=w,Tg(o.g).then(function(){throw _})}).then(function(){return o.a.$b()?new xt(function(){}):Tg(o.g).then(function(){return o.qa()}).then(function(){}).o(function(){})})})}function KI(o,u,f,d,g){return o.a.Ob(d,function(_){u.na(f,null,_,g)},UM.get())}var Cg={};function QI(o,u,f){return o=o+":"+u,f&&(o=o+":"+f.url),o}function YI(o,u,f,d){var g=QI(u,f,d);return Cg[g]||(Cg[g]=new eh(o,u,f,d)),Cg[g]}function nh(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}nh.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},nh.prototype.h=function(o,u){if(o){this.reset(),this.g=!0;var f=o.c,d=o.b,g=o.a&&o.a.code=="auth/web-storage-unsupported",_=o.a&&o.a.code=="auth/operation-not-supported-in-this-environment";this.i=!(!g&&!_),f!="unknown"||g||_?o.a?(is(this,!0,null,o.a),gt()):u.Fa(f,d)?VM(this,o,u):ue(new O("invalid-auth-event")):(is(this,!1,null,null),gt())}else ue(new O("invalid-auth-event"))};function XI(o){o.g||(o.g=!0,is(o,!1,null,null))}function rh(o){o.g&&!o.i&&is(o,!1,null,null)}function VM(o,u,f){f=f.Fa(u.c,u.b);var d=u.g,g=u.f,_=u.i,w=u.T(),T=!!u.c.match(/Redirect$/);f(d,g,w,_).then(function(M){is(o,T,M,null)}).o(function(M){is(o,T,null,M)})}function BM(o,u){if(o.b=function(){return ue(u)},o.c.length)for(var f=0;f<o.c.length;f++)o.c[f](u)}function JI(o,u){if(o.b=function(){return gt(u)},o.f.length)for(var f=0;f<o.f.length;f++)o.f[f](u)}function is(o,u,f,d){u?d?BM(o,d):JI(o,f):JI(o,{user:null}),o.f=[],o.c=[]}nh.prototype.qa=function(){var o=this;return new xt(function(u,f){o.b?o.b().then(u,f):(o.f.push(u),o.c.push(f),qM(o))})};function qM(o){var u=new O("timeout");o.a&&o.a.cancel(),o.a=ta(jM.get()).then(function(){o.b||(o.g=!0,is(o,!0,null,u))})}function ZI(){}ZI.prototype.h=function(o,u){if(o){var f=o.c,d=o.b;o.a?(u.na(o.c,null,o.a,o.b),gt()):u.Fa(f,d)?HM(o,u):ue(new O("invalid-auth-event"))}else ue(new O("invalid-auth-event"))};function HM(o,u){var f=o.b,d=o.c;u.Fa(d,f)(o.g,o.f,o.T(),o.i).then(function(g){u.na(d,g,null,f)}).o(function(g){u.na(d,null,g,f)})}function tT(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(o){this.ib=o},enumerable:!1})}function Ng(o,u){this.a=u,ot(this,"verificationId",o)}Ng.prototype.confirm=function(o){return o=jE(this.verificationId,o),this.a(o)};function Rg(o,u,f,d){return new Ei(o).fb(u,f).then(function(g){return new Ng(g,d)})}function GM(o){var u=TE(o);if(!(u&&u.exp&&u.auth_time&&u.iat))throw new O("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");En(this,{token:o,expirationTime:oc(1e3*u.exp),authTime:oc(1e3*u.auth_time),issuedAtTime:oc(1e3*u.iat),signInProvider:u.firebase&&u.firebase.sign_in_provider?u.firebase.sign_in_provider:null,signInSecondFactor:u.firebase&&u.firebase.sign_in_second_factor?u.firebase.sign_in_second_factor:null,claims:u})}function Og(o,u,f){var d=u&&u[nT];if(!d)throw new O("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=o,this.f=De(u),this.g=f,this.c=new Df(null,d),this.b=[];var g=this;H(u[eT]||[],function(_){(_=Ev(_))&&g.b.push(_)}),ot(this,"auth",this.a),ot(this,"session",this.c),ot(this,"hints",this.b)}var eT="mfaInfo",nT="mfaPendingCredential";Og.prototype.Rc=function(o){var u=this;return o.sb(this.a.a,this.c).then(function(f){var d=De(u.f);return delete d[eT],delete d[nT],Ln(d,f),u.g(d)})};function xg(o,u,f,d){O.call(this,"multi-factor-auth-required",d,u),this.b=new Og(o,u,f),ot(this,"resolver",this.b)}lt(xg,O);function rT(o,u,f){if(o&&I(o.serverResponse)&&o.code==="auth/multi-factor-auth-required")try{return new xg(u,o.serverResponse,f,o.message)}catch{}return null}function iT(){}iT.prototype.sb=function(o,u,f){return u.type==cc?WM(this,o,u,f):$M(this,o,u)};function WM(o,u,f,d){return f.Ha().then(function(g){return g={idToken:g},typeof d<"u"&&(g.displayName=d),Ln(g,{phoneVerificationInfo:lc(o.a)}),Pt(u,DL,g)})}function $M(o,u,f){return f.Ha().then(function(d){return d={mfaPendingCredential:d},Ln(d,{phoneVerificationInfo:lc(o.a)}),Pt(u,LL,d)})}function Pg(o){ot(this,"factorId",o.fa),this.a=o}lt(Pg,iT);function oT(o){if(Pg.call(this,o),this.a.fa!=Ei.PROVIDER_ID)throw new O("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}lt(oT,Pg);function va(o,u){Fn.call(this,o);for(var f in u)this[f]=u[f]}lt(va,Fn);function kg(o,u){this.a=o,this.b=[],this.c=U(this.yc,this),lr(this.a,"userReloaded",this.c);var f=[];u&&u.multiFactor&&u.multiFactor.enrolledFactors&&H(u.multiFactor.enrolledFactors,function(d){var g=null,_={};if(d){d.uid&&(_[Tv]=d.uid),d.displayName&&(_[cE]=d.displayName),d.enrollmentTime&&(_[Iv]=new Date(d.enrollmentTime).toISOString()),d.phoneNumber&&(_[Sv]=d.phoneNumber);try{g=new sc(_)}catch{}d=g}else d=null;d&&f.push(d)}),ih(this,f)}function zM(o){var u=[];return H(o.mfaInfo||[],function(f){(f=Ev(f))&&u.push(f)}),u}e=kg.prototype,e.yc=function(o){ih(this,zM(o.hd))};function ih(o,u){o.b=u,ot(o,"enrolledFactors",u)}e.Rb=function(){return this.a.I().then(function(o){return new Df(o,null)})},e.fc=function(o,u){var f=this,d=this.a.a;return this.Rb().then(function(g){return o.sb(d,g,u)}).then(function(g){return Zr(f.a,g),f.a.reload()})},e.bd=function(o){var u=this,f=typeof o=="string"?o:o.uid,d=this.a.a;return this.a.I().then(function(g){return Pt(d,eM,{idToken:g,mfaEnrollmentId:f})}).then(function(g){var _=Vt(u.b,function(w){return w.uid!=f});return ih(u,_),Zr(u.a,g),u.a.reload().o(function(w){if(w.code!="auth/user-token-expired")throw w})})},e.w=function(){return{multiFactor:{enrolledFactors:S(this.b,function(o){return o.w()})}}};function Dg(o,u,f){if(this.h=o,this.i=u,this.g=f,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}Dg.prototype.start=function(){this.a=this.c,Lg(this,!0)};function KM(o,u){return u?(o.a=o.c,o.g()):(u=o.a,o.a*=2,o.a>o.f&&(o.a=o.f),u)}function Lg(o,u){o.stop(),o.b=ta(KM(o,u)).then(function(){return SD()}).then(function(){return o.h()}).then(function(){Lg(o,!0)}).o(function(f){o.i(f)&&Lg(o,!1)})}Dg.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)};function Mg(o){this.f=o,this.b=this.a=null,this.c=Date.now()}Mg.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}};function sT(o,u){typeof u>"u"&&(o.b?(u=o.b,u=u.a-u.g):u=0),o.c=Date.now()+1e3*u}function aT(o,u){o.b=Pf(u[Sr]||""),o.a=u.refreshToken,u=u.expiresIn,sT(o,typeof u<"u"?Number(u):void 0)}function QM(o,u){o.b=u.b,o.a=u.a,o.c=u.c}function YM(o,u){return yL(o.f,u).then(function(f){return o.b=Pf(f.access_token),o.a=f.refresh_token,sT(o,f.expires_in),{accessToken:o.b.toString(),refreshToken:o.a}}).o(function(f){throw f.code=="auth/user-token-expired"&&(o.a=null),f})}Mg.prototype.getToken=function(o){return o=!!o,this.b&&!this.a?ue(new O("user-token-expired")):o||!this.b||Date.now()>this.c-3e4?this.a?YM(this,{grant_type:"refresh_token",refresh_token:this.a}):gt(null):gt({accessToken:this.b.toString(),refreshToken:this.a})};function oh(o,u){this.a=o||null,this.b=u||null,En(this,{lastSignInTime:oc(u||null),creationTime:oc(o||null)})}function XM(o){return new oh(o.a,o.b)}oh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}};function JM(o,u,f,d,g,_){En(this,{uid:o,displayName:d||null,photoURL:g||null,email:f||null,phoneNumber:_||null,providerId:u})}function Zn(o,u,f){this.J=[],this.l=o.apiKey,this.m=o.appName,this.s=o.authDomain||null;var d=at.SDK_VERSION?ia(at.SDK_VERSION):null;this.a=new Tr(this.l,se(Ft),d),o.emulatorConfig&&la(this.a,o.emulatorConfig),this.b=new Mg(this.a),qg(this,u[Sr]),aT(this.b,u),ot(this,"refreshToken",this.b.a),cT(this,f||{}),bn.call(this),this.R=!1,this.s&&Ko()&&(this.i=YI(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=ZM(this),this.aa=U(this.hb,this);var g=this;this.ya=null,this.Oa=function(_){g.wa(_.h)},this.ja=null,this.Aa=function(_){la(g.a,_.c)},this.X=null,this.$=[],this.Ba=function(_){Sc(g,_.f)},this.ba=null,this.O=new kg(this,f),ot(this,"multiFactor",this.O)}lt(Zn,bn),Zn.prototype.wa=function(o){this.ya=o,eI(this.a,o)},Zn.prototype.la=function(){return this.ya};function Fg(o,u){o.ja&&Xn(o.ja,"languageCodeChanged",o.Oa),(o.ja=u)&&lr(u,"languageCodeChanged",o.Oa)}function Ug(o,u){o.X&&Xn(o.X,"emulatorConfigChanged",o.Aa),(o.X=u)&&lr(u,"emulatorConfigChanged",o.Aa)}function Sc(o,u){o.$=u,nI(o.a,at.SDK_VERSION?ia(at.SDK_VERSION,o.$):null)}Zn.prototype.Ga=function(){return z(this.$)};function jg(o,u){o.ba&&Xn(o.ba,"frameworkChanged",o.Ba),(o.ba=u)&&lr(u,"frameworkChanged",o.Ba)}Zn.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())};function Vg(o){try{return at.app(o.m).auth()}catch{throw new O("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+o.m+"'!")}}function ZM(o){return new Dg(function(){return o.I(!0)},function(u){return!!(u&&u.code=="auth/network-request-failed")},function(){var u=o.b.c-Date.now()-3e5;return 0<u?u:0})}function uT(o){o.D||o.u.b||(o.u.start(),Xn(o,"tokenChanged",o.aa),lr(o,"tokenChanged",o.aa))}function Bg(o){Xn(o,"tokenChanged",o.aa),o.u.stop()}function qg(o,u){o.za=u,ot(o,"_lat",u)}function tF(o,u){B(o.S,function(f){return f==u})}function os(o){for(var u=[],f=0;f<o.S.length;f++)u.push(o.S[f](o));return T0(u).then(function(){return o})}function Ac(o){o.i&&!o.R&&(o.R=!0,Sg(o.i,o))}function cT(o,u){En(o,{uid:u.uid,displayName:u.displayName||null,photoURL:u.photoURL||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,isAnonymous:u.isAnonymous||!1,tenantId:u.tenantId||null,metadata:new oh(u.createdAt,u.lastLoginAt),providerData:[]}),o.a.b=o.tenantId}ot(Zn.prototype,"providerId","firebase");function lT(){}function Hg(o){return gt().then(function(){if(o.D)throw new O("app-deleted")})}function Gg(o){return S(o.providerData,function(u){return u.providerId})}function Wg(o,u){u&&(fT(o,u.providerId),o.providerData.push(u))}function fT(o,u){B(o.providerData,function(f){return f.providerId==u})}function to(o,u,f){(u!="uid"||f)&&o.hasOwnProperty(u)&&ot(o,u,f)}function sh(o,u){o!=u&&(En(o,{uid:u.uid,displayName:u.displayName,photoURL:u.photoURL,email:u.email,emailVerified:u.emailVerified,phoneNumber:u.phoneNumber,isAnonymous:u.isAnonymous,tenantId:u.tenantId,providerData:[]}),u.metadata?ot(o,"metadata",XM(u.metadata)):ot(o,"metadata",new oh),H(u.providerData,function(f){Wg(o,f)}),QM(o.b,u.b),ot(o,"refreshToken",o.b.a),ih(o.O,u.O.b))}e=Zn.prototype,e.reload=function(){var o=this;return Le(this,Hg(this).then(function(){return $g(o).then(function(){return os(o)}).then(lT)}))};function $g(o){return o.I().then(function(u){var f=o.isAnonymous;return eF(o,u).then(function(){return f||to(o,"isAnonymous",!1),u})})}e.oc=function(o){return this.I(o).then(function(u){return new GM(u)})},e.I=function(o){var u=this;return Le(this,Hg(this).then(function(){return u.b.getToken(o)}).then(function(f){if(!f)throw new O("internal-error");return f.accessToken!=u.za&&(qg(u,f.accessToken),u.dispatchEvent(new va("tokenChanged"))),to(u,"refreshToken",f.refreshToken),f.accessToken}))};function Zr(o,u){u[Sr]&&o.za!=u[Sr]&&(aT(o.b,u),o.dispatchEvent(new va("tokenChanged")),qg(o,u[Sr]),to(o,"refreshToken",o.b.a))}function eF(o,u){return Pt(o.a,ML,{idToken:u}).then(U(o.Kc,o))}e.Kc=function(o){if(o=o.users,!o||!o.length)throw new O("internal-error");o=o[0],cT(this,{uid:o.localId,displayName:o.displayName,photoURL:o.photoUrl,email:o.email,emailVerified:!!o.emailVerified,phoneNumber:o.phoneNumber,lastLoginAt:o.lastLoginAt,createdAt:o.createdAt,tenantId:o.tenantId});for(var u=nF(o),f=0;f<u.length;f++)Wg(this,u[f]);to(this,"isAnonymous",!(this.email&&o.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new va("userReloaded",{hd:o}))};function nF(o){return(o=o.providerUserInfo)&&o.length?S(o,function(u){return new JM(u.rawId,u.providerId,u.email,u.displayName,u.photoUrl,u.phoneNumber)}):[]}e.Lc=function(o){return mv("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(o)},e.tb=function(o){var u=this,f=null;return Le(this,o.c(this.a,this.uid).then(function(d){return Zr(u,d),f=Cc(u,d,"reauthenticate"),u.h=null,u.reload()}).then(function(){return f}),!0)};function ah(o,u){return $g(o).then(function(){if(L(Gg(o),u))return os(o).then(function(){throw new O("provider-already-linked")})})}e.Cc=function(o){return mv("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(o)},e.qb=function(o){var u=this,f=null;return Le(this,ah(this,o.providerId).then(function(){return u.I()}).then(function(d){return o.b(u.a,d)}).then(function(d){return f=Cc(u,d,"link"),hT(u,d)}).then(function(){return f}))},e.Dc=function(o,u){var f=this;return Le(this,ah(this,"phone").then(function(){return Rg(Vg(f),o,u,U(f.qb,f))}))},e.Mc=function(o,u){var f=this;return Le(this,gt().then(function(){return Rg(Vg(f),o,u,U(f.tb,f))}),!0)};function Cc(o,u,f){var d=Mv(u);return u=AE(u),Xr({user:o,credential:d,additionalUserInfo:u,operationType:f})}function hT(o,u){return Zr(o,u),o.reload().then(function(){return o})}e.Bb=function(o){var u=this;return Le(this,this.I().then(function(f){return u.a.Bb(f,o)}).then(function(f){return Zr(u,f),u.reload()}))},e.ed=function(o){var u=this;return Le(this,this.I().then(function(f){return o.b(u.a,f)}).then(function(f){return Zr(u,f),u.reload()}))},e.Cb=function(o){var u=this;return Le(this,this.I().then(function(f){return u.a.Cb(f,o)}).then(function(f){return Zr(u,f),u.reload()}))},e.Db=function(o){if(o.displayName===void 0&&o.photoURL===void 0)return Hg(this);var u=this;return Le(this,this.I().then(function(f){return u.a.Db(f,{displayName:o.displayName,photoUrl:o.photoURL})}).then(function(f){return Zr(u,f),to(u,"displayName",f.displayName||null),to(u,"photoURL",f.photoUrl||null),H(u.providerData,function(d){d.providerId==="password"&&(ot(d,"displayName",u.displayName),ot(d,"photoURL",u.photoURL))}),os(u)}).then(lT))},e.cd=function(o){var u=this;return Le(this,$g(this).then(function(f){return L(Gg(u),o)?SL(u.a,f,[o]).then(function(d){var g={};return H(d.providerUserInfo||[],function(_){g[_.providerId]=!0}),H(Gg(u),function(_){g[_]||fT(u,_)}),g[Ei.PROVIDER_ID]||ot(u,"phoneNumber",null),os(u)}):os(u).then(function(){throw new O("no-such-provider")})}))},e.delete=function(){var o=this;return Le(this,this.I().then(function(u){return Pt(o.a,OL,{idToken:u})}).then(function(){o.dispatchEvent(new va("userDeleted"))})).then(function(){for(var u=0;u<o.J.length;u++)o.J[u].cancel("app-deleted");Fg(o,null),Ug(o,null),jg(o,null),o.J=[],o.D=!0,Bg(o),ot(o,"refreshToken",null),o.i&&WI(o.i,o)})},e.Fb=function(o,u){return!!(o=="linkViaPopup"&&(this.g||null)==u&&this.f||o=="reauthViaPopup"&&(this.g||null)==u&&this.f||o=="linkViaRedirect"&&(this.ga||null)==u||o=="reauthViaRedirect"&&(this.ga||null)==u)},e.na=function(o,u,f,d){o!="linkViaPopup"&&o!="reauthViaPopup"||d!=(this.g||null)||(f&&this.C?this.C(f):u&&!f&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,u){return o=="linkViaPopup"&&u==(this.g||null)?U(this.Kb,this):o=="reauthViaPopup"&&u==(this.g||null)?U(this.Lb,this):o=="linkViaRedirect"&&(this.ga||null)==u?U(this.Kb,this):o=="reauthViaRedirect"&&(this.ga||null)==u?U(this.Lb,this):null},e.Ec=function(o){var u=this;return pT(this,"linkViaPopup",o,function(){return ah(u,o.providerId).then(function(){return os(u)})},!1)},e.Nc=function(o){return pT(this,"reauthViaPopup",o,function(){return gt()},!0)};function pT(o,u,f,d,g){if(!Ko())return ue(new O("operation-not-supported-in-this-environment"));if(o.h&&!g)return ue(o.h);var _=Ov(f.providerId),w=Qo(o.uid+":::"),T=null;(!rc()||pv())&&o.s&&f.isOAuthProvider&&(T=wc(o.s,o.l,o.m,u,f,null,w,at.SDK_VERSION||null,null,null,o.tenantId));var M=tE(T,_&&_.ua,_&&_.ta);return d=d().then(function(){if(vT(o),!g)return o.I().then(function(){})}).then(function(){return $I(o.i,M,u,f,w,!!T,o.tenantId)}).then(function(){return new xt(function(q,bt){o.na(u,null,new O("cancelled-popup-request"),o.g||null),o.f=q,o.C=bt,o.g=w,o.c=KI(o.i,o,u,M,w)})}).then(function(q){return M&&zo(M),q?Xr(q):null}).o(function(q){throw M&&zo(M),q}),Le(o,d,g)}e.Fc=function(o){var u=this;return dT(this,"linkViaRedirect",o,function(){return ah(u,o.providerId)},!1)},e.Oc=function(o){return dT(this,"reauthViaRedirect",o,function(){return gt()},!0)};function dT(o,u,f,d,g){if(!Ko())return ue(new O("operation-not-supported-in-this-environment"));if(o.h&&!g)return ue(o.h);var _=null,w=Qo(o.uid+":::");return d=d().then(function(){if(vT(o),!g)return o.I().then(function(){})}).then(function(){return o.ga=w,os(o)}).then(function(T){return o.ha&&(T=o.ha,T=T.b.set(zg,o.w(),T.a)),T}).then(function(){return zI(o.i,u,f,w,o.tenantId)}).o(function(T){if(_=T,o.ha)return mT(o.ha);throw _}).then(function(){if(_)throw _}),Le(o,d,g)}function vT(o){if(!o.i||!o.R)throw o.i&&!o.R?new O("internal-error"):new O("auth-domain-config-required")}e.Kb=function(o,u,f,d){var g=this;this.c&&(this.c.cancel(),this.c=null);var _=null;return f=this.I().then(function(w){return rg(g.a,{requestUri:o,postBody:d,sessionId:u,idToken:w})}).then(function(w){return _=Cc(g,w,"link"),hT(g,w)}).then(function(){return _}),Le(this,f)},e.Lb=function(o,u,f,d){var g=this;this.c&&(this.c.cancel(),this.c=null);var _=null,w=gt().then(function(){return ua(ig(g.a,{requestUri:o,sessionId:u,postBody:d,tenantId:f}),g.uid)}).then(function(T){return _=Cc(g,T,"reauthenticate"),Zr(g,T),g.h=null,g.reload()}).then(function(){return _});return Le(this,w,!0)},e.ub=function(o){var u=this,f=null;return Le(this,this.I().then(function(d){return f=d,typeof o>"u"||we(o)?{}:Of(new Rf(o))}).then(function(d){return u.a.ub(f,d)}).then(function(d){if(u.email!=d)return u.reload()}).then(function(){}))},e.Eb=function(o,u){var f=this,d=null;return Le(this,this.I().then(function(g){return d=g,typeof u>"u"||we(u)?{}:Of(new Rf(u))}).then(function(g){return f.a.Eb(d,o,g)}).then(function(g){if(f.email!=g)return f.reload()}).then(function(){}))};function Le(o,u,f){var d=rF(o,u,f);return o.J.push(d),d.oa(function(){V(o.J,d)}),d.o(function(g){var _=null;throw g&&g.code==="auth/multi-factor-auth-required"&&(_=rT(g.w(),Vg(o),U(o.jc,o))),_||g})}e.jc=function(o){var u=null,f=this;return o=ua(gt(o),f.uid).then(function(d){return u=Cc(f,d,"reauthenticate"),Zr(f,d),f.h=null,f.reload()}).then(function(){return u}),Le(this,o,!0)};function rF(o,u,f){return o.h&&!f?(u.cancel(),ue(o.h)):u.o(function(d){throw!d||d.code!="auth/user-disabled"&&d.code!="auth/user-token-expired"||(o.h||o.dispatchEvent(new va("userInvalidated")),o.h=d),d})}e.toJSON=function(){return this.w()},e.w=function(){var o={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&Ln(o,this.metadata.w()),H(this.providerData,function(u){o.providerData.push(ND(u))}),Ln(o,this.O.w()),o};function gT(o){if(!o.apiKey)return null;var u={apiKey:o.apiKey,authDomain:o.authDomain,appName:o.appName,emulatorConfig:o.emulatorConfig},f={};if(o.stsTokenManager&&o.stsTokenManager.accessToken){f[Sr]=o.stsTokenManager.accessToken,f.refreshToken=o.stsTokenManager.refreshToken||null;var d=o.stsTokenManager.expirationTime;d&&(f.expiresIn=(d-Date.now())/1e3)}else return null;var g=new Zn(u,f,o);return o.providerData&&H(o.providerData,function(_){_&&Wg(g,Xr(_))}),o.redirectEventId&&(g.ga=o.redirectEventId),g}function iF(o,u,f,d){var g=new Zn(o,u);return f&&(g.ha=f),d&&Sc(g,d),g.reload().then(function(){return g})}function oF(o,u,f,d){var g=o.b,_={};return _[Sr]=g.b&&g.b.toString(),_.refreshToken=g.a,u=new Zn(u||{apiKey:o.l,authDomain:o.s,appName:o.m},_),f&&(u.ha=f),d&&Sc(u,d),sh(u,o),u}function sF(o){this.a=o,this.b=Tc()}var zg={name:"redirectUser",F:"session"};function mT(o){return da(o.b,zg,o.a)}function aF(o,u){return o.b.get(zg,o.a).then(function(f){return f&&u&&(f.authDomain=u),gT(f||{})})}function Kg(o){this.a=o,this.b=Tc(),this.c=null,this.f=uF(this),this.b.addListener(ti("local"),this.a,U(this.g,this))}Kg.prototype.g=function(){var o=this,u=ti("local");ga(this,function(){return gt().then(function(){return o.c&&o.c.F!="local"?o.b.get(u,o.a):null}).then(function(f){if(f)return Qg(o,"local").then(function(){o.c=u})})})};function Qg(o,u){var f=[],d;for(d in ha)ha[d]!==u&&f.push(da(o.b,ti(ha[d]),o.a));return f.push(da(o.b,Yg,o.a)),Xk(f)}function uF(o){var u=ti("local"),f=ti("session"),d=ti("none");return IM(o.b,u,o.a).then(function(){return o.b.get(f,o.a)}).then(function(g){return g?f:o.b.get(d,o.a).then(function(_){return _?d:o.b.get(u,o.a).then(function(w){return w?u:o.b.get(Yg,o.a).then(function(T){return T?ti(T):u})})})}).then(function(g){return o.c=g,Qg(o,g.F)}).o(function(){o.c||(o.c=u)})}var Yg={name:"persistence",F:"session"};function ti(o){return{name:"authUser",F:o}}Kg.prototype.xb=function(o){var u=null,f=this;return EM(o),ga(this,function(){return o!=f.c.F?f.b.get(f.c,f.a).then(function(d){return u=d,Qg(f,o)}).then(function(){if(f.c=ti(o),u)return f.b.set(f.c,u,f.a)}):gt()})};function cF(o){return ga(o,function(){return o.b.set(Yg,o.c.F,o.a)})}function yT(o,u){return ga(o,function(){return o.b.set(o.c,u.w(),o.a)})}function _T(o){return ga(o,function(){return da(o.b,o.c,o.a)})}function wT(o,u,f){return ga(o,function(){return o.b.get(o.c,o.a).then(function(d){return d&&u&&(d.authDomain=u),d&&f&&(d.emulatorConfig=f),gT(d||{})})})}function ga(o,u){return o.f=o.f.then(u,u),o.f}function Ar(o){if(this.l=!1,ot(this,"settings",new tT),ot(this,"app",o),Jt(this).options&&Jt(this).options.apiKey)o=at.SDK_VERSION?ia(at.SDK_VERSION):null,this.a=new Tr(Jt(this).options&&Jt(this).options.apiKey,se(Ft),o);else throw new O("invalid-api-key");this.R=[],this.s=[],this.O=[],this.hb=at.INTERNAL.createSubscribe(U(this.zc,this)),this.X=void 0,this.bc=at.INTERNAL.createSubscribe(U(this.Ac,this)),ma(this,null),this.i=new Kg(Jt(this).options.apiKey+":"+Jt(this).name),this.D=new sF(Jt(this).options.apiKey+":"+Jt(this).name),this.$=me(this,vF(this)),this.h=me(this,gF(this)),this.ba=!1,this.ja=U(this.Zc,this),this.Ba=U(this.da,this),this.ya=U(this.mc,this),this.za=U(this.wc,this),this.Aa=U(this.xc,this),this.b=null,hF(this),this.INTERNAL={},this.INTERNAL.delete=U(this.delete,this),this.INTERNAL.logFramework=U(this.Gc,this),this.u=0,bn.call(this),fF(this),this.J=[],this.P=null}lt(Ar,bn);function bT(o){Fn.call(this,"languageCodeChanged"),this.h=o}lt(bT,Fn);function ET(o){Fn.call(this,"emulatorConfigChanged"),this.c=o}lt(ET,Fn);function IT(o){Fn.call(this,"frameworkChanged"),this.f=o}lt(IT,Fn),e=Ar.prototype,e.xb=function(o){return o=this.i.xb(o),me(this,o)},e.wa=function(o){this.aa===o||this.l||(this.aa=o,eI(this.a,this.aa),this.dispatchEvent(new bT(this.la())))},e.la=function(){return this.aa},e.fd=function(){var o=l.navigator;this.wa(o&&(o.languages&&o.languages[0]||o.language||o.userLanguage)||null)},e.gd=function(o,u){if(!this.P){if(!/^https?:\/\//.test(o))throw new O("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");u=u?!!u.disableWarnings:!1,lF(u),this.P={url:o,ec:u},this.settings.ib=!0,la(this.a,this.P),this.dispatchEvent(new ET(this.P))}};function lF(o){typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!o&&Af().then(function(){var u=l.document.createElement("div");u.innerText="Running in emulator mode. Do not use with production credentials.",u.style.position="fixed",u.style.width="100%",u.style.backgroundColor="#ffffff",u.style.border=".1em solid #000000",u.style.color="#ff0000",u.style.bottom="0px",u.style.left="0px",u.style.margin="0px",u.style.zIndex=1e4,u.style.textAlign="center",u.classList.add("firebase-emulator-warning"),l.document.body.appendChild(u)})}e.Gc=function(o){this.J.push(o),nI(this.a,at.SDK_VERSION?ia(at.SDK_VERSION,this.J):null),this.dispatchEvent(new IT(this.J))},e.Ga=function(){return z(this.J)},e.yb=function(o){this.S===o||this.l||(this.S=o,this.a.b=this.S)},e.T=function(){return this.S};function fF(o){Object.defineProperty(o,"lc",{get:function(){return this.la()},set:function(u){this.wa(u)},enumerable:!1}),o.aa=null,Object.defineProperty(o,"ti",{get:function(){return this.T()},set:function(u){this.yb(u)},enumerable:!1}),o.S=null,Object.defineProperty(o,"emulatorConfig",{get:function(){if(this.P){var u=Un(this.P.url);u=Xr({protocol:u.c,host:u.a,port:u.g,options:Xr({disableWarnings:this.P.ec})})}else u=null;return u},enumerable:!1})}e.toJSON=function(){return{apiKey:Jt(this).options.apiKey,authDomain:Jt(this).options.authDomain,appName:Jt(this).name,currentUser:St(this)&&St(this).w()}};function Xg(o){return o.Oa||ue(new O("auth-domain-config-required"))}function hF(o){var u=Jt(o).options.authDomain,f=Jt(o).options.apiKey;u&&Ko()&&(o.Oa=o.$.then(function(){if(!o.l){if(o.b=YI(u,f,Jt(o).name,o.P),Sg(o.b,o),St(o)&&Ac(St(o)),o.m){Ac(o.m);var d=o.m;d.wa(o.la()),Fg(d,o),d=o.m,Sc(d,o.J),jg(d,o),d=o.m,la(d.a,o.P),Ug(d,o),o.m=null}return o.b}}))}e.Fb=function(o,u){switch(o){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==u&&!!this.f;default:return!1}},e.na=function(o,u,f,d){o=="signInViaPopup"&&this.g==d&&(f&&this.C?this.C(f):u&&!f&&this.f&&this.f(u),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(o,u){return o=="signInViaRedirect"||o=="signInViaPopup"&&this.g==u&&this.f?U(this.ic,this):null},e.ic=function(o,u,f,d){var g=this,_={requestUri:o,postBody:d,sessionId:u,tenantId:f};return this.c&&(this.c.cancel(),this.c=null),g.$.then(function(){return ss(g,ng(g.a,_))})},e.Xc=function(o){if(!Ko())return ue(new O("operation-not-supported-in-this-environment"));var u=this,f=Ov(o.providerId),d=Qo(),g=null;(!rc()||pv())&&Jt(this).options.authDomain&&o.isOAuthProvider&&(g=wc(Jt(this).options.authDomain,Jt(this).options.apiKey,Jt(this).name,"signInViaPopup",o,null,d,at.SDK_VERSION||null,null,null,this.T(),this.P));var _=tE(g,f&&f.ua,f&&f.ta);return f=Xg(this).then(function(w){return $I(w,_,"signInViaPopup",o,d,!!g,u.T())}).then(function(){return new xt(function(w,T){u.na("signInViaPopup",null,new O("cancelled-popup-request"),u.g),u.f=w,u.C=T,u.g=d,u.c=KI(u.b,u,"signInViaPopup",_,d)})}).then(function(w){return _&&zo(_),w?Xr(w):null}).o(function(w){throw _&&zo(_),w}),me(this,f)},e.Yc=function(o){if(!Ko())return ue(new O("operation-not-supported-in-this-environment"));var u=this,f=Xg(this).then(function(){return cF(u.i)}).then(function(){return zI(u.b,"signInViaRedirect",o,void 0,u.T())});return me(this,f)};function TT(o){if(!Ko())return ue(new O("operation-not-supported-in-this-environment"));var u=Xg(o).then(function(){return o.b.qa()}).then(function(f){return f?Xr(f):null});return me(o,u)}e.qa=function(){var o=this;return TT(this).then(function(u){return o.b&&rh(o.b.b),u}).o(function(u){throw o.b&&rh(o.b.b),u})},e.dd=function(o){if(!o)return ue(new O("null-user"));if(this.S!=o.tenantId)return ue(new O("tenant-id-mismatch"));var u=this,f={};f.apiKey=Jt(this).options.apiKey,f.authDomain=Jt(this).options.authDomain,f.appName=Jt(this).name;var d=oF(o,f,u.D,u.Ga());return me(this,this.h.then(function(){if(Jt(u).options.apiKey!=o.l)return d.reload()}).then(function(){return St(u)&&o.uid==St(u).uid?(sh(St(u),o),u.da(o)):(ma(u,d),Ac(d),u.da(d))}).then(function(){Nc(u)}))};function pF(o,u){var f={};return f.apiKey=Jt(o).options.apiKey,f.authDomain=Jt(o).options.authDomain,f.appName=Jt(o).name,o.P&&(f.emulatorConfig=o.P),o.$.then(function(){return iF(f,u,o.D,o.Ga())}).then(function(d){return St(o)&&d.uid==St(o).uid?(sh(St(o),d),o.da(d)):(ma(o,d),Ac(d),o.da(d))}).then(function(){Nc(o)})}function ma(o,u){St(o)&&(tF(St(o),o.Ba),Xn(St(o),"tokenChanged",o.ya),Xn(St(o),"userDeleted",o.za),Xn(St(o),"userInvalidated",o.Aa),Bg(St(o))),u&&(u.S.push(o.Ba),lr(u,"tokenChanged",o.ya),lr(u,"userDeleted",o.za),lr(u,"userInvalidated",o.Aa),0<o.u&&uT(u)),ot(o,"currentUser",u),u&&(u.wa(o.la()),Fg(u,o),Sc(u,o.J),jg(u,o),la(u.a,o.P),Ug(u,o))}e.Ab=function(){var o=this,u=this.h.then(function(){return o.b&&rh(o.b.b),St(o)?(ma(o,null),_T(o.i).then(function(){Nc(o)})):gt()});return me(this,u)};function dF(o){var u=aF(o.D,Jt(o).options.authDomain).then(function(f){return(o.m=f)&&(f.ha=o.D),mT(o.D)});return me(o,u)}function vF(o){var u=Jt(o).options.authDomain,f=dF(o).then(function(){return wT(o.i,u,o.P)}).then(function(d){return d?(d.ha=o.D,o.m&&(o.m.ga||null)==(d.ga||null)?d:d.reload().then(function(){return yT(o.i,d).then(function(){return d})}).o(function(g){return g.code=="auth/network-request-failed"?d:_T(o.i)})):null}).then(function(d){ma(o,d||null)});return me(o,f)}function gF(o){return o.$.then(function(){return TT(o)}).o(function(){}).then(function(){if(!o.l)return o.ja()}).o(function(){}).then(function(){if(!o.l){o.ba=!0;var u=o.i;u.b.addListener(ti("local"),u.a,o.ja)}})}e.Zc=function(){var o=this;return wT(this.i,Jt(this).options.authDomain).then(function(u){if(!o.l){var f;if(f=St(o)&&u){f=St(o).uid;var d=u.uid;f=f==null||f===""||d===void 0||d===null||d===""?!1:f==d}if(f)return sh(St(o),u),St(o).I();(St(o)||u)&&(ma(o,u),u&&(Ac(u),u.ha=o.D),o.b&&Sg(o.b,o),Nc(o))}})},e.da=function(o){return yT(this.i,o)},e.mc=function(){Nc(this),this.da(St(this))},e.wc=function(){this.Ab()},e.xc=function(){this.Ab()};function ss(o,u){var f=null,d=null;return me(o,u.then(function(g){return f=Mv(g),d=AE(g),pF(o,g)},function(g){var _=null;throw g&&g.code==="auth/multi-factor-auth-required"&&(_=rT(g.w(),o,U(o.kc,o))),_||g}).then(function(){return Xr({user:St(o),credential:f,additionalUserInfo:d,operationType:"signIn"})}))}e.kc=function(o){var u=this;return this.h.then(function(){return ss(u,gt(o))})},e.zc=function(o){var u=this;this.addAuthTokenListener(function(){o.next(St(u))})},e.Ac=function(o){var u=this;mF(this,function(){o.next(St(u))})},e.Ic=function(o,u,f){var d=this;return this.ba&&Promise.resolve().then(function(){typeof o=="function"?o(St(d)):typeof o.next=="function"&&o.next(St(d))}),this.hb(o,u,f)},e.Hc=function(o,u,f){var d=this;return this.ba&&Promise.resolve().then(function(){d.X=d.getUid(),typeof o=="function"?o(St(d)):typeof o.next=="function"&&o.next(St(d))}),this.bc(o,u,f)},e.nc=function(o){var u=this,f=this.h.then(function(){return St(u)?St(u).I(o).then(function(d){return{accessToken:d}}):null});return me(this,f)},e.Tc=function(o){var u=this;return this.h.then(function(){return ss(u,Pt(u.a,XL,{token:o}))}).then(function(f){var d=f.user;return to(d,"isAnonymous",!1),u.da(d),f})},e.Uc=function(o,u){var f=this;return this.h.then(function(){return ss(f,Pt(f.a,fI,{email:o,password:u}))})},e.dc=function(o,u){var f=this;return this.h.then(function(){return ss(f,Pt(f.a,NL,{email:o,password:u}))})},e.$a=function(o){var u=this;return this.h.then(function(){return ss(u,o.ka(u.a))})},e.Sc=function(o){return mv("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(o)},e.zb=function(){var o=this;return this.h.then(function(){var u=St(o);if(u&&u.isAnonymous){var f=Xr({providerId:null,isNewUser:!1});return Xr({user:u,credential:null,additionalUserInfo:f,operationType:"signIn"})}return ss(o,o.a.zb()).then(function(d){var g=d.user;return to(g,"isAnonymous",!0),o.da(g),d})})};function Jt(o){return o.app}function St(o){return o.currentUser}e.getUid=function(){return St(this)&&St(this).uid||null};function uh(o){return St(o)&&St(o)._lat||null}function Nc(o){if(o.ba){for(var u=0;u<o.s.length;u++)o.s[u]&&o.s[u](uh(o));if(o.X!==o.getUid()&&o.O.length)for(o.X=o.getUid(),u=0;u<o.O.length;u++)o.O[u]&&o.O[u](uh(o))}}e.cc=function(o){this.addAuthTokenListener(o),this.u++,0<this.u&&St(this)&&uT(St(this))},e.Pc=function(o){var u=this;H(this.s,function(f){f==o&&u.u--}),0>this.u&&(this.u=0),this.u==0&&St(this)&&Bg(St(this)),this.removeAuthTokenListener(o)},e.addAuthTokenListener=function(o){var u=this;this.s.push(o),me(this,this.h.then(function(){u.l||L(u.s,o)&&o(uh(u))}))},e.removeAuthTokenListener=function(o){B(this.s,function(u){return u==o})};function mF(o,u){o.O.push(u),me(o,o.h.then(function(){!o.l&&L(o.O,u)&&o.X!==o.getUid()&&(o.X=o.getUid(),u(uh(o)))}))}e.delete=function(){this.l=!0;for(var o=0;o<this.R.length;o++)this.R[o].cancel("app-deleted");return this.R=[],this.i&&(o=this.i,o.b.removeListener(ti("local"),o.a,this.ja)),this.b&&(WI(this.b,this),rh(this.b.b)),Promise.resolve()};function me(o,u){return o.R.push(u),u.oa(function(){V(o.R,u)}),u}e.hc=function(o){return me(this,_L(this.a,o))},e.Bc=function(o){return!!Lv(o)},e.wb=function(o,u){var f=this;return me(this,gt().then(function(){var d=new Rf(u);if(!d.c)throw new O("argument-error",Nv+" must be true when sending sign in link to email");return Of(d)}).then(function(d){return f.a.wb(o,d)}).then(function(){}))},e.jd=function(o){return this.Ra(o).then(function(u){return u.data.email})},e.nb=function(o,u){return me(this,this.a.nb(o,u).then(function(){}))},e.Ra=function(o){return me(this,this.a.Ra(o).then(function(u){return new OD(u)}))},e.jb=function(o){return me(this,this.a.jb(o).then(function(){}))},e.vb=function(o,u){var f=this;return me(this,gt().then(function(){return typeof u>"u"||we(u)?{}:Of(new Rf(u))}).then(function(d){return f.a.vb(o,d)}).then(function(){}))},e.Wc=function(o,u){return me(this,Rg(this,o,u,U(this.$a,this)))},e.Vc=function(o,u){var f=this;return me(this,gt().then(function(){var d=u||nc(),g=UE(o,d);if(d=Lv(d),!d)throw new O("argument-error","Invalid email link!");if(d.tenantId!==f.T())throw new O("tenant-id-mismatch");return f.$a(g)}))};function Rc(){}Rc.prototype.render=function(){},Rc.prototype.reset=function(){},Rc.prototype.getResponse=function(){},Rc.prototype.execute=function(){};function ya(){this.a={},this.b=1e12}var Jg=null;ya.prototype.render=function(o,u){return this.a[this.b.toString()]=new ch(o,u),this.b++},ya.prototype.reset=function(o){var u=Zg(this,o);o=ST(o),u&&o&&(u.delete(),delete this.a[o])},ya.prototype.getResponse=function(o){return(o=Zg(this,o))?o.getResponse():null},ya.prototype.execute=function(o){(o=Zg(this,o))&&o.execute()};function Zg(o,u){return(u=ST(u))&&o.a[u]||null}function ST(o){return(o=typeof o>"u"?1e12:o)?o.toString():null}function ch(o,u){this.g=!1,this.c=u,this.a=this.b=null,this.h=this.c.size!=="invisible",this.f=Qu(o);var f=this;this.i=function(){f.execute()},this.h?this.execute():lr(this.f,"click",this.i)}ch.prototype.getResponse=function(){return tm(this),this.b},ch.prototype.execute=function(){tm(this);var o=this;this.a||(this.a=setTimeout(function(){o.b=TD();var u=o.c.callback,f=o.c["expired-callback"];if(u)try{u(o.b)}catch{}o.a=setTimeout(function(){if(o.a=null,o.b=null,f)try{f()}catch{}o.h&&o.execute()},6e4)},500))},ch.prototype.delete=function(){tm(this),this.g=!0,clearTimeout(this.a),this.a=null,Xn(this.f,"click",this.i)};function tm(o){if(o.g)throw Error("reCAPTCHA mock was already deleted!")}function em(){}ot(em,"FACTOR_ID","phone");function nm(){}nm.prototype.g=function(){return Jg||(Jg=new ya),gt(Jg)},nm.prototype.c=function(){};var rm=null;function im(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var yF=new Kr(pf,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),_F=new Xi(3e4,6e4);im.prototype.g=function(o){var u=this;return new xt(function(f,d){var g=setTimeout(function(){d(new O("network-request-failed"))},_F.get());if(!l.grecaptcha||o!==u.f&&!u.b){l[u.a]=function(){if(l.grecaptcha){u.f=o;var w=l.grecaptcha.render;l.grecaptcha.render=function(T,M){return T=w(T,M),u.b++,T},clearTimeout(g),f(l.grecaptcha)}else clearTimeout(g),d(new O("internal-error"));delete l[u.a]};var _=Bd(yF,{onload:u.a,hl:o||""});gt(Qv(_)).o(function(){clearTimeout(g),d(new O("internal-error","Unable to load external reCAPTCHA dependencies!"))})}else clearTimeout(g),f(l.grecaptcha)})},im.prototype.c=function(){this.b--};var om=null;function sm(o,u,f,d,g,_,w){if(ot(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=u,this.g=null,w?(rm||(rm=new nm),w=rm):(om||(om=new im),w=om),this.m=w,this.a=f||{theme:"light",type:"image"},this.h=[],this.a[NT])throw new O("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i=this.a[wF]==="invisible",!l.document)throw new O("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Qu(u)||!this.i&&Qu(u).hasChildNodes())throw new O("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Tr(o,_||null,g||null),this.u=d||function(){return null};var T=this;this.l=[];var M=this.a[AT];this.a[AT]=function(bt){if(RT(T,bt),typeof M=="function")M(bt);else if(typeof M=="string"){var zt=ce(M,l);typeof zt=="function"&&zt(bt)}};var q=this.a[CT];this.a[CT]=function(){if(RT(T,null),typeof q=="function")q();else if(typeof q=="string"){var bt=ce(q,l);typeof bt=="function"&&bt()}}}var AT="callback",CT="expired-callback",NT="sitekey",wF="size";function RT(o,u){for(var f=0;f<o.l.length;f++)try{o.l[f](u)}catch{}}function bF(o,u){B(o.l,function(f){return f==u})}function am(o,u){return o.h.push(u),u.oa(function(){V(o.h,u)}),u}e=sm.prototype,e.Ia=function(){var o=this;return this.f?this.f:this.f=am(this,gt().then(function(){if(Cf()&&!Er())return Af();throw new O("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return o.m.g(o.u())}).then(function(u){return o.g=u,Pt(o.s,qL,{})}).then(function(u){o.a[NT]=u.recaptchaSiteKey}).o(function(u){throw o.f=null,u}))},e.render=function(){lh(this);var o=this;return am(this,this.Ia().then(function(){if(o.c===null){var u=o.v;if(!o.i){var f=Qu(u);u=zk("DIV"),f.appendChild(u)}o.c=o.g.render(u,o.a)}return o.c}))},e.verify=function(){lh(this);var o=this;return am(this,this.render().then(function(u){return new xt(function(f){var d=o.g.getResponse(u);if(d)f(d);else{var g=function(_){_&&(bF(o,g),f(_))};o.l.push(g),o.i&&o.g.execute(o.c)}})}))},e.reset=function(){lh(this),this.c!==null&&this.g.reset(this.c)};function lh(o){if(o.D)throw new O("internal-error","RecaptchaVerifier instance has been destroyed.")}e.clear=function(){lh(this),this.D=!0,this.m.c();for(var o=0;o<this.h.length;o++)this.h[o].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){o=Qu(this.v);for(var u;u=o.firstChild;)o.removeChild(u)}};function um(o,u,f){var d=!1;try{this.b=f||at.app()}catch{throw new O("argument-error","No firebase.app.App instance is currently initialized.")}if(this.b.options&&this.b.options.apiKey)f=this.b.options.apiKey;else throw new O("invalid-api-key");var g=this,_=null;try{_=this.b.auth().Ga()}catch{}try{d=this.b.auth().settings.appVerificationDisabledForTesting}catch{}_=at.SDK_VERSION?ia(at.SDK_VERSION,_):null,sm.call(this,f,o,u,function(){try{var w=g.b.auth().la()}catch{w=null}return w},_,se(Ft),d)}lt(um,sm);function OT(o,u,f,d){t:{f=Array.prototype.slice.call(f);for(var g=0,_=!1,w=0;w<u.length;w++)if(u[w].optional)_=!0;else{if(_)throw new O("internal-error","Argument validator encountered a required argument after an optional argument.");g++}if(_=u.length,f.length<g||_<f.length)d="Expected "+(g==_?g==1?"1 argument":g+" arguments":g+"-"+_+" arguments")+" but got "+f.length+".";else{for(g=0;g<f.length;g++)if(_=u[g].optional&&f[g]===void 0,!u[g].M(f[g])&&!_){if(u=u[g],0>g||g>=xT.length)throw new O("internal-error","Argument validator received an unsupported number of arguments.");f=xT[g],d=(d?"":f+" argument ")+(u.name?'"'+u.name+'" ':"")+"must be "+u.K+".";break t}d=null}}if(d)throw new O("argument-error",o+" failed: "+d)}var xT="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function it(o,u){return{name:o||"",K:"a valid string",optional:!!u,M:function(f){return typeof f=="string"}}}function cm(o,u){return{name:o||"",K:"a boolean",optional:!!u,M:function(f){return typeof f=="boolean"}}}function Ne(o,u){return{name:o||"",K:"a valid object",optional:!!u,M:I}}function _a(o,u){return{name:o||"",K:"a function",optional:!!u,M:function(f){return typeof f=="function"}}}function ei(o,u){return{name:o||"",K:"null",optional:!!u,M:function(f){return f===null}}}function EF(){return{name:"",K:"an HTML element",optional:!1,M:function(o){return!!(o&&o instanceof Element)}}}function IF(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(o){return!!(o&&o instanceof Ar)}}}function TF(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(o){return!!(o&&o instanceof at.app.App)}}}function eo(o){return{name:o?o+"Credential":"credential",K:o?"a valid "+o+" credential":"a valid credential",optional:!1,M:function(u){if(!u)return!1;var f=!o||u.providerId===o;return!(!u.ka||!f)}}}function PT(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(o){return o?!!o.sb:!1}}}function wa(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(o){return!!(o&&o.providerId&&o.hasOwnProperty&&o.hasOwnProperty("isOAuthProvider"))}}}function lm(o,u){return I(o)&&typeof o.type=="string"&&o.type===u&&typeof o.Ha=="function"}function kT(o){return I(o)&&typeof o.uid=="string"}function fh(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(o){return!(!o||typeof o.type!="string"||typeof o.verify!="function")}}}function Ee(o,u,f,d){return{name:f||"",K:o.K+" or "+u.K,optional:!!d,M:function(g){return o.M(g)||u.M(g)}}}function pe(o,u){for(var f in u){var d=u[f].name;o[d]=LT(d,o[f],u[f].j)}}function DT(o,u){for(var f in u){var d=u[f].name;d!==f&&Object.defineProperty(o,d,{get:_t(function(g){return this[g]},f),set:_t(function(g,_,w,T){OT(g,[w],[T],!0),this[_]=T},d,f,u[f].kb),enumerable:!0})}}function Ie(o,u,f,d){o[u]=LT(u,f,d)}function LT(o,u,f){function d(){var w=Array.prototype.slice.call(arguments);return OT(g,f,w),u.apply(this,w)}if(!f)return u;var g=SF(o),_;for(_ in u)d[_]=u[_];for(_ in u.prototype)d.prototype[_]=u.prototype[_];return d}function SF(o){return o=o.split("."),o[o.length-1]}pe(Ar.prototype,{jb:{name:"applyActionCode",j:[it("code")]},Ra:{name:"checkActionCode",j:[it("code")]},nb:{name:"confirmPasswordReset",j:[it("code"),it("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[it("email"),it("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[it("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[it("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Ee(Ne(),_a(),"nextOrObserver"),_a("opt_error",!0),_a("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Ee(Ne(),_a(),"nextOrObserver"),_a("opt_error",!0),_a("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[it("email"),Ee(Ne("opt_actionCodeSettings",!0),ei(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[it("email"),Ne("actionCodeSettings")]},xb:{name:"setPersistence",j:[it("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[eo()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[eo()]},Tc:{name:"signInWithCustomToken",j:[it("token")]},Uc:{name:"signInWithEmailAndPassword",j:[it("email"),it("password")]},Vc:{name:"signInWithEmailLink",j:[it("email"),it("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[it("phoneNumber"),fh()]},Xc:{name:"signInWithPopup",j:[wa()]},Yc:{name:"signInWithRedirect",j:[wa()]},dd:{name:"updateCurrentUser",j:[Ee(function(o){return{name:"user",K:"an instance of Firebase User",optional:!!o,M:function(u){return!!(u&&u instanceof Zn)}}}(),ei(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[it(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[it("url"),Ne("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[it("code")]}}),DT(Ar.prototype,{lc:{name:"languageCode",kb:Ee(it(),ei(),"languageCode")},ti:{name:"tenantId",kb:Ee(it(),ei(),"tenantId")}}),Ar.Persistence=ha,Ar.Persistence.LOCAL="local",Ar.Persistence.SESSION="session",Ar.Persistence.NONE="none",pe(Zn.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[cm("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[cm("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[eo()]},qb:{name:"linkWithCredential",j:[eo()]},Dc:{name:"linkWithPhoneNumber",j:[it("phoneNumber"),fh()]},Ec:{name:"linkWithPopup",j:[wa()]},Fc:{name:"linkWithRedirect",j:[wa()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[eo()]},tb:{name:"reauthenticateWithCredential",j:[eo()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[it("phoneNumber"),fh()]},Nc:{name:"reauthenticateWithPopup",j:[wa()]},Oc:{name:"reauthenticateWithRedirect",j:[wa()]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Ee(Ne("opt_actionCodeSettings",!0),ei(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[it(null,!0)]},cd:{name:"unlink",j:[it("provider")]},Bb:{name:"updateEmail",j:[it("email")]},Cb:{name:"updatePassword",j:[it("password")]},ed:{name:"updatePhoneNumber",j:[eo("phone")]},Db:{name:"updateProfile",j:[Ne("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[it("email"),Ee(Ne("opt_actionCodeSettings",!0),ei(null,!0),"opt_actionCodeSettings",!0)]}}),pe(ya.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),pe(Rc.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),pe(xt.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),DT(tT.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:cm("appVerificationDisabledForTesting")}}),pe(Ng.prototype,{confirm:{name:"confirm",j:[it("verificationCode")]}}),Ie(aa,"fromJSON",function(o){o=typeof o=="string"?JSON.parse(o):o;for(var u,f=[KD,QD,YD,zD],d=0;d<f.length;d++)if(u=f[d](o))return u;return null},[Ee(it(),Ne(),"json")]),Ie(hr,"credential",function(o,u){return new Ji(o,u)},[it("email"),it("password")]),pe(Ji.prototype,{w:{name:"toJSON",j:[it(null,!0)]}}),pe(Jo.prototype,{Ca:{name:"addScope",j:[it("scope")]},Ka:{name:"setCustomParameters",j:[Ne("customOAuthParameters")]}}),Ie(Jo,"credential",DE,[Ee(it(),Ne(),"token")]),Ie(hr,"credentialWithLink",UE,[it("email"),it("emailLink")]),pe(Zo.prototype,{Ca:{name:"addScope",j:[it("scope")]},Ka:{name:"setCustomParameters",j:[Ne("customOAuthParameters")]}}),Ie(Zo,"credential",LE,[Ee(it(),Ne(),"token")]),pe(ts.prototype,{Ca:{name:"addScope",j:[it("scope")]},Ka:{name:"setCustomParameters",j:[Ne("customOAuthParameters")]}}),Ie(ts,"credential",ME,[Ee(it(),Ee(Ne(),ei()),"idToken"),Ee(it(),ei(),"accessToken",!0)]),pe(ca.prototype,{Ka:{name:"setCustomParameters",j:[Ne("customOAuthParameters")]}}),Ie(ca,"credential",FE,[Ee(it(),Ne(),"token"),it("secret",!0)]),pe(Jn.prototype,{Ca:{name:"addScope",j:[it("scope")]},credential:{name:"credential",j:[Ee(it(),Ee(Ne(),ei()),"optionsOrIdToken"),Ee(it(),ei(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Ne("customOAuthParameters")]}}),pe(bi.prototype,{w:{name:"toJSON",j:[it(null,!0)]}}),pe(Yo.prototype,{w:{name:"toJSON",j:[it(null,!0)]}}),Ie(Ei,"credential",jE,[it("verificationId"),it("verificationCode")]),pe(Ei.prototype,{fb:{name:"verifyPhoneNumber",j:[Ee(it(),function(o,u){return{name:o||"phoneInfoOptions",K:"valid phone info options",optional:!!u,M:function(f){return f?f.session&&f.phoneNumber?lm(f.session,cc)&&typeof f.phoneNumber=="string":f.session&&f.multiFactorHint?lm(f.session,Lf)&&kT(f.multiFactorHint):f.session&&f.multiFactorUid?lm(f.session,Lf)&&typeof f.multiFactorUid=="string":f.phoneNumber?typeof f.phoneNumber=="string":!1:!1}}}(),"phoneInfoOptions"),fh()]}}),pe(Zi.prototype,{w:{name:"toJSON",j:[it(null,!0)]}}),pe(O.prototype,{toJSON:{name:"toJSON",j:[it(null,!0)]}}),pe(fc.prototype,{toJSON:{name:"toJSON",j:[it(null,!0)]}}),pe(jv.prototype,{toJSON:{name:"toJSON",j:[it(null,!0)]}}),pe(xg.prototype,{toJSON:{name:"toJSON",j:[it(null,!0)]}}),pe(Og.prototype,{Rc:{name:"resolveSignIn",j:[PT()]}}),pe(kg.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[PT(),it("displayName",!0)]},bd:{name:"unenroll",j:[Ee({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:kT},it(),"multiFactorInfoIdentifier")]}}),pe(um.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Ie(Cv,"parseLink",gE,[it("link")]),Ie(em,"assertion",function(o){return new oT(o)},[eo("phone")]),function(){if(typeof at<"u"&&at.INTERNAL&&at.INTERNAL.registerComponent){var o={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Nf,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Av,VERIFY_AND_CHANGE_EMAIL:ac,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Ar,AuthCredential:aa,Error:O};Ie(o,"EmailAuthProvider",hr,[]),Ie(o,"FacebookAuthProvider",Jo,[]),Ie(o,"GithubAuthProvider",Zo,[]),Ie(o,"GoogleAuthProvider",ts,[]),Ie(o,"TwitterAuthProvider",ca,[]),Ie(o,"OAuthProvider",Jn,[it("providerId")]),Ie(o,"SAMLAuthProvider",kE,[it("providerId")]),Ie(o,"PhoneAuthProvider",Ei,[IF()]),Ie(o,"RecaptchaVerifier",um,[Ee(it(),EF(),"recaptchaContainer"),Ne("recaptchaParameters",!0),TF()]),Ie(o,"ActionCodeURL",Cv,[]),Ie(o,"PhoneMultiFactorGenerator",em,[]),at.INTERNAL.registerComponent({name:"auth",instanceFactory:function(u){return u=u.getProvider("app").getImmediate(),new Ar(u)},multipleInstances:!1,serviceProps:o,instantiationMode:"LAZY",type:"PUBLIC"}),at.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(u){return u=u.getProvider("auth").getImmediate(),{getUid:U(u.getUid,u),getToken:U(u.nc,u),addAuthTokenListener:U(u.cc,u),removeAuthTokenListener:U(u.Pc,u)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),at.registerVersion("@firebase/auth","0.16.3"),at.INTERNAL.extendNamespace({User:Zn})}else throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.")}()}).apply(typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q4=function(){function e(t){this.domStorage_=t,this.prefix_="firebase:"}return e.prototype.set=function(t,n){n==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ue(n))},e.prototype.get=function(t){var n=this.domStorage_.getItem(this.prefixedName_(t));return n==null?null:dl(n)},e.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},e.prototype.prefixedName_=function(t){return this.prefix_+t},e.prototype.toString=function(){return this.domStorage_.toString()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H4=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(t,n){n==null?delete this.cache_[t]:this.cache_[t]=n},e.prototype.get=function(t){return zn(this.cache_,t)?this.cache_[t]:null},e.prototype.remove=function(t){delete this.cache_[t]},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qN=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new q4(t)}}catch{}return new H4},gs=qN("localStorage"),Py=qN("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var za=new Pu("@firebase/database"),HN=function(){var e=1;return function(){return e++}}(),GN=function(e){var t=l4(e),n=new s4;n.update(t);var r=n.digest();return $_.encodeByteArray(r)},ql=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?n+=ql.apply(null,i):typeof i=="object"?n+=Ue(i):n+=i,n+=" "}return n},Is=null,US=!0,WN=function(e,t){K(!t||e===!0||e===!1,"Can't turn on custom loggers persistently."),e===!0?(za.logLevel=Rt.VERBOSE,Is=za.log.bind(za),t&&Py.set("logging_enabled",!0)):typeof e=="function"?Is=e:(Is=null,Py.remove("logging_enabled"))},sn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(US===!0&&(US=!1,Is===null&&Py.get("logging_enabled")===!0&&WN(!0)),Is){var n=ql.apply(null,e);Is(n)}},Hl=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];sn.apply(void 0,Gi([e],t))}},ky=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+ql.apply(void 0,Gi(e));za.error(n)},ai=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+ql.apply(void 0,Gi(e));throw za.error(n),new Error(n)},vn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+ql.apply(void 0,Gi(e));za.warn(n)},G4=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&vn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},nd=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},W4=function(e){if(document.readyState==="complete")e();else{var t=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ui="[MIN_NAME]",pi="[MAX_NAME]",qs=function(e,t){if(e===t)return 0;if(e===Ui||t===pi)return-1;if(t===Ui||e===pi)return 1;var n=op(e),r=op(t);return n!==null?r!==null?n-r===0?e.length-t.length:n-r:-1:r!==null?1:e<t?-1:1},$4=function(e,t){return e===t?0:e<t?-1:1},Pc=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ue(t))},Z_=function(e){if(typeof e!="object"||e===null)return Ue(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)i!==0&&(r+=","),r+=Ue(t[i]),r+=":",r+=Z_(e[t[i]]);return r+="}",r},$N=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function je(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var zN=function(e){K(!nd(e),"Invalid JSON number");var t=11,n=52,r=(1<<t-1)-1,i,s,a,c,l;e===0?(s=0,a=0,i=1/e===-1/0?1:0):(i=e<0,e=Math.abs(e),e>=Math.pow(2,1-r)?(c=Math.min(Math.floor(Math.log(e)/Math.LN2),r),s=c+r,a=Math.round(e*Math.pow(2,n-c)-Math.pow(2,n))):(s=0,a=Math.round(e/Math.pow(2,1-r-n))));var h=[];for(l=n;l;l-=1)h.push(a%2?1:0),a=Math.floor(a/2);for(l=t;l;l-=1)h.push(s%2?1:0),s=Math.floor(s/2);h.push(i?1:0),h.reverse();var p=h.join(""),v="";for(l=0;l<64;l+=8){var m=parseInt(p.substr(l,8),2).toString(16);m.length===1&&(m="0"+m),v=v+m}return v.toLowerCase()},z4=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},K4=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},Q4=function(e,t){var n="Unknown Error";e==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?n="Client doesn't have permission to access the desired data.":e==="unavailable"&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r},Y4=new RegExp("^-?(0*)\\d{1,10}$"),KN=-2147483648,tw=2147483647,op=function(e){if(Y4.test(e)){var t=Number(e);if(t>=KN&&t<=tw)return t}return null},Ma=function(e){try{e()}catch(t){setTimeout(function(){var n=t.stack||"";throw vn("Exception was thrown by user callback.",n),t},Math.floor(0))}},X4=function(){var e=typeof window=="object"&&window.navigator&&window.navigator.userAgent||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Yc=function(e,t){var n=setTimeout(e,t);return typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt=function(){function e(t,n){if(n===void 0){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!1,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var t="",n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+this.pieces_[n]);return t||"/"},e.prototype.toUrlEncodedString=function(){for(var t="",n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(t+="/"+encodeURIComponent(String(this.pieces_[n])));return t||"/"},e.prototype.slice=function(t){return t===void 0&&(t=0),this.pieces_.slice(this.pieceNum_+t)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)},e.prototype.child=function(t){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(t instanceof e)for(var r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else for(var i=t.split("/"),r=0;r<i.length;r++)i[r].length>0&&n.push(i[r]);return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var r=t.getFront(),i=n.getFront();if(r===null)return n;if(r===i)return e.relativePath(t.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")},e.comparePaths=function(t,n){for(var r=t.slice(),i=n.slice(),s=0;s<r.length&&s<i.length;s++){var a=qs(r[s],i[s]);if(a!==0)return a}return r.length===i.length?0:r.length<i.length?-1:1},e.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var n=this.pieceNum_,r=t.pieceNum_;n<=this.pieces_.length;n++,r++)if(this.pieces_[n]!==t.pieces_[r])return!1;return!0},e.prototype.contains=function(t){var n=this.pieceNum_,r=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;n<this.pieces_.length;){if(this.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0},e}(),J4=function(){function e(t,n){this.errorPrefix_=n,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Vh(this.parts_[r]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),e.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Vh(t),this.checkValid_()},e.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Vh(t),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return this.parts_.length===0?"":"in property '"+this.parts_.join(".")+"'"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ew="5",QN="v",YN="s",XN="r",JN="f",ZN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tR="ls",Z4="p",eR="websocket",nR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nw=function(){function e(t,n,r,i,s,a,c){s===void 0&&(s=!1),a===void 0&&(a=""),c===void 0&&(c=!1),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=a,this.includeNamespaceInQueryParams=c,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=gs.get("host:"+t)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},e.prototype.isCacheableHost=function(){return this.internalHost.substr(0,2)==="s-"},e.prototype.isDemoHost=function(){return this.domain==="firebaseio-demo.com"},e.prototype.isCustomHost=function(){return this.domain!=="firebaseio.com"&&this.domain!=="firebaseio-demo.com"},e.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&gs.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(t,n){K(typeof t=="string","typeof type must == string"),K(typeof n=="object","typeof params must == object");var r;if(t===eR)r=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else if(t===nR)r=(this.secure?"https://":"http://")+this.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);this.needsQueryParam()&&(n.ns=this.namespace);var i=[];return je(n,function(s,a){i.push(s+"="+a)}),r+i.join("&")},e.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},e.prototype.toURLString=function(){var t=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+n},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}t+="/"+i}return t}function e3(e){var t,n,r={};e.charAt(0)==="?"&&(e=e.substring(1));try{for(var i=Te(e.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(a.length!==0){var c=a.split("=");c.length===2?r[decodeURIComponent(c[0])]=decodeURIComponent(c[1]):vn("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}var Dy=function(e,t){var n=n3(e),r=n.namespace;n.domain==="firebase.com"&&ai(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&ai("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||G4();var i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new nw(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new nt(n.pathString)}},n3=function(e){var t="",n="",r="",i="",s="",a=!0,c="https",l=443;if(typeof e=="string"){var h=e.indexOf("//");h>=0&&(c=e.substring(0,h-1),e=e.substring(h+2));var p=e.indexOf("/");p===-1&&(p=e.length);var v=e.indexOf("?");v===-1&&(v=e.length),t=e.substring(0,Math.min(p,v)),p<v&&(i=t3(e.substring(p,v)));var m=e3(e.substring(Math.min(e.length,v)));h=t.indexOf(":"),h>=0?(a=c==="https"||c==="wss",l=parseInt(t.substring(h+1),10)):h=t.length;var y=t.slice(0,h);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{var b=t.indexOf(".");r=t.substring(0,b).toLowerCase(),n=t.substring(b+1),s=r}"ns"in m&&(s=m.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:a,scheme:c,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r3=/[\[\].#$\/\u0000-\u001F\u007F]/,i3=/[\[\].#$\u0000-\u001F\u007F]/,Em=10*1024*1024,rd=function(e){return typeof e=="string"&&e.length!==0&&!r3.test(e)},rR=function(e){return typeof e=="string"&&e.length!==0&&!i3.test(e)},o3=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),rR(e)},vl=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!nd(e)||e&&typeof e=="object"&&zn(e,".sv")},si=function(e,t,n,r,i){i&&n===void 0||gl(yr(e,t,i),n,r)},gl=function(e,t,n){var r=n instanceof nt?new J4(n,e):n;if(t===void 0)throw new Error(e+"contains undefined "+r.toErrorString());if(typeof t=="function")throw new Error(e+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(nd(t))throw new Error(e+"contains "+t.toString()+" "+r.toErrorString());if(typeof t=="string"&&t.length>Em/3&&Vh(t)>Em)throw new Error(e+"contains a string greater than "+Em+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){var i=!1,s=!1;if(je(t,function(a,c){if(a===".value")i=!0;else if(a!==".priority"&&a!==".sv"&&(s=!0,!rd(a)))throw new Error(e+" contains an invalid key ("+a+") "+r.toErrorString()+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);r.push(a),gl(e,c,r),r.pop()}),i&&s)throw new Error(e+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},s3=function(e,t){var n,r;for(n=0;n<t.length;n++){r=t[n];for(var i=r.slice(),s=0;s<i.length;s++)if(!(i[s]===".priority"&&s===i.length-1)){if(!rd(i[s]))throw new Error(e+"contains an invalid key ("+i[s]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(nt.comparePaths);var a=null;for(n=0;n<t.length;n++){if(r=t[n],a!==null&&a.contains(r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},iR=function(e,t,n,r,i){if(!(i&&n===void 0)){var s=yr(e,t,i);if(!(n&&typeof n=="object")||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];je(n,function(c,l){var h=new nt(c);if(gl(s,l,r.child(h)),h.getBack()===".priority"&&!vl(l))throw new Error(s+"contains an invalid value for '"+h.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(h)}),s3(s,a)}},Ly=function(e,t,n,r){if(!(r&&n===void 0)){if(nd(n))throw new Error(yr(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!vl(n))throw new Error(yr(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Im=function(e,t,n,r){if(!(r&&n===void 0))switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(yr(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},kc=function(e,t,n,r){if(!(r&&n===void 0)&&!rd(n))throw new Error(yr(e,t,r)+'was an invalid key = "'+n+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},ml=function(e,t,n,r){if(!(r&&n===void 0)&&!rR(n))throw new Error(yr(e,t,r)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},a3=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ml(e,t,n,r)},dr=function(e,t){if(t.getFront()===".info")throw new Error(e+" failed = Can't modify data under /.info/")},oR=function(e,t,n){var r=n.path.toString();if(typeof n.repoInfo.host!="string"||n.repoInfo.host.length===0||!rd(n.repoInfo.namespace)&&n.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!o3(r))throw new Error(yr(e,t,!1)+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)},u3=function(e,t,n,r){if(!(r&&n===void 0)&&typeof n!="boolean")throw new Error(yr(e,t,r)+"must be a boolean.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var c3=function(){function e(t,n){this.repo_=t,this.path_=n}return e.prototype.cancel=function(t){mt("OnDisconnect.cancel",0,1,arguments.length),Qe("OnDisconnect.cancel",1,t,!0);var n=new qn;return this.repo_.onDisconnectCancel(this.path_,n.wrapCallback(t)),n.promise},e.prototype.remove=function(t){mt("OnDisconnect.remove",0,1,arguments.length),dr("OnDisconnect.remove",this.path_),Qe("OnDisconnect.remove",1,t,!0);var n=new qn;return this.repo_.onDisconnectSet(this.path_,null,n.wrapCallback(t)),n.promise},e.prototype.set=function(t,n){mt("OnDisconnect.set",1,2,arguments.length),dr("OnDisconnect.set",this.path_),si("OnDisconnect.set",1,t,this.path_,!1),Qe("OnDisconnect.set",2,n,!0);var r=new qn;return this.repo_.onDisconnectSet(this.path_,t,r.wrapCallback(n)),r.promise},e.prototype.setWithPriority=function(t,n,r){mt("OnDisconnect.setWithPriority",2,3,arguments.length),dr("OnDisconnect.setWithPriority",this.path_),si("OnDisconnect.setWithPriority",1,t,this.path_,!1),Ly("OnDisconnect.setWithPriority",2,n,!1),Qe("OnDisconnect.setWithPriority",3,r,!0);var i=new qn;return this.repo_.onDisconnectSetWithPriority(this.path_,t,n,i.wrapCallback(r)),i.promise},e.prototype.update=function(t,n){if(mt("OnDisconnect.update",1,2,arguments.length),dr("OnDisconnect.update",this.path_),Array.isArray(t)){for(var r={},i=0;i<t.length;++i)r[""+i]=t[i];t=r,vn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}iR("OnDisconnect.update",1,t,this.path_,!1),Qe("OnDisconnect.update",2,n,!0);var s=new qn;return this.repo_.onDisconnectUpdate(this.path_,t,s.wrapCallback(n)),s.promise},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l3=function(){function e(t,n){this.committed=t,this.snapshot=n}return e.prototype.toJSON=function(){return mt("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var su="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",My="-",sR="z",aR=786,f3=function(){var e=0,t=[];return function(n){var r=n===e;e=n;var i,s=new Array(8);for(i=7;i>=0;i--)s[i]=su.charAt(n%64),n=Math.floor(n/64);K(n===0,"Cannot push at time == 0");var a=s.join("");if(r){for(i=11;i>=0&&t[i]===63;i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)a+=su.charAt(t[i]);return K(a.length===20,"nextPushId: Length should be 20."),a}}(),jS=function(e){if(e===""+tw)return My;var t=op(e);if(t!=null)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<aR)return n.push(My),n.join("");for(var i=n.length-1;i>=0&&n[i]===sR;)i--;if(i===-1)return pi;var s=n[i],a=su.charAt(su.indexOf(s)+1);return n[i]=a,n.slice(0,i+1).join("")},VS=function(e){if(e===""+KN)return Ui;var t=op(e);if(t!=null)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return n[n.length-1]===My?n.length===1?""+tw:(delete n[n.length-1],n.join("")):(n[n.length-1]=su.charAt(su.indexOf(n[n.length-1])-1),n.join("")+sR.repeat(aR-n.length))};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt=function(){function e(t,n){this.name=t,this.node=n}return e.Wrap=function(t,n){return new e(t,n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var id=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(t,n){var r=new Dt(Ui,t),i=new Dt(Ui,n);return this.compare(r,i)!==0},e.prototype.minPost=function(){return Dt.MIN},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yh,uR=function(e){Z(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return yh},set:function(n){yh=n},enumerable:!1,configurable:!0}),t.prototype.compare=function(n,r){return qs(n.name,r.name)},t.prototype.isDefinedOn=function(n){throw Ou("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(n,r){return!1},t.prototype.minPost=function(){return Dt.MIN},t.prototype.maxPost=function(){return new Dt(pi,yh)},t.prototype.makePost=function(n,r){return K(typeof n=="string","KeyIndex indexValue must always be a string."),new Dt(n,yh)},t.prototype.toString=function(){return".key"},t}(id),ci=new uR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fy;function h3(e){Fy=e}var cR=function(e){return typeof e=="number"?"number:"+zN(e):"string:"+e},lR=function(e){if(e.isLeafNode()){var t=e.val();K(typeof t=="string"||typeof t=="number"||typeof t=="object"&&zn(t,".sv"),"Priority must be a string or number.")}else K(e===Fy||e.isEmpty(),"priority of unexpected type.");K(e===Fy||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BS,au=function(){function e(t,n){n===void 0&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,K(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),lR(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return BS},set:function(t){BS=t},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return t===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:t.getFront()===".priority"?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(t,n){return null},e.prototype.updateImmediateChild=function(t,n){return t===".priority"?this.updatePriority(n):n.isEmpty()&&t!==".priority"?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=t.getFront();return r===null?n:n.isEmpty()&&r!==".priority"?this:(K(r!==".priority"||t.getLength()===1,".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(t,n){return!1},e.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+cR(this.priorityNode_.val())+":");var n=typeof this.value_;t+=n+":",n==="number"?t+=zN(this.value_):t+=this.value_,this.lazyHash_=GN(t)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(K(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(r);return K(i>=0,"Unknown leaf type: "+n),K(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var n=t;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fR,hR;function p3(e){fR=e}function d3(e){hR=e}var v3=function(e){Z(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var i=n.node.getPriority(),s=r.node.getPriority(),a=i.compareTo(s);return a===0?qs(n.name,r.name):a},t.prototype.isDefinedOn=function(n){return!n.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(n,r){return!n.getPriority().equals(r.getPriority())},t.prototype.minPost=function(){return Dt.MIN},t.prototype.maxPost=function(){return new Dt(pi,new au("[PRIORITY-POST]",hR))},t.prototype.makePost=function(n,r){var i=fR(n);return new Dt(r,new au("[PRIORITY-POST]",i))},t.prototype.toString=function(){return".priority"},t}(id),Zt=new v3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _h=function(){function e(t,n,r,i,s){s===void 0&&(s=null),this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];for(var a=1;!t.isEmpty();)if(t=t,a=n?r(t.key,n):1,i&&(a*=-1),a<0)this.isReverse_?t=t.left:t=t.right;else if(a===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}return e.prototype.getNext=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(t.key,t.value):n={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return n},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(this.nodeStack_.length===0)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},e}(),Or=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??Oi.EMPTY_NODE,this.right=s??Oi.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(t,n,r){var i=this,s=r(t,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Oi.EMPTY_NODE;var t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()},e.prototype.remove=function(t,n){var r,i;if(r=this,n(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(t,r.key)===0){if(r.right.isEmpty())return Oi.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,n))}return r.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},e.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t},e.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),g3=function(){function e(){}return e.prototype.copy=function(t,n,r,i,s){return this},e.prototype.insert=function(t,n,r){return new Or(t,n,null)},e.prototype.remove=function(t,n){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(t){return!1},e.prototype.reverseTraversal=function(t){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Oi=function(){function e(t,n){n===void 0&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Or.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Or.BLACK,null,null))},e.prototype.get=function(t){for(var n,r=this.root_;!r.isEmpty();){if(n=this.comparator_(t,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null},e.prototype.getPredecessorKey=function(t){for(var n,r=this.root_,i=null;!r.isEmpty();)if(n=this.comparator_(t,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},e.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},e.prototype.getIterator=function(t){return new _h(this.root_,null,this.comparator_,!1,t)},e.prototype.getIteratorFrom=function(t,n){return new _h(this.root_,t,this.comparator_,!1,n)},e.prototype.getReverseIteratorFrom=function(t,n){return new _h(this.root_,t,this.comparator_,!0,n)},e.prototype.getReverseIterator=function(t){return new _h(this.root_,null,this.comparator_,!0,t)},e.EMPTY_NODE=new g3,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m3=Math.log(2),y3=function(){function e(t){var n=function(s){return parseInt(Math.log(s)/m3,10)},r=function(s){return parseInt(Array(s+1).join("1"),2)};this.count=n(t+1),this.current_=this.count-1;var i=r(this.count);this.bits_=t+1&i}return e.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},e}(),sp=function(e,t,n,r){e.sort(t);var i=function(l,h){var p=h-l,v,m;if(p===0)return null;if(p===1)return v=e[l],m=n?n(v):v,new Or(m,v.node,Or.BLACK,null,null);var y=parseInt(p/2,10)+l,b=i(l,y),E=i(y+1,h);return v=e[y],m=n?n(v):v,new Or(m,v.node,Or.BLACK,b,E)},s=function(l){for(var h=null,p=null,v=e.length,m=function(C,P){var D=v-C,F=v;v-=C;var Y=i(D+1,F),U=e[D],_t=n?n(U):U;y(new Or(_t,U.node,P,null,Y))},y=function(C){h?(h.left=C,h=C):(p=C,h=C)},b=0;b<l.count;++b){var E=l.nextBitIsOne(),I=Math.pow(2,l.count-(b+1));E?m(I,Or.BLACK):(m(I,Or.BLACK),m(I,Or.RED))}return p},a=new y3(e.length),c=s(a);return new Oi(r||t,c)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tm,Sa={},ap=function(){function e(t,n){this.indexes_=t,this.indexSet_=n}return Object.defineProperty(e,"Default",{get:function(){return K(Sa&&Zt,"ChildrenNode.ts has not been loaded"),Tm=Tm||new e({".priority":Sa},{".priority":Zt}),Tm},enumerable:!1,configurable:!0}),e.prototype.get=function(t){var n=Dr(this.indexes_,t);if(!n)throw new Error("No index defined for "+t);return n instanceof Oi?n:null},e.prototype.hasIndex=function(t){return zn(this.indexSet_,t.toString())},e.prototype.addIndex=function(t,n){K(t!==ci,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r=[],i=!1,s=n.getIterator(Dt.Wrap),a=s.getNext();a;)i=i||t.isDefinedOn(a.node),r.push(a),a=s.getNext();var c;i?c=sp(r,t.getCompare()):c=Sa;var l=t.toString(),h=ee({},this.indexSet_);h[l]=t;var p=ee({},this.indexes_);return p[l]=c,new e(p,h)},e.prototype.addToIndexes=function(t,n){var r=this,i=rp(this.indexes_,function(s,a){var c=Dr(r.indexSet_,a);if(K(c,"Missing index implementation for "+a),s===Sa)if(c.isDefinedOn(t.node)){for(var l=[],h=n.getIterator(Dt.Wrap),p=h.getNext();p;)p.name!==t.name&&l.push(p),p=h.getNext();return l.push(t),sp(l,c.getCompare())}else return Sa;else{var v=n.get(t.name),m=s;return v&&(m=m.remove(new Dt(t.name,v))),m.insert(t,t.node)}});return new e(i,this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){var r=rp(this.indexes_,function(i){if(i===Sa)return i;var s=n.get(t.name);return s?i.remove(new Dt(t.name,s)):i});return new e(r,this.indexSet_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(e,t){return qs(e.name,t.name)}function rw(e,t){return qs(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dc,It=function(){function e(t,n,r){this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&lR(this.priorityNode_),this.children_.isEmpty()&&K(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Dc||(Dc=new e(new Oi(rw),null,ap.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Dc},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(t){if(t===".priority")return this.getPriority();var n=this.children_.get(t);return n===null?Dc:n},e.prototype.getChild=function(t){var n=t.getFront();return n===null?this:this.getImmediateChild(n).getChild(t.popFront())},e.prototype.hasChild=function(t){return this.children_.get(t)!==null},e.prototype.updateImmediateChild=function(t,n){if(K(n,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(n);var r=new Dt(t,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Dc:this.priorityNode_;return new e(i,a,s)},e.prototype.updateChild=function(t,n){var r=t.getFront();if(r===null)return n;K(t.getFront()!==".priority"||t.getLength()===1,".priority must be the last token in a path");var i=this.getImmediateChild(r).updateChild(t.popFront(),n);return this.updateImmediateChild(r,i)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,s=!0;if(this.forEachChild(Zt,function(l,h){n[l]=h.val(t),r++,s&&e.INTEGER_REGEXP_.test(l)?i=Math.max(i,Number(l)):s=!1}),!t&&s&&i<2*r){var a=[];for(var c in n)a[c]=n[c];return a}else return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(this.lazyHash_===null){var t="";this.getPriority().isEmpty()||(t+="priority:"+cR(this.getPriority().val())+":"),this.forEachChild(Zt,function(n,r){var i=r.hash();i!==""&&(t+=":"+n+":"+i)}),this.lazyHash_=t===""?"":GN(t)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(t,n,r){var i=this.resolveIndex_(r);if(i){var s=i.getPredecessorKey(new Dt(t,n));return s?s.name:null}else return this.children_.getPredecessorKey(t)},e.prototype.getFirstChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.minKey();return r&&r.name}else return this.children_.minKey()},e.prototype.getFirstChild=function(t){var n=this.getFirstChildName(t);return n?new Dt(n,this.children_.get(n)):null},e.prototype.getLastChildName=function(t){var n=this.resolveIndex_(t);if(n){var r=n.maxKey();return r&&r.name}else return this.children_.maxKey()},e.prototype.getLastChild=function(t){var n=this.getLastChildName(t);return n?new Dt(n,this.children_.get(n)):null},e.prototype.forEachChild=function(t,n){var r=this.resolveIndex_(t);return r?r.inorderTraversal(function(i){return n(i.name,i.node)}):this.children_.inorderTraversal(n)},e.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},e.prototype.getIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(t,function(a){return a});for(var i=this.children_.getIteratorFrom(t.name,Dt.Wrap),s=i.peek();s!=null&&n.compare(s,t)<0;)i.getNext(),s=i.peek();return i},e.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},e.prototype.getReverseIteratorFrom=function(t,n){var r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(t,function(a){return a});for(var i=this.children_.getReverseIteratorFrom(t.name,Dt.Wrap),s=i.peek();s!=null&&n.compare(s,t)>0;)i.getNext(),s=i.peek();return i},e.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Gl?-1:0},e.prototype.withIndex=function(t){if(t===ci||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(t){return t===ci||this.indexMap_.hasIndex(t)},e.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var n=t;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){for(var r=this.getIterator(Zt),i=n.getIterator(Zt),s=r.getNext(),a=i.getNext();s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=r.getNext(),a=i.getNext()}return s===null&&a===null}else return!1;else return!1},e.prototype.resolveIndex_=function(t){return t===ci?null:this.indexMap_.get(t.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),w3=function(e){Z(t,e);function t(){return e.call(this,new Oi(rw),It.EMPTY_NODE,ap.Default)||this}return t.prototype.compareTo=function(n){return n===this?0:1},t.prototype.equals=function(n){return n===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(n){return It.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(It),Gl=new w3;Object.defineProperties(Dt,{MIN:{value:new Dt(Ui,It.EMPTY_NODE)},MAX:{value:new Dt(pi,Gl)}});uR.__EMPTY_NODE=It.EMPTY_NODE;au.__childrenNodeConstructor=It;h3(Gl);d3(Gl);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b3=!0;function de(e,t){if(t===void 0&&(t=null),e===null)return It.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),K(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){var n=e;return new au(n,de(t))}if(!(e instanceof Array)&&b3){var r=[],i=!1,s=e;if(je(s,function(h,p){if(h.substring(0,1)!=="."){var v=de(p);v.isEmpty()||(i=i||!v.getPriority().isEmpty(),r.push(new Dt(h,v)))}}),r.length===0)return It.EMPTY_NODE;var a=sp(r,_3,function(h){return h.name},rw);if(i){var c=sp(r,Zt.getCompare());return new It(a,de(t),new ap({".priority":c},{".priority":Zt}))}else return new It(a,de(t),ap.Default)}else{var l=It.EMPTY_NODE;return je(e,function(h,p){if(zn(e,h)&&h.substring(0,1)!=="."){var v=de(p);(v.isLeafNode()||!v.isEmpty())&&(l=l.updateImmediateChild(h,v))}}),l.updatePriority(de(t))}}p3(de);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E3=function(e){Z(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.compare=function(n,r){var i=n.node.compareTo(r.node);return i===0?qs(n.name,r.name):i},t.prototype.isDefinedOn=function(n){return!0},t.prototype.indexedValueChanged=function(n,r){return!n.equals(r)},t.prototype.minPost=function(){return Dt.MIN},t.prototype.maxPost=function(){return Dt.MAX},t.prototype.makePost=function(n,r){var i=de(n);return new Dt(r,i)},t.prototype.toString=function(){return".value"},t}(id),Uy=new E3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jy=function(e){Z(t,e);function t(n){var r=e.call(this)||this;return r.indexPath_=n,K(!n.isEmpty()&&n.getFront()!==".priority","Can't create PathIndex with empty path or .priority key"),r}return t.prototype.extractChild=function(n){return n.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(n){return!n.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(n,r){var i=this.extractChild(n.node),s=this.extractChild(r.node),a=i.compareTo(s);return a===0?qs(n.name,r.name):a},t.prototype.makePost=function(n,r){var i=de(n),s=It.EMPTY_NODE.updateChild(this.indexPath_,i);return new Dt(r,s)},t.prototype.maxPost=function(){var n=It.EMPTY_NODE.updateChild(this.indexPath_,Gl);return new Dt(pi,n)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(id);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var po=function(){function e(t,n,r){this.node_=t,this.ref_=n,this.index_=r}return e.prototype.val=function(){return mt("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return mt("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return mt("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return mt("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){mt("DataSnapshot.child",0,1,arguments.length),t=String(t),ml("DataSnapshot.child",1,t,!1);var n=new nt(t),r=this.ref_.child(n);return new e(this.node_.getChild(n),r,Zt)},e.prototype.hasChild=function(t){mt("DataSnapshot.hasChild",1,1,arguments.length),ml("DataSnapshot.hasChild",1,t,!1);var n=new nt(t);return!this.node_.getChild(n).isEmpty()},e.prototype.getPriority=function(){return mt("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;if(mt("DataSnapshot.forEach",1,1,arguments.length),Qe("DataSnapshot.forEach",1,t,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(i,s){return t(new e(s,n.ref_.child(i),Zt))})},e.prototype.hasChildren=function(){return mt("DataSnapshot.hasChildren",0,0,arguments.length),this.node_.isLeafNode()?!1:!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return mt("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return mt("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pR=function(){function e(t,n,r,i){this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return e.prototype.getPath=function(){var t=this.snapshot.getRef();return this.eventType==="value"?t.path:t.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Ue(this.snapshot.exportVal())},e}(),dR=function(){function e(t,n,r){this.eventRegistration=t,this.error=n,this.path=r}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qS=function(){function e(t,n,r){this.callback_=t,this.cancelCallback_=n,this.context_=r}return e.prototype.respondsTo=function(t){return t==="value"},e.prototype.createEvent=function(t,n){var r=n.getQueryParams().getIndex();return new pR("value",this,new po(t.snapshotNode,n.getRef(),r))},e.prototype.getEventRunner=function(t){var n=this.context_;if(t.getEventType()==="cancel"){K(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var r=this.cancelCallback_;return function(){r.call(n,t.error)}}else{var i=this.callback_;return function(){i.call(n,t.snapshot)}}},e.prototype.createCancelEvent=function(t,n){return this.cancelCallback_?new dR(this,t,n):null},e.prototype.matches=function(t){return t instanceof e?!t.callback_||!this.callback_?!0:t.callback_===this.callback_&&t.context_===this.context_:!1},e.prototype.hasAnyCallback=function(){return this.callback_!==null},e}(),HS=function(){function e(t,n,r){this.callbacks_=t,this.cancelCallback_=n,this.context_=r}return e.prototype.respondsTo=function(t){var n=t==="children_added"?"child_added":t;return n=n==="children_removed"?"child_removed":n,zn(this.callbacks_,n)},e.prototype.createCancelEvent=function(t,n){return this.cancelCallback_?new dR(this,t,n):null},e.prototype.createEvent=function(t,n){K(t.childName!=null,"Child events should have a childName.");var r=n.getRef().child(t.childName),i=n.getQueryParams().getIndex();return new pR(t.type,this,new po(t.snapshotNode,r,i),t.prevName)},e.prototype.getEventRunner=function(t){var n=this.context_;if(t.getEventType()==="cancel"){K(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var r=this.cancelCallback_;return function(){r.call(n,t.error)}}else{var i=this.callbacks_[t.eventType];return function(){i.call(n,t.snapshot,t.prevName)}}},e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var r=Object.keys(t.callbacks_),i=Object.keys(this.callbacks_),s=r.length,a=i.length;if(s===a)if(s===1){var c=r[0],l=i[0];return l===c&&(!t.callbacks_[c]||!this.callbacks_[l]||t.callbacks_[c]===this.callbacks_[l])}else return i.every(function(h){return t.callbacks_[h]===n.callbacks_[h]})}}return!1},e.prototype.hasAnyCallback=function(){return this.callbacks_!==null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sm,iw=function(){function e(t,n,r,i){this.repo=t,this.path=n,this.queryParams_=r,this.orderByCalled_=i}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return K(Sm,"Reference.ts has not been loaded"),Sm},set:function(t){Sm=t},enumerable:!1,configurable:!0}),e.validateQueryEndpoints_=function(t){var n=null,r=null;if(t.hasStart()&&(n=t.getIndexStartValue()),t.hasEnd()&&(r=t.getIndexEndValue()),t.getIndex()===ci){var i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",s="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){var a=t.getIndexStartName();if(a!==Ui)throw new Error(i);if(typeof n!="string")throw new Error(s)}if(t.hasEnd()){var c=t.getIndexEndName();if(c!==pi)throw new Error(i);if(typeof r!="string")throw new Error(s)}}else if(t.getIndex()===Zt){if(n!=null&&!vl(n)||r!=null&&!vl(r))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(K(t.getIndex()instanceof jy||t.getIndex()===Uy,"unknown index type."),n!=null&&typeof n=="object"||r!=null&&typeof r=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},e.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(t){if(this.orderByCalled_===!0)throw new Error(t+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return mt("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,i){mt("Query.on",2,4,arguments.length),Im("Query.on",1,t,!1),Qe("Query.on",2,n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i);if(t==="value")this.onValueEvent(n,s.cancel,s.context);else{var a={};a[t]=n,this.onChildEvent(a,s.cancel,s.context)}return n},e.prototype.onValueEvent=function(t,n,r){var i=new qS(t,n||null,r||null);this.repo.addEventCallbackForQuery(this,i)},e.prototype.onChildEvent=function(t,n,r){var i=new HS(t,n,r);this.repo.addEventCallbackForQuery(this,i)},e.prototype.off=function(t,n,r){mt("Query.off",0,3,arguments.length),Im("Query.off",1,t,!0),Qe("Query.off",2,n,!0),MS("Query.off",3,r,!0);var i=null,s=null;if(t==="value"){var a=n||null;i=new qS(a,null,r||null)}else t&&(n&&(s={},s[t]=n),i=new HS(s,null,r||null));this.repo.removeEventCallbackForQuery(this,i)},e.prototype.get=function(){return this.repo.getValue(this)},e.prototype.once=function(t,n,r,i){var s=this;mt("Query.once",1,4,arguments.length),Im("Query.once",1,t,!1),Qe("Query.once",2,n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,i),c=!0,l=new qn;l.promise.catch(function(){});var h=function(p){c&&(c=!1,s.off(t,h),n&&n.bind(a.context)(p),l.resolve(p))};return this.on(t,h,function(p){s.off(t,h),a.cancel&&a.cancel.bind(a.context)(p),l.reject(p)}),l.promise},e.prototype.limitToFirst=function(t){if(mt("Query.limitToFirst",1,1,arguments.length),typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(mt("Query.limitToLast",1,1,arguments.length),typeof t!="number"||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(mt("Query.orderByChild",1,1,arguments.length),t==="$key")throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if(t==="$priority")throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if(t==="$value")throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ml("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new nt(t);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new jy(n),i=this.queryParams_.orderBy(r);return e.validateQueryEndpoints_(i),new e(this.repo,this.path,i,!0)},e.prototype.orderByKey=function(){mt("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(ci);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){mt("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Zt);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){mt("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(Uy);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){t===void 0&&(t=null),mt("Query.startAt",0,2,arguments.length),si("Query.startAt",1,t,this.path,!0),kc("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return t===void 0&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.startAfter=function(t,n){t===void 0&&(t=null),mt("Query.startAfter",0,2,arguments.length),si("Query.startAfter",1,t,this.path,!1),kc("Query.startAfter",2,n,!0);var r=this.queryParams_.startAfter(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){t===void 0&&(t=null),mt("Query.endAt",0,2,arguments.length),si("Query.endAt",1,t,this.path,!0),kc("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endBefore=function(t,n){t===void 0&&(t=null),mt("Query.endBefore",0,2,arguments.length),si("Query.endBefore",1,t,this.path,!1),kc("Query.endBefore",2,n,!0);var r=this.queryParams_.endBefore(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(t,n){if(mt("Query.equalTo",1,2,arguments.length),si("Query.equalTo",1,t,this.path,!1),kc("Query.equalTo",2,n,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,n).endAt(t,n)},e.prototype.toString=function(){return mt("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return mt("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var t=this.queryObject(),n=Z_(t);return n==="{}"?"default":n},e.prototype.isEqual=function(t){if(mt("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===t.repo,i=this.path.equals(t.path),s=this.queryIdentifier()===t.queryIdentifier();return r&&i&&s},e.getCancelAndContextArgs_=function(t,n,r){var i={cancel:null,context:null};if(n&&r)i.cancel=n,Qe(t,3,i.cancel,!0),i.context=r,MS(t,4,i.context,!0);else if(n)if(typeof n=="object"&&n!==null)i.context=n;else if(typeof n=="function")i.cancel=n;else throw new Error(yr(t,3,!0)+" must either be a cancel callback or a context object.");return i},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var I3=function(){function e(t){this.node_=t}return e.prototype.getImmediateChild=function(t){var n=this.node_.getImmediateChild(t);return new e(n)},e.prototype.node=function(){return this.node_},e}(),T3=function(){function e(t,n){this.syncTree_=t,this.path_=n}return e.prototype.getImmediateChild=function(t){var n=this.path_.child(t);return new e(this.syncTree_,n)},e.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},e}(),S3=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},GS=function(e,t,n){if(!e||typeof e!="object")return e;if(K(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return A3(e[".sv"],t,n);if(typeof e[".sv"]=="object")return C3(e[".sv"],t);K(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},A3=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:K(!1,"Unexpected server value: "+e)}},C3=function(e,t,n){e.hasOwnProperty("increment")||K(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;typeof r!="number"&&K(!1,"Unexpected increment value: "+r);var i=t.node();if(K(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i,a=s.getValue();return typeof a!="number"?r:a+r},WS=function(e,t,n,r){return ow(t,new T3(n,e),r)},Am=function(e,t,n){return ow(e,new I3(t),n)};function ow(e,t,n){var r=e.getPriority().val(),i=GS(r,t.getImmediateChild(".priority"),n),s;if(e.isLeafNode()){var a=e,c=GS(a.getValue(),t,n);return c!==a.getValue()||i!==a.getPriority().val()?new au(c,de(i)):e}else{var l=e;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new au(i))),l.forEachChild(Zt,function(h,p){var v=ow(p,t.getImmediateChild(h),n);v!==p&&(s=s.updateImmediateChild(h,v))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cm=function(){function e(){this.value=null,this.children=new Map}return e.prototype.find=function(t){if(this.value!=null)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var n=t.getFront();if(t=t.popFront(),this.children.has(n)){var r=this.children.get(n);return r.find(t)}else return null}else return null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value=n,this.children.clear();else if(this.value!==null)this.value=this.value.updateChild(t,n);else{var r=t.getFront();this.children.has(r)||this.children.set(r,new e);var i=this.children.get(r);t=t.popFront(),i.remember(t,n)}},e.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(this.value!==null){if(this.value.isLeafNode())return!1;var n=this.value;this.value=null;var r=this;return n.forEachChild(Zt,function(a,c){r.remember(new nt(a),c)}),this.forget(t)}else if(this.children.size>0){var i=t.getFront();if(t=t.popFront(),this.children.has(i)){var s=this.children.get(i).forget(t);s&&this.children.delete(i)}return this.children.size===0}else return!0},e.prototype.forEachTree=function(t,n){this.value!==null?n(t,this.value):this.forEachChild(function(r,i){var s=new nt(t.toString()+"/"+r);i.forEachTree(s,n)})},e.prototype.forEachChild=function(t){this.children.forEach(function(n,r){t(r,n)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lr;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Lr||(Lr={}));var Ci=function(){function e(t,n,r,i){this.fromUser=t,this.fromServer=n,this.queryId=r,this.tagged=i,K(!i||n,"Tagged queries must be from server.")}return e.user=function(){return new e(!0,!1,null,!1)},e.server=function(){return new e(!1,!0,null,!1)},e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N3=function(){function e(t,n,r){this.path=t,this.affectedTree=n,this.revert=r,this.type=Lr.ACK_USER_WRITE,this.source=Ci.user()}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(this.affectedTree.value!=null)return K(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new nt(t));return new e(nt.Empty,n,this.revert)}else return K(this.path.getFront()===t,"operationForChild called for unrelated child."),new e(this.path.popFront(),this.affectedTree,this.revert)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nm,R3=function(){return Nm||(Nm=new Oi($4)),Nm},rr=function(){function e(t,n){n===void 0&&(n=R3()),this.value=t,this.children=n}return e.fromObject=function(t){var n=new e(null);return je(t,function(r,i){n=n.set(new nt(r),i)}),n},e.prototype.isEmpty=function(){return this.value===null&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(t,n){if(this.value!=null&&n(this.value))return{path:nt.Empty,value:this.value};if(t.isEmpty())return null;var r=t.getFront(),i=this.children.get(r);if(i!==null){var s=i.findRootMostMatchingPathAndValue(t.popFront(),n);if(s!=null){var a=new nt(r).child(s.path);return{path:a,value:s.value}}else return null}else return null},e.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),r=this.children.get(n);return r!==null?r.subtree(t.popFront()):new e(null)},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var r=t.getFront(),i=this.children.get(r)||new e(null),s=i.set(t.popFront(),n),a=this.children.insert(r,s);return new e(this.value,a)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?new e(null):new e(null,this.children);var n=t.getFront(),r=this.children.get(n);if(r){var i=r.remove(t.popFront()),s=void 0;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new e(null):new e(this.value,s)}else return this},e.prototype.get=function(t){if(t.isEmpty())return this.value;var n=t.getFront(),r=this.children.get(n);return r?r.get(t.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var r=t.getFront(),i=this.children.get(r)||new e(null),s=i.setTree(t.popFront(),n),a=void 0;return s.isEmpty()?a=this.children.remove(r):a=this.children.insert(r,s),new e(this.value,a)},e.prototype.fold=function(t){return this.fold_(nt.Empty,t)},e.prototype.fold_=function(t,n){var r={};return this.children.inorderTraversal(function(i,s){r[i]=s.fold_(t.child(i),n)}),n(t,this.value,r)},e.prototype.findOnPath=function(t,n){return this.findOnPath_(t,nt.Empty,n)},e.prototype.findOnPath_=function(t,n,r){var i=this.value?r(n,this.value):!1;if(i)return i;if(t.isEmpty())return null;var s=t.getFront(),a=this.children.get(s);return a?a.findOnPath_(t.popFront(),n.child(s),r):null},e.prototype.foreachOnPath=function(t,n){return this.foreachOnPath_(t,nt.Empty,n)},e.prototype.foreachOnPath_=function(t,n,r){if(t.isEmpty())return this;this.value&&r(n,this.value);var i=t.getFront(),s=this.children.get(i);return s?s.foreachOnPath_(t.popFront(),n.child(i),r):new e(null)},e.prototype.foreach=function(t){this.foreach_(nt.Empty,t)},e.prototype.foreach_=function(t,n){this.children.inorderTraversal(function(r,i){i.foreach_(t.child(r),n)}),this.value&&n(t,this.value)},e.prototype.foreachChild=function(t){this.children.inorderTraversal(function(n,r){r.value&&t(n,r.value)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $S=function(){function e(t,n){this.source=t,this.path=n,this.type=Lr.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,nt.Empty):new e(this.source,this.path.popFront())},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qh=function(){function e(t,n,r){this.source=t,this.path=n,this.snap=r,this.type=Lr.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,nt.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rm=function(){function e(t,n,r){this.source=t,this.path=n,this.children=r,this.type=Lr.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new nt(t));return n.isEmpty()?null:n.value?new qh(this.source,nt.Empty,n.value):new e(this.source,nt.Empty,n)}else return K(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Co=function(){function e(t,n,r){this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var n=t.getFront();return this.isCompleteForChild(n)},e.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},e.prototype.getNode=function(){return this.node_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vR=function(){function e(t,n){this.eventCache_=t,this.serverCache_=n}return e.prototype.updateEventSnap=function(t,n,r){return new e(new Co(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new Co(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(e){return{type:"value",snapshotNode:e}}function uu(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function yl(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function _l(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function O3(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sw=function(){function e(t){this.index_=t}return e.prototype.updateChild=function(t,n,r,i,s,a){K(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var c=t.getImmediateChild(n);return c.getChild(i).equals(r.getChild(i))&&c.isEmpty()===r.isEmpty()||(a!=null&&(r.isEmpty()?t.hasChild(n)?a.trackChildChange(yl(n,c)):K(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):c.isEmpty()?a.trackChildChange(uu(n,r)):a.trackChildChange(_l(n,r,c))),t.isLeafNode()&&r.isEmpty())?t:t.updateImmediateChild(n,r).withIndex(this.index_)},e.prototype.updateFullNode=function(t,n,r){return r!=null&&(t.isLeafNode()||t.forEachChild(Zt,function(i,s){n.hasChild(i)||r.trackChildChange(yl(i,s))}),n.isLeafNode()||n.forEachChild(Zt,function(i,s){if(t.hasChild(i)){var a=t.getImmediateChild(i);a.equals(s)||r.trackChildChange(_l(i,s,a))}else r.trackChildChange(uu(i,s))})),n.withIndex(this.index_)},e.prototype.updatePriority=function(t,n){return t.isEmpty()?It.EMPTY_NODE:t.updatePriority(n)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x3=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(t){var n=t.type,r=t.childName;K(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),K(r!==".priority","Only non-priority child changes can be tracked.");var i=this.changeMap.get(r);if(i){var s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,_l(r,t.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,yl(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,uu(r,t.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,_l(r,t.snapshotNode,i.oldSnap));else throw Ou("Illegal combination of changes: "+t+" occurred after "+i)}else this.changeMap.set(r,t)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var P3=function(){function e(){}return e.prototype.getCompleteChild=function(t){return null},e.prototype.getChildAfterChild=function(t,n,r){return null},e}(),zS=new P3,Om=function(){function e(t,n,r){r===void 0&&(r=null),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return e.prototype.getCompleteChild=function(t){var n=this.viewCache_.getEventCache();if(n.isCompleteForChild(t))return n.getNode().getImmediateChild(t);var r=this.optCompleteServerCache_!=null?new Co(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,r)},e.prototype.getChildAfterChild=function(t,n,r){var i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),s=this.writes_.calcIndexedSlice(i,n,1,r,t);return s.length===0?null:s[0]},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var k3=function(){function e(t,n){this.viewCache=t,this.changes=n}return e}(),D3=function(){function e(t){this.filter_=t}return e.prototype.assertIndexed=function(t){K(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),K(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,r,i){var s=new x3,a,c;if(n.type===Lr.OVERWRITE){var l=n;l.source.fromUser?a=this.applyUserOverwrite_(t,l.path,l.snap,r,i,s):(K(l.source.fromServer,"Unknown source."),c=l.source.tagged||t.getServerCache().isFiltered()&&!l.path.isEmpty(),a=this.applyServerOverwrite_(t,l.path,l.snap,r,i,c,s))}else if(n.type===Lr.MERGE){var h=n;h.source.fromUser?a=this.applyUserMerge_(t,h.path,h.children,r,i,s):(K(h.source.fromServer,"Unknown source."),c=h.source.tagged||t.getServerCache().isFiltered(),a=this.applyServerMerge_(t,h.path,h.children,r,i,c,s))}else if(n.type===Lr.ACK_USER_WRITE){var p=n;p.revert?a=this.revertUserWrite_(t,p.path,r,i,s):a=this.ackUserWrite_(t,p.path,p.affectedTree,r,i,s)}else if(n.type===Lr.LISTEN_COMPLETE)a=this.listenComplete_(t,n.path,r,s);else throw Ou("Unknown operation type: "+n.type);var v=s.getChanges();return e.maybeAddValueEvent_(t,a,v),new k3(a,v)},e.maybeAddValueEvent_=function(t,n,r){var i=n.getEventCache();if(i.isFullyInitialized()){var s=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=t.getCompleteEventSnap();(r.length>0||!t.getEventCache().isFullyInitialized()||s&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&r.push(gR(n.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(t,n,r,i,s){var a=t.getEventCache();if(r.shadowingWrite(n)!=null)return t;var c=void 0,l=void 0;if(n.isEmpty())if(K(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var h=t.getCompleteServerSnap(),p=h instanceof It?h:It.EMPTY_NODE,v=r.calcCompleteEventChildren(p);c=this.filter_.updateFullNode(t.getEventCache().getNode(),v,s)}else{var m=r.calcCompleteEventCache(t.getCompleteServerSnap());c=this.filter_.updateFullNode(t.getEventCache().getNode(),m,s)}else{var y=n.getFront();if(y===".priority"){K(n.getLength()===1,"Can't have a priority with additional path components");var b=a.getNode();l=t.getServerCache().getNode();var E=r.calcEventCacheAfterServerOverwrite(n,b,l);E!=null?c=this.filter_.updatePriority(b,E):c=a.getNode()}else{var I=n.popFront(),C=void 0;if(a.isCompleteForChild(y)){l=t.getServerCache().getNode();var P=r.calcEventCacheAfterServerOverwrite(n,a.getNode(),l);P!=null?C=a.getNode().getImmediateChild(y).updateChild(I,P):C=a.getNode().getImmediateChild(y)}else C=r.calcCompleteChild(y,t.getServerCache());C!=null?c=this.filter_.updateChild(a.getNode(),y,C,I,i,s):c=a.getNode()}}return t.updateEventSnap(c,a.isFullyInitialized()||n.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(t,n,r,i,s,a,c){var l=t.getServerCache(),h,p=a?this.filter_:this.filter_.getIndexedFilter();if(n.isEmpty())h=p.updateFullNode(l.getNode(),r,null);else if(p.filtersNodes()&&!l.isFiltered()){var v=l.getNode().updateChild(n,r);h=p.updateFullNode(l.getNode(),v,null)}else{var m=n.getFront();if(!l.isCompleteForPath(n)&&n.getLength()>1)return t;var y=n.popFront(),b=l.getNode().getImmediateChild(m),E=b.updateChild(y,r);m===".priority"?h=p.updatePriority(l.getNode(),E):h=p.updateChild(l.getNode(),m,E,y,zS,null)}var I=t.updateServerSnap(h,l.isFullyInitialized()||n.isEmpty(),p.filtersNodes()),C=new Om(i,I,s);return this.generateEventCacheAfterServerEvent_(I,n,i,C,c)},e.prototype.applyUserOverwrite_=function(t,n,r,i,s,a){var c=t.getEventCache(),l,h,p=new Om(i,t,s);if(n.isEmpty())h=this.filter_.updateFullNode(t.getEventCache().getNode(),r,a),l=t.updateEventSnap(h,!0,this.filter_.filtersNodes());else{var v=n.getFront();if(v===".priority")h=this.filter_.updatePriority(t.getEventCache().getNode(),r),l=t.updateEventSnap(h,c.isFullyInitialized(),c.isFiltered());else{var m=n.popFront(),y=c.getNode().getImmediateChild(v),b=void 0;if(m.isEmpty())b=r;else{var E=p.getCompleteChild(v);E!=null?m.getBack()===".priority"&&E.getChild(m.parent()).isEmpty()?b=E:b=E.updateChild(m,r):b=It.EMPTY_NODE}if(y.equals(b))l=t;else{var I=this.filter_.updateChild(c.getNode(),v,b,m,p,a);l=t.updateEventSnap(I,c.isFullyInitialized(),this.filter_.filtersNodes())}}}return l},e.cacheHasChild_=function(t,n){return t.getEventCache().isCompleteForChild(n)},e.prototype.applyUserMerge_=function(t,n,r,i,s,a){var c=this,l=t;return r.foreach(function(h,p){var v=n.child(h);e.cacheHasChild_(t,v.getFront())&&(l=c.applyUserOverwrite_(l,v,p,i,s,a))}),r.foreach(function(h,p){var v=n.child(h);e.cacheHasChild_(t,v.getFront())||(l=c.applyUserOverwrite_(l,v,p,i,s,a))}),l},e.prototype.applyMerge_=function(t,n){return n.foreach(function(r,i){t=t.updateChild(r,i)}),t},e.prototype.applyServerMerge_=function(t,n,r,i,s,a,c){var l=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var h=t,p;n.isEmpty()?p=r:p=new rr(null).setTree(n,r);var v=t.getServerCache().getNode();return p.children.inorderTraversal(function(m,y){if(v.hasChild(m)){var b=t.getServerCache().getNode().getImmediateChild(m),E=l.applyMerge_(b,y);h=l.applyServerOverwrite_(h,new nt(m),E,i,s,a,c)}}),p.children.inorderTraversal(function(m,y){var b=!t.getServerCache().isCompleteForChild(m)&&y.value==null;if(!v.hasChild(m)&&!b){var E=t.getServerCache().getNode().getImmediateChild(m),I=l.applyMerge_(E,y);h=l.applyServerOverwrite_(h,new nt(m),I,i,s,a,c)}}),h},e.prototype.ackUserWrite_=function(t,n,r,i,s,a){if(i.shadowingWrite(n)!=null)return t;var c=t.getServerCache().isFiltered(),l=t.getServerCache();if(r.value!=null){if(n.isEmpty()&&l.isFullyInitialized()||l.isCompleteForPath(n))return this.applyServerOverwrite_(t,n,l.getNode().getChild(n),i,s,c,a);if(n.isEmpty()){var h=new rr(null);return l.getNode().forEachChild(ci,function(v,m){h=h.set(new nt(v),m)}),this.applyServerMerge_(t,n,h,i,s,c,a)}else return t}else{var p=new rr(null);return r.foreach(function(v,m){var y=n.child(v);l.isCompleteForPath(y)&&(p=p.set(v,l.getNode().getChild(y)))}),this.applyServerMerge_(t,n,p,i,s,c,a)}},e.prototype.listenComplete_=function(t,n,r,i){var s=t.getServerCache(),a=t.updateServerSnap(s.getNode(),s.isFullyInitialized()||n.isEmpty(),s.isFiltered());return this.generateEventCacheAfterServerEvent_(a,n,r,zS,i)},e.prototype.revertUserWrite_=function(t,n,r,i,s){var a;if(r.shadowingWrite(n)!=null)return t;var c=new Om(r,t,i),l=t.getEventCache().getNode(),h=void 0;if(n.isEmpty()||n.getFront()===".priority"){var p=void 0;if(t.getServerCache().isFullyInitialized())p=r.calcCompleteEventCache(t.getCompleteServerSnap());else{var v=t.getServerCache().getNode();K(v instanceof It,"serverChildren would be complete if leaf node"),p=r.calcCompleteEventChildren(v)}p=p,h=this.filter_.updateFullNode(l,p,s)}else{var m=n.getFront(),y=r.calcCompleteChild(m,t.getServerCache());y==null&&t.getServerCache().isCompleteForChild(m)&&(y=l.getImmediateChild(m)),y!=null?h=this.filter_.updateChild(l,m,y,n.popFront(),c,s):t.getEventCache().getNode().hasChild(m)?h=this.filter_.updateChild(l,m,It.EMPTY_NODE,n.popFront(),c,s):h=l,h.isEmpty()&&t.getServerCache().isFullyInitialized()&&(a=r.calcCompleteEventCache(t.getCompleteServerSnap()),a.isLeafNode()&&(h=this.filter_.updateFullNode(h,a,s)))}return a=t.getServerCache().isFullyInitialized()||r.shadowingWrite(nt.Empty)!=null,t.updateEventSnap(h,a,this.filter_.filtersNodes())},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L3=function(){function e(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(t,n,r){var i=this,s=[],a=[];return t.forEach(function(c){c.type==="child_changed"&&i.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&a.push(O3(c.childName,c.snapshotNode))}),this.generateEventsForType_(s,"child_removed",t,r,n),this.generateEventsForType_(s,"child_added",t,r,n),this.generateEventsForType_(s,"child_moved",a,r,n),this.generateEventsForType_(s,"child_changed",t,r,n),this.generateEventsForType_(s,"value",t,r,n),s},e.prototype.generateEventsForType_=function(t,n,r,i,s){var a=this,c=r.filter(function(l){return l.type===n});c.sort(this.compareChanges_.bind(this)),c.forEach(function(l){var h=a.materializeSingleChange_(l,s);i.forEach(function(p){p.respondsTo(l.type)&&t.push(p.createEvent(h,a.query_))})})},e.prototype.materializeSingleChange_=function(t,n){return t.type==="value"||t.type==="child_removed"||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},e.prototype.compareChanges_=function(t,n){if(t.childName==null||n.childName==null)throw Ou("Should only compare child_ events.");var r=new Dt(t.childName,t.snapshotNode),i=new Dt(n.childName,n.snapshotNode);return this.index_.compare(r,i)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var M3=function(){function e(t,n){this.query_=t,this.eventRegistrations_=[];var r=this.query_.getQueryParams(),i=new sw(r.getIndex()),s=r.getNodeFilter();this.processor_=new D3(s);var a=n.getServerCache(),c=n.getEventCache(),l=i.updateFullNode(It.EMPTY_NODE,a.getNode(),null),h=s.updateFullNode(It.EMPTY_NODE,c.getNode(),null),p=new Co(l,a.isFullyInitialized(),i.filtersNodes()),v=new Co(h,c.isFullyInitialized(),s.filtersNodes());this.viewCache_=new vR(v,p),this.eventGenerator_=new L3(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},e.prototype.getCompleteServerCache=function(t){var n=this.viewCache_.getCompleteServerSnap();return n&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!n.getImmediateChild(t.getFront()).isEmpty())?n.getChild(t):null},e.prototype.isEmpty=function(){return this.eventRegistrations_.length===0},e.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},e.prototype.removeEventRegistration=function(t,n){var r=[];if(n){K(t==null,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(l){var h=l.createCancelEvent(n,i);h&&r.push(h)})}if(t){for(var s=[],a=0;a<this.eventRegistrations_.length;++a){var c=this.eventRegistrations_[a];if(!c.matches(t))s.push(c);else if(t.hasAnyCallback()){s=s.concat(this.eventRegistrations_.slice(a+1));break}}this.eventRegistrations_=s}else this.eventRegistrations_=[];return r},e.prototype.applyOperation=function(t,n,r){t.type===Lr.MERGE&&t.source.queryId!==null&&(K(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),K(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var i=this.viewCache_,s=this.processor_.applyOperation(i,t,n,r);return this.processor_.assertIndexed(s.viewCache),K(s.viewCache.getServerCache().isFullyInitialized()||!i.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=s.viewCache,this.generateEventsForChanges_(s.changes,s.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(t){var n=this.viewCache_.getEventCache(),r=[];if(!n.getNode().isLeafNode()){var i=n.getNode();i.forEachChild(Zt,function(s,a){r.push(uu(s,a))})}return n.isFullyInitialized()&&r.push(gR(n.getNode())),this.generateEventsForChanges_(r,n.getNode(),t)},e.prototype.generateEventsForChanges_=function(t,n,r){var i=r?[r]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,n,i)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wh,Vy=function(){function e(){this.views=new Map}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return K(wh,"Reference.ts has not been loaded"),wh},set:function(t){K(!wh,"__referenceConstructor has already been defined"),wh=t},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return this.views.size===0},e.prototype.applyOperation=function(t,n,r){var i,s,a=t.source.queryId;if(a!==null){var c=this.views.get(a);return K(c!=null,"SyncTree gave us an op for an invalid query."),c.applyOperation(t,n,r)}else{var l=[];try{for(var h=Te(this.views.values()),p=h.next();!p.done;p=h.next()){var c=p.value;l=l.concat(c.applyOperation(t,n,r))}}catch(v){i={error:v}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}},e.prototype.getView=function(t,n,r,i){var s=t.queryIdentifier(),a=this.views.get(s);if(!a){var c=n.calcCompleteEventCache(i?r:null),l=!1;c?l=!0:r instanceof It?(c=n.calcCompleteEventChildren(r),l=!1):(c=It.EMPTY_NODE,l=!1);var h=new vR(new Co(c,l,!1),new Co(r,i,!1));return new M3(t,h)}return a},e.prototype.addEventRegistration=function(t,n,r,i,s){var a=this.getView(t,r,i,s);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),a),a.addEventRegistration(n),a.getInitialEvents(n)},e.prototype.removeEventRegistration=function(t,n,r){var i,s,a=t.queryIdentifier(),c=[],l=[],h=this.hasCompleteView();if(a==="default")try{for(var p=Te(this.views.entries()),v=p.next();!v.done;v=p.next()){var m=hl(v.value,2),y=m[0],b=m[1];l=l.concat(b.removeEventRegistration(n,r)),b.isEmpty()&&(this.views.delete(y),b.getQuery().getQueryParams().loadsAllData()||c.push(b.getQuery()))}}catch(E){i={error:E}}finally{try{v&&!v.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}else{var b=this.views.get(a);b&&(l=l.concat(b.removeEventRegistration(n,r)),b.isEmpty()&&(this.views.delete(a),b.getQuery().getQueryParams().loadsAllData()||c.push(b.getQuery())))}return h&&!this.hasCompleteView()&&c.push(new e.__referenceConstructor(t.repo,t.path)),{removed:c,events:l}},e.prototype.getQueryViews=function(){var t,n,r=[];try{for(var i=Te(this.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.getQuery().getQueryParams().loadsAllData()||r.push(a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},e.prototype.getCompleteServerCache=function(t){var n,r,i=null;try{for(var s=Te(this.views.values()),a=s.next();!a.done;a=s.next()){var c=a.value;i=i||c.getCompleteServerCache(t)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},e.prototype.viewForQuery=function(t){var n=t.getQueryParams();if(n.loadsAllData())return this.getCompleteView();var r=t.queryIdentifier();return this.views.get(r)},e.prototype.viewExistsForQuery=function(t){return this.viewForQuery(t)!=null},e.prototype.hasCompleteView=function(){return this.getCompleteView()!=null},e.prototype.getCompleteView=function(){var t,n;try{for(var r=Te(this.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.getQuery().getQueryParams().loadsAllData())return s}}catch(a){t={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ki=function(){function e(t){this.writeTree_=t}return e.empty=function(){return new e(new rr(null))},e}();function Hc(e,t,n){if(t.isEmpty())return new ki(new rr(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(r!=null){var i=r.path,s=r.value,a=nt.relativePath(i,t);return s=s.updateChild(a,n),new ki(e.writeTree_.set(i,s))}else{var c=new rr(n),l=e.writeTree_.setTree(t,c);return new ki(l)}}function xm(e,t,n){var r=e;return je(n,function(i,s){r=Hc(r,t.child(i),s)}),r}function KS(e,t){if(t.isEmpty())return ki.empty();var n=e.writeTree_.setTree(t,new rr(null));return new ki(n)}function Pm(e,t){return fo(e,t)!=null}function fo(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return n!=null?e.writeTree_.get(n.path).getChild(nt.relativePath(n.path,t)):null}function QS(e){var t=[],n=e.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Zt,function(r,i){t.push(new Dt(r,i))}):e.writeTree_.children.inorderTraversal(function(r,i){i.value!=null&&t.push(new Dt(r,i.value))}),t}function oo(e,t){if(t.isEmpty())return e;var n=fo(e,t);return n!=null?new ki(new rr(n)):new ki(e.writeTree_.subtree(t))}function km(e){return e.writeTree_.isEmpty()}function Aa(e,t){return mR(nt.Empty,e.writeTree_,t)}function mR(e,t,n){if(t.value!=null)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal(function(i,s){i===".priority"?(K(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=mR(e.child(i),s,n)}),!n.getChild(e).isEmpty()&&r!==null&&(n=n.updateChild(e.child(".priority"),r)),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var F3=function(){function e(){this.visibleWrites_=ki.empty(),this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(t){return new U3(t,this)},e.prototype.addOverwrite=function(t,n,r,i){K(r>this.lastWriteId_,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),this.allWrites_.push({path:t,snap:n,writeId:r,visible:i}),i&&(this.visibleWrites_=Hc(this.visibleWrites_,t,n)),this.lastWriteId_=r},e.prototype.addMerge=function(t,n,r){K(r>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:n,writeId:r,visible:!0}),this.visibleWrites_=xm(this.visibleWrites_,t,n),this.lastWriteId_=r},e.prototype.getWrite=function(t){for(var n=0;n<this.allWrites_.length;n++){var r=this.allWrites_[n];if(r.writeId===t)return r}return null},e.prototype.removeWrite=function(t){var n=this,r=this.allWrites_.findIndex(function(p){return p.writeId===t});K(r>=0,"removeWrite called with nonexistent writeId.");var i=this.allWrites_[r];this.allWrites_.splice(r,1);for(var s=i.visible,a=!1,c=this.allWrites_.length-1;s&&c>=0;){var l=this.allWrites_[c];l.visible&&(c>=r&&this.recordContainsPath_(l,i.path)?s=!1:i.path.contains(l.path)&&(a=!0)),c--}if(s){if(a)return this.resetTree_(),!0;if(i.snap)this.visibleWrites_=KS(this.visibleWrites_,i.path);else{var h=i.children;je(h,function(p){n.visibleWrites_=KS(n.visibleWrites_,i.path.child(p))})}return!0}else return!1},e.prototype.getCompleteWriteData=function(t){return fo(this.visibleWrites_,t)},e.prototype.calcCompleteEventCache=function(t,n,r,i){if(!r&&!i){var s=fo(this.visibleWrites_,t);if(s!=null)return s;var a=oo(this.visibleWrites_,t);if(km(a))return n;if(n==null&&!Pm(a,nt.Empty))return null;var c=n||It.EMPTY_NODE;return Aa(a,c)}else{var l=oo(this.visibleWrites_,t);if(!i&&km(l))return n;if(!i&&n==null&&!Pm(l,nt.Empty))return null;var h=function(m){return(m.visible||i)&&(!r||!~r.indexOf(m.writeId))&&(m.path.contains(t)||t.contains(m.path))},p=e.layerTree_(this.allWrites_,h,t),c=n||It.EMPTY_NODE;return Aa(p,c)}},e.prototype.calcCompleteEventChildren=function(t,n){var r=It.EMPTY_NODE,i=fo(this.visibleWrites_,t);if(i)return i.isLeafNode()||i.forEachChild(Zt,function(c,l){r=r.updateImmediateChild(c,l)}),r;if(n){var s=oo(this.visibleWrites_,t);return n.forEachChild(Zt,function(c,l){var h=Aa(oo(s,new nt(c)),l);r=r.updateImmediateChild(c,h)}),QS(s).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}else{var a=oo(this.visibleWrites_,t);return QS(a).forEach(function(c){r=r.updateImmediateChild(c.name,c.node)}),r}},e.prototype.calcEventCacheAfterServerOverwrite=function(t,n,r,i){K(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=t.child(n);if(Pm(this.visibleWrites_,s))return null;var a=oo(this.visibleWrites_,s);return km(a)?i.getChild(n):Aa(a,i.getChild(n))},e.prototype.calcCompleteChild=function(t,n,r){var i=t.child(n),s=fo(this.visibleWrites_,i);if(s!=null)return s;if(r.isCompleteForChild(n)){var a=oo(this.visibleWrites_,i);return Aa(a,r.getNode().getImmediateChild(n))}else return null},e.prototype.shadowingWrite=function(t){return fo(this.visibleWrites_,t)},e.prototype.calcIndexedSlice=function(t,n,r,i,s,a){var c,l=oo(this.visibleWrites_,t),h=fo(l,nt.Empty);if(h!=null)c=h;else if(n!=null)c=Aa(l,n);else return[];if(c=c.withIndex(a),!c.isEmpty()&&!c.isLeafNode()){for(var p=[],v=a.getCompare(),m=s?c.getReverseIteratorFrom(r,a):c.getIteratorFrom(r,a),y=m.getNext();y&&p.length<i;)v(y,r)!==0&&p.push(y),y=m.getNext();return p}else return[]},e.prototype.recordContainsPath_=function(t,n){if(t.snap)return t.path.contains(n);for(var r in t.children)if(t.children.hasOwnProperty(r)&&t.path.child(r).contains(n))return!0;return!1},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,nt.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},e.DefaultFilter_=function(t){return t.visible},e.layerTree_=function(t,n,r){for(var i=ki.empty(),s=0;s<t.length;++s){var a=t[s];if(n(a)){var c=a.path,l=void 0;if(a.snap)r.contains(c)?(l=nt.relativePath(r,c),i=Hc(i,l,a.snap)):c.contains(r)&&(l=nt.relativePath(c,r),i=Hc(i,nt.Empty,a.snap.getChild(l)));else if(a.children){if(r.contains(c))l=nt.relativePath(r,c),i=xm(i,l,a.children);else if(c.contains(r))if(l=nt.relativePath(c,r),l.isEmpty())i=xm(i,nt.Empty,a.children);else{var h=Dr(a.children,l.getFront());if(h){var p=h.getChild(l.popFront());i=Hc(i,nt.Empty,p)}}}else throw Ou("WriteRecord should have .snap or .children")}}return i},e}(),U3=function(){function e(t,n){this.treePath_=t,this.writeTree_=n}return e.prototype.calcCompleteEventCache=function(t,n,r){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,n,r)},e.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},e.prototype.calcEventCacheAfterServerOverwrite=function(t,n,r){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,n,r)},e.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},e.prototype.calcIndexedSlice=function(t,n,r,i,s){return this.writeTree_.calcIndexedSlice(this.treePath_,t,n,r,i,s)},e.prototype.calcCompleteChild=function(t,n){return this.writeTree_.calcCompleteChild(this.treePath_,t,n)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YS=function(){function e(t){this.listenProvider_=t,this.syncPointTree_=new rr(null),this.pendingWriteTree_=new F3,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e.prototype.applyUserOverwrite=function(t,n,r,i){return this.pendingWriteTree_.addOverwrite(t,n,r,i),i?this.applyOperationToSyncPoints_(new qh(Ci.user(),t,n)):[]},e.prototype.applyUserMerge=function(t,n,r){this.pendingWriteTree_.addMerge(t,n,r);var i=rr.fromObject(n);return this.applyOperationToSyncPoints_(new Rm(Ci.user(),t,i))},e.prototype.ackUserWrite=function(t,n){n===void 0&&(n=!1);var r=this.pendingWriteTree_.getWrite(t),i=this.pendingWriteTree_.removeWrite(t);if(i){var s=new rr(null);return r.snap!=null?s=s.set(nt.Empty,!0):je(r.children,function(a){s=s.set(new nt(a),!0)}),this.applyOperationToSyncPoints_(new N3(r.path,s,n))}else return[]},e.prototype.applyServerOverwrite=function(t,n){return this.applyOperationToSyncPoints_(new qh(Ci.server(),t,n))},e.prototype.applyServerMerge=function(t,n){var r=rr.fromObject(n);return this.applyOperationToSyncPoints_(new Rm(Ci.server(),t,r))},e.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new $S(Ci.server(),t))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){var i=this.queryKeyForTag_(r);if(i!=null){var s=e.parseQueryKey_(i),a=s.path,c=s.queryId,l=nt.relativePath(a,t),h=new qh(Ci.forServerTaggedQuery(c),l,n);return this.applyTaggedOperation_(a,h)}else return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var i=this.queryKeyForTag_(r);if(i){var s=e.parseQueryKey_(i),a=s.path,c=s.queryId,l=nt.relativePath(a,t),h=rr.fromObject(n),p=new Rm(Ci.forServerTaggedQuery(c),l,h);return this.applyTaggedOperation_(a,p)}else return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n);if(r){var i=e.parseQueryKey_(r),s=i.path,a=i.queryId,c=nt.relativePath(s,t),l=new $S(Ci.forServerTaggedQuery(a),c);return this.applyTaggedOperation_(s,l)}else return[]},e.prototype.addEventRegistration=function(t,n){var r=t.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(E,I){var C=nt.relativePath(E,r);i=i||I.getCompleteServerCache(C),s=s||I.hasCompleteView()});var a=this.syncPointTree_.get(r);a?(s=s||a.hasCompleteView(),i=i||a.getCompleteServerCache(nt.Empty)):(a=new Vy,this.syncPointTree_=this.syncPointTree_.set(r,a));var c;if(i!=null)c=!0;else{c=!1,i=It.EMPTY_NODE;var l=this.syncPointTree_.subtree(r);l.foreachChild(function(E,I){var C=I.getCompleteServerCache(nt.Empty);C&&(i=i.updateImmediateChild(E,C))})}var h=a.viewExistsForQuery(t);if(!h&&!t.getQueryParams().loadsAllData()){var p=e.makeQueryKey_(t);K(!this.queryToTagMap.has(p),"View does not exist, but we have a tag");var v=e.getNextQueryTag_();this.queryToTagMap.set(p,v),this.tagToQueryMap.set(v,p)}var m=this.pendingWriteTree_.childWrites(r),y=a.addEventRegistration(t,n,m,i,c);if(!h&&!s){var b=a.viewForQuery(t);y=y.concat(this.setupListener_(t,b))}return y},e.prototype.removeEventRegistration=function(t,n,r){var i=this,s=t.path,a=this.syncPointTree_.get(s),c=[];if(a&&(t.queryIdentifier()==="default"||a.viewExistsForQuery(t))){var l=a.removeEventRegistration(t,n,r);a.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(s));var h=l.removed;c=l.events;var p=h.findIndex(function(D){return D.getQueryParams().loadsAllData()})!==-1,v=this.syncPointTree_.findOnPath(s,function(D,F){return F.hasCompleteView()});if(p&&!v){var m=this.syncPointTree_.subtree(s);if(!m.isEmpty())for(var y=this.collectDistinctViewsForSubTree_(m),b=0;b<y.length;++b){var E=y[b],I=E.getQuery(),C=this.createListenerForView_(E);this.listenProvider_.startListening(e.queryForListening_(I),this.tagForQuery_(I),C.hashFn,C.onComplete)}}if(!v&&h.length>0&&!r)if(p){var P=null;this.listenProvider_.stopListening(e.queryForListening_(t),P)}else h.forEach(function(D){var F=i.queryToTagMap.get(e.makeQueryKey_(D));i.listenProvider_.stopListening(e.queryForListening_(D),F)});this.removeTags_(h)}return c},e.prototype.calcCompleteEventCache=function(t,n){var r=!0,i=this.pendingWriteTree_,s=this.syncPointTree_.findOnPath(t,function(a,c){var l=nt.relativePath(a,t),h=c.getCompleteServerCache(l);if(h)return h});return i.calcCompleteEventCache(t,s,n,r)},e.prototype.getServerValue=function(t){var n=t.path,r=null;this.syncPointTree_.foreachOnPath(n,function(h,p){var v=nt.relativePath(h,n);r=r||p.getCompleteServerCache(v)});var i=this.syncPointTree_.get(n);i?r=r||i.getCompleteServerCache(nt.Empty):(i=new Vy,this.syncPointTree_=this.syncPointTree_.set(n,i));var s=r!=null,a=s?new Co(r,!0,!1):null,c=this.pendingWriteTree_.childWrites(t.path),l=i.getView(t,c,s?a.getNode():It.EMPTY_NODE,s);return l.getCompleteNode()},e.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(n,r,i){if(r&&r.hasCompleteView()){var s=r.getCompleteView();return[s]}else{var a=[];return r&&(a=r.getQueryViews()),je(i,function(c,l){a=a.concat(l)}),a}})},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var i=e.makeQueryKey_(r),s=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(s)}}},e.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},e.prototype.setupListener_=function(t,n){var r=t.path,i=this.tagForQuery_(t),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(e.queryForListening_(t),i,s.hashFn,s.onComplete),c=this.syncPointTree_.subtree(r);if(i)K(!c.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var l=c.fold(function(v,m,y){if(!v.isEmpty()&&m&&m.hasCompleteView())return[m.getCompleteView().getQuery()];var b=[];return m&&(b=b.concat(m.getQueryViews().map(function(E){return E.getQuery()}))),je(y,function(E,I){b=b.concat(I)}),b}),h=0;h<l.length;++h){var p=l[h];this.listenProvider_.stopListening(e.queryForListening_(p),this.tagForQuery_(p))}return a},e.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){var s=t.getServerCache()||It.EMPTY_NODE;return s.hash()},onComplete:function(s){if(s==="ok")return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var a=Q4(s,r);return n.removeEventRegistration(r,null,a)}}},e.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},e.parseQueryKey_=function(t){var n=t.indexOf("$");return K(n!==-1&&n<t.length-1,"Bad queryKey."),{queryId:t.substr(n+1),path:new nt(t.substr(0,n))}},e.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return this.queryToTagMap.get(n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(t,n){var r=this.syncPointTree_.get(t);K(r,"Missing sync point for query tag that we're tracking");var i=this.pendingWriteTree_.childWrites(t);return r.applyOperation(n,i,null)},e.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(nt.Empty))},e.prototype.applyOperationHelper_=function(t,n,r,i){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,n,r,i);var s=n.get(nt.Empty);r==null&&s!=null&&(r=s.getCompleteServerCache(nt.Empty));var a=[],c=t.path.getFront(),l=t.operationForChild(c),h=n.children.get(c);if(h&&l){var p=r?r.getImmediateChild(c):null,v=i.child(c);a=a.concat(this.applyOperationHelper_(l,h,p,v))}return s&&(a=a.concat(s.applyOperation(t,i,r))),a},e.prototype.applyOperationDescendantsHelper_=function(t,n,r,i){var s=this,a=n.get(nt.Empty);r==null&&a!=null&&(r=a.getCompleteServerCache(nt.Empty));var c=[];return n.children.inorderTraversal(function(l,h){var p=r?r.getImmediateChild(l):null,v=i.child(l),m=t.operationForChild(l);m&&(c=c.concat(s.applyOperationDescendantsHelper_(m,h,p,v)))}),a&&(c=c.concat(a.applyOperation(t,i,r))),c},e.nextQueryTag_=1,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j3=function(){function e(){this.rootNode_=It.EMPTY_NODE}return e.prototype.getNode=function(t){return this.rootNode_.getChild(t)},e.prototype.updateSnapshot=function(t,n){this.rootNode_=this.rootNode_.updateChild(t,n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var V3=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(t,n){n===void 0&&(n=1),zn(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=n},e.prototype.get=function(){return PN(this.counters_)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var up=function(){function e(){}return e.getCollection=function(t){var n=t.toString();return this.collections_[n]||(this.collections_[n]=new V3),this.collections_[n]},e.getOrCreateReporter=function(t,n){var r=t.toString();return this.reporters_[r]||(this.reporters_[r]=n()),this.reporters_[r]},e.collections_={},e.reporters_={},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yR=function(){function e(t){this.collection_=t,this.last_=null}return e.prototype.get=function(){var t=this.collection_.get(),n=ee({},t);return this.last_&&je(this.last_,function(r,i){n[r]=n[r]-i}),this.last_=t,n},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XS=10*1e3,B3=30*1e3,q3=5*60*1e3,H3=function(){function e(t,n){this.server_=n,this.statsToReport_={},this.statsListener_=new yR(t);var r=XS+(B3-XS)*Math.random();Yc(this.reportStats_.bind(this),Math.floor(r))}return e.prototype.includeStat=function(t){this.statsToReport_[t]=!0},e.prototype.reportStats_=function(){var t=this,n=this.statsListener_.get(),r={},i=!1;je(n,function(s,a){a>0&&zn(t.statsToReport_,s)&&(r[s]=a,i=!0)}),i&&this.server_.reportStats(r),Yc(this.reportStats_.bind(this),Math.floor(Math.random()*2*q3))},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var G3=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(t){for(var n=null,r=0;r<t.length;r++){var i=t[r],s=i.getPath();n!==null&&!s.equals(n.getPath())&&(this.eventLists_.push(n),n=null),n===null&&(n=new W3(s)),n.add(i)}n&&this.eventLists_.push(n)},e.prototype.raiseEventsAtPath=function(t,n){this.queueEvents(n),this.raiseQueuedEventsMatchingPredicate_(function(r){return r.equals(t)})},e.prototype.raiseEventsForChangedPath=function(t,n){this.queueEvents(n),this.raiseQueuedEventsMatchingPredicate_(function(r){return r.contains(t)||t.contains(r)})},e.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var n=!0,r=0;r<this.eventLists_.length;r++){var i=this.eventLists_[r];if(i){var s=i.getPath();t(s)?(this.eventLists_[r].raise(),this.eventLists_[r]=null):n=!1}}n&&(this.eventLists_=[]),this.recursionDepth_--},e}(),W3=function(){function e(t){this.path_=t,this.events_=[]}return e.prototype.add=function(t){this.events_.push(t)},e.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var n=this.events_[t];if(n!==null){this.events_[t]=null;var r=n.getEventRunner();Is&&sn("event: "+n.toString()),Ma(r)}}},e.prototype.getPath=function(){return this.path_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _R=function(){function e(t){this.allowedEvents_=t,this.listeners_={},K(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(Array.isArray(this.listeners_[t]))for(var i=Gi(this.listeners_[t]),s=0;s<i.length;s++)i[s].callback.apply(i[s].context,n)},e.prototype.on=function(t,n,r){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:n,context:r});var i=this.getInitialEvent(t);i&&n.apply(r,i)},e.prototype.off=function(t,n,r){this.validateEventType_(t);for(var i=this.listeners_[t]||[],s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}},e.prototype.validateEventType_=function(t){K(this.allowedEvents_.find(function(n){return n===t}),"Unknown event: "+t)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $3=function(e){Z(t,e);function t(){var n=e.call(this,["visible"])||this,r,i;return typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",r="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",r="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",r="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",r="webkitHidden")),n.visible_=!0,i&&document.addEventListener(i,function(){var s=!document[r];s!==n.visible_&&(n.visible_=s,n.trigger("visible",s))},!1),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return K(n==="visible","Unknown event type: "+n),[this.visible_]},t}(_R);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JS=function(e){Z(t,e);function t(){var n=e.call(this,["online"])||this;return n.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!z_()&&(window.addEventListener("online",function(){n.online_||(n.online_=!0,n.trigger("online",!0))},!1),window.addEventListener("offline",function(){n.online_&&(n.online_=!1,n.trigger("online",!1))},!1)),n}return t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(n){return K(n==="online","Unknown event type: "+n),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(_R);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z3=function(){function e(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(t,n){this.closeAfterResponse=t,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(t,n){var r=this;this.pendingResponses[t]=n;for(var i=function(){var c=s.pendingResponses[s.currentResponseNum];delete s.pendingResponses[s.currentResponseNum];for(var l=function(p){c[p]&&Ma(function(){r.onMessage_(c[p])})},h=0;h<c.length;++h)l(h);if(s.currentResponseNum===s.closeAfterResponse)return s.onClose&&(s.onClose(),s.onClose=null),"break";s.currentResponseNum++},s=this;this.pendingResponses[this.currentResponseNum];){var a=i();if(a==="break")break}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ZS="start",K3="close",Q3="pLPCommand",Y3="pRTLPCB",wR="id",bR="pw",ER="ser",X3="cb",J3="seg",Z3="ts",tB="d",eB="dframe",IR=1870,TR=30,nB=IR-TR,rB=25e3,iB=3e4,aw=function(){function e(t,n,r,i,s){this.connId=t,this.repoInfo=n,this.applicationId=r,this.transportSessionId=i,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Hl(t),this.stats_=up.getCollection(n),this.urlFn=function(a){return n.connectionURL(nR,a)}}return e.prototype.open=function(t,n){var r=this;this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new z3(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){r.log_("Timed out trying to connect."),r.onClosed_(),r.connectTimeoutTimer_=null},Math.floor(iB)),W4(function(){if(!r.isClosed_){r.scriptTagHolder=new oB(function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var l=hl(a,5),h=l[0],p=l[1],v=l[2];if(l[3],l[4],r.incrementIncomingBytes_(a),!!r.scriptTagHolder)if(r.connectTimeoutTimer_&&(clearTimeout(r.connectTimeoutTimer_),r.connectTimeoutTimer_=null),r.everConnected_=!0,h===ZS)r.id=p,r.password=v;else if(h===K3)p?(r.scriptTagHolder.sendNewPolls=!1,r.myPacketOrderer.closeAfter(p,function(){r.onClosed_()})):r.onClosed_();else throw new Error("Unrecognized command received: "+h)},function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];var l=hl(a,2),h=l[0],p=l[1];r.incrementIncomingBytes_(a),r.myPacketOrderer.handleResponse(h,p)},function(){r.onClosed_()},r.urlFn);var i={};i[ZS]="t",i[ER]=Math.floor(Math.random()*1e8),r.scriptTagHolder.uniqueCallbackIdentifier&&(i[X3]=r.scriptTagHolder.uniqueCallbackIdentifier),i[QN]=ew,r.transportSessionId&&(i[YN]=r.transportSessionId),r.lastSessionId&&(i[tR]=r.lastSessionId),r.applicationId&&(i[Z4]=r.applicationId),typeof location<"u"&&location.hostname&&ZN.test(location.hostname)&&(i[XN]=JN);var s=r.urlFn(i);r.log_("Connecting via long-poll to "+s),r.scriptTagHolder.addTag(s,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return e.forceAllow_?!0:!e.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!z4()&&!K4()},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(t){var n=Ue(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);for(var r=zV(n),i=$N(r,nB),s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(t,n){this.myDisconnFrame=document.createElement("iframe");var r={};r[eB]="t",r[wR]=t,r[bR]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},e.prototype.incrementIncomingBytes_=function(t){var n=Ue(t).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)},e}(),oB=function(){function e(t,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=HN(),window[Q3+this.uniqueCallbackIdentifier]=t,window[Y3+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var s="";if(this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"){var a=document.domain;s='<script>document.domain="'+a+'";<\/script>'}var c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(l){sn("frame writing exception"),l.stack&&sn(l.stack),sn(l)}}}return e.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{var n=t.contentWindow.document;n||sn("No IE domain setting required")}catch{var r=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},e.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){t.myIFrame!==null&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var n=this.onDisconnect;n&&(this.onDisconnect=null,n())},e.prototype.startLongPoll=function(t,n){for(this.myID=t,this.myPW=n,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t[wR]=this.myID,t[bR]=this.myPW,t[ER]=this.currentSerial;for(var n=this.urlFn(t),r="",i=0;this.pendingSegs.length>0;){var s=this.pendingSegs[0];if(s.d.length+TR+r.length<=IR){var a=this.pendingSegs.shift();r=r+"&"+J3+i+"="+a.seg+"&"+Z3+i+"="+a.ts+"&"+tB+i+"="+a.d,i++}else break}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1},e.prototype.enqueueSegment=function(t,n,r){this.pendingSegs.push({seg:t,ts:n,d:r}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(t,n){var r=this;this.outstandingRequests.add(n);var i=function(){r.outstandingRequests.delete(n),r.newRequest_()},s=setTimeout(i,Math.floor(rB)),a=function(){clearTimeout(s),i()};this.addTag(t,a)},e.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var i=r.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){var s=i.readyState;(!s||s==="loaded"||s==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=function(){sn("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SR="";function AR(e){SR=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sB=16384,aB=45e3,cp=null;typeof MozWebSocket<"u"?cp=MozWebSocket:typeof WebSocket<"u"&&(cp=WebSocket);var ps=function(){function e(t,n,r,i,s){this.connId=t,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Hl(this.connId),this.stats_=up.getCollection(n),this.connURL=e.connectionURL_(n,i,s),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(t,n,r){var i={};return i[QN]=ew,typeof location<"u"&&location.hostname&&ZN.test(location.hostname)&&(i[XN]=JN),n&&(i[YN]=n),r&&(i[tR]=r),t.connectionURL(eR,i)},e.prototype.open=function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gs.set("previous_websocket_failure",!0);try{var i,s,a,c;if(!DN()){var s={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new cp(this.connURL,[],s)}}catch(h){this.log_("Error instantiating WebSocket.");var l=h.message||h.data;l&&this.log_(l),this.onClosed_();return}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(h){r.handleIncomingFrame(h)},this.mySock.onerror=function(h){r.log_("WebSocket error.  Closing connection.");var p=h.message||h.data;p&&r.log_(p),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if(typeof navigator<"u"&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&cp!==null&&!e.forceDisallow_},e.previouslyFailed=function(){return gs.isInMemoryStorage||gs.get("previous_websocket_failure")===!0},e.prototype.markConnectionHealthy=function(){gs.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var n=this.frames.join("");this.frames=null;var r=dl(n);this.onMessage(r)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(t){if(K(this.frames===null,"We already have a frame buffer"),t.length<=6){var n=Number(t);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),t},e.prototype.handleIncomingFrame=function(t){if(this.mySock!==null){var n=t.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{var r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}},e.prototype.send=function(t){this.resetKeepAlive();var n=Ue(t);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);var r=$N(n,sB);r.length>1&&this.sendString_(String(r.length));for(var i=0;i<r.length;i++)this.sendString_(r[i])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(aB))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uB=function(){function e(t){this.initTransports_(t)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[aw,ps]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=ps&&ps.isAvailable(),s=i&&!ps.previouslyFailed();if(t.webSocketOnly&&(i||vn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ps];else{var a=this.transports_=[];try{for(var c=Te(e.ALL_TRANSPORTS),l=c.next();!l.done;l=c.next()){var h=l.value;h&&h.isAvailable()&&a.push(h)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cB=6e4,lB=5e3,fB=10*1024,hB=100*1024,Dm="t",tA="d",pB="s",eA="r",dB="e",nA="o",rA="a",iA="n",oA="p",vB="h",CR=function(){function e(t,n,r,i,s,a,c,l){this.id=t,this.repoInfo_=n,this.applicationId_=r,this.onMessage_=i,this.onReady_=s,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Hl("c:"+this.id+":"),this.transportManager_=new uB(n),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var t=this,n=this.transportManager_.initialTransport();this.conn_=new n(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=n.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(r,i)},Math.floor(0));var s=n.healthyTimeout||0;s>0&&(this.healthyTimeout_=Yc(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>hB?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>fB?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(s)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(t){var n=this;return function(r){t===n.conn_?n.onConnectionLost_(r):t===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},e.prototype.connReceiver_=function(t){var n=this;return function(r){n.state_!==2&&(t===n.rx_?n.onPrimaryMessageReceived_(r):t===n.secondaryConn_?n.onSecondaryMessageReceived_(r):n.log_("message on old connection"))}},e.prototype.sendRequest=function(t){var n={t:"d",d:t};this.sendData_(n)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(t){if(Dm in t){var n=t[Dm];n===rA?this.upgradeIfSecondaryHealthy_():n===eA?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===nA&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(t){var n=Pc("t",t),r=Pc("d",t);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:oA,d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:rA,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:iA,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(t){var n=Pc("t",t),r=Pc("d",t);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)},e.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(t){var n=Pc(Dm,t);if(tA in t){var r=t[tA];if(n===vB)this.onHandshake_(r);else if(n===iA){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===pB?this.onConnectionShutdown_(r):n===eA?this.onReset_(r):n===dB?ky("Server Error: "+r):n===nA?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ky("Unknown control packet command: "+n)}},e.prototype.onHandshake_=function(t){var n=t.ts,r=t.v,i=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(i),this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),ew!==r&&vn("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},e.prototype.startUpgrade_=function(t){var n=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var r=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,i),Yc(function(){n.secondaryConn_&&(n.log_("Timed out trying to upgrade."),n.secondaryConn_.close())},Math.floor(cB))},e.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),this.state_===1?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(t,n){var r=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Yc(function(){r.sendPingOnPrimaryIfNecessary_()},Math.floor(lB))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:oA,d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()},e.prototype.onConnectionLost_=function(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()},e.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)},e.prototype.close=function(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NR=function(){function e(){}return e.prototype.put=function(t,n,r,i){},e.prototype.merge=function(t,n,r,i){},e.prototype.refreshAuthToken=function(t){},e.prototype.onDisconnectPut=function(t,n,r){},e.prototype.onDisconnectMerge=function(t,n,r){},e.prototype.onDisconnectCancel=function(t,n){},e.prototype.reportStats=function(t){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lc=1e3,gB=60*5*1e3,mB=3*1e3,sA=30*1e3,yB=1.3,_B=3e4,wB="server_kill",bB=3,Ts=function(e){Z(t,e);function t(n,r,i,s,a,c,l){var h=e.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=c,h.authOverride_=l,h.id=t.nextPersistentConnectionId_++,h.log_=Hl("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Lc,h.maxReconnectDelay_=gB,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!DN())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return h.scheduleConnect_(0),$3.getInstance().on("visible",h.onVisible_,h),n.host.indexOf("fblocal")===-1&&JS.getInstance().on("online",h.onOnline_,h),h}return t.prototype.sendRequest=function(n,r,i){var s=++this.requestNumber_,a={r:s,a:n,b:r};this.log_(Ue(a)),K(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[s]=i)},t.prototype.get=function(n){var r=this,i=new qn,s={p:n.path.toString(),q:n.queryObject()},a={action:"g",request:s,onComplete:function(l){var h=l.d;l.s==="ok"?(r.onDataUpdate_(s.p,h,!1,null),i.resolve(h)):i.reject(h)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;var c=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var l=r.outstandingGets_[c];l===void 0||a!==l||(delete r.outstandingGets_[c],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),r.log_("get "+c+" timed out on connection"),i.reject(new Error("Client is offline.")))},mB),this.connected_&&this.sendGet_(c),i.promise},t.prototype.listen=function(n,r,i,s){var a=n.queryIdentifier(),c=n.path.toString();this.log_("Listen called for "+c+" "+a),this.listens.has(c)||this.listens.set(c,new Map),K(n.getQueryParams().isDefault()||!n.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),K(!this.listens.get(c).has(a),"listen() called twice for same path/queryId.");var l={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(c).set(a,l),this.connected_&&this.sendListen_(l)},t.prototype.sendGet_=function(n){var r=this,i=this.outstandingGets_[n];this.sendRequest("g",i.request,function(s){delete r.outstandingGets_[n],r.outstandingGetCount_--,r.outstandingGetCount_===0&&(r.outstandingGets_=[]),i.onComplete&&i.onComplete(s)})},t.prototype.sendListen_=function(n){var r=this,i=n.query,s=i.path.toString(),a=i.queryIdentifier();this.log_("Listen on "+s+" for "+a);var c={p:s},l="q";n.tag&&(c.q=i.queryObject(),c.t=n.tag),c.h=n.hashFn(),this.sendRequest(l,c,function(h){var p=h.d,v=h.s;t.warnOnListenWarnings_(p,i);var m=r.listens.get(s)&&r.listens.get(s).get(a);m===n&&(r.log_("listen response",h),v!=="ok"&&r.removeListen_(s,a),n.onComplete&&n.onComplete(v,p))})},t.warnOnListenWarnings_=function(n,r){if(n&&typeof n=="object"&&zn(n,"w")){var i=Dr(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){var s='".indexOn": "'+r.getQueryParams().getIndex().toString()+'"',a=r.path.toString();vn("Using an unspecified index. Your data will be downloaded and "+("filtered on the client. Consider adding "+s+" at ")+(a+" to your security rules for better performance."))}}},t.prototype.refreshAuthToken=function(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(n)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(n){var r=n&&n.length===40;(r||i4(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sA)},t.prototype.tryAuth=function(){var n=this;if(this.connected_&&this.authToken_){var r=this.authToken_,i=r4(r)?"auth":"gauth",s={cred:r};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(i,s,function(a){var c=a.s,l=a.d||"error";n.authToken_===r&&(c==="ok"?n.invalidAuthTokenCount_=0:n.onAuthRevoked_(c,l))})}},t.prototype.unlisten=function(n,r){var i=n.path.toString(),s=n.queryIdentifier();this.log_("Unlisten called for "+i+" "+s),K(n.getQueryParams().isDefault()||!n.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query");var a=this.removeListen_(i,s);a&&this.connected_&&this.sendUnlisten_(i,s,n.queryObject(),r)},t.prototype.sendUnlisten_=function(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);var a={p:n},c="n";s&&(a.q=i,a.t=s),this.sendRequest(c,a)},t.prototype.onDisconnectPut=function(n,r,i){this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})},t.prototype.onDisconnectMerge=function(n,r,i){this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})},t.prototype.onDisconnectCancel=function(n,r){this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})},t.prototype.sendOnDisconnect_=function(n,r,i,s){var a={p:r,d:i};this.log_("onDisconnect "+n,a),this.sendRequest(n,a,function(c){s&&setTimeout(function(){s(c.s,c.d)},Math.floor(0))})},t.prototype.put=function(n,r,i,s){this.putInternal("p",n,r,i,s)},t.prototype.merge=function(n,r,i,s){this.putInternal("m",n,r,i,s)},t.prototype.putInternal=function(n,r,i,s,a){var c={p:r,d:i};a!==void 0&&(c.h=a),this.outstandingPuts_.push({action:n,request:c,onComplete:s}),this.outstandingPutCount_++;var l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)},t.prototype.sendPut_=function(n){var r=this,i=this.outstandingPuts_[n].action,s=this.outstandingPuts_[n].request,a=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,s,function(c){r.log_(i+" response",c),delete r.outstandingPuts_[n],r.outstandingPutCount_--,r.outstandingPutCount_===0&&(r.outstandingPuts_=[]),a&&a(c.s,c.d)})},t.prototype.reportStats=function(n){var r=this;if(this.connected_){var i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,function(s){var a=s.s;if(a!=="ok"){var c=s.d;r.log_("reportStats","Error sending stats: "+c)}})}},t.prototype.onDataMessage_=function(n){if("r"in n){this.log_("from server: "+Ue(n));var r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}},t.prototype.onDataPush_=function(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):ky("Unrecognized action received from server: "+Ue(n)+`
Are you using the latest client?`)},t.prototype.onReady_=function(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(n){var r=this;K(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){r.establishConnectionTimer_=null,r.establishConnection_()},Math.floor(n))},t.prototype.onVisible_=function(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Lc,this.realtime_||this.scheduleConnect_(0)),this.visible_=n},t.prototype.onOnline_=function(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Lc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(!this.visible_)this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime();else if(this.lastConnectionEstablishedTime_){var n=new Date().getTime()-this.lastConnectionEstablishedTime_;n>_B&&(this.reconnectDelay_=Lc),this.lastConnectionEstablishedTime_=null}var r=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-r);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*yB)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){var n=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;var r=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+t.nextConnectionId_++,c=this,l=this.lastSessionId,h=!1,p=null,v=function(){p?p.close():(h=!0,s())},m=function(b){K(p,"sendRequest call when we're not connected not allowed."),p.sendRequest(b)};this.realtime_={close:v,sendRequest:m};var y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(y).then(function(b){h?sn("getToken() completed but was canceled"):(sn("getToken() completed. Creating connection."),c.authToken_=b&&b.accessToken,p=new CR(a,c.repoInfo_,c.applicationId_,r,i,s,function(E){vn(E+" ("+c.repoInfo_.toString()+")"),c.interrupt(wB)},l))}).then(null,function(b){c.log_("Failed to get token: "+b),h||(n.repoInfo_.nodeAdmin&&vn(b),v())})}},t.prototype.interrupt=function(n){sn("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(n){sn("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Oy(this.interruptReasons_)&&(this.reconnectDelay_=Lc,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(n){var r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})},t.prototype.cancelSentTransactions_=function(){for(var n=0;n<this.outstandingPuts_.length;n++){var r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(n,r){var i;r?i=r.map(function(a){return Z_(a)}).join("$"):i="default";var s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")},t.prototype.removeListen_=function(n,r){var i=new nt(n).toString(),s;if(this.listens.has(i)){var a=this.listens.get(i);s=a.get(r),a.delete(r),a.size===0&&this.listens.delete(i)}else s=void 0;return s},t.prototype.onAuthRevoked_=function(n,r){sn("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=bB&&(this.reconnectDelay_=sA,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))},t.prototype.restoreState_=function(){var n,r,i,s;this.tryAuth();try{for(var a=Te(this.listens.values()),c=a.next();!c.done;c=a.next()){var l=c.value;try{for(var h=(i=void 0,Te(l.values())),p=h.next();!p.done;p=h.next()){var v=p.value;this.sendListen_(v)}}catch(b){i={error:b}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}}}catch(b){n={error:b}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}for(var m=0;m<this.outstandingPuts_.length;m++)this.outstandingPuts_[m]&&this.sendPut_(m);for(;this.onDisconnectRequestQueue_.length;){var y=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(y.action,y.pathString,y.data,y.onComplete)}for(var m=0;m<this.outstandingGets_.length;m++)this.outstandingGets_[m]&&this.sendGet_(m)},t.prototype.sendConnectStats_=function(){var n={},r="js";n["sdk."+r+"."+SR.replace(/\./g,"-")]=1,z_()?n["framework.cordova"]=1:kN()&&(n["framework.reactnative"]=1),this.reportStats(n)},t.prototype.shouldReconnect_=function(){var n=JS.getInstance().currentlyOnline();return Oy(this.interruptReasons_)&&n},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(NR);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var EB=function(e){Z(t,e);function t(n,r,i){var s=e.call(this)||this;return s.repoInfo_=n,s.onDataUpdate_=r,s.authTokenProvider_=i,s.log_=Hl("p:rest:"),s.listens_={},s}return t.prototype.reportStats=function(n){throw new Error("Method not implemented.")},t.getListenId_=function(n,r){return r!==void 0?"tag$"+r:(K(n.getQueryParams().isDefault(),"should have a tag if it's not a default query."),n.path.toString())},t.prototype.listen=function(n,r,i,s){var a=this,c=n.path.toString();this.log_("Listen called for "+c+" "+n.queryIdentifier());var l=t.getListenId_(n,i),h={};this.listens_[l]=h;var p=n.getQueryParams().toRestQueryStringParameters();this.restRequest_(c+".json",p,function(v,m){var y=m;if(v===404&&(y=null,v=null),v===null&&a.onDataUpdate_(c,y,!1,i),Dr(a.listens_,l)===h){var b;v?v===401?b="permission_denied":b="rest_error:"+v:b="ok",s(b,null)}})},t.prototype.unlisten=function(n,r){var i=t.getListenId_(n,r);delete this.listens_[i]},t.prototype.get=function(n){var r=this,i=n.getQueryParams().toRestQueryStringParameters(),s=n.path.toString(),a=new qn;return this.restRequest_(s+".json",i,function(c,l){var h=l;c===404&&(h=null,c=null),c===null?(r.onDataUpdate_(s,h,!1,null),a.resolve(h)):a.reject(new Error(h))}),a.promise},t.prototype.refreshAuthToken=function(n){},t.prototype.restRequest_=function(n,r,i){var s=this;r===void 0&&(r={}),r.format="export",this.authTokenProvider_.getToken(!1).then(function(a){var c=a&&a.accessToken;c&&(r.auth=c);var l=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+n+"?ns="+s.repoInfo_.namespace+o4(r);s.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(i&&h.readyState===4){s.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var p=null;if(h.status>=200&&h.status<300){try{p=dl(h.responseText)}catch{vn("Failed to parse JSON response for "+l+": "+h.responseText)}i(null,p)}else h.status!==401&&h.status!==404&&vn("Got unsuccessful REST response for "+l+" Status: "+h.status),i(h.status);i=null}},h.open("GET",l,!0),h.send()})},t}(NR);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var aA=function(){function e(){this.children={},this.childCount=0,this.value=null}return e}(),IB=function(){function e(t,n,r){t===void 0&&(t=""),n===void 0&&(n=null),r===void 0&&(r=new aA),this.name_=t,this.parent_=n,this.node_=r}return e.prototype.subTree=function(t){for(var n=t instanceof nt?t:new nt(t),r=this,i=n.getFront();i!==null;){var s=Dr(r.node_.children,i)||new aA;r=new e(i,r,s),n=n.popFront(),i=n.getFront()}return r},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(t){K(typeof t<"u","Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return this.getValue()===null&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;je(this.node_.children,function(r,i){t(new e(r,n,i))})},e.prototype.forEachDescendant=function(t,n,r){n&&!r&&t(this),this.forEachChild(function(i){i.forEachDescendant(t,!0,r)}),n&&r&&t(this)},e.prototype.forEachAncestor=function(t,n){for(var r=n?this:this.parent();r!==null;){if(t(r))return!0;r=r.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(n){n.getValue()!==null?t(n):n.forEachImmediateDescendantWithValue(t)})},e.prototype.path=function(){return new nt(this.parent_===null?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){this.parent_!==null&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(t,n){var r=n.isEmpty(),i=zn(this.node_.children,t);r&&i?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):!r&&!i&&(this.node_.children[t]=n.node_,this.node_.childCount++,this.updateParents_())},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uA="repo_interrupt",TB=25,Re;(function(e){e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT"})(Re||(Re={}));var uw=function(){function e(t,n,r,i){this.repoInfo_=t,this.forceRestClient_=n,this.app=r,this.authTokenProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new G3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Cm,this.transactionQueueTree_=new IB,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.start=function(){var t=this;if(this.stats_=up.getCollection(this.repoInfo_),this.forceRestClient_||X4())this.server_=new EB(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var n=this.app.options.databaseAuthVariableOverride;if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ue(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}this.persistentConnection_=new Ts(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,n),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(r){t.server_.refreshAuthToken(r)}),this.statsReporter_=up.getOrCreateReporter(this.repoInfo_,function(){return new H3(t.stats_,t.server_)}),this.infoData_=new j3,this.infoSyncTree_=new YS({startListening:function(r,i,s,a){var c=[],l=t.infoData_.getNode(r.path);return l.isEmpty()||(c=t.infoSyncTree_.applyServerOverwrite(r.path,l),setTimeout(function(){a("ok")},0)),c},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new YS({startListening:function(r,i,s,a){return t.server_.listen(r,s,i,function(c,l){var h=a(c,l);t.eventQueue_.raiseEventsForChangedPath(r.path,h)}),[]},stopListening:function(r,i){t.server_.unlisten(r,i)}})},e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var t=this.infoData_.getNode(new nt(".info/serverTimeOffset")),n=t.val()||0;return new Date().getTime()+n},e.prototype.generateServerValues=function(){return S3({timestamp:this.serverTime()})},e.prototype.onDataUpdate_=function(t,n,r,i){this.dataUpdateCount++;var s=new nt(t);n=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,n):n;var a=[];if(i)if(r){var c=rp(n,function(m){return de(m)});a=this.serverSyncTree_.applyTaggedQueryMerge(s,c,i)}else{var l=de(n);a=this.serverSyncTree_.applyTaggedQueryOverwrite(s,l,i)}else if(r){var h=rp(n,function(m){return de(m)});a=this.serverSyncTree_.applyServerMerge(s,h)}else{var p=de(n);a=this.serverSyncTree_.applyServerOverwrite(s,p)}var v=s;a.length>0&&(v=this.rerunTransactions_(s)),this.eventQueue_.raiseEventsForChangedPath(v,a)},e.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},e.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),t===!1&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(t){var n=this;je(t,function(r,i){n.updateInfo_(r,i)})},e.prototype.updateInfo_=function(t,n){var r=new nt("/.info/"+t),i=de(n);this.infoData_.updateSnapshot(r,i);var s=this.infoSyncTree_.applyServerOverwrite(r,i);this.eventQueue_.raiseEventsForChangedPath(r,s)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.getValue=function(t){var n=this,r=this.serverSyncTree_.getServerValue(t);return r!=null?Promise.resolve(new po(r,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then(function(i){var s=de(i),a=n.serverSyncTree_.applyServerOverwrite(t.path,s);return n.eventQueue_.raiseEventsAtPath(t.path,a),Promise.resolve(new po(s,t.getRef(),t.getQueryParams().getIndex()))},function(i){return n.log_("get for query "+Ue(t)+" failed: "+i),Promise.reject(new Error(i))})},e.prototype.setWithPriority=function(t,n,r,i){var s=this;this.log_("set",{path:t.toString(),value:n,priority:r});var a=this.generateServerValues(),c=de(n,r),l=this.serverSyncTree_.calcCompleteEventCache(t),h=Am(c,l,a),p=this.getNextWriteId_(),v=this.serverSyncTree_.applyUserOverwrite(t,h,p,!0);this.eventQueue_.queueEvents(v),this.server_.put(t.toString(),c.val(!0),function(y,b){var E=y==="ok";E||vn("set at "+t+" failed: "+y);var I=s.serverSyncTree_.ackUserWrite(p,!E);s.eventQueue_.raiseEventsForChangedPath(t,I),s.callOnCompleteCallback(i,y,b)});var m=this.abortTransactions_(t);this.rerunTransactions_(m),this.eventQueue_.raiseEventsForChangedPath(m,[])},e.prototype.update=function(t,n,r){var i=this;this.log_("update",{path:t.toString(),value:n});var s=!0,a=this.generateServerValues(),c={};if(je(n,function(p,v){s=!1,c[p]=WS(t.child(p),de(v),i.serverSyncTree_,a)}),s)sn("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(r,"ok");else{var l=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserMerge(t,c,l);this.eventQueue_.queueEvents(h),this.server_.merge(t.toString(),n,function(p,v){var m=p==="ok";m||vn("update at "+t+" failed: "+p);var y=i.serverSyncTree_.ackUserWrite(l,!m),b=y.length>0?i.rerunTransactions_(t):t;i.eventQueue_.raiseEventsForChangedPath(b,y),i.callOnCompleteCallback(r,p,v)}),je(n,function(p){var v=i.abortTransactions_(t.child(p));i.rerunTransactions_(v)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},e.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var n=this.generateServerValues(),r=new Cm;this.onDisconnect_.forEachTree(nt.Empty,function(s,a){var c=WS(s,a,t.serverSyncTree_,n);r.remember(s,c)});var i=[];r.forEachTree(nt.Empty,function(s,a){i=i.concat(t.serverSyncTree_.applyServerOverwrite(s,a));var c=t.abortTransactions_(s);t.rerunTransactions_(c)}),this.onDisconnect_=new Cm,this.eventQueue_.raiseEventsForChangedPath(nt.Empty,i)},e.prototype.onDisconnectCancel=function(t,n){var r=this;this.server_.onDisconnectCancel(t.toString(),function(i,s){i==="ok"&&r.onDisconnect_.forget(t),r.callOnCompleteCallback(n,i,s)})},e.prototype.onDisconnectSet=function(t,n,r){var i=this,s=de(n);this.server_.onDisconnectPut(t.toString(),s.val(!0),function(a,c){a==="ok"&&i.onDisconnect_.remember(t,s),i.callOnCompleteCallback(r,a,c)})},e.prototype.onDisconnectSetWithPriority=function(t,n,r,i){var s=this,a=de(n,r);this.server_.onDisconnectPut(t.toString(),a.val(!0),function(c,l){c==="ok"&&s.onDisconnect_.remember(t,a),s.callOnCompleteCallback(i,c,l)})},e.prototype.onDisconnectUpdate=function(t,n,r){var i=this;if(Oy(n)){sn("onDisconnect().update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(r,"ok");return}this.server_.onDisconnectMerge(t.toString(),n,function(s,a){s==="ok"&&je(n,function(c,l){var h=de(l);i.onDisconnect_.remember(t.child(c),h)}),i.callOnCompleteCallback(r,s,a)})},e.prototype.addEventCallbackForQuery=function(t,n){var r;t.path.getFront()===".info"?r=this.infoSyncTree_.addEventRegistration(t,n):r=this.serverSyncTree_.addEventRegistration(t,n),this.eventQueue_.raiseEventsAtPath(t.path,r)},e.prototype.removeEventCallbackForQuery=function(t,n){var r;t.path.getFront()===".info"?r=this.infoSyncTree_.removeEventRegistration(t,n):r=this.serverSyncTree_.removeEventRegistration(t,n),this.eventQueue_.raiseEventsAtPath(t.path,r)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(uA)},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(uA)},e.prototype.stats=function(t){if(t===void 0&&(t=!1),!(typeof console>"u")){var n;t?(this.statsListener_||(this.statsListener_=new yR(this.stats_)),n=this.statsListener_.get()):n=this.stats_.get();var r=Object.keys(n).reduce(function(i,s){return Math.max(s.length,i)},0);je(n,function(i,s){for(var a=i,c=i.length;c<r+2;c++)a+=" ";console.log(a+s)})}},e.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},e.prototype.log_=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r="";this.persistentConnection_&&(r=this.persistentConnection_.id+":"),sn.apply(void 0,Gi([r],t))},e.prototype.callOnCompleteCallback=function(t,n,r){t&&Ma(function(){if(n==="ok")t(null);else{var i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);var a=new Error(s);a.code=i,t(a)}})},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new cw(this))},enumerable:!1,configurable:!0}),e.prototype.startTransaction=function(t,n,r,i){this.log_("transaction on "+t);var s=function(){},a=new xi(this,t);a.on("value",s);var c=function(){a.off("value",s)},l={path:t,update:n,onComplete:r,status:null,order:HN(),applyLocally:i,retryCount:0,unwatcher:c,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=this.getLatestState_(t);l.currentInputSnapshot=h;var p=l.update(h.val());if(p===void 0){if(l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete){var v=new po(l.currentInputSnapshot,new xi(this,l.path),Zt);l.onComplete(null,!1,v)}}else{gl("transaction failed: Data returned ",p,l.path),l.status=Re.RUN;var m=this.transactionQueueTree_.subTree(t),y=m.getValue()||[];y.push(l),m.setValue(y);var b=void 0;if(typeof p=="object"&&p!==null&&zn(p,".priority"))b=Dr(p,".priority"),K(vl(b),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var E=this.serverSyncTree_.calcCompleteEventCache(t)||It.EMPTY_NODE;b=E.getPriority().val()}var I=this.generateServerValues(),C=de(p,b),P=Am(C,h,I);l.currentOutputSnapshotRaw=C,l.currentOutputSnapshotResolved=P,l.currentWriteId=this.getNextWriteId_();var D=this.serverSyncTree_.applyUserOverwrite(t,P,l.currentWriteId,l.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,D),this.sendReadyTransactions_()}},e.prototype.getLatestState_=function(t,n){return this.serverSyncTree_.calcCompleteEventCache(t,n)||It.EMPTY_NODE},e.prototype.sendReadyTransactions_=function(t){var n=this;if(t===void 0&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),t.getValue()!==null){var r=this.buildTransactionQueue_(t);K(r.length>0,"Sending zero length transaction queue");var i=r.every(function(s){return s.status===Re.RUN});i&&this.sendTransactionQueue_(t.path(),r)}else t.hasChildren()&&t.forEachChild(function(s){n.sendReadyTransactions_(s)})},e.prototype.sendTransactionQueue_=function(t,n){for(var r=this,i=n.map(function(y){return y.currentWriteId}),s=this.getLatestState_(t,i),a=s,c=s.hash(),l=0;l<n.length;l++){var h=n[l];K(h.status===Re.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=Re.SENT,h.retryCount++;var p=nt.relativePath(t,h.path);a=a.updateChild(p,h.currentOutputSnapshotRaw)}var v=a.val(!0),m=t;this.server_.put(m.toString(),v,function(y){r.log_("transaction put response",{path:m.toString(),status:y});var b=[];if(y==="ok"){for(var E=[],I=0;I<n.length;I++){if(n[I].status=Re.COMPLETED,b=b.concat(r.serverSyncTree_.ackUserWrite(n[I].currentWriteId)),n[I].onComplete){var C=n[I].currentOutputSnapshotResolved,P=new xi(r,n[I].path),D=new po(C,P,Zt);E.push(n[I].onComplete.bind(null,null,!0,D))}n[I].unwatcher()}r.pruneCompletedTransactionsBelowNode_(r.transactionQueueTree_.subTree(t)),r.sendReadyTransactions_(),r.eventQueue_.raiseEventsForChangedPath(t,b);for(var I=0;I<E.length;I++)Ma(E[I])}else{if(y==="datastale")for(var I=0;I<n.length;I++)n[I].status===Re.SENT_NEEDS_ABORT?n[I].status=Re.NEEDS_ABORT:n[I].status=Re.RUN;else{vn("transaction at "+m.toString()+" failed: "+y);for(var I=0;I<n.length;I++)n[I].status=Re.NEEDS_ABORT,n[I].abortReason=y}r.rerunTransactions_(t)}},c)},e.prototype.rerunTransactions_=function(t){var n=this.getAncestorTransactionNode_(t),r=n.path(),i=this.buildTransactionQueue_(n);return this.rerunTransactionQueue_(i,r),r},e.prototype.rerunTransactionQueue_=function(t,n){if(t.length!==0){for(var r=[],i=[],s=t.filter(function(U){return U.status===Re.RUN}),a=s.map(function(U){return U.currentWriteId}),c=0;c<t.length;c++){var l=t[c],h=nt.relativePath(n,l.path),p=!1,v=void 0;if(K(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===Re.NEEDS_ABORT)p=!0,v=l.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(l.currentWriteId,!0));else if(l.status===Re.RUN)if(l.retryCount>=TB)p=!0,v="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(l.currentWriteId,!0));else{var m=this.getLatestState_(l.path,a);l.currentInputSnapshot=m;var y=t[c].update(m.val());if(y!==void 0){gl("transaction failed: Data returned ",y,l.path);var b=de(y),E=typeof y=="object"&&y!=null&&zn(y,".priority");E||(b=b.updatePriority(m.getPriority()));var I=l.currentWriteId,C=this.generateServerValues(),P=Am(b,m,C);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=P,l.currentWriteId=this.getNextWriteId_(),a.splice(a.indexOf(I),1),i=i.concat(this.serverSyncTree_.applyUserOverwrite(l.path,P,l.currentWriteId,l.applyLocally)),i=i.concat(this.serverSyncTree_.ackUserWrite(I,!0))}else p=!0,v="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(l.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(n,i),i=[],p&&(t[c].status=Re.COMPLETED,function(U){setTimeout(U,Math.floor(0))}(t[c].unwatcher),t[c].onComplete))if(v==="nodata"){var D=new xi(this,t[c].path),F=t[c].currentInputSnapshot,Y=new po(F,D,Zt);r.push(t[c].onComplete.bind(null,null,!1,Y))}else r.push(t[c].onComplete.bind(null,new Error(v),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(var c=0;c<r.length;c++)Ma(r[c]);this.sendReadyTransactions_()}},e.prototype.getAncestorTransactionNode_=function(t){var n,r=this.transactionQueueTree_;for(n=t.getFront();n!==null&&r.getValue()===null;)r=r.subTree(n),t=t.popFront(),n=t.getFront();return r},e.prototype.buildTransactionQueue_=function(t){var n=[];return this.aggregateTransactionQueuesForNode_(t,n),n.sort(function(r,i){return r.order-i.order}),n},e.prototype.aggregateTransactionQueuesForNode_=function(t,n){var r=this,i=t.getValue();if(i!==null)for(var s=0;s<i.length;s++)n.push(i[s]);t.forEachChild(function(a){r.aggregateTransactionQueuesForNode_(a,n)})},e.prototype.pruneCompletedTransactionsBelowNode_=function(t){var n=this,r=t.getValue();if(r){for(var i=0,s=0;s<r.length;s++)r[s].status!==Re.COMPLETED&&(r[i]=r[s],i++);r.length=i,t.setValue(r.length>0?r:null)}t.forEachChild(function(a){n.pruneCompletedTransactionsBelowNode_(a)})},e.prototype.abortTransactions_=function(t){var n=this,r=this.getAncestorTransactionNode_(t).path(),i=this.transactionQueueTree_.subTree(t);return i.forEachAncestor(function(s){n.abortTransactionsOnNode_(s)}),this.abortTransactionsOnNode_(i),i.forEachDescendant(function(s){n.abortTransactionsOnNode_(s)}),r},e.prototype.abortTransactionsOnNode_=function(t){var n=t.getValue();if(n!==null){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)if(n[a].status!==Re.SENT_NEEDS_ABORT){if(n[a].status===Re.SENT)K(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=Re.SENT_NEEDS_ABORT,n[a].abortReason="set";else if(K(n[a].status===Re.RUN,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(this.serverSyncTree_.ackUserWrite(n[a].currentWriteId,!0)),n[a].onComplete){var c=null;r.push(n[a].onComplete.bind(null,new Error("set"),!1,c))}}s===-1?t.setValue(null):n.length=s+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),i);for(var a=0;a<r.length;a++)Ma(r[a])}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var RR=function(){function e(t){this.indexedFilter_=new sw(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},e.prototype.updateChild=function(t,n,r,i,s,a){return this.matches(new Dt(n,r))||(r=It.EMPTY_NODE),this.indexedFilter_.updateChild(t,n,r,i,s,a)},e.prototype.updateFullNode=function(t,n,r){n.isLeafNode()&&(n=It.EMPTY_NODE);var i=n.withIndex(this.index_);i=i.updatePriority(It.EMPTY_NODE);var s=this;return n.forEachChild(Zt,function(a,c){s.matches(new Dt(a,c))||(i=i.updateImmediateChild(a,It.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,i,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(t){if(t.hasStart()){var n=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),n)}else return t.getIndex().minPost()},e.getEndPost_=function(t){if(t.hasEnd()){var n=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),n)}else return t.getIndex().maxPost()},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SB=function(){function e(t){this.rangedFilter_=new RR(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return e.prototype.updateChild=function(t,n,r,i,s,a){return this.rangedFilter_.matches(new Dt(n,r))||(r=It.EMPTY_NODE),t.getImmediateChild(n).equals(r)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,n,r,i,s,a):this.fullLimitUpdateChild_(t,n,r,s,a)},e.prototype.updateFullNode=function(t,n,r){var i;if(n.isLeafNode()||n.isEmpty())i=It.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=It.EMPTY_NODE.withIndex(this.index_);var s=void 0;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;s.hasNext()&&a<this.limit_;){var c=s.getNext(),l=void 0;if(this.reverse_?l=this.index_.compare(this.rangedFilter_.getStartPost(),c)<=0:l=this.index_.compare(c,this.rangedFilter_.getEndPost())<=0,l)i=i.updateImmediateChild(c.name,c.node),a++;else break}}else{i=n.withIndex(this.index_),i=i.updatePriority(It.EMPTY_NODE);var h=void 0,p=void 0,v=void 0,s=void 0;if(this.reverse_){s=i.getReverseIterator(this.index_),h=this.rangedFilter_.getEndPost(),p=this.rangedFilter_.getStartPost();var m=this.index_.getCompare();v=function(I,C){return m(C,I)}}else s=i.getIterator(this.index_),h=this.rangedFilter_.getStartPost(),p=this.rangedFilter_.getEndPost(),v=this.index_.getCompare();for(var a=0,y=!1;s.hasNext();){var c=s.getNext();!y&&v(h,c)<=0&&(y=!0);var l=y&&a<this.limit_&&v(c,p)<=0;l?a++:i=i.updateImmediateChild(c.name,It.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,i,r)},e.prototype.updatePriority=function(t,n){return t},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(t,n,r,i,s){var a;if(this.reverse_){var c=this.index_.getCompare();a=function(P,D){return c(D,P)}}else a=this.index_.getCompare();var l=t;K(l.numChildren()===this.limit_,"");var h=new Dt(n,r),p=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),v=this.rangedFilter_.matches(h);if(l.hasChild(n)){for(var m=l.getImmediateChild(n),y=i.getChildAfterChild(this.index_,p,this.reverse_);y!=null&&(y.name===n||l.hasChild(y.name));)y=i.getChildAfterChild(this.index_,y,this.reverse_);var b=y==null?1:a(y,h),E=v&&!r.isEmpty()&&b>=0;if(E)return s!=null&&s.trackChildChange(_l(n,r,m)),l.updateImmediateChild(n,r);s!=null&&s.trackChildChange(yl(n,m));var I=l.updateImmediateChild(n,It.EMPTY_NODE),C=y!=null&&this.rangedFilter_.matches(y);return C?(s!=null&&s.trackChildChange(uu(y.name,y.node)),I.updateImmediateChild(y.name,y.node)):I}else return r.isEmpty()?t:v&&a(p,h)>=0?(s!=null&&(s.trackChildChange(yl(p.name,p.node)),s.trackChildChange(uu(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(p.name,It.EMPTY_NODE)):t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AB=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zt}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return this.viewFrom_===""?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return K(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return K(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ui},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return K(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return K(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:pi},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&this.viewFrom_!==""},e.prototype.getLimit=function(){return K(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="",n},e.prototype.limitToFirst=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(t,n){var r=this.copy_();return r.startSet_=!0,t===void 0&&(t=null),r.indexStartValue_=t,n!=null?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r},e.prototype.startAfter=function(t,n){var r;if(this.index_===ci)typeof t=="string"&&(t=jS(t)),r=this.startAt(t,n);else{var i=void 0;n==null?i=pi:i=jS(n),r=this.startAt(t,i)}return r.startAfterSet_=!0,r},e.prototype.endAt=function(t,n){var r=this.copy_();return r.endSet_=!0,t===void 0&&(t=null),r.indexEndValue_=t,n!==void 0?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r},e.prototype.endBefore=function(t,n){var r,i;return this.index_===ci?(typeof t=="string"&&(t=VS(t)),i=this.endAt(t,n)):(n==null?r=Ui:r=VS(n),i=this.endAt(t,r)),i.endBeforeSet_=!0,i},e.prototype.orderBy=function(t){var n=this.copy_();return n.index_=t,n},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_;var r=this.viewFrom_;r===""&&(this.isViewFromLeft()?r=t.VIEW_FROM_LEFT:r=t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=r}return this.index_!==Zt&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Zt},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new sw(this.getIndex()):this.hasLimit()?new SB(this):new RR(this)},e.prototype.toRestQueryStringParameters=function(){var t=e.REST_QUERY_CONSTANTS_,n={};if(this.isDefault())return n;var r;return this.index_===Zt?r=t.PRIORITY_INDEX:this.index_===Uy?r=t.VALUE_INDEX:this.index_===ci?r=t.KEY_INDEX:(K(this.index_ instanceof jy,"Unrecognized index type!"),r=this.index_.toString()),n[t.ORDER_BY]=Ue(r),this.startSet_&&(n[t.START_AT]=Ue(this.indexStartValue_),this.startNameSet_&&(n[t.START_AT]+=","+Ue(this.indexStartName_))),this.endSet_&&(n[t.END_AT]=Ue(this.indexEndValue_),this.endNameSet_&&(n[t.END_AT]+=","+Ue(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[t.LIMIT_TO_FIRST]=this.limit_:n[t.LIMIT_TO_LAST]=this.limit_),n},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xi=function(e){Z(t,e);function t(n,r){var i=this;if(!(n instanceof uw))throw new Error("new Reference() no longer supported - use app.database().");return i=e.call(this,n,r,new AB,!1)||this,i}return t.prototype.getKey=function(){return mt("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(n){return mt("Reference.child",1,1,arguments.length),typeof n=="number"?n=String(n):n instanceof nt||(this.path.getFront()===null?a3("Reference.child",1,n,!1):ml("Reference.child",1,n,!1)),new t(this.repo,this.path.child(n))},t.prototype.getParent=function(){mt("Reference.parent",0,0,arguments.length);var n=this.path.parent();return n===null?null:new t(this.repo,n)},t.prototype.getRoot=function(){mt("Reference.root",0,0,arguments.length);for(var n=this;n.getParent()!==null;)n=n.getParent();return n},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(n,r){mt("Reference.set",1,2,arguments.length),dr("Reference.set",this.path),si("Reference.set",1,n,this.path,!1),Qe("Reference.set",2,r,!0);var i=new qn;return this.repo.setWithPriority(this.path,n,null,i.wrapCallback(r)),i.promise},t.prototype.update=function(n,r){if(mt("Reference.update",1,2,arguments.length),dr("Reference.update",this.path),Array.isArray(n)){for(var i={},s=0;s<n.length;++s)i[""+s]=n[s];n=i,vn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}iR("Reference.update",1,n,this.path,!1),Qe("Reference.update",2,r,!0);var a=new qn;return this.repo.update(this.path,n,a.wrapCallback(r)),a.promise},t.prototype.setWithPriority=function(n,r,i){if(mt("Reference.setWithPriority",2,3,arguments.length),dr("Reference.setWithPriority",this.path),si("Reference.setWithPriority",1,n,this.path,!1),Ly("Reference.setWithPriority",2,r,!1),Qe("Reference.setWithPriority",3,i,!0),this.getKey()===".length"||this.getKey()===".keys")throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var s=new qn;return this.repo.setWithPriority(this.path,n,r,s.wrapCallback(i)),s.promise},t.prototype.remove=function(n){return mt("Reference.remove",0,1,arguments.length),dr("Reference.remove",this.path),Qe("Reference.remove",1,n,!0),this.set(null,n)},t.prototype.transaction=function(n,r,i){if(mt("Reference.transaction",1,3,arguments.length),dr("Reference.transaction",this.path),Qe("Reference.transaction",1,n,!1),Qe("Reference.transaction",2,r,!0),u3("Reference.transaction",3,i,!0),this.getKey()===".length"||this.getKey()===".keys")throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";i===void 0&&(i=!0);var s=new qn;typeof r=="function"&&s.promise.catch(function(){});var a=function(c,l,h){c?s.reject(c):s.resolve(new l3(l,h)),typeof r=="function"&&r(c,l,h)};return this.repo.startTransaction(this.path,n,a,i),s.promise},t.prototype.setPriority=function(n,r){mt("Reference.setPriority",1,2,arguments.length),dr("Reference.setPriority",this.path),Ly("Reference.setPriority",1,n,!1),Qe("Reference.setPriority",2,r,!0);var i=new qn;return this.repo.setWithPriority(this.path.child(".priority"),n,null,i.wrapCallback(r)),i.promise},t.prototype.push=function(n,r){mt("Reference.push",0,2,arguments.length),dr("Reference.push",this.path),si("Reference.push",1,n,this.path,!0),Qe("Reference.push",2,r,!0);var i=this.repo.serverTime(),s=f3(i),a=this.child(s),c=this.child(s),l;return n!=null?l=a.set(n,r).then(function(){return c}):l=Promise.resolve(c),a.then=l.then.bind(l),a.catch=l.then.bind(l,void 0),typeof r=="function"&&l.catch(function(){}),a},t.prototype.onDisconnect=function(){return dr("Reference.onDisconnect",this.path),new c3(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(iw);iw.__referenceConstructor=xi;Vy.__referenceConstructor=xi;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CB=function(){function e(t,n){var r=this;this.app_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(i){return r.auth_=i})}return e.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(n){return n&&n.code==="auth/token-not-initialized"?(sn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)}):Promise.resolve(null)},e.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(n){return n.addAuthTokenListener(t)}))},e.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(n){return n.removeAuthTokenListener(t)})},e.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vn(t)},e}(),cA=function(){function e(){}return e.prototype.getToken=function(t){return Promise.resolve({accessToken:e.EMULATOR_AUTH_TOKEN})},e.prototype.addTokenChangeListener=function(t){t(e.EMULATOR_AUTH_TOKEN)},e.prototype.removeTokenChangeListener=function(t){},e.prototype.notifyForInvalidToken=function(){},e.EMULATOR_AUTH_TOKEN="owner",e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var NB="FIREBASE_DATABASE_EMULATOR_HOST",Lm,wl=function(){function e(){this.repos_={},this.useRestClient_=!1}return e.getInstance=function(){return Lm||(Lm=new e),Lm},e.prototype.interrupt=function(){var t,n,r,i;try{for(var s=Te(Object.keys(this.repos_)),a=s.next();!a.done;a=s.next()){var c=a.value;try{for(var l=(r=void 0,Te(Object.keys(this.repos_[c]))),h=l.next();!h.done;h=l.next()){var p=h.value;this.repos_[c][p].interrupt()}}catch(v){r={error:v}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}}catch(v){t={error:v}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},e.prototype.resume=function(){var t,n,r,i;try{for(var s=Te(Object.keys(this.repos_)),a=s.next();!a.done;a=s.next()){var c=a.value;try{for(var l=(r=void 0,Te(Object.keys(this.repos_[c]))),h=l.next();!h.done;h=l.next()){var p=h.value;this.repos_[c][p].resume()}}catch(v){r={error:v}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}}catch(v){t={error:v}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},e.prototype.applyEmulatorSettings=function(t,n,r){t.repoInfo_=new nw(n+":"+r,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new cA)},e.prototype.databaseFromApp=function(t,n,r,i){var s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||ai("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),sn("Using default host for project ",t.options.projectId),s=t.options.projectId+"-default-rtdb.firebaseio.com");var a=Dy(s,i),c=a.repoInfo,l,h=void 0;typeof process<"u"&&(h=process.env[NB]),h?(l=!0,s="http://"+h+"?ns="+c.namespace,a=Dy(s,i),c=a.repoInfo):l=!a.repoInfo.secure;var p=i&&l?new cA:new CB(t,n);oR("Invalid Firebase Database URL",1,a),a.path.isEmpty()||ai("Database URL must point to the root of a Firebase Database (not including a child path).");var v=this.createRepo(c,t,p);return v.database},e.prototype.deleteRepo=function(t){var n=Dr(this.repos_,t.app.name);(!n||Dr(n,t.key)!==t)&&ai("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete n[t.key]},e.prototype.createRepo=function(t,n,r){var i=Dr(this.repos_,n.name);i||(i={},this.repos_[n.name]=i);var s=Dr(i,t.toURLString());return s&&ai("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new uw(t,this.useRestClient_,n,r),i[t.toURLString()]=s,s},e.prototype.forceRestClient=function(t){this.useRestClient_=t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cw=function(){function e(t){var n=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return R(n,void 0,void 0,function(){return N(this,function(r){return this.checkDeleted_("delete"),wl.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof uw||ai("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(e.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new xi(this.repo_,nt.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),e.prototype.useEmulator=function(t,n){if(this.checkDeleted_("useEmulator"),this.instanceStarted_){ai("Cannot call useEmulator() after instance has already been initialized.");return}wl.getInstance().applyEmulatorSettings(this.repoInternal_,t,n)},e.prototype.ref=function(t){return this.checkDeleted_("ref"),mt("database.ref",0,1,arguments.length),t instanceof xi?this.refFromURL(t.toString()):t!==void 0?this.root_.child(t):this.root_},e.prototype.refFromURL=function(t){var n="database.refFromURL";this.checkDeleted_(n),mt(n,1,1,arguments.length);var r=Dy(t,this.repo_.repoInfo_.nodeAdmin);oR(n,1,r);var i=r.repoInfo;return!this.repo_.repoInfo_.isCustomHost()&&i.host!==this.repo_.repoInfo_.host&&ai(n+": Host name does not match the current database: (found "+i.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(r.path.toString())},e.prototype.checkDeleted_=function(t){this.repoInternal_===null&&ai("Cannot call "+t+" on a deleted database.")},e.prototype.goOffline=function(){mt("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){mt("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var RB=function(){ps.forceDisallow(),aw.forceAllow()},OB=function(){aw.forceDisallow()},xB=function(){return ps.isAvailable()},PB=function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},kB=function(e,t){e.repo.stats(t)},DB=function(e,t){e.repo.statsIncrementCounter(t)},LB=function(e){return e.repo.dataUpdateCount},MB=function(e,t){return e.repo.interceptServerData_(t)};function FB(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,s=e.namespace,a=e.nodeAdmin,c=a===void 0?!1:a;AR(r);var l=new FN("auth-internal",new UN("database-standalone"));return l.setComponent(new Kn("auth-internal",function(){return i},"PRIVATE")),{instance:wl.getInstance().databaseFromApp(t,l,n,c),namespace:s}}var UB=Object.freeze({__proto__:null,forceLongPolling:RB,forceWebSockets:OB,isWebSocketsAvailable:xB,setSecurityDebugCallback:PB,stats:kB,statsIncrementCounter:DB,dataUpdateCount:LB,interceptServerData:MB,initStandalone:FB});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jB=Ts;Ts.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Ts.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var VB=CR,BB=function(e){var t=Ts.prototype.put;return Ts.prototype.put=function(n,r,i,s){s!==void 0&&(s=e()),t.call(this,n,r,i,s)},function(){Ts.prototype.put=t}},qB=nw,HB=function(e){return e.queryIdentifier()},GB=function(e){wl.getInstance().forceRestClient(e)},WB=Object.freeze({__proto__:null,DataConnection:jB,RealTimeConnection:VB,hijackHash:BB,ConnectionTarget:qB,queryIdentifier:HB,forceRestClient:GB}),$B="@firebase/database",zB="0.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KB=cw.ServerValue;function QB(e){AR(e.SDK_VERSION),e.INTERNAL.registerComponent(new Kn("database",function(t,n){var r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return wl.getInstance().databaseFromApp(r,i,n)},"PUBLIC").setServiceProps({Reference:xi,Query:iw,Database:cw,DataSnapshot:po,enableLogging:WN,INTERNAL:UB,ServerValue:KB,TEST_ACCESS:WB}).setMultipleInstances(!0)),e.registerVersion($B,zB)}QB(at);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var By=function(e,t){return By=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},By(e,t)};function YB(e,t){By(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function OR(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var XB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ct,lw=lw||{},Tt=XB||self;function lp(){}function qy(e){var t=typeof e;return t=t!="object"?t:e?Array.isArray(e)?"array":t:"null",t=="array"||t=="object"&&typeof e.length=="number"}function Wl(e){var t=typeof e;return t=="object"&&e!=null||t=="function"}function JB(e){return Object.prototype.hasOwnProperty.call(e,Mm)&&e[Mm]||(e[Mm]=++ZB)}var Mm="closure_uid_"+(1e9*Math.random()>>>0),ZB=0;function tq(e,t,n){return e.call.apply(e.bind,arguments)}function eq(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function gn(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?gn=tq:gn=eq,gn.apply(null,arguments)}function bh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),e.apply(this,r)}}function vi(){return Date.now()}function Dn(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Kb=function(r,i,s){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return t.prototype[i].apply(r,a)}}function Lo(){this.j=this.j,this.i=this.i}var nq=0;Lo.prototype.j=!1;Lo.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),nq!=0)&&JB(this)};Lo.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var xR=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(typeof e=="string")return typeof t!="string"||t.length!=1?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},PR=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=typeof e=="string"?e.split(""):e,s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function rq(e){t:{for(var t=$q,n=e.length,r=typeof e=="string"?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break t}t=-1}return 0>t?null:typeof e=="string"?e.charAt(t):e[t]}function lA(e){return Array.prototype.concat.apply([],arguments)}function fw(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function fp(e){return/^[\s\xa0]*$/.test(e)}var fA=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Rn(e,t){return e.indexOf(t)!=-1}function Fm(e,t){return e<t?-1:e>t?1:0}var On;t:{var hA=Tt.navigator;if(hA){var pA=hA.userAgent;if(pA){On=pA;break t}}On=""}function hw(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function kR(e){var t={};for(var n in e)t[n]=e[n];return t}var dA="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function DR(e,t){for(var n,r,i=1;i<arguments.length;i++){r=arguments[i];for(n in r)e[n]=r[n];for(var s=0;s<dA.length;s++)n=dA[s],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function pw(e){return pw[" "](e),e}pw[" "]=lp;function iq(e,t){var n=aq;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}var oq=Rn(On,"Opera"),No=Rn(On,"Trident")||Rn(On,"MSIE"),LR=Rn(On,"Edge"),Hy=LR||No,MR=Rn(On,"Gecko")&&!(Rn(On.toLowerCase(),"webkit")&&!Rn(On,"Edge"))&&!(Rn(On,"Trident")||Rn(On,"MSIE"))&&!Rn(On,"Edge"),sq=Rn(On.toLowerCase(),"webkit")&&!Rn(On,"Edge");function FR(){var e=Tt.document;return e?e.documentMode:void 0}var hp;t:{var Um="",jm=function(){var e=On;if(MR)return/rv:([^\);]+)(\)|;)/.exec(e);if(LR)return/Edge\/([\d\.]+)/.exec(e);if(No)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e);if(sq)return/WebKit\/(\S+)/.exec(e);if(oq)return/(?:Version)[ \/]?(\S+)/.exec(e)}();if(jm&&(Um=jm?jm[1]:""),No){var Vm=FR();if(Vm!=null&&Vm>parseFloat(Um)){hp=String(Vm);break t}}hp=Um}var aq={};function UR(e){return iq(e,function(){for(var t=0,n=fA(String(hp)).split("."),r=fA(String(e)).split("."),i=Math.max(n.length,r.length),s=0;t==0&&s<i;s++){var a=n[s]||"",c=r[s]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],a[0].length==0&&c[0].length==0)break;t=Fm(a[1].length==0?0:parseInt(a[1],10),c[1].length==0?0:parseInt(c[1],10))||Fm(a[2].length==0,c[2].length==0)||Fm(a[2],c[2]),a=a[3],c=c[3]}while(t==0)}return 0<=t})}var Gy;if(Tt.document&&No){var vA=FR();Gy=vA||parseInt(hp,10)||void 0}else Gy=void 0;var jR=Gy,dw=!No||9<=Number(jR),uq=No&&!UR("9"),cq=function(){if(!Tt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Tt.addEventListener("test",lp,t),Tt.removeEventListener("test",lp,t)}catch{}return e}();function mn(e,t){this.type=e,this.a=this.target=t,this.defaultPrevented=!1}mn.prototype.b=function(){this.defaultPrevented=!0};function bl(e,t){if(mn.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(MR){t:{try{pw(t.nodeName);var i=!0;break t}catch{}i=!1}i||(t=null)}}else n=="mouseover"?t=e.fromElement:n=="mouseout"&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=e.clientX!==void 0?e.clientX:e.pageX,this.clientY=e.clientY!==void 0?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=typeof e.pointerType=="string"?e.pointerType:lq[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}Dn(bl,mn);var lq={2:"touch",3:"pen",4:"mouse"};bl.prototype.b=function(){bl.X.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,uq)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch{}};var $l="closure_listenable_"+(1e6*Math.random()|0),fq=0;function hq(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ca=i,this.key=++fq,this.Y=this.Z=!1}function od(e){e.Y=!0,e.listener=null,e.proxy=null,e.src=null,e.ca=null}function sd(e){this.src=e,this.a={},this.b=0}sd.prototype.add=function(e,t,n,r,i){var s=e.toString();e=this.a[s],e||(e=this.a[s]=[],this.b++);var a=$y(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):(t=new hq(t,this.src,s,!!r,i),t.Z=n,e.push(t)),t};function Wy(e,t){var n=t.type;if(n in e.a){var r=e.a[n],i=xR(r,t),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(od(t),e.a[n].length==0&&(delete e.a[n],e.b--))}}function $y(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.Y&&s.listener==t&&s.capture==!!n&&s.ca==r)return i}return-1}var vw="closure_lm_"+(1e6*Math.random()|0),Bm={};function gw(e,t,n,r,i){if(r&&r.once)return BR(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)gw(e,t[s],n,r,i);return null}return n=_w(n),e&&e[$l]?e.va(t,n,Wl(r)?!!r.capture:!!r,i):VR(e,t,n,!1,r,i)}function VR(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=Wl(i)?!!i.capture:!!i;if(a&&!dw)return null;var c=yw(e);if(c||(e[vw]=c=new sd(e)),n=c.add(t,n,r,a,s),n.proxy)return n;if(r=pq(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)cq||(i=a),i===void 0&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(HR(t.toString()),r);else if(e.addListener&&e.removeListener)e.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function pq(){var e=dq,t=dw?function(n){return e.call(t.src,t.listener,n)}:function(n){if(n=e.call(t.src,t.listener,n),!n)return n};return t}function BR(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)BR(e,t[s],n,r,i);return null}return n=_w(n),e&&e[$l]?e.wa(t,n,Wl(r)?!!r.capture:!!r,i):VR(e,t,n,!0,r,i)}function qR(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)qR(e,t[s],n,r,i);else r=Wl(r)?!!r.capture:!!r,n=_w(n),e&&e[$l]?(e=e.c,t=String(t).toString(),t in e.a&&(s=e.a[t],n=$y(s,n,r,i),-1<n&&(od(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete e.a[t],e.b--)))):e&&(e=yw(e))&&(t=e.a[t.toString()],e=-1,t&&(e=$y(t,n,r,i)),(n=-1<e?t[e]:null)&&mw(n))}function mw(e){if(typeof e!="number"&&e&&!e.Y){var t=e.src;if(t&&t[$l])Wy(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(HR(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=yw(t))?(Wy(n,e),n.b==0&&(n.src=null,t[vw]=null)):od(e)}}}function HR(e){return e in Bm?Bm[e]:Bm[e]="on"+e}function gA(e,t){var n=e.listener,r=e.ca||e.src;return e.Z&&mw(e),n.call(r,t)}function dq(e,t){if(e.Y)return!0;if(!dw){if(!t)t:{t=["window","event"];for(var n=Tt,r=0;r<t.length;r++)if(n=n[t[r]],n==null){t=null;break t}t=n}return t=new bl(t,this),gA(e,t)}return gA(e,new bl(t,this))}function yw(e){return e=e[vw],e instanceof sd?e:null}var qm="__closure_events_fn_"+(1e9*Math.random()>>>0);function _w(e){return typeof e=="function"?e:(e[qm]||(e[qm]=function(t){return e.handleEvent(t)}),e[qm])}function ar(){Lo.call(this),this.c=new sd(this),this.J=this,this.C=null}Dn(ar,Lo);ar.prototype[$l]=!0;ct=ar.prototype;ct.addEventListener=function(e,t,n,r){gw(this,e,t,n,r)};ct.removeEventListener=function(e,t,n,r){qR(this,e,t,n,r)};function un(e,t){var n,r=e.C;if(r)for(n=[];r;r=r.C)n.push(r);if(e=e.J,r=t.type||t,typeof t=="string")t=new mn(t,e);else if(t instanceof mn)t.target=t.target||e;else{var i=t;t=new mn(r,e),DR(t,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.a=n[s];i=Eh(a,r,!0,t)&&i}if(a=t.a=e,i=Eh(a,r,!0,t)&&i,i=Eh(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)a=t.a=n[s],i=Eh(a,r,!1,t)&&i}ct.G=function(){if(ar.X.G.call(this),this.c){var e=this.c,t;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)od(n[r]);delete e.a[t],e.b--}}this.C=null};ct.va=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)};ct.wa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};function Eh(e,t,n,r){if(t=e.c.a[String(t)],!t)return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.Y&&a.capture==n){var c=a.listener,l=a.ca||a.src;a.Z&&Wy(e.c,a),i=c.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var ww=Tt.JSON.stringify;function GR(){this.b=this.a=null}var WR=new(function(){function e(t,n){this.c=t,this.f=n,this.b=0,this.a=null}return e.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},e}())(function(){return new bw},function(e){e.reset()});GR.prototype.add=function(e,t){var n=WR.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n};function vq(){var e=zR,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function bw(){this.next=this.b=this.a=null}bw.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null};bw.prototype.reset=function(){this.next=this.b=this.a=null};function gq(e){Tt.setTimeout(function(){throw e},0)}function $R(e,t){zy||mq(),Ky||(zy(),Ky=!0),zR.add(e,t)}var zy;function mq(){var e=Tt.Promise.resolve(void 0);zy=function(){e.then(yq)}}var Ky=!1,zR=new GR;function yq(){for(var e;e=vq();){try{e.a.call(e.b)}catch(n){gq(n)}var t=WR;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Ky=!1}function ad(e,t){ar.call(this),this.b=e||1,this.a=t||Tt,this.f=gn(this.Za,this),this.g=vi()}Dn(ad,ar);ct=ad.prototype;ct.aa=!1;ct.M=null;ct.Za=function(){if(this.aa){var e=vi()-this.g;0<e&&e<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-e):(this.M&&(this.a.clearTimeout(this.M),this.M=null),un(this,"tick"),this.aa&&(Ew(this),this.start()))}};ct.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=vi())};function Ew(e){e.aa=!1,e.M&&(e.a.clearTimeout(e.M),e.M=null)}ct.G=function(){ad.X.G.call(this),Ew(this),delete this.a};function Iw(e,t,n){if(typeof e=="function")n&&(e=gn(e,n));else if(e&&typeof e.handleEvent=="function")e=gn(e.handleEvent,e);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:Tt.setTimeout(e,t||0)}function KR(e){e.a=Iw(function(){e.a=null,e.c&&(e.c=!1,KR(e))},e.h);var t=e.b;e.b=null,e.g.apply(null,t)}var _q=function(e){YB(t,e);function t(n,r){var i=e.call(this)||this;return i.g=n,i.h=r,i.b=null,i.c=!1,i.a=null,i}return t.prototype.f=function(n){this.b=arguments,this.a?this.c=!0:KR(this)},t.prototype.G=function(){e.prototype.G.call(this),this.a&&(Tt.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},t}(Lo);function El(e){Lo.call(this),this.b=e,this.a={}}Dn(El,Lo);var mA=[];function QR(e,t,n,r){Array.isArray(n)||(n&&(mA[0]=n.toString()),n=mA);for(var i=0;i<n.length;i++){var s=gw(t,n[i],r||e.handleEvent,!1,e.b||e);if(!s)break;e.a[s.key]=s}}function YR(e){hw(e.a,function(t,n){this.a.hasOwnProperty(n)&&mw(t)},e),e.a={}}El.prototype.G=function(){El.X.G.call(this),YR(this)};El.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Tw(){this.a=!0}function wq(e,t,n,r,i,s){e.info(function(){if(e.a)if(s)for(var a="",c=s.split("&"),l=0;l<c.length;l++){var h=c[l].split("=");if(1<h.length){var p=h[0];h=h[1];var v=p.split("_");a=2<=v.length&&v[1]=="type"?a+(p+"="+h+"&"):a+(p+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+n+`
`+a})}function bq(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+n+`
`+s+" "+a})}function Fa(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+Iq(e,n)+(r?" "+r:"")})}function Eq(e,t){e.info(function(){return"TIMEOUT: "+t})}Tw.prototype.info=function(){};function Iq(e,t){if(!e.a)return t;if(!t)return null;try{var n=JSON.parse(t);if(n){for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var a=1;a<i.length;a++)i[a]=""}}}}return ww(n)}catch{return t}}var Hs={},yA=null;function ud(){return yA=yA||new ar}Hs.Fa="serverreachability";function XR(e){mn.call(this,Hs.Fa,e)}Dn(XR,mn);function Il(e){var t=ud();un(t,new XR(t))}Hs.STAT_EVENT="statevent";function JR(e,t){mn.call(this,Hs.STAT_EVENT,e),this.stat=t}Dn(JR,mn);function xn(e){var t=ud();un(t,new JR(t,e))}Hs.Ga="timingevent";function ZR(e){mn.call(this,Hs.Ga,e)}Dn(ZR,mn);function zl(e,t){if(typeof e!="function")throw Error("Fn must not be null and must be a function");return Tt.setTimeout(function(){e()},t)}var cd={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},tO={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function eO(){}eO.prototype.a=null;function _A(e){var t;return(t=e.a)||(t=e.a={}),t}function nO(){}var Kl={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Sw(){mn.call(this,"d")}Dn(Sw,mn);function Aw(){mn.call(this,"c")}Dn(Aw,mn);var rO;function iO(){}Dn(iO,eO);rO=new iO;function Ql(e,t,n,r){this.g=e,this.c=t,this.f=n,this.S=r||1,this.J=new El(this),this.P=Tq,e=Hy?125:void 0,this.R=new ad(e),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}var Tq=45e3,oO={},Qy={};ct=Ql.prototype;ct.setTimeout=function(e){this.P=e};function Yy(e,t,n){e.H=1,e.i=fd(ji(t)),e.j=n,e.I=!0,sO(e,null)}function sO(e,t){e.u=vi(),Yl(e),e.l=ji(e.i);var n=e.l,r=e.S;Array.isArray(r)||(r=[String(r)]),hO(n.b,"t",r),e.D=0,e.a=OO(e.g,e.g.C?t:null),0<e.O&&(e.F=new _q(gn(e.Ca,e,e.a),e.O)),QR(e.J,e.a,"readystatechange",e.Xa),t=e.B?kR(e.B):{},e.j?(e.m||(e.m="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ba(e.l,e.m,e.j,t)):(e.m="GET",e.a.ba(e.l,e.m,null,t)),Il(),wq(e.c,e.m,e.l,e.f,e.S,e.j)}ct.Xa=function(e){e=e.target;var t=this.F;t&&_o(e)==3?t.f():this.Ca(e)};ct.Ca=function(e){try{if(e==this.a)t:{var t=_o(this.a),n=this.a.ua(),r=this.a.W();if(!(3>t||t==3&&!Hy&&!this.a.$())){this.A||t!=4||n==7||(n==8||0>=r?Il(3):Il(2)),ld(this);var i=this.a.W();this.N=i;var s=this.a.$();if(this.b=i==200,bq(this.c,this.m,this.l,this.f,this.S,t,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,c=this.a;if((a=c.a?c.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fp(a)){var l=a;break e}}l=null}if(l)Fa(this.c,this.f,l,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Xy(this,l);else{this.b=!1,this.h=3,xn(12),Ka(this),pp(this);break t}}this.I?(aO(this,t,s),Hy&&this.b&&t==3&&(QR(this.J,this.R,"tick",this.Wa),this.R.start())):(Fa(this.c,this.f,s,null),Xy(this,s)),t==4&&Ka(this),this.b&&!this.A&&(t==4?AO(this.g,this):(this.b=!1,Yl(this)))}else i==400&&0<s.indexOf("Unknown SID")?(this.h=3,xn(12)):(this.h=0,xn(13)),Ka(this),pp(this)}}}catch{}finally{}};function aO(e,t,n){for(var r=!0;!e.A&&e.D<n.length;){var i=Sq(e,n);if(i==Qy){t==4&&(e.h=4,xn(14),r=!1),Fa(e.c,e.f,null,"[Incomplete Response]");break}else if(i==oO){e.h=4,xn(15),Fa(e.c,e.f,n,"[Invalid Chunk]"),r=!1;break}else Fa(e.c,e.f,i,null),Xy(e,i)}t==4&&n.length==0&&(e.h=1,xn(16),r=!1),e.b=e.b&&r,r?0<n.length&&!e.V&&(e.V=!0,t=e.g,t.a==e&&t.U&&!t.F&&(t.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Dw(t),t.F=!0,xn(11))):(Fa(e.c,e.f,n,"[Invalid Chunked Response]"),Ka(e),pp(e))}ct.Wa=function(){if(this.a){var e=_o(this.a),t=this.a.$();this.D<t.length&&(ld(this),aO(this,e,t),this.b&&e!=4&&Yl(this))}};function Sq(e,t){var n=e.D,r=t.indexOf(`
`,n);return r==-1?Qy:(n=Number(t.substring(n,r)),isNaN(n)?oO:(r+=1,r+n>t.length?Qy:(t=t.substr(r,n),e.D=r+n,t)))}ct.cancel=function(){this.A=!0,Ka(this)};function Yl(e){e.T=vi()+e.P,uO(e,e.P)}function uO(e,t){if(e.o!=null)throw Error("WatchDog timer not null");e.o=zl(gn(e.Va,e),t)}function ld(e){e.o&&(Tt.clearTimeout(e.o),e.o=null)}ct.Va=function(){this.o=null;var e=vi();0<=e-this.T?(Eq(this.c,this.l),this.H!=2&&(Il(),xn(17)),Ka(this),this.h=2,pp(this)):uO(this,this.T-e)};function pp(e){e.g.v==0||e.A||AO(e.g,e)}function Ka(e){ld(e);var t=e.F;t&&typeof t.ja=="function"&&t.ja(),e.F=null,Ew(e.R),YR(e.J),e.a&&(t=e.a,e.a=null,t.abort(),t.ja())}function Xy(e,t){try{var n=e.g;if(n.v!=0&&(n.a==e||Jy(n.b,e))){if(n.I=e.N,!e.C&&Jy(n.b,e)&&n.v==3){try{var r=n.ka.a.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){t:if(!n.j){if(n.a)if(n.a.u+3e3<e.u)mp(n),pd(n);else break t;kw(n),xn(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&n.o==0&&!n.m&&(n.m=zl(gn(n.Sa,n),6e3));if(1>=vO(n.b)&&n.ea){try{n.ea()}catch{}n.ea=void 0}}else ms(n,11)}else if((e.C||n.a==e)&&mp(n),!fp(t))for(t=r=n.ka.a.parse(t),r=0;r<t.length;r++)if(i=t[r],n.P=i[0],i=i[1],n.v==2)if(i[0]=="c"){n.J=i[1],n.ga=i[2];var s=i[3];s!=null&&(n.ha=s,n.c.info("VER="+n.ha));var a=i[4];a!=null&&(n.pa=a,n.c.info("SVER="+n.pa));var c=i[5];if(c!=null&&typeof c=="number"&&0<c){var l=1.5*c;n.D=l,n.c.info("backChannelRequestTimeoutMs_="+l)}l=n;var h=e.a;if(h){var p=h.a?h.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var v=l.b;!v.a&&(Rn(p,"spdy")||Rn(p,"quic")||Rn(p,"h2"))&&(v.f=v.g,v.a=new Set,v.b&&(Rw(v,v.b),v.b=null))}if(l.A){var m=h.a?h.a.getResponseHeader("X-HTTP-Session-Id"):null;m&&(l.na=m,le(l.B,l.A,m))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=vi()-e.u,n.c.info("Handshake RTT: "+n.N+"ms")),l=n;var y=e;if(l.la=RO(l,l.C?l.ga:null,l.fa),y.C){gO(l.b,y);var b=y,E=l.D;E&&b.setTimeout(E),b.o&&(ld(b),Yl(b)),l.a=y}else TO(l);0<n.g.length&&dd(n)}else i[0]!="stop"&&i[0]!="close"||ms(n,7);else n.v==3&&(i[0]=="stop"||i[0]=="close"?i[0]=="stop"?ms(n,7):Pw(n):i[0]!="noop"&&n.f&&n.f.sa(i),n.o=0)}Il(4)}catch{}}function Aq(e){if(e.K&&typeof e.K=="function")return e.K();if(typeof e=="string")return e.split("");if(qy(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}t=[],n=0;for(r in e)t[n++]=e[r];return e=t}function Cw(e,t){if(e.forEach&&typeof e.forEach=="function")e.forEach(t,void 0);else if(qy(e)||typeof e=="string")PR(e,t,void 0);else{if(e.L&&typeof e.L=="function")var n=e.L();else if(e.K&&typeof e.K=="function")n=void 0;else if(qy(e)||typeof e=="string"){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=Aq(e),i=r.length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function ku(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ku)for(n=e.L(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}ct=ku.prototype;ct.K=function(){Nw(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e};ct.L=function(){return Nw(this),this.a.concat()};function Nw(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Ps(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)r=e.a[t],Ps(i,r)||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}ct.get=function(e,t){return Ps(this.b,e)?this.b[e]:t};ct.set=function(e,t){Ps(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t};ct.forEach=function(e,t){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};function Ps(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var cO=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Cq(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function ks(e,t){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,e instanceof ks){this.a=t!==void 0?t:e.a,dp(this,e.f),this.j=e.j,vp(this,e.c),gp(this,e.h),this.g=e.g,t=e.b;var n=new Tl;n.c=t.c,t.a&&(n.a=new ku(t.a),n.b=t.b),wA(this,n),this.i=e.i}else e&&(n=String(e).match(cO))?(this.a=!!t,dp(this,n[1]||"",!0),this.j=Xc(n[2]||""),vp(this,n[3]||"",!0),gp(this,n[4]),this.g=Xc(n[5]||"",!0),wA(this,n[6]||"",!0),this.i=Xc(n[7]||"")):(this.a=!!t,this.b=new Tl(null,this.a))}ks.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Gc(t,bA,!0),":");var n=this.c;return(n||t=="file")&&(e.push("//"),(t=this.j)&&e.push(Gc(t,bA,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,n!=null&&e.push(":",String(n))),(n=this.g)&&(this.c&&n.charAt(0)!="/"&&e.push("/"),e.push(Gc(n,n.charAt(0)=="/"?Pq:xq,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.i)&&e.push("#",Gc(n,Dq)),e.join("")};function ji(e){return new ks(e)}function dp(e,t,n){e.f=n?Xc(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function vp(e,t,n){e.c=n?Xc(t,!0):t}function gp(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.h=t}else e.h=null}function wA(e,t,n){t instanceof Tl?(e.b=t,Lq(e.b,e.a)):(n||(t=Gc(t,kq)),e.b=new Tl(t,e.a))}function le(e,t,n){e.b.set(t,n)}function fd(e){return le(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^vi()).toString(36)),e}function Nq(e){return e instanceof ks?ji(e):new ks(e,void 0)}function Rq(e,t,n,r){var i=new ks(null,void 0);return e&&dp(i,e),t&&vp(i,t),n&&gp(i,n),r&&(i.g=r),i}function Xc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Gc(e,t,n){return typeof e=="string"?(e=encodeURI(e).replace(t,Oq),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Oq(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var bA=/[#\/\?@]/g,xq=/[#\?:]/g,Pq=/[#\?]/g,kq=/[#\?@]/g,Dq=/#/g;function Tl(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Mo(e){e.a||(e.a=new ku,e.b=0,e.c&&Cq(e.c,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}ct=Tl.prototype;ct.add=function(e,t){Mo(this),this.c=null,e=Du(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this};function lO(e,t){Mo(e),t=Du(e,t),Ps(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,e=e.a,Ps(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Nw(e)))}function fO(e,t){return Mo(e),t=Du(e,t),Ps(e.a.b,t)}ct.forEach=function(e,t){Mo(this),this.a.forEach(function(n,r){PR(n,function(i){e.call(t,i,r,this)},this)},this)};ct.L=function(){Mo(this);for(var e=this.a.K(),t=this.a.L(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n};ct.K=function(e){Mo(this);var t=[];if(typeof e=="string")fO(this,e)&&(t=lA(t,this.a.get(Du(this,e))));else{e=this.a.K();for(var n=0;n<e.length;n++)t=lA(t,e[n])}return t};ct.set=function(e,t){return Mo(this),this.c=null,e=Du(this,e),fO(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this};ct.get=function(e,t){return e?(e=this.K(e),0<e.length?String(e[0]):t):t};function hO(e,t,n){lO(e,t),0<n.length&&(e.c=null,e.a.set(Du(e,t),fw(n)),e.b+=n.length)}ct.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.L(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.K(r);for(var s=0;s<r.length;s++){var a=i;r[s]!==""&&(a+="="+encodeURIComponent(String(r[s]))),e.push(a)}}return this.c=e.join("&")};function Du(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function Lq(e,t){t&&!e.f&&(Mo(e),e.c=null,e.a.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(lO(this,r),hO(this,i,n))},e)),e.f=t}var Mq=function(){function e(t,n){this.b=t,this.a=n}return e}();function pO(e){this.g=e||Fq,Tt.PerformanceNavigationTiming?(e=Tt.performance.getEntriesByType("navigation"),e=0<e.length&&(e[0].nextHopProtocol=="hq"||e[0].nextHopProtocol=="h2")):e=!!(Tt.ia&&Tt.ia.ya&&Tt.ia.ya()&&Tt.ia.ya().Lb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Fq=10;function dO(e){return e.b?!0:e.a?e.a.size>=e.f:!1}function vO(e){return e.b?1:e.a?e.a.size:0}function Jy(e,t){return e.b?e.b==t:e.a?e.a.has(t):!1}function Rw(e,t){e.a?e.a.add(t):e.b=t}function gO(e,t){e.b&&e.b==t?e.b=null:e.a&&e.a.has(t)&&e.a.delete(t)}pO.prototype.cancel=function(){var e,t;if(this.c=mO(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&this.a.size!==0){try{for(var n=OR(this.a.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(s){e={error:s}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}};function mO(e){var t,n;if(e.b!=null)return e.c.concat(e.b.s);if(e.a!=null&&e.a.size!==0){var r=e.c;try{for(var i=OR(e.a.values()),s=i.next();!s.done;s=i.next()){var a=s.value;r=r.concat(a.s)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return fw(e.c)}function Ow(){}Ow.prototype.stringify=function(e){return Tt.JSON.stringify(e,void 0)};Ow.prototype.parse=function(e){return Tt.JSON.parse(e,void 0)};function Uq(){this.a=new Ow}function jq(e,t,n){var r=n||"";try{Cw(e,function(i,s){var a=i;Wl(i)&&(a=ww(i)),t.push(r+s+"="+encodeURIComponent(a))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Vq(e,t){var n=new Tw;if(Tt.Image){var r=new Image;r.onload=bh(Ih,n,r,"TestLoadImage: loaded",!0,t),r.onerror=bh(Ih,n,r,"TestLoadImage: error",!1,t),r.onabort=bh(Ih,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=bh(Ih,n,r,"TestLoadImage: timeout",!1,t),Tt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}function Ih(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}var Bq=Tt.JSON.parse;function He(e){ar.call(this),this.headers=new ku,this.H=e||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=qq,this.D=this.F=!1}Dn(He,ar);var qq="",Hq=/^https?$/i,Gq=["POST","PUT"];ct=He.prototype;ct.ba=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+e);t=t?t.toUpperCase():"GET",this.B=e,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?_A(this.H):_A(rO),this.a.onreadystatechange=gn(this.za,this);try{this.A=!0,this.a.open(t,String(e),!0),this.A=!1}catch(s){EA(this,s);return}e=n||"";var i=new ku(this.headers);r&&Cw(r,function(s,a){i.set(a,s)}),r=rq(i.L()),n=Tt.FormData&&e instanceof Tt.FormData,!(0<=xR(Gq,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,a){this.a.setRequestHeader(a,s)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{wO(this),0<this.o&&((this.D=Wq(this.a))?(this.a.timeout=this.o,this.a.ontimeout=gn(this.xa,this)):this.m=Iw(this.xa,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(s){EA(this,s)}};function Wq(e){return No&&UR(9)&&typeof e.timeout=="number"&&e.ontimeout!==void 0}function $q(e){return e.toLowerCase()=="content-type"}ct.xa=function(){typeof lw<"u"&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,un(this,"timeout"),this.abort(8))};function EA(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,yO(e),hd(e)}function yO(e){e.u||(e.u=!0,un(e,"complete"),un(e,"error"))}ct.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,un(this,"complete"),un(this,"abort"),hd(this))};ct.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),hd(this,!0)),He.X.G.call(this)};ct.za=function(){this.j||(this.A||this.l||this.g?_O(this):this.Ua())};ct.Ua=function(){_O(this)};function _O(e){if(e.b&&typeof lw<"u"&&(!e.s[1]||_o(e)!=4||e.W()!=2)){if(e.l&&_o(e)==4)Iw(e.za,0,e);else if(un(e,"readystatechange"),_o(e)==4){e.b=!1;try{{var t=e.W();t:switch(t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var n=!0;break t;default:n=!1}var r;if(!(r=n)){var i;if(i=t===0){var s=String(e.B).match(cO)[1]||null;if(!s&&Tt.self&&Tt.self.location){var a=Tt.self.location.protocol;s=a.substr(0,a.length-1)}i=!Hq.test(s?s.toLowerCase():"")}r=i}var c=r}if(c)un(e,"complete"),un(e,"success");else{e.h=6;try{var l=2<_o(e)?e.a.statusText:""}catch{l=""}e.f=l+" ["+e.W()+"]",yO(e)}}finally{hd(e)}}}}function hd(e,t){if(e.a){wO(e);var n=e.a,r=e.s[0]?lp:null;e.a=null,e.s=null,t||un(e,"ready");try{n.onreadystatechange=r}catch{}}}function wO(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(Tt.clearTimeout(e.m),e.m=null)}function _o(e){return e.a?e.a.readyState:0}ct.W=function(){try{return 2<_o(this)?this.a.status:-1}catch{return-1}};ct.$=function(){try{return this.a?this.a.responseText:""}catch{return""}};ct.Pa=function(e){if(this.a){var t=this.a.responseText;return e&&t.indexOf(e)==0&&(t=t.substring(e.length)),Bq(t)}};ct.ua=function(){return this.h};ct.Qa=function(){return typeof this.f=="string"?this.f:String(this.f)};function zq(e){var t="";return hw(e,function(n,r){t+=r,t+=":",t+=n,t+=`\r
`}),t}function xw(e,t,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=zq(n),typeof e=="string"?n!=null&&encodeURIComponent(String(n)):le(e,t,n))}function Mc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function bO(e){this.pa=0,this.g=[],this.c=new Tw,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Mc("failFast",!1,e),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Mc("baseRetryDelayMs",5e3,e),this.Ra=Mc("retryDelaySeedMs",1e4,e),this.Ma=Mc("forwardChannelMaxRetries",2,e),this.ma=Mc("forwardChannelRequestTimeoutMs",2e4,e),this.Na=e&&e.g||void 0,this.D=void 0,this.C=e&&e.supportsCrossDomainXhr||!1,this.J="",this.b=new pO(e&&e.concurrentRequestLimit),this.ka=new Uq,this.da=e&&e.fastHandshake||!1,this.Ia=e&&e.b||!1,e&&e.f&&(this.c.a=!1),e&&e.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&e&&e.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=e&&e.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}ct=bO.prototype;ct.ha=8;ct.v=1;function Pw(e){if(EO(e),e.v==3){var t=e.R++,n=ji(e.B);le(n,"SID",e.J),le(n,"RID",t),le(n,"TYPE","terminate"),Xl(e,n),t=new Ql(e,e.c,t,void 0),t.H=2,t.i=fd(ji(n)),n=!1,Tt.navigator&&Tt.navigator.sendBeacon&&(n=Tt.navigator.sendBeacon(t.i.toString(),"")),!n&&Tt.Image&&(new Image().src=t.i,n=!0),n||(t.a=OO(t.g,null),t.a.ba(t.i)),t.u=vi(),Yl(t)}NO(e)}function pd(e){e.a&&(Dw(e),e.a.cancel(),e.a=null)}function EO(e){pd(e),e.j&&(Tt.clearTimeout(e.j),e.j=null),mp(e),e.b.cancel(),e.h&&(typeof e.h=="number"&&Tt.clearTimeout(e.h),e.h=null)}function Hm(e,t){e.g.push(new Mq(e.Oa++,t)),e.v==3&&dd(e)}function dd(e){dO(e.b)||e.h||(e.h=!0,$R(e.Ba,e),e.u=0)}function Kq(e,t){return vO(e.b)>=e.b.f-(e.h?1:0)?!1:e.h?(e.g=t.s.concat(e.g),!0):e.v==1||e.v==2||e.u>=(e.La?0:e.Ma)?!1:(e.h=zl(gn(e.Ba,e,t),CO(e,e.u)),e.u++,!0)}ct.Ba=function(e){if(this.h)if(this.h=null,this.v==1){if(!e){this.R=Math.floor(1e5*Math.random()),e=this.R++;var t=new Ql(this,this.c,e,void 0),n=this.l;this.O&&(n?(n=kR(n),DR(n,this.O)):n=this.O),this.i===null&&(t.B=n);var r;if(this.da)t:{for(var i=r=0;i<this.g.length;i++){e:{var s=this.g[i];if("__data__"in s.a&&(s=s.a.__data__,typeof s=="string")){s=s.length;break e}s=void 0}if(s===void 0)break;if(r+=s,4096<r){r=i;break t}if(r===4096||i===this.g.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=IO(this,t,r),i=ji(this.B),le(i,"RID",e),le(i,"CVER",22),this.A&&le(i,"X-HTTP-Session-Id",this.A),Xl(this,i),this.i&&n&&xw(i,this.i,n),Rw(this.b,t),this.Ia&&le(i,"TYPE","init"),this.da?(le(i,"$req",r),le(i,"SID","null"),t.U=!0,Yy(t,i,null)):Yy(t,i,r),this.v=2}}else this.v==3&&(e?IA(this,e):this.g.length==0||dO(this.b)||IA(this))};function IA(e,t){var n;t?n=t.f:n=e.R++;var r=ji(e.B);le(r,"SID",e.J),le(r,"RID",n),le(r,"AID",e.P),Xl(e,r),e.i&&e.l&&xw(r,e.i,e.l),n=new Ql(e,e.c,n,e.u+1),e.i===null&&(n.B=e.l),t&&(e.g=t.s.concat(e.g)),t=IO(e,n,1e3),n.setTimeout(Math.round(.5*e.ma)+Math.round(.5*e.ma*Math.random())),Rw(e.b,n),Yy(n,r,t)}function Xl(e,t){e.f&&Cw({},function(n,r){le(t,r,n)})}function IO(e,t,n){n=Math.min(e.g.length,n);var r=e.f?gn(e.f.Ja,e.f,e):null;t:for(var i=e.g,s=-1;;){var a=["count="+n];s==-1?0<n?(s=i[0].b,a.push("ofs="+s)):s=0:a.push("ofs="+s);for(var c=!0,l=0;l<n;l++){var h=i[l].b,p=i[l].a;if(h-=s,0>h)s=Math.max(0,i[l].b-100),c=!1;else try{jq(p,a,"req"+h+"_")}catch{r&&r(p)}}if(c){r=a.join("&");break t}}return e=e.g.splice(0,n),t.s=e,r}function TO(e){e.a||e.j||(e.T=1,$R(e.Aa,e),e.o=0)}function kw(e){return e.a||e.j||3<=e.o?!1:(e.T++,e.j=zl(gn(e.Aa,e),CO(e,e.o)),e.o++,!0)}ct.Aa=function(){if(this.j=null,SO(this),this.U&&!(this.F||this.a==null||0>=this.N)){var e=2*this.N;this.c.info("BP detection timer enabled: "+e),this.s=zl(gn(this.Ta,this),e)}};ct.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,xn(10),pd(this),SO(this))};function Dw(e){e.s!=null&&(Tt.clearTimeout(e.s),e.s=null)}function SO(e){e.a=new Ql(e,e.c,"rpc",e.T),e.i===null&&(e.a.B=e.l),e.a.O=0;var t=ji(e.la);le(t,"RID","rpc"),le(t,"SID",e.J),le(t,"CI",e.H?"0":"1"),le(t,"AID",e.P),Xl(e,t),le(t,"TYPE","xmlhttp"),e.i&&e.l&&xw(t,e.i,e.l),e.D&&e.a.setTimeout(e.D);var n=e.a;e=e.ga,n.H=1,n.i=fd(ji(t)),n.j=null,n.I=!0,sO(n,e)}ct.Sa=function(){this.m!=null&&(this.m=null,pd(this),kw(this),xn(19))};function mp(e){e.m!=null&&(Tt.clearTimeout(e.m),e.m=null)}function AO(e,t){var n=null;if(e.a==t){mp(e),Dw(e),e.a=null;var r=2}else if(Jy(e.b,t))n=t.s,gO(e.b,t),r=1;else return;if(e.I=t.N,e.v!=0){if(t.b)if(r==1){n=t.j?t.j.length:0,t=vi()-t.u;var i=e.u;r=ud(),un(r,new ZR(r)),dd(e)}else TO(e);else if(i=t.h,i==3||i==0&&0<e.I||!(r==1&&Kq(e,t)||r==2&&kw(e)))switch(n&&0<n.length&&(t=e.b,t.c=t.c.concat(n)),i){case 1:ms(e,5);break;case 4:ms(e,10);break;case 3:ms(e,6);break;default:ms(e,2)}}}function CO(e,t){var n=e.Ha+Math.floor(Math.random()*e.Ra);return e.f||(n*=2),n*t}function ms(e,t){if(e.c.info("Error code "+t),t==2){var n=null;e.f&&(n=null);var r=gn(e.Ya,e);n||(n=new ks("//www.google.com/images/cleardot.gif"),Tt.location&&Tt.location.protocol=="http"||dp(n,"https"),fd(n)),Vq(n.toString(),r)}else xn(2);e.v=0,e.f&&e.f.ra(t),NO(e),EO(e)}ct.Ya=function(e){e?(this.c.info("Successfully pinged google.com"),xn(2)):(this.c.info("Failed to ping google.com"),xn(1))};function NO(e){e.v=0,e.I=-1,e.f&&((mO(e.b).length!=0||e.g.length!=0)&&(e.b.c.length=0,fw(e.g),e.g.length=0),e.f.qa())}function RO(e,t,n){var r=Nq(n);if(r.c!="")t&&vp(r,t+"."+r.c),gp(r,r.h);else{var i=Tt.location;r=Rq(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.V&&hw(e.V,function(s,a){le(r,a,s)}),t=e.A,n=e.na,t&&n&&le(r,t,n),le(r,"VER",e.ha),Xl(e,r),r}function OO(e,t){if(t&&!e.C)throw Error("Can't create secondary domain capable XhrIo object.");return t=new He(e.Na),t.F=e.C,t}function xO(){}ct=xO.prototype;ct.ta=function(){};ct.sa=function(){};ct.ra=function(){};ct.qa=function(){};ct.Ja=function(){};function yp(){if(No&&!(10<=Number(jR)))throw Error("Environmental error: no available transport.")}yp.prototype.a=function(e,t){return new ur(e,t)};function ur(e,t){ar.call(this),this.a=new bO(t),this.o=e,this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.l=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.a&&(e?e["X-WebChannel-Client-Profile"]=t.a:e={"X-WebChannel-Client-Profile":t.a}),this.a.O=e,(e=t&&t.httpHeadersOverwriteParam)&&!fp(e)&&(this.a.i=e),this.m=t&&t.supportsCrossDomainXhr||!1,this.l=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!fp(t)&&(this.a.A=t,e=this.b,e!==null&&t in e&&(e=this.b,t in e&&delete e[t])),this.f=new Lu(this)}Dn(ur,ar);ur.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var e=this.a,t=this.o,n=this.b||void 0;xn(0),e.fa=t,e.V=n||{},e.H=e.S,e.B=RO(e,null,e.fa),dd(e)};ur.prototype.close=function(){Pw(this.a)};ur.prototype.h=function(e){if(typeof e=="string"){var t={};t.__data__=e,Hm(this.a,t)}else this.l?(t={},t.__data__=ww(e),Hm(this.a,t)):Hm(this.a,e)};ur.prototype.G=function(){this.a.f=null,delete this.f,Pw(this.a),delete this.a,ur.X.G.call(this)};function PO(e){Sw.call(this);var t=e.__sm__;if(t){t:{for(var n in t){e=n;break t}e=void 0}(this.c=e)?(e=this.c,this.data=t!==null&&e in t?t[e]:void 0):this.data=t}else this.data=e}Dn(PO,Sw);function kO(){Aw.call(this),this.status=1}Dn(kO,Aw);function Lu(e){this.a=e}Dn(Lu,xO);Lu.prototype.ta=function(){un(this.a,"a")};Lu.prototype.sa=function(e){un(this.a,new PO(e))};Lu.prototype.ra=function(e){un(this.a,new kO)};Lu.prototype.qa=function(){un(this.a,"b")};yp.prototype.createWebChannel=yp.prototype.a;ur.prototype.send=ur.prototype.h;ur.prototype.open=ur.prototype.g;ur.prototype.close=ur.prototype.close;cd.NO_ERROR=0;cd.TIMEOUT=8;cd.HTTP_ERROR=6;tO.COMPLETE="complete";nO.EventType=Kl;Kl.OPEN="a";Kl.CLOSE="b";Kl.ERROR="c";Kl.MESSAGE="d";ar.prototype.listen=ar.prototype.va;He.prototype.listenOnce=He.prototype.wa;He.prototype.getLastError=He.prototype.Qa;He.prototype.getLastErrorCode=He.prototype.ua;He.prototype.getStatus=He.prototype.W;He.prototype.getResponseJson=He.prototype.Pa;He.prototype.getResponseText=He.prototype.$;He.prototype.send=He.prototype.ba;var Qq=function(){return new yp},Yq=function(){return ud()},Gm=cd,Xq=tO,Jq=Hs,TA={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},Th=nO,Zq=He;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tH=function(e,t,n,r,i,s){this.t=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=s},_p=function(){function e(t,n){this.projectId=t,this.database=n||"(default)"}return Object.defineProperty(e.prototype,"o",{get:function(){return this.database==="(default)"},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),Vr=new Pu("@firebase/firestore");function Zy(){return Vr.logLevel}function X(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Vr.logLevel<=Rt.DEBUG){var r=t.map(Lw);Vr.debug.apply(Vr,Ae(["Firestore (8.2.7): "+e],r))}}function Pe(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Vr.logLevel<=Rt.ERROR){var r=t.map(Lw);Vr.error.apply(Vr,Ae(["Firestore (8.2.7): "+e],r))}}function wp(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Vr.logLevel<=Rt.WARN){var r=t.map(Lw);Vr.warn.apply(Vr,Ae(["Firestore (8.2.7): "+e],r))}}function Lw(e){if(typeof e=="string")return e;try{return t=e,JSON.stringify(t)}catch{return e}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(e){e===void 0&&(e="Unexpected state");var t="FIRESTORE (8.2.7) INTERNAL ASSERTION FAILED: "+e;throw Pe(t),new Error(t)}function yt(e,t){e||ut()}function tt(e,t){return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eH(e){var t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var DO=function(){function e(){}return e.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length,r="";r.length<20;)for(var i=eH(40),s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length));return r},e}();function kt(e,t){return e<t?-1:e>t?1:0}function cu(e,t,n){return e.length===t.length&&e.every(function(r,i){return n(r,t[i])})}function LO(e){return e+"\0"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pn=function(){function e(t){this.h=t}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(n){for(var r="",i=0;i<n.length;++i)r+=String.fromCharCode(n[i]);return r}(t))},e.prototype.toBase64=function(){return t=this.h,btoa(t);var t},e.prototype.toUint8Array=function(){return function(t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(this.h)},e.prototype.l=function(){return 2*this.h.length},e.prototype._=function(t){return kt(this.h,t.h)},e.prototype.isEqual=function(t){return this.h===t.h},e}();Pn.T=new Pn("");var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).code=n,i.message=r,i.name="FirebaseError",i.toString=function(){return i.name+": [code="+i.code+"]: "+i.message},i}return Z(t,e),t}(Error),Ds=function(){function e(t){this.I=t}return e.fromBase64String=function(t){try{return new e(Pn.fromBase64String(t))}catch(n){throw new G(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},e.fromUint8Array=function(t){return new e(Pn.fromUint8Array(t))},e.prototype.toBase64=function(){return this.I.toBase64()},e.prototype.toUint8Array=function(){return this.I.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(t){return this.I.isEqual(t.I)},e}(),er=function(){function e(t){this.uid=t}return e.prototype.m=function(){return this.uid!=null},e.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(t){return t.uid===this.uid},e}();er.UNAUTHENTICATED=new er(null),er.R=new er("google-credentials-uid"),er.P=new er("first-party-uid");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nH=function(e,t){this.user=t,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+e},SA=function(){function e(){this.V=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.p=function(){},e.prototype.v=function(t){this.V=t,t(er.UNAUTHENTICATED)},e.prototype.S=function(){this.V=null},e}(),rH=function(){function e(t){var n=this;this.D=null,this.currentUser=er.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){n.N++,n.currentUser=n.$(),n.C=!0,n.V&&n.V(n.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then(function(r){n.auth=r,n.D&&n.auth.addAuthTokenListener(n.D)},function(){}))}return e.prototype.getToken=function(){var t=this,n=this.N,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(function(i){return t.N!==n?(X("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):i?(yt(typeof i.accessToken=="string"),new nH(i.accessToken,t.currentUser)):null}):Promise.resolve(null)},e.prototype.p=function(){this.forceRefresh=!0},e.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},e.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},e.prototype.$=function(){var t=this.auth&&this.auth.getUid();return yt(t===null||typeof t=="string"),new er(t)},e}(),iH=function(){function e(t,n){this.F=t,this.O=n,this.type="FirstParty",this.user=er.P}return Object.defineProperty(e.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},n=this.F.auth.getAuthHeaderValueForFirstParty([]);return n&&(t.Authorization=n),t},enumerable:!1,configurable:!0}),e}(),oH=function(){function e(t,n){this.F=t,this.O=n}return e.prototype.getToken=function(){return Promise.resolve(new iH(this.F,this.O))},e.prototype.v=function(t){t(er.P)},e.prototype.S=function(){},e.prototype.p=function(){},e}(),ir=function(){function e(t,n){var r=this;this.previousValue=t,n&&(n.k=function(i){return r.M(i)},this.L=function(i){return n.B(i)})}return e.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},e.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},e}();ir.q=-1;var Gn=function(){function e(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new G(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new G(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new G(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype.U=function(t){return this.seconds===t.seconds?kt(this.nanoseconds,t.nanoseconds):kt(this.seconds,t.seconds)},e.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),Ot=function(){function e(t){this.timestamp=t}return e.K=function(t){return new e(t)},e.min=function(){return new e(new Gn(0,0))},e.prototype._=function(t){return this.timestamp.U(t.timestamp)},e.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},e.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.j=function(){return this.timestamp},e}(),MO=function(){function e(t,n,r){n===void 0?n=0:n>t.length&&ut(),r===void 0?r=t.length-n:r>t.length-n&&ut(),this.segments=t,this.offset=n,this.G=r}return Object.defineProperty(e.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return e.H(this,t)===0},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(r){n.push(r)}):n.push(t),this.J(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.Y=function(t){return t=t===void 0?1:t,this.J(this.segments,this.offset+t,this.length-t)},e.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},e.prototype.Z=function(){return this.segments[this.offset]},e.prototype.tt=function(){return this.get(this.length-1)},e.prototype.get=function(t){return this.segments[this.offset+t]},e.prototype.et=function(){return this.length===0},e.prototype.nt=function(t){if(t.length<this.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0},e.prototype.forEach=function(t){for(var n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])},e.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},e.H=function(t,n){for(var r=Math.min(t.length,n.length),i=0;i<r;i++){var s=t.get(i),a=n.get(i);if(s<a)return-1;if(s>a)return 1}return t.length<n.length?-1:t.length>n.length?1:0},e}(),Ht=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.J=function(n,r,i){return new t(n,r,i)},t.prototype.rt=function(){return this.it().join("/")},t.prototype.toString=function(){return this.rt()},t.ot=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=[],s=0,a=n;s<a.length;s++){var c=a[s];if(c.indexOf("//")>=0)throw new G(k.INVALID_ARGUMENT,"Invalid segment ("+c+"). Paths must not contain // in them.");i.push.apply(i,c.split("/").filter(function(l){return l.length>0}))}return new t(i)},t.ct=function(){return new t([])},t}(MO),sH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Gr=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.J=function(n,r,i){return new t(n,r,i)},t.at=function(n){return sH.test(n)},t.prototype.rt=function(){return this.it().map(function(n){return n=n.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.at(n)||(n="`"+n+"`"),n}).join(".")},t.prototype.toString=function(){return this.rt()},t.prototype.ut=function(){return this.length===1&&this.get(0)==="__name__"},t.ht=function(){return new t(["__name__"])},t.lt=function(n){for(var r=[],i="",s=0,a=function(){if(i.length===0)throw new G(k.INVALID_ARGUMENT,"Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");r.push(i),i=""},c=!1;s<n.length;){var l=n[s];if(l==="\\"){if(s+1===n.length)throw new G(k.INVALID_ARGUMENT,"Path has trailing escape character: "+n);var h=n[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new G(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+n);i+=h,s+=2}else l==="`"?(c=!c,s++):l!=="."||c?(i+=l,s++):(a(),s++)}if(a(),c)throw new G(k.INVALID_ARGUMENT,"Unterminated ` in path: "+n);return new t(r)},t.ct=function(){return new t([])},t}(MO),ht=function(){function e(t){this.path=t}return e._t=function(t){return new e(Ht.ot(t))},e.ft=function(t){return new e(Ht.ot(t).Y(5))},e.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},e.prototype.isEqual=function(t){return t!==null&&Ht.H(this.path,t.path)===0},e.prototype.toString=function(){return this.path.toString()},e.H=function(t,n){return Ht.H(t.path,n.path)},e.wt=function(t){return t.length%2==0},e.Et=function(t){return new e(new Ht(t.slice()))},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Jl(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function FO(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lu=function(){function e(t){this.fields=t,t.sort(Gr.H)}return e.prototype.Tt=function(t){for(var n=0,r=this.fields;n<r.length;n++)if(r[n].nt(t))return!0;return!1},e.prototype.isEqual=function(t){return cu(this.fields,t.fields,function(n,r){return n.isEqual(r)})},e}(),aH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(e){if(yt(!!e),typeof e=="string"){var t=0,n=aH.exec(e);if(yt(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:xe(e.seconds),nanos:xe(e.nanos)}}function xe(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function fu(e){return typeof e=="string"?Pn.fromBase64String(e):Pn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function UO(e){var t=e.mapValue.fields.__previous_value__;return Mw(t)?UO(t):t}function Sl(e){var t=Ro(e.mapValue.fields.__local_write_time__.timestampValue);return new Gn(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(e){return e==null}function bp(e){return e===0&&1/e==-1/0}function jO(e){return typeof e=="number"&&Number.isInteger(e)&&!bp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Mw(e)?4:10:ut()}function di(e,t){var n=Oo(e);if(n!==Oo(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Sl(e).isEqual(Sl(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;var s=Ro(r.timestampValue),a=Ro(i.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(r,i){return fu(r.bytesValue).isEqual(fu(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(r,i){return xe(r.geoPointValue.latitude)===xe(i.geoPointValue.latitude)&&xe(r.geoPointValue.longitude)===xe(i.geoPointValue.longitude)}(e,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return xe(r.integerValue)===xe(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){var s=xe(r.doubleValue),a=xe(i.doubleValue);return s===a?bp(s)===bp(a):isNaN(s)&&isNaN(a)}return!1}(e,t);case 9:return cu(e.arrayValue.values||[],t.arrayValue.values||[],di);case 10:return function(r,i){var s=r.mapValue.fields||{},a=i.mapValue.fields||{};if(AA(s)!==AA(a))return!1;for(var c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!di(s[c],a[c])))return!1;return!0}(e,t);default:return ut()}}function Al(e,t){return(e.values||[]).find(function(n){return di(n,t)})!==void 0}function hu(e,t){var n=Oo(e),r=Oo(t);if(n!==r)return kt(n,r);switch(n){case 0:return 0;case 1:return kt(e.booleanValue,t.booleanValue);case 2:return function(i,s){var a=xe(i.integerValue||i.doubleValue),c=xe(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(e,t);case 3:return CA(e.timestampValue,t.timestampValue);case 4:return CA(Sl(e),Sl(t));case 5:return kt(e.stringValue,t.stringValue);case 6:return function(i,s){var a=fu(i),c=fu(s);return a._(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,s){for(var a=i.split("/"),c=s.split("/"),l=0;l<a.length&&l<c.length;l++){var h=kt(a[l],c[l]);if(h!==0)return h}return kt(a.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,s){var a=kt(xe(i.latitude),xe(s.latitude));return a!==0?a:kt(xe(i.longitude),xe(s.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(i,s){for(var a=i.values||[],c=s.values||[],l=0;l<a.length&&l<c.length;++l){var h=hu(a[l],c[l]);if(h)return h}return kt(a.length,c.length)}(e.arrayValue,t.arrayValue);case 10:return function(i,s){var a=i.fields||{},c=Object.keys(a),l=s.fields||{},h=Object.keys(l);c.sort(),h.sort();for(var p=0;p<c.length&&p<h.length;++p){var v=kt(c[p],h[p]);if(v!==0)return v;var m=hu(a[c[p]],l[h[p]]);if(m!==0)return m}return kt(c.length,h.length)}(e.mapValue,t.mapValue);default:throw ut()}}function CA(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return kt(e,t);var n=Ro(e),r=Ro(t),i=kt(n.seconds,r.seconds);return i!==0?i:kt(n.nanos,r.nanos)}function Fw(e){return t_(e)}function t_(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(r){var i=Ro(r);return"time("+i.seconds+","+i.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?fu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ht.ft(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(r){for(var i="[",s=!0,a=0,c=r.values||[];a<c.length;a++)s?s=!1:i+=",",i+=t_(c[a]);return i+"]"}(e.arrayValue):"mapValue"in e?function(r){for(var i="{",s=!0,a=0,c=Object.keys(r.fields||{}).sort();a<c.length;a++){var l=c[a];s?s=!1:i+=",",i+=l+":"+t_(r.fields[l])}return i+"}"}(e.mapValue):ut();var t,n}function Ep(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.rt()}}function e_(e){return!!e&&"integerValue"in e}function Uw(e){return!!e&&"arrayValue"in e}function NA(e){return!!e&&"nullValue"in e}function RA(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function jw(e){return!!e&&"mapValue"in e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xo=function(){function e(t){this.proto=t}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){if(t.et())return this.proto;for(var n=this.proto,r=0;r<t.length-1;++r)if(!n.mapValue.fields||!jw(n=n.mapValue.fields[t.get(r)]))return null;return(n=(n.mapValue.fields||{})[t.tt()])||null},e.prototype.isEqual=function(t){return di(this.proto,t.proto)},e}(),Zl=function(){function e(t){t===void 0&&(t=xo.empty()),this.It=t,this.At=new Map}return e.prototype.set=function(t,n){return this.Rt(t,n),this},e.prototype.delete=function(t){return this.Rt(t,null),this},e.prototype.Rt=function(t,n){for(var r=this.At,i=0;i<t.length-1;++i){var s=t.get(i),a=r.get(s);a instanceof Map?r=a:a&&Oo(a)===10?(a=new Map(Object.entries(a.mapValue.fields||{})),r.set(s,a),r=a):(a=new Map,r.set(s,a),r=a)}r.set(t.tt(),n)},e.prototype.Pt=function(){var t=this.yt(Gr.ct(),this.At);return t!=null?new xo(t):this.It},e.prototype.yt=function(t,n){var r=this,i=!1,s=this.It.field(t),a=jw(s)?Object.assign({},s.mapValue.fields):{};return n.forEach(function(c,l){if(c instanceof Map){var h=r.yt(t.child(l),c);h!=null&&(a[l]=h,i=!0)}else c!==null?(a[l]=c,i=!0):a.hasOwnProperty(l)&&(delete a[l],i=!0)}),i?{mapValue:{fields:a}}:null},e}();function VO(e){var t=[];return Jl(e.fields||{},function(n,r){var i=new Gr([n]);if(jw(r)){var s=VO(r.mapValue).fields;if(s.length===0)t.push(i);else for(var a=0,c=s;a<c.length;a++){var l=c[a];t.push(i.child(l))}}else t.push(i)}),new lu(t)}var Vw=function(e,t){this.key=e,this.version=t},te=function(e){function t(n,r,i,s){var a=this;return(a=e.call(this,n,r)||this).gt=i,a.Vt=!!s.Vt,a.hasCommittedMutations=!!s.hasCommittedMutations,a}return Z(t,e),t.prototype.field=function(n){return this.gt.field(n)},t.prototype.data=function(){return this.gt},t.prototype.bt=function(){return this.gt.proto},t.prototype.isEqual=function(n){return n instanceof t&&this.key.isEqual(n.key)&&this.version.isEqual(n.version)&&this.Vt===n.Vt&&this.hasCommittedMutations===n.hasCommittedMutations&&this.gt.isEqual(n.gt)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t}(Vw),Be=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r)||this).hasCommittedMutations=!(!i||!i.hasCommittedMutations),s}return Z(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(n){return n instanceof t&&n.hasCommittedMutations===this.hasCommittedMutations&&n.version.isEqual(this.version)&&n.key.isEqual(this.key)},t}(Vw),Bw=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(n){return n instanceof t&&n.version.isEqual(this.version)&&n.key.isEqual(this.key)},t}(Vw),uH=function(e,t,n,r,i,s,a){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),a===void 0&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.vt=null};function OA(e,t,n,r,i,s,a){return t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s=null),a===void 0&&(a=null),new uH(e,t,n,r,i,s,a)}function tf(e){var t=tt(e);if(t.vt===null){var n=t.path.rt();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(r){return function(i){return i.field.rt()+i.op.toString()+Fw(i.value)}(r)}).join(","),n+="|ob:",n+=t.orderBy.map(function(r){return function(i){return i.field.rt()+i.dir}(r)}).join(","),Gs(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Tp(t.startAt)),t.endAt&&(n+="|ub:",n+=Tp(t.endAt)),t.vt=n}return t.vt}function vd(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!gH(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],s=t.filters[r],i.op!==s.op||!i.field.isEqual(s.field)||!di(i.value,s.value))return!1;var i,s;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!PA(e.startAt,t.startAt)&&PA(e.endAt,t.endAt)}function Ip(e){return ht.wt(e.path)&&e.collectionGroup===null&&e.filters.length===0}var or=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).field=n,s.op=r,s.value=i,s}return Z(t,e),t.create=function(n,r,i){return n.ut()?r==="in"||r==="not-in"?this.St(n,r,i):new cH(n,r,i):r==="array-contains"?new hH(n,i):r==="in"?new pH(n,i):r==="not-in"?new dH(n,i):r==="array-contains-any"?new vH(n,i):new t(n,r,i)},t.St=function(n,r,i){return r==="in"?new lH(n,i):new fH(n,i)},t.prototype.matches=function(n){var r=n.field(this.field);return this.op==="!="?r!==null&&this.Dt(hu(r,this.value)):r!==null&&Oo(this.value)===Oo(r)&&this.Dt(hu(r,this.value))},t.prototype.Dt=function(n){switch(this.op){case"<":return n<0;case"<=":return n<=0;case"==":return n===0;case"!=":return n!==0;case">":return n>0;case">=":return n>=0;default:return ut()}},t.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}(function(){}),cH=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,i)||this).key=ht.ft(i.referenceValue),s}return Z(t,e),t.prototype.matches=function(n){var r=ht.H(n.key,this.key);return this.Dt(r)},t}(or),lH=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"in",r)||this).keys=BO("in",r),i}return Z(t,e),t.prototype.matches=function(n){return this.keys.some(function(r){return r.isEqual(n.key)})},t}(or),fH=function(e){function t(n,r){var i=this;return(i=e.call(this,n,"not-in",r)||this).keys=BO("not-in",r),i}return Z(t,e),t.prototype.matches=function(n){return!this.keys.some(function(r){return r.isEqual(n.key)})},t}(or);function BO(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(function(r){return ht.ft(r.referenceValue)})}var hH=function(e){function t(n,r){return e.call(this,n,"array-contains",r)||this}return Z(t,e),t.prototype.matches=function(n){var r=n.field(this.field);return Uw(r)&&Al(r.arrayValue,this.value)},t}(or),pH=function(e){function t(n,r){return e.call(this,n,"in",r)||this}return Z(t,e),t.prototype.matches=function(n){var r=n.field(this.field);return r!==null&&Al(this.value.arrayValue,r)},t}(or),dH=function(e){function t(n,r){return e.call(this,n,"not-in",r)||this}return Z(t,e),t.prototype.matches=function(n){if(Al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var r=n.field(this.field);return r!==null&&!Al(this.value.arrayValue,r)},t}(or),vH=function(e){function t(n,r){return e.call(this,n,"array-contains-any",r)||this}return Z(t,e),t.prototype.matches=function(n){var r=this,i=n.field(this.field);return!(!Uw(i)||!i.arrayValue.values)&&i.arrayValue.values.some(function(s){return Al(r.value.arrayValue,s)})},t}(or),Cl=function(e,t){this.position=e,this.before=t};function Tp(e){return(e.before?"b":"a")+":"+e.position.map(function(t){return Fw(t)}).join(",")}var Qa=function(e,t){t===void 0&&(t="asc"),this.field=e,this.dir=t};function gH(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function xA(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var s=t[i],a=e.position[i];if(r=s.field.ut()?ht.H(ht.ft(a.referenceValue),n.key):hu(a,n.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return e.before?r<=0:r<0}function PA(e,t){if(e===null)return t===null;if(t===null||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!di(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wi=function(e,t,n,r,i,s,a,c){t===void 0&&(t=null),n===void 0&&(n=[]),r===void 0&&(r=[]),i===void 0&&(i=null),s===void 0&&(s="F"),a===void 0&&(a=null),c===void 0&&(c=null),this.path=e,this.collectionGroup=t,this.xt=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=c,this.Nt=null,this.$t=null,this.startAt,this.endAt};function qO(e,t,n,r,i,s,a,c){return new Wi(e,t,n,r,i,s,a,c)}function Mu(e){return new Wi(e)}function Hh(e){return!Gs(e.limit)&&e.limitType==="F"}function Sp(e){return!Gs(e.limit)&&e.limitType==="L"}function qw(e){return e.xt.length>0?e.xt[0].field:null}function Hw(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.Ct())return r.field}return null}function Gw(e){return e.collectionGroup!==null}function pu(e){var t=tt(e);if(t.Nt===null){t.Nt=[];var n=Hw(t),r=qw(t);if(n!==null&&r===null)n.ut()||t.Nt.push(new Qa(n)),t.Nt.push(new Qa(Gr.ht(),"asc"));else{for(var i=!1,s=0,a=t.xt;s<a.length;s++){var c=a[s];t.Nt.push(c),c.field.ut()&&(i=!0)}if(!i){var l=t.xt.length>0?t.xt[t.xt.length-1].dir:"asc";t.Nt.push(new Qa(Gr.ht(),l))}}}return t.Nt}function _r(e){var t=tt(e);if(!t.$t)if(t.limitType==="F")t.$t=OA(t.path,t.collectionGroup,pu(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=pu(t);r<i.length;r++){var s=i[r],a=s.dir==="desc"?"asc":"desc";n.push(new Qa(s.field,a))}var c=t.endAt?new Cl(t.endAt.position,!t.endAt.before):null,l=t.startAt?new Cl(t.startAt.position,!t.startAt.before):null;t.$t=OA(t.path,t.collectionGroup,n,t.filters,t.limit,c,l)}return t.$t}function HO(e,t,n){return new Wi(e.path,e.collectionGroup,e.xt.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ef(e,t){return vd(_r(e),_r(t))&&e.limitType===t.limitType}function GO(e){return tf(_r(e))+"|lt:"+e.limitType}function n_(e){return"Query(target="+function(t){var n=t.path.rt();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=", filters: ["+t.filters.map(function(r){return(i=r).field.rt()+" "+i.op+" "+Fw(i.value);var i}).join(", ")+"]"),Gs(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=", orderBy: ["+t.orderBy.map(function(r){return function(i){return i.field.rt()+" ("+i.dir+")"}(r)}).join(", ")+"]"),t.startAt&&(n+=", startAt: "+Tp(t.startAt)),t.endAt&&(n+=", endAt: "+Tp(t.endAt)),"Target("+n+")"}(_r(e))+"; limitType="+e.limitType+")"}function nf(e,t){return function(n,r){var i=r.key.path;return n.collectionGroup!==null?r.key.dt(n.collectionGroup)&&n.path.nt(i):ht.wt(n.path)?n.path.isEqual(i):n.path.st(i)}(e,t)&&function(n,r){for(var i=0,s=n.xt;i<s.length;i++){var a=s[i];if(!a.field.ut()&&r.field(a.field)===null)return!1}return!0}(e,t)&&function(n,r){for(var i=0,s=n.filters;i<s.length;i++)if(!s[i].matches(r))return!1;return!0}(e,t)&&function(n,r){return!(n.startAt&&!xA(n.startAt,pu(n),r))&&(!n.endAt||!xA(n.endAt,pu(n),r))}(e,t)}function WO(e){return function(t,n){for(var r=!1,i=0,s=pu(e);i<s.length;i++){var a=s[i],c=mH(a,t,n);if(c!==0)return c;r=r||a.field.ut()}return 0}}function mH(e,t,n){var r=e.field.ut()?ht.H(t.key,n.key):function(i,s,a){var c=s.field(i),l=a.field(i);return c!==null&&l!==null?hu(c,l):ut()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ut()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gd=function(){function e(t,n,r,i,s,a,c){s===void 0&&(s=Ot.min()),a===void 0&&(a=Ot.min()),c===void 0&&(c=Pn.T),this.target=t,this.targetId=n,this.Ft=r,this.sequenceNumber=i,this.Ot=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c}return e.prototype.kt=function(t){return new e(this.target,this.targetId,this.Ft,t,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.Mt=function(t,n){return new e(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.Lt=function(t){return new e(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,t,this.resumeToken)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(e,t){if(e.Bt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bp(t)?"-0":t}}function zO(e){return{integerValue:""+e}}function KO(e,t){return jO(t)?zO(t):$O(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var md=function(){this.qt=void 0};function yH(e,t,n){return e instanceof du?function(r,i){var s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,t):e instanceof Ls?YO(e,t):e instanceof Ms?XO(e,t):function(r,i){var s=QO(r,i),a=kA(s)+kA(r.Ut);return e_(s)&&e_(r.Ut)?zO(a):$O(r.Qt,a)}(e,t)}function _H(e,t,n){return e instanceof Ls?YO(e,t):e instanceof Ms?XO(e,t):n}function QO(e,t){return e instanceof vu?e_(n=t)||function(r){return!!r&&"doubleValue"in r}(n)?t:{integerValue:0}:null;var n}var du=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t}(md),Ls=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return Z(t,e),t}(md);function YO(e,t){for(var n=JO(t),r=function(a){n.some(function(c){return di(c,a)})||n.push(a)},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var Ms=function(e){function t(n){var r=this;return(r=e.call(this)||this).elements=n,r}return Z(t,e),t}(md);function XO(e,t){for(var n=JO(t),r=function(a){n=n.filter(function(c){return!di(c,a)})},i=0,s=e.elements;i<s.length;i++)r(s[i]);return{arrayValue:{values:n}}}var vu=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).Qt=n,i.Ut=r,i}return Z(t,e),t}(md);function kA(e){return xe(e.integerValue||e.doubleValue)}function JO(e){return Uw(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rf=function(e,t){this.field=e,this.transform=t},wH=function(e,t){this.version=e,this.transformResults=t},dn=function(){function e(t,n){this.updateTime=t,this.exists=n}return e.Kt=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"Wt",{get:function(){return this.updateTime===void 0&&this.exists===void 0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},e}();function Gh(e,t){return e.updateTime!==void 0?t instanceof te&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t instanceof te}var yd=function(){};function bH(e,t,n){return e instanceof of?function(r,i,s){var a=r.value;if(s.transformResults){var c=MA(r.fieldTransforms,i,s.transformResults);a=Ww(r.fieldTransforms,a,c)}return new te(r.key,s.version,a,{hasCommittedMutations:!0})}(e,t,n):e instanceof Fo?function(r,i,s){if(!Gh(r.jt,i))return new Bw(r.key,s.version);var a=ZO(r,i,s.transformResults?MA(r.fieldTransforms,i,s.transformResults):[]);return new te(r.key,s.version,a,{hasCommittedMutations:!0})}(e,t,n):function(r,i,s){return new Be(r.key,s.version,{hasCommittedMutations:!0})}(e,0,n)}function r_(e,t,n){return e instanceof of?function(r,i,s){if(!Gh(r.jt,i))return i;var a=r.value,c=FA(r.fieldTransforms,s,i);a=Ww(r.fieldTransforms,a,c);var l=LA(i);return new te(r.key,l,a,{Vt:!0})}(e,t,n):e instanceof Fo?function(r,i,s){if(!Gh(r.jt,i))return i;var a=LA(i),c=ZO(r,i,FA(r.fieldTransforms,s,i));return new te(r.key,a,c,{Vt:!0})}(e,t,n):function(r,i){return Gh(r.jt,i)?new Be(r.key,Ot.min()):i}(e,t)}function EH(e,t){return function(n,r){for(var i=null,s=0,a=n;s<a.length;s++){var c=a[s],l=r instanceof te?r.field(c.field):void 0,h=QO(c.transform,l||null);h!=null&&(i=i==null?new Zl().set(c.field,h):i.set(c.field,h))}return i?i.Pt():null}(e.fieldTransforms,t)}function DA(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.jt.isEqual(t.jt)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&cu(n,r,function(i,s){return function(a,c){return a.field.isEqual(c.field)&&function(l,h){return l instanceof Ls&&h instanceof Ls||l instanceof Ms&&h instanceof Ms?cu(l.elements,h.elements,di):l instanceof vu&&h instanceof vu?di(l.Ut,h.Ut):l instanceof du&&h instanceof du}(a.transform,c.transform)}(i,s)})}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.Gt.isEqual(t.Gt))}function LA(e){return e instanceof te?e.version:Ot.min()}var of=function(e){function t(n,r,i,s){s===void 0&&(s=[]);var a=this;return(a=e.call(this)||this).key=n,a.value=r,a.jt=i,a.fieldTransforms=s,a.type=0,a}return Z(t,e),t}(yd),Fo=function(e){function t(n,r,i,s,a){a===void 0&&(a=[]);var c=this;return(c=e.call(this)||this).key=n,c.data=r,c.Gt=i,c.jt=s,c.fieldTransforms=a,c.type=1,c}return Z(t,e),t}(yd);function ZO(e,t,n){var r;return r=function(i,s){var a=new Zl(s);return i.Gt.fields.forEach(function(c){if(!c.et()){var l=i.data.field(c);l!==null?a.set(c,l):a.delete(c)}}),a.Pt()}(e,r=t instanceof te?t.data():xo.empty()),r=Ww(e.fieldTransforms,r,n)}function MA(e,t,n){var r=[];yt(e.length===n.length);for(var i=0;i<n.length;i++){var s=e[i],a=s.transform,c=null;t instanceof te&&(c=t.field(s.field)),r.push(_H(a,c,n[i]))}return r}function FA(e,t,n){for(var r=[],i=0,s=e;i<s.length;i++){var a=s[i],c=a.transform,l=null;n instanceof te&&(l=n.field(a.field)),r.push(yH(c,l,t))}return r}function Ww(e,t,n){for(var r=new Zl(t),i=0;i<e.length;i++){var s=e[i];r.set(s.field,n[i])}return r.Pt()}var Oe,Lt,sf=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.jt=r,i.type=2,i.fieldTransforms=[],i}return Z(t,e),t}(yd),$w=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).key=n,i.jt=r,i.type=3,i.fieldTransforms=[],i}return Z(t,e),t}(yd),IH=function(e){this.count=e};function tx(e){switch(e){case k.OK:return ut();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return ut()}}function ex(e){if(e===void 0)return Pe("GRPC error has no .code"),k.UNKNOWN;switch(e){case Oe.OK:return k.OK;case Oe.CANCELLED:return k.CANCELLED;case Oe.UNKNOWN:return k.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return k.INTERNAL;case Oe.UNAVAILABLE:return k.UNAVAILABLE;case Oe.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Oe.NOT_FOUND:return k.NOT_FOUND;case Oe.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Oe.ABORTED:return k.ABORTED;case Oe.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Oe.DATA_LOSS:return k.DATA_LOSS;default:return ut()}}(Lt=Oe||(Oe={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn=function(){function e(t,n){this.H=t,this.root=n||vo.EMPTY}return e.prototype.zt=function(t,n){return new e(this.H,this.root.zt(t,n,this.H).copy(null,null,vo.Ht,null,null))},e.prototype.remove=function(t){return new e(this.H,this.root.remove(t,this.H).copy(null,null,vo.Ht,null,null))},e.prototype.get=function(t){for(var n=this.root;!n.et();){var r=this.H(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null},e.prototype.indexOf=function(t){for(var n=0,r=this.root;!r.et();){var i=this.H(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1},e.prototype.et=function(){return this.root.et()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.Jt=function(){return this.root.Jt()},e.prototype.Yt=function(){return this.root.Yt()},e.prototype.Xt=function(t){return this.root.Xt(t)},e.prototype.forEach=function(t){this.Xt(function(n,r){return t(n,r),!1})},e.prototype.toString=function(){var t=[];return this.Xt(function(n,r){return t.push(n+":"+r),!1}),"{"+t.join(", ")+"}"},e.prototype.Zt=function(t){return this.root.Zt(t)},e.prototype.te=function(){return new Sh(this.root,null,this.H,!1)},e.prototype.ee=function(t){return new Sh(this.root,t,this.H,!1)},e.prototype.ne=function(){return new Sh(this.root,null,this.H,!0)},e.prototype.se=function(t){return new Sh(this.root,t,this.H,!0)},e}(),Sh=function(){function e(t,n,r,i){this.ie=i,this.re=[];for(var s=1;!t.et();)if(s=n?r(t.key,n):1,i&&(s*=-1),s<0)t=this.ie?t.left:t.right;else{if(s===0){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return e.prototype.oe=function(){var t=this.re.pop(),n={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return n},e.prototype.ce=function(){return this.re.length>0},e.prototype.ae=function(){if(this.re.length===0)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},e}(),vo=function(){function e(t,n,r,i,s){this.key=t,this.value=n,this.color=r??e.RED,this.left=i??e.EMPTY,this.right=s??e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,s){return new e(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)},e.prototype.et=function(){return!1},e.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},e.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},e.prototype.min=function(){return this.left.et()?this:this.left.min()},e.prototype.Jt=function(){return this.min().key},e.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},e.prototype.zt=function(t,n,r){var i=this,s=r(t,i.key);return(i=s<0?i.copy(null,null,null,i.left.zt(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.zt(t,n,r))).ue()},e.prototype.he=function(){if(this.left.et())return e.EMPTY;var t=this;return t.left.le()||t.left.left.le()||(t=t._e()),(t=t.copy(null,null,null,t.left.he(),null)).ue()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),n(t,i.key)===0){if(i.right.et())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.ue()},e.prototype.le=function(){return this.color},e.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},e.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},e.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},e.prototype.we=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.fe=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)},e.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},e.prototype.Ie=function(){if(this.le()&&this.left.le()||this.right.le())throw ut();var t=this.left.Ie();if(t!==this.right.Ie())throw ut();return t+(this.le()?0:1)},e}();vo.EMPTY=null,vo.RED=!0,vo.Ht=!1,vo.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw ut()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw ut()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw ut()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw ut()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw ut()},enumerable:!1,configurable:!0}),e.prototype.copy=function(t,n,r,i,s){return this},e.prototype.zt=function(t,n,r){return new vo(t,n)},e.prototype.remove=function(t,n){return this},e.prototype.et=function(){return!0},e.prototype.Xt=function(t){return!1},e.prototype.Zt=function(t){return!1},e.prototype.Jt=function(){return null},e.prototype.Yt=function(){return null},e.prototype.le=function(){return!1},e.prototype.Te=function(){return!0},e.prototype.Ie=function(){return 0},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe=function(){function e(t){this.H=t,this.data=new wn(this.H)}return e.prototype.has=function(t){return this.data.get(t)!==null},e.prototype.first=function(){return this.data.Jt()},e.prototype.last=function(){return this.data.Yt()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(t){return this.data.indexOf(t)},e.prototype.forEach=function(t){this.data.Xt(function(n,r){return t(n),!1})},e.prototype.me=function(t,n){for(var r=this.data.ee(t[0]);r.ce();){var i=r.oe();if(this.H(i.key,t[1])>=0)return;n(i.key)}},e.prototype.Ae=function(t,n){var r;for(r=n!==void 0?this.data.ee(n):this.data.te();r.ce();)if(!t(r.oe().key))return},e.prototype.Re=function(t){var n=this.data.ee(t);return n.ce()?n.oe().key:null},e.prototype.te=function(){return new UA(this.data.te())},e.prototype.ee=function(t){return new UA(this.data.ee(t))},e.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},e.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},e.prototype.et=function(){return this.data.et()},e.prototype.Pe=function(t){var n=this;return n.size<t.size&&(n=t,t=this),t.forEach(function(r){n=n.add(r)}),n},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.te(),r=t.data.te();n.ce();){var i=n.oe().key,s=r.oe().key;if(this.H(i,s)!==0)return!1}return!0},e.prototype.it=function(){var t=[];return this.forEach(function(n){t.push(n)}),t},e.prototype.toString=function(){var t=[];return this.forEach(function(n){return t.push(n)}),"SortedSet("+t.toString()+")"},e.prototype.copy=function(t){var n=new e(this.H);return n.data=t,n},e}(),UA=function(){function e(t){this.ye=t}return e.prototype.oe=function(){return this.ye.oe().key},e.prototype.ce=function(){return this.ye.ce()},e}(),TH=new wn(ht.H);function Vi(){return TH}function Ap(){return Vi()}var SH=new wn(ht.H);function Nl(){return SH}var AH=new wn(ht.H);function nx(){return AH}var CH=new qe(ht.H);function Yt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=CH,r=0,i=e;r<i.length;r++){var s=i[r];n=n.add(s)}return n}var NH=new qe(kt);function _d(){return NH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rx=function(){function e(t){this.H=t?function(n,r){return t(n,r)||ht.H(n.key,r.key)}:function(n,r){return ht.H(n.key,r.key)},this.ge=Nl(),this.Ve=new wn(this.H)}return e.pe=function(t){return new e(t.H)},e.prototype.has=function(t){return this.ge.get(t)!=null},e.prototype.get=function(t){return this.ge.get(t)},e.prototype.first=function(){return this.Ve.Jt()},e.prototype.last=function(){return this.Ve.Yt()},e.prototype.et=function(){return this.Ve.et()},e.prototype.indexOf=function(t){var n=this.ge.get(t);return n?this.Ve.indexOf(n):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t){this.Ve.Xt(function(n,r){return t(n),!1})},e.prototype.add=function(t){var n=this.delete(t.key);return n.copy(n.ge.zt(t.key,t),n.Ve.zt(t,null))},e.prototype.delete=function(t){var n=this.get(t);return n?this.copy(this.ge.remove(t),this.Ve.remove(n)):this},e.prototype.isEqual=function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.Ve.te(),r=t.Ve.te();n.ce();){var i=n.oe().key,s=r.oe().key;if(!i.isEqual(s))return!1}return!0},e.prototype.toString=function(){var t=[];return this.forEach(function(n){t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`},e.prototype.copy=function(t,n){var r=new e;return r.H=this.H,r.ge=t,r.Ve=n,r},e}(),jA=function(){function e(){this.be=new wn(ht.H)}return e.prototype.track=function(t){var n=t.doc.key,r=this.be.get(n);r?t.type!==0&&r.type===3?this.be=this.be.zt(n,t):t.type===3&&r.type!==1?this.be=this.be.zt(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.be=this.be.zt(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.be=this.be.zt(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.be=this.be.remove(n):t.type===1&&r.type===2?this.be=this.be.zt(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.be=this.be.zt(n,{type:2,doc:t.doc}):ut():this.be=this.be.zt(n,t)},e.prototype.ve=function(){var t=[];return this.be.Xt(function(n,r){t.push(r)}),t},e}(),Cp=function(){function e(t,n,r,i,s,a,c,l){this.query=t,this.docs=n,this.Se=r,this.docChanges=i,this.De=s,this.fromCache=a,this.Ce=c,this.xe=l}return e.Ne=function(t,n,r,i){var s=[];return n.forEach(function(a){s.push({type:0,doc:a})}),new e(t,n,rx.pe(n),s,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&ef(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0},e}(),zw=function(){function e(t,n,r,i,s){this.Ot=t,this.$e=n,this.Fe=r,this.Oe=i,this.ke=s}return e.Me=function(t,n){var r=new Map;return r.set(t,Kw.Le(t,n)),new e(Ot.min(),r,_d(),Vi(),Yt())},e}(),Kw=function(){function e(t,n,r,i,s){this.resumeToken=t,this.Be=n,this.qe=r,this.Ue=i,this.Qe=s}return e.Le=function(t,n){return new e(Pn.T,n,Yt(),Yt(),Yt())},e}(),Wh=function(e,t,n,r){this.Ke=e,this.removedTargetIds=t,this.key=n,this.We=r},ix=function(e,t){this.targetId=e,this.je=t},ox=function(e,t,n,r){n===void 0&&(n=Pn.T),r===void 0&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},VA=function(){function e(){this.Ge=0,this.ze=qA(),this.He=Pn.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(e.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Xe",{get:function(){return this.Ge!==0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),e.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},e.prototype.en=function(){var t=Yt(),n=Yt(),r=Yt();return this.ze.forEach(function(i,s){switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ut()}}),new Kw(this.He,this.Je,t,n,r)},e.prototype.nn=function(){this.Ye=!1,this.ze=qA()},e.prototype.sn=function(t,n){this.Ye=!0,this.ze=this.ze.zt(t,n)},e.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},e.prototype.on=function(){this.Ge+=1},e.prototype.cn=function(){this.Ge-=1},e.prototype.an=function(){this.Ye=!0,this.Je=!0},e}(),RH=function(){function e(t){this.un=t,this.hn=new Map,this.ln=Vi(),this._n=BA(),this.fn=new qe(kt)}return e.prototype.dn=function(t){for(var n=0,r=t.Ke;n<r.length;n++){var i=r[n];t.We instanceof te?this.wn(i,t.We):t.We instanceof Be&&this.En(i,t.key,t.We)}for(var s=0,a=t.removedTargetIds;s<a.length;s++)i=a[s],this.En(i,t.key,t.We)},e.prototype.Tn=function(t){var n=this;this.In(t,function(r){var i=n.mn(r);switch(t.state){case 0:n.An(r)&&i.tn(t.resumeToken);break;case 1:i.cn(),i.Xe||i.nn(),i.tn(t.resumeToken);break;case 2:i.cn(),i.Xe||n.removeTarget(r);break;case 3:n.An(r)&&(i.an(),i.tn(t.resumeToken));break;case 4:n.An(r)&&(n.Rn(r),i.tn(t.resumeToken));break;default:ut()}})},e.prototype.In=function(t,n){var r=this;t.targetIds.length>0?t.targetIds.forEach(n):this.hn.forEach(function(i,s){r.An(s)&&n(s)})},e.prototype.Pn=function(t){var n=t.targetId,r=t.je.count,i=this.yn(n);if(i){var s=i.target;if(Ip(s))if(r===0){var a=new ht(s.path);this.En(n,a,new Be(a,Ot.min()))}else yt(r===1);else this.gn(n)!==r&&(this.Rn(n),this.fn=this.fn.add(n))}},e.prototype.Vn=function(t){var n=this,r=new Map;this.hn.forEach(function(a,c){var l=n.yn(c);if(l){if(a.Be&&Ip(l.target)){var h=new ht(l.target.path);n.ln.get(h)!==null||n.pn(c,h)||n.En(c,h,new Be(h,t))}a.Ze&&(r.set(c,a.en()),a.nn())}});var i=Yt();this._n.forEach(function(a,c){var l=!0;c.Ae(function(h){var p=n.yn(h);return!p||p.Ft===2||(l=!1,!1)}),l&&(i=i.add(a))});var s=new zw(t,r,this.fn,this.ln,i);return this.ln=Vi(),this._n=BA(),this.fn=new qe(kt),s},e.prototype.wn=function(t,n){if(this.An(t)){var r=this.pn(t,n.key)?2:0;this.mn(t).sn(n.key,r),this.ln=this.ln.zt(n.key,n),this._n=this._n.zt(n.key,this.bn(n.key).add(t))}},e.prototype.En=function(t,n,r){if(this.An(t)){var i=this.mn(t);this.pn(t,n)?i.sn(n,1):i.rn(n),this._n=this._n.zt(n,this.bn(n).delete(t)),r&&(this.ln=this.ln.zt(n,r))}},e.prototype.removeTarget=function(t){this.hn.delete(t)},e.prototype.gn=function(t){var n=this.mn(t).en();return this.un.vn(t).size+n.qe.size-n.Qe.size},e.prototype.on=function(t){this.mn(t).on()},e.prototype.mn=function(t){var n=this.hn.get(t);return n||(n=new VA,this.hn.set(t,n)),n},e.prototype.bn=function(t){var n=this._n.get(t);return n||(n=new qe(kt),this._n=this._n.zt(t,n)),n},e.prototype.An=function(t){var n=this.yn(t)!==null;return n||X("WatchChangeAggregator","Detected inactive target",t),n},e.prototype.yn=function(t){var n=this.hn.get(t);return n&&n.Xe?null:this.un.Sn(t)},e.prototype.Rn=function(t){var n=this;this.hn.set(t,new VA),this.un.vn(t).forEach(function(r){n.En(t,r,null)})},e.prototype.pn=function(t,n){return this.un.vn(t).has(n)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(){return new wn(ht.H)}function qA(){return new wn(ht.H)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OH={asc:"ASCENDING",desc:"DESCENDING"},xH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},PH=function(e,t){this.t=e,this.Bt=t};function Rl(e,t){return e.Bt?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function sx(e,t){return e.Bt?t.toBase64():t.toUint8Array()}function kH(e,t){return Rl(e,t.j())}function Xe(e){return yt(!!e),Ot.K(function(t){var n=Ro(t);return new Gn(n.seconds,n.nanos)}(e))}function Qw(e,t){return function(n){return new Ht(["projects",n.projectId,"databases",n.database])}(e).child("documents").child(t).rt()}function ax(e){var t=Ht.ot(e);return yt(vx(t)),t}function Ol(e,t){return Qw(e.t,t.path)}function li(e,t){var n=ax(t);if(n.get(1)!==e.t.projectId)throw new G(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.t.projectId);if(n.get(3)!==e.t.database)throw new G(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.t.database);return new ht(cx(n))}function i_(e,t){return Qw(e.t,t)}function ux(e){var t=ax(e);return t.length===4?Ht.ct():cx(t)}function xl(e){return new Ht(["projects",e.t.projectId,"databases",e.t.database]).rt()}function cx(e){return yt(e.length>4&&e.get(4)==="documents"),e.Y(5)}function HA(e,t,n){return{name:Ol(e,t),fields:n.proto.mapValue.fields}}function lx(e,t,n){var r=li(e,t.name),i=Xe(t.updateTime),s=new xo({mapValue:{fields:t.fields}});return new te(r,i,s,{hasCommittedMutations:!!n})}function Np(e,t){var n;if(t instanceof of)n={update:HA(e,t.key,t.value)};else if(t instanceof sf)n={delete:Ol(e,t.key)};else if(t instanceof Fo)n={update:HA(e,t.key,t.data),updateMask:UH(t.Gt)};else{if(!(t instanceof $w))return ut();n={verify:Ol(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(r){return function(i,s){var a=s.transform;if(a instanceof du)return{fieldPath:s.field.rt(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ls)return{fieldPath:s.field.rt(),appendMissingElements:{values:a.elements}};if(a instanceof Ms)return{fieldPath:s.field.rt(),removeAllFromArray:{values:a.elements}};if(a instanceof vu)return{fieldPath:s.field.rt(),increment:a.Ut};throw ut()}(0,r)})),t.jt.Wt||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:kH(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ut()}(e,t.jt)),n}function GA(e,t){var n=t.currentDocument?function(h){return h.updateTime!==void 0?dn.updateTime(Xe(h.updateTime)):h.exists!==void 0?dn.exists(h.exists):dn.Kt()}(t.currentDocument):dn.Kt(),r=t.updateTransforms?t.updateTransforms.map(function(h){return function(p,v){var m=null;if("setToServerValue"in v)yt(v.setToServerValue==="REQUEST_TIME"),m=new du;else if("appendMissingElements"in v){var y=v.appendMissingElements.values||[];m=new Ls(y)}else if("removeAllFromArray"in v){var b=v.removeAllFromArray.values||[];m=new Ms(b)}else"increment"in v?m=new vu(p,v.increment):ut();var E=Gr.lt(v.fieldPath);return new rf(E,m)}(e,h)}):[];if(t.update){t.update.name;var i=li(e,t.update.name),s=new xo({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(h){var p=h.fieldPaths||[];return new lu(p.map(function(v){return Gr.lt(v)}))}(t.updateMask);return new Fo(i,s,a,n,r)}return new of(i,s,n,r)}if(t.delete){var c=li(e,t.delete);return new sf(c,n)}if(t.verify){var l=li(e,t.verify);return new $w(l,n)}return ut()}function fx(e,t){return{documents:[i_(e,t.path)]}}function hx(e,t){var n={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(n.parent=i_(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=i_(e,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(c){if(c.length!==0){var l=c.map(function(h){return function(p){if(p.op==="=="){if(RA(p.value))return{unaryFilter:{field:Ca(p.field),op:"IS_NAN"}};if(NA(p.value))return{unaryFilter:{field:Ca(p.field),op:"IS_NULL"}}}else if(p.op==="!="){if(RA(p.value))return{unaryFilter:{field:Ca(p.field),op:"IS_NOT_NAN"}};if(NA(p.value))return{unaryFilter:{field:Ca(p.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ca(p.field),op:LH(p.op),value:p.value}}}(h)});return l.length===1?l[0]:{compositeFilter:{op:"AND",filters:l}}}}(t.filters);i&&(n.structuredQuery.where=i);var s=function(c){if(c.length!==0)return c.map(function(l){return function(h){return{field:Ca(h.field),direction:DH(h.dir)}}(l)})}(t.orderBy);s&&(n.structuredQuery.orderBy=s);var a=function(c,l){return c.Bt||Gs(l)?l:{value:l}}(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=WA(t.startAt)),t.endAt&&(n.structuredQuery.endAt=WA(t.endAt)),n}function px(e){var t=ux(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){yt(r===1);var s=n.from[0];s.allDescendants?i=s.collectionId:t=t.child(s.collectionId)}var a=[];n.where&&(a=dx(n.where));var c=[];n.orderBy&&(c=n.orderBy.map(function(v){return function(m){return new Qa(Ua(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(v)}));var l=null;n.limit&&(l=function(v){var m;return Gs(m=typeof v=="object"?v.value:v)?null:m}(n.limit));var h=null;n.startAt&&(h=$A(n.startAt));var p=null;return n.endAt&&(p=$A(n.endAt)),qO(t,i,c,a,l,"F",h,p)}function dx(e){return e?e.unaryFilter!==void 0?[FH(e)]:e.fieldFilter!==void 0?[MH(e)]:e.compositeFilter!==void 0?e.compositeFilter.filters.map(function(t){return dx(t)}).reduce(function(t,n){return t.concat(n)}):ut():[]}function WA(e){return{before:e.before,values:e.position}}function $A(e){var t=!!e.before,n=e.values||[];return new Cl(n,t)}function DH(e){return OH[e]}function LH(e){return xH[e]}function Ca(e){return{fieldPath:e.rt()}}function Ua(e){return Gr.lt(e.fieldPath)}function MH(e){return or.create(Ua(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ut()}}(e.fieldFilter.op),e.fieldFilter.value)}function FH(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ua(e.unaryFilter.field);return or.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ua(e.unaryFilter.field);return or.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ua(e.unaryFilter.field);return or.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ua(e.unaryFilter.field);return or.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ut()}}function UH(e){var t=[];return e.fields.forEach(function(n){return t.push(n.rt())}),{fieldPaths:t}}function vx(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kn=function(){var e=this;this.promise=new Promise(function(t,n){e.resolve=t,e.reject=n})},$=function(){function e(t){var n=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t(function(r){n.xn=!0,n.result=r,n.Dn&&n.Dn(r)},function(r){n.xn=!0,n.error=r,n.Cn&&n.Cn(r)})}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,n){var r=this;return this.Nn&&ut(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(t,this.result):new e(function(i,s){r.Dn=function(a){r.Fn(t,a).next(i,s)},r.Cn=function(a){r.$n(n,a).next(i,s)}})},e.prototype.On=function(){var t=this;return new Promise(function(n,r){t.next(n,r)})},e.prototype.kn=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(r){return e.reject(r)}},e.prototype.Fn=function(t,n){return t?this.kn(function(){return t(n)}):e.resolve(n)},e.prototype.$n=function(t,n){return t?this.kn(function(){return t(n)}):e.reject(n)},e.resolve=function(t){return new e(function(n,r){n(t)})},e.reject=function(t){return new e(function(n,r){r(t)})},e.Mn=function(t){return new e(function(n,r){var i=0,s=0,a=!1;t.forEach(function(c){++i,c.next(function(){++s,a&&s===i&&n()},function(l){return r(l)})}),a=!0,s===i&&n()})},e.Ln=function(t){for(var n=e.resolve(!1),r=function(a){n=n.next(function(c){return c?e.resolve(c):a()})},i=0,s=t;i<s.length;i++)r(s[i]);return n},e.forEach=function(t,n){var r=this,i=[];return t.forEach(function(s,a){i.push(n.call(r,s,a))}),this.Mn(i)},e}(),gx=function(){function e(t,n){var r=this;this.action=t,this.transaction=n,this.aborted=!1,this.Bn=new kn,this.transaction.oncomplete=function(){r.Bn.resolve()},this.transaction.onabort=function(){n.error?r.Bn.reject(new Jc(t,n.error)):r.Bn.resolve()},this.transaction.onerror=function(i){var s=Yw(i.target.error);r.Bn.reject(new Jc(t,s))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(s){throw new Jc(n,s)}},Object.defineProperty(e.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(X("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(t){var n=this.transaction.objectStore(t);return new VH(n)},e}(),gu=function(){function e(t,n,r){this.name=t,this.version=n,this.Un=r,e.Qn(xs())===12.2&&Pe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return X("SimpleDb","Removing database:",t),ds(window.indexedDB.deleteDatabase(t)).On()},e.Kn=function(){if(typeof indexedDB>"u")return!1;if(e.Wn())return!0;var t=xs(),n=e.Qn(t),r=0<n&&n<10,i=e.jn(t),s=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},e.Wn=function(){var t;return typeof process<"u"&&((t=process.env)===null||t===void 0?void 0:t.Gn)==="YES"},e.zn=function(t,n){return t.store(n)},e.Qn=function(t){var n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)},e.jn=function(t){var n=t.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)},e.prototype.Hn=function(t){return R(this,void 0,void 0,function(){var n,r=this;return N(this,function(i){switch(i.label){case 0:return this.db?[3,2]:(X("SimpleDb","Opening database:",this.name),n=this,[4,new Promise(function(s,a){var c=indexedDB.open(r.name,r.version);c.onsuccess=function(l){var h=l.target.result;s(h)},c.onblocked=function(){a(new Jc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=function(l){var h=l.target.error;h.name==="VersionError"?a(new G(k.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a(new Jc(t,h))},c.onupgradeneeded=function(l){X("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',l.oldVersion);var h=l.target.result;r.Un.Jn(h,c.transaction,l.oldVersion,r.version).next(function(){X("SimpleDb","Database upgrade to version "+r.version+" complete")})}})]);case 1:n.db=i.sent(),i.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(s){return r.Yn(s)}),this.db)]}})})},e.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(n){return t(n)})},e.prototype.runTransaction=function(t,n,r,i){return R(this,void 0,void 0,function(){var s,a,c,l,h;return N(this,function(p){switch(p.label){case 0:s=n==="readonly",a=0,c=function(){var v,m,y,b,E;return N(this,function(I){switch(I.label){case 0:++a,I.label=1;case 1:return I.trys.push([1,4,,5]),[4,l.Hn(t)];case 2:return l.db=I.sent(),v=gx.open(l.db,t,s?"readonly":"readwrite",r),m=i(v).catch(function(C){return v.abort(C),$.reject(C)}).On(),y={},m.catch(function(){}),[4,v.qn];case 3:return[2,(y.value=(I.sent(),m),y)];case 4:return b=I.sent(),E=b.name!=="FirebaseError"&&a<3,X("SimpleDb","Transaction failed with error:",b.message,"Retrying:",E),l.close(),E?[3,5]:[2,{value:Promise.reject(b)}];case 5:return[2]}})},l=this,p.label=1;case 1:return[5,c()];case 2:if(typeof(h=p.sent())=="object")return[2,h.value];p.label=3;case 3:return[3,1];case 4:return[2]}})})},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),jH=function(){function e(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(e.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.ts=!0},e.prototype.ss=function(t){this.es=t},e.prototype.delete=function(){return ds(this.Zn.delete())},e}(),Jc=function(e){function t(n,r){var i=this;return(i=e.call(this,k.UNAVAILABLE,"IndexedDB transaction '"+n+"' failed: "+r)||this).name="IndexedDbTransactionError",i}return Z(t,e),t}(G);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ws(e){return e.name==="IndexedDbTransactionError"}var VH=function(){function e(t){this.store=t}return e.prototype.put=function(t,n){var r;return n!==void 0?(X("SimpleDb","PUT",this.store.name,t,n),r=this.store.put(n,t)):(X("SimpleDb","PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),ds(r)},e.prototype.add=function(t){return X("SimpleDb","ADD",this.store.name,t,t),ds(this.store.add(t))},e.prototype.get=function(t){var n=this;return ds(this.store.get(t)).next(function(r){return r===void 0&&(r=null),X("SimpleDb","GET",n.store.name,t,r),r})},e.prototype.delete=function(t){return X("SimpleDb","DELETE",this.store.name,t),ds(this.store.delete(t))},e.prototype.count=function(){return X("SimpleDb","COUNT",this.store.name),ds(this.store.count())},e.prototype.rs=function(t,n){var r=this.cursor(this.options(t,n)),i=[];return this.os(r,function(s,a){i.push(a)}).next(function(){return i})},e.prototype.cs=function(t,n){X("SimpleDb","DELETE ALL",this.store.name);var r=this.options(t,n);r.us=!1;var i=this.cursor(r);return this.os(i,function(s,a,c){return c.delete()})},e.prototype.hs=function(t,n){var r;n?r=t:(r={},n=t);var i=this.cursor(r);return this.os(i,n)},e.prototype.ls=function(t){var n=this.cursor({});return new $(function(r,i){n.onerror=function(s){var a=Yw(s.target.error);i(a)},n.onsuccess=function(s){var a=s.target.result;a?t(a.primaryKey,a.value).next(function(c){c?a.continue():r()}):r()}})},e.prototype.os=function(t,n){var r=[];return new $(function(i,s){t.onerror=function(a){s(a.target.error)},t.onsuccess=function(a){var c=a.target.result;if(c){var l=new jH(c),h=n(c.primaryKey,c.value,l);if(h instanceof $){var p=h.catch(function(v){return l.done(),$.reject(v)});r.push(p)}l.xn?i():l.ns===null?c.continue():c.continue(l.ns)}else i()}}).next(function(){return $.Mn(r)})},e.prototype.options=function(t,n){var r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}},e.prototype.cursor=function(t){var n="next";if(t.reverse&&(n="prev"),t.index){var r=this.store.index(t.index);return t.us?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)},e}();function ds(e){return new $(function(t,n){e.onsuccess=function(r){var i=r.target.result;t(i)},e.onerror=function(r){var i=Yw(r.target.error);n(i)}})}var zA=!1;function Yw(e){var t=gu.Qn(xs());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new G("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return zA||(zA=!0,setTimeout(function(){throw r},0)),r}}return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BH=function(){function e(t,n,r,i,s){this._s=t,this.fs=n,this.ds=r,this.op=i,this.ws=s,this.Es=new kn,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch(function(a){})}return e.Ts=function(t,n,r,i,s){var a=new e(t,n,Date.now()+r,i,s);return a.start(r),a},e.prototype.start=function(t){var n=this;this.Is=setTimeout(function(){return n.As()},t)},e.prototype.Rs=function(){return this.As()},e.prototype.cancel=function(t){this.Is!==null&&(this.clearTimeout(),this.Es.reject(new G(k.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.As=function(){var t=this;this._s.Ps(function(){return t.Is!==null?(t.clearTimeout(),t.op().then(function(n){return t.Es.resolve(n)})):Promise.resolve()})},e.prototype.clearTimeout=function(){this.Is!==null&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},e}();function Fu(e,t){if(Pe("AsyncQueue",t+": "+e),Ws(e))return new G(k.UNAVAILABLE,t+": "+e);throw e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",yx=function(){function e(){this.ys=[]}return e.prototype.gs=function(t){this.ys.push(t)},e.prototype.Vs=function(){this.ys.forEach(function(t){return t()})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=KA(t)),t=qH(e.get(n),t);return KA(t)}function qH(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function KA(e){return e+""}function Pi(e){var t=e.length;if(yt(t>=2),t===2)return yt(e.charAt(0)===""&&e.charAt(1)===""),Ht.ct();for(var n=t-2,r=[],i="",s=0;s<t;){var a=e.indexOf("",s);switch((a<0||a>n)&&ut(),e.charAt(a+1)){case"":var c=e.substring(s,a),l=void 0;i.length===0?l=c:(l=i+=c,i=""),r.push(l);break;case"":i+=e.substring(s,a),i+="\0";break;case"":i+=e.substring(s,a+1);break;default:ut()}s=a+2}return new Ht(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HH=function(e,t){this.seconds=e,this.nanoseconds=t},tr=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};tr.store="owner",tr.key="owner";var Eo=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Eo.store="mutationQueues",Eo.keyPath="userId";var re=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};re.store="mutations",re.keyPath="batchId",re.userMutationsIndex="userMutationsIndex",re.userMutationsKeyPath=["userId","batchId"];var fn=function(){function e(){}return e.prefixForUser=function(t){return[t]},e.prefixForPath=function(t,n){return[t,Br(n)]},e.key=function(t,n,r){return[t,Br(n),r]},e}();fn.store="documentMutations",fn.PLACEHOLDER=new fn;var GH=function(e,t){this.path=e,this.readTime=t},WH=function(e,t){this.path=e,this.version=t},ye=function(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s};ye.store="remoteDocuments",ye.readTimeIndex="readTimeIndex",ye.readTimeIndexPath="readTime",ye.collectionReadTimeIndex="collectionReadTimeIndex",ye.collectionReadTimeIndexPath=["parentPath","readTime"];var ui=function(e){this.byteSize=e};ui.store="remoteDocumentGlobal",ui.key="remoteDocumentGlobalKey";var Hn=function(e,t,n,r,i,s,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=a};Hn.store="targets",Hn.keyPath="targetId",Hn.queryTargetsIndexName="queryTargetsIndex",Hn.queryTargetsKeyPath=["canonicalId","targetId"];var an=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};an.store="targetDocuments",an.keyPath=["targetId","path"],an.documentTargetsIndex="documentTargetsIndex",an.documentTargetsKeyPath=["path","targetId"];var nr=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};nr.key="targetGlobalKey",nr.store="targetGlobal";var Ss=function(e,t){this.collectionId=e,this.parent=t};Ss.store="collectionParents",Ss.keyPath=["collectionId","parent"];var Di=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};Di.store="clientMetadata",Di.keyPath="clientId";var mu=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};mu.store="bundles",mu.keyPath="bundleId";var yu=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};yu.store="namedQueries",yu.keyPath="name";var $H=Ae(Ae(Ae(Ae([Eo.store,re.store,fn.store,ye.store,Hn.store,tr.store,nr.store,an.store],[Di.store]),[ui.store]),[Ss.store]),[mu.store,yu.store]),QA=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).ps=n,i.bs=r,i}return Z(t,e),t}(yx);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(e,t){var n=tt(e);return gu.zn(n.ps,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xw=function(){function e(t,n,r,i){this.batchId=t,this.vs=n,this.baseMutations=r,this.mutations=i}return e.prototype.Ss=function(t,n,r){for(var i=r.Ds,s=0;s<this.mutations.length;s++){var a=this.mutations[s];a.key.isEqual(t)&&(n=bH(a,n,i[s]))}return n},e.prototype.Cs=function(t,n){for(var r=0,i=this.baseMutations;r<i.length;r++)(c=i[r]).key.isEqual(t)&&(n=r_(c,n,this.vs));for(var s=0,a=this.mutations;s<a.length;s++){var c;(c=a[s]).key.isEqual(t)&&(n=r_(c,n,this.vs))}return n},e.prototype.xs=function(t){var n=this,r=t;return this.mutations.forEach(function(i){var s=n.Cs(i.key,t.get(i.key));s&&(r=r.zt(i.key,s))}),r},e.prototype.keys=function(){return this.mutations.reduce(function(t,n){return t.add(n.key)},Yt())},e.prototype.isEqual=function(t){return this.batchId===t.batchId&&cu(this.mutations,t.mutations,function(n,r){return DA(n,r)})&&cu(this.baseMutations,t.baseMutations,function(n,r){return DA(n,r)})},e}(),zH=function(){function e(t,n,r,i){this.batch=t,this.Ns=n,this.Ds=r,this.$s=i}return e.from=function(t,n,r){yt(t.mutations.length===r.length);for(var i=nx(),s=t.mutations,a=0;a<s.length;a++)i=i.zt(s[a].key,r[a].version);return new e(t,n,r,i)},e}(),_x=function(e){this.Fs=e};function o_(e,t){if(t.document)return lx(e.Fs,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=ht.Et(t.noDocument.path),r=wu(t.noDocument.readTime);return new Be(n,r,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var i=ht.Et(t.unknownDocument.path);return r=wu(t.unknownDocument.version),new Bw(i,r)}return ut()}function YA(e,t,n){var r=Jw(n),i=t.key.path.X().it();if(t instanceof te){var s=function(v,m){return{name:Ol(v,m.key),fields:m.bt().mapValue.fields,updateTime:Rl(v,m.version.j())}}(e.Fs,t),a=t.hasCommittedMutations;return new ye(null,null,s,a,r,i)}if(t instanceof Be){var c=t.key.path.it(),l=_u(t.version);return a=t.hasCommittedMutations,new ye(null,new GH(c,l),null,a,r,i)}if(t instanceof Bw){var h=t.key.path.it(),p=_u(t.version);return new ye(new WH(h,p),null,null,!0,r,i)}return ut()}function Jw(e){var t=e.j();return[t.seconds,t.nanoseconds]}function wx(e){var t=new Gn(e[0],e[1]);return Ot.K(t)}function _u(e){var t=e.j();return new HH(t.seconds,t.nanoseconds)}function wu(e){var t=new Gn(e.seconds,e.nanoseconds);return Ot.K(t)}function Da(e,t){for(var n=(t.baseMutations||[]).map(function(l){return GA(e.Fs,l)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&t.mutations[r+1].transform!==void 0){var s=t.mutations[r+1];i.updateTransforms=s.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map(function(l){return GA(e.Fs,l)}),c=Gn.fromMillis(t.localWriteTimeMs);return new Xw(t.batchId,c,n,a)}function Wc(e){var t,n,r=wu(e.readTime),i=e.lastLimboFreeSnapshotVersion!==void 0?wu(e.lastLimboFreeSnapshotVersion):Ot.min();return e.query.documents!==void 0?(yt((n=e.query).documents.length===1),t=_r(Mu(ux(n.documents[0])))):t=function(s){return _r(px(s))}(e.query),new gd(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Pn.fromBase64String(e.resumeToken))}function bx(e,t){var n,r=_u(t.Ot),i=_u(t.lastLimboFreeSnapshotVersion);n=Ip(t.target)?fx(e.Fs,t.target):hx(e.Fs,t.target);var s=t.resumeToken.toBase64();return new Hn(t.targetId,tf(t.target),r,s,t.sequenceNumber,i,n)}function Zw(e){var t=px({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?HO(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var KH=function(){function e(){}return e.prototype.Os=function(t,n){return XA(t).get(n).next(function(r){if(r)return{id:(i=r).bundleId,createTime:wu(i.createTime),version:i.version};var i})},e.prototype.ks=function(t,n){return XA(t).put({bundleId:(r=n).id,createTime:_u(Xe(r.createTime)),version:r.version});var r},e.prototype.Ms=function(t,n){return JA(t).get(n).next(function(r){if(r)return{name:(i=r).name,query:Zw(i.bundledQuery),readTime:wu(i.readTime)};var i})},e.prototype.Ls=function(t,n){return JA(t).put(function(r){return{name:r.name,readTime:_u(Xe(r.readTime)),bundledQuery:r.bundledQuery}}(n))},e}();function XA(e){return Yn(e,mu.store)}function JA(e){return Yn(e,yu.store)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QH=function(){function e(){this.Bs=new tb}return e.prototype.qs=function(t,n){return this.Bs.add(n),$.resolve()},e.prototype.Us=function(t,n){return $.resolve(this.Bs.getEntries(n))},e}(),tb=function(){function e(){this.index={}}return e.prototype.add=function(t){var n=t.tt(),r=t.X(),i=this.index[n]||new qe(Ht.H),s=!i.has(r);return this.index[n]=i.add(r),s},e.prototype.has=function(t){var n=t.tt(),r=t.X(),i=this.index[n];return i&&i.has(r)},e.prototype.getEntries=function(t){return(this.index[t]||new qe(Ht.H)).it()},e}(),YH=function(){function e(){this.Qs=new tb}return e.prototype.qs=function(t,n){var r=this;if(!this.Qs.has(n)){var i=n.tt(),s=n.X();t.gs(function(){r.Qs.add(n)});var a={collectionId:i,parent:Br(s)};return ZA(t).put(a)}return $.resolve()},e.prototype.Us=function(t,n){var r=[],i=IDBKeyRange.bound([n,""],[LO(n),""],!1,!0);return ZA(t).rs(i).next(function(s){for(var a=0,c=s;a<c.length;a++){var l=c[a];if(l.collectionId!==n)break;r.push(Pi(l.parent))}return r})},e}();function ZA(e){return Yn(e,Ss.store)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t1={Ks:!1,Ws:0,js:0,Gs:0},ri=function(){function e(t,n,r){this.zs=t,this.Hs=n,this.Js=r}return e.Ys=function(t){return new e(t,e.Xs,e.Zs)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(e){return R(this,void 0,void 0,function(){return N(this,function(t){if(e.code!==k.FAILED_PRECONDITION||e.message!==mx)throw e;return X("LocalStore","Unexpectedly lost primary lease"),[2]})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ri.Xs=10,ri.Zs=1e3,ri.ti=new ri(41943040,ri.Xs,ri.Zs),ri.ei=new ri(-1,0,0);var Uu=function(){function e(t,n){this.ni=t,this.si=n,this.ii={}}return e.prototype.get=function(t){var n=this.ni(t),r=this.ii[n];if(r!==void 0)for(var i=0,s=r;i<s.length;i++){var a=s[i],c=a[0],l=a[1];if(this.si(c,t))return l}},e.prototype.has=function(t){return this.get(t)!==void 0},e.prototype.set=function(t,n){var r=this.ni(t),i=this.ii[r];if(i!==void 0){for(var s=0;s<i.length;s++)if(this.si(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n])}else this.ii[r]=[[t,n]]},e.prototype.delete=function(t){var n=this.ni(t),r=this.ii[n];if(r===void 0)return!1;for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return r.length===1?delete this.ii[n]:r.splice(i,1),!0;return!1},e.prototype.forEach=function(t){Jl(this.ii,function(n,r){for(var i=0,s=r;i<s.length;i++){var a=s[i],c=a[0],l=a[1];t(c,l)}})},e.prototype.et=function(){return FO(this.ii)},e}(),Ex=function(){function e(){this.ri=new Uu(function(t){return t.toString()},function(t,n){return t.isEqual(n)}),this.oi=!1}return e.prototype.ci=function(t){var n=this.ri.get(t);return n?n.readTime:Ot.min()},e.prototype.ai=function(t,n){this.ui(),this.ri.set(t.key,{hi:t,readTime:n})},e.prototype.li=function(t,n){n===void 0&&(n=null),this.ui(),this.ri.set(t,{hi:null,readTime:n})},e.prototype._i=function(t,n){this.ui();var r=this.ri.get(n);return r!==void 0?$.resolve(r.hi):this.fi(t,n)},e.prototype.getEntries=function(t,n){return this.di(t,n)},e.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},e.prototype.ui=function(){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(e,t,n){var r=e.store(re.store),i=e.store(fn.store),s=[],a=IDBKeyRange.only(n.batchId),c=0,l=r.hs({range:a},function(b,E,I){return c++,I.delete()});s.push(l.next(function(){yt(c===1)}));for(var h=[],p=0,v=n.mutations;p<v.length;p++){var m=v[p],y=fn.key(t,m.key.path,n.batchId);s.push(i.delete(y)),h.push(m.key)}return $.Mn(s).next(function(){return h})}function Rp(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw ut();t=e.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var XH=function(){function e(t,n,r,i){this.userId=t,this.Qt=n,this.Ei=r,this.Ti=i,this.Ii={}}return e.mi=function(t,n,r,i){return yt(t.uid!==""),new e(t.m()?t.uid:"",n,r,i)},e.prototype.Ai=function(t){var n=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return so(t).hs({index:re.userMutationsIndex,range:r},function(i,s,a){n=!1,a.done()}).next(function(){return n})},e.prototype.Ri=function(t,n,r,i){var s=this,a=La(t),c=so(t);return c.add({}).next(function(l){yt(typeof l=="number");for(var h=new Xw(l,n,r,i),p=function(C,P,D){var F=D.baseMutations.map(function(U){return Np(C.Fs,U)}),Y=D.mutations.map(function(U){return Np(C.Fs,U)});return new re(P,D.batchId,D.vs.toMillis(),F,Y)}(s.Qt,s.userId,h),v=[],m=new qe(function(C,P){return kt(C.rt(),P.rt())}),y=0,b=i;y<b.length;y++){var E=b[y],I=fn.key(s.userId,E.key.path,l);m=m.add(E.key.path.X()),v.push(c.put(p)),v.push(a.put(I,fn.PLACEHOLDER))}return m.forEach(function(C){v.push(s.Ei.qs(t,C))}),t.gs(function(){s.Ii[l]=h.keys()}),$.Mn(v).next(function(){return h})})},e.prototype.Pi=function(t,n){var r=this;return so(t).get(n).next(function(i){return i?(yt(i.userId===r.userId),Da(r.Qt,i)):null})},e.prototype.yi=function(t,n){var r=this;return this.Ii[n]?$.resolve(this.Ii[n]):this.Pi(t,n).next(function(i){if(i){var s=i.keys();return r.Ii[n]=s,s}return null})},e.prototype.gi=function(t,n){var r=this,i=n+1,s=IDBKeyRange.lowerBound([this.userId,i]),a=null;return so(t).hs({index:re.userMutationsIndex,range:s},function(c,l,h){l.userId===r.userId&&(yt(l.batchId>=i),a=Da(r.Qt,l)),h.done()}).next(function(){return a})},e.prototype.Vi=function(t){var n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return so(t).hs({index:re.userMutationsIndex,range:n,reverse:!0},function(i,s,a){r=s.batchId,a.done()}).next(function(){return r})},e.prototype.pi=function(t){var n=this,r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return so(t).rs(re.userMutationsIndex,r).next(function(i){return i.map(function(s){return Da(n.Qt,s)})})},e.prototype.bi=function(t,n){var r=this,i=fn.prefixForPath(this.userId,n.path),s=IDBKeyRange.lowerBound(i),a=[];return La(t).hs({range:s},function(c,l,h){var p=c[0],v=c[1],m=c[2],y=Pi(v);if(p===r.userId&&n.path.isEqual(y))return so(t).get(m).next(function(b){if(!b)throw ut();yt(b.userId===r.userId),a.push(Da(r.Qt,b))});h.done()}).next(function(){return a})},e.prototype.vi=function(t,n){var r=this,i=new qe(kt),s=[];return n.forEach(function(a){var c=fn.prefixForPath(r.userId,a.path),l=IDBKeyRange.lowerBound(c),h=La(t).hs({range:l},function(p,v,m){var y=p[0],b=p[1],E=p[2],I=Pi(b);y===r.userId&&a.path.isEqual(I)?i=i.add(E):m.done()});s.push(h)}),$.Mn(s).next(function(){return r.Si(t,i)})},e.prototype.Di=function(t,n){var r=this,i=n.path,s=i.length+1,a=fn.prefixForPath(this.userId,i),c=IDBKeyRange.lowerBound(a),l=new qe(kt);return La(t).hs({range:c},function(h,p,v){var m=h[0],y=h[1],b=h[2],E=Pi(y);m===r.userId&&i.nt(E)?E.length===s&&(l=l.add(b)):v.done()}).next(function(){return r.Si(t,l)})},e.prototype.Si=function(t,n){var r=this,i=[],s=[];return n.forEach(function(a){s.push(so(t).get(a).next(function(c){if(c===null)throw ut();yt(c.userId===r.userId),i.push(Da(r.Qt,c))}))}),$.Mn(s).next(function(){return i})},e.prototype.Ci=function(t,n){var r=this;return Ix(t.ps,this.userId,n).next(function(i){return t.gs(function(){r.xi(n.batchId)}),$.forEach(i,function(s){return r.Ti.Ni(t,s)})})},e.prototype.xi=function(t){delete this.Ii[t]},e.prototype.$i=function(t){var n=this;return this.Ai(t).next(function(r){if(!r)return $.resolve();var i=IDBKeyRange.lowerBound(fn.prefixForUser(n.userId)),s=[];return La(t).hs({range:i},function(a,c,l){if(a[0]===n.userId){var h=Pi(a[1]);s.push(h)}else l.done()}).next(function(){yt(s.length===0)})})},e.prototype.Fi=function(t,n){return Tx(t,this.userId,n)},e.prototype.Oi=function(t){var n=this;return Sx(t).get(this.userId).next(function(r){return r||new Eo(n.userId,-1,"")})},e}();function Tx(e,t,n){var r=fn.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r),a=!1;return La(e).hs({range:s,us:!0},function(c,l,h){var p=c[0],v=c[1];c[2],p===t&&v===i&&(a=!0),h.done()}).next(function(){return a})}function so(e){return Yn(e,re.store)}function La(e){return Yn(e,fn.store)}function Sx(e){return Yn(e,Eo.store)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Op=function(){function e(t){this.ki=t}return e.prototype.next=function(){return this.ki+=2,this.ki},e.Mi=function(){return new e(0)},e.Li=function(){return new e(-1)},e}(),JH=function(){function e(t,n){this.Ti=t,this.Qt=n}return e.prototype.Bi=function(t){var n=this;return this.qi(t).next(function(r){var i=new Op(r.highestTargetId);return r.highestTargetId=i.next(),n.Ui(t,r).next(function(){return r.highestTargetId})})},e.prototype.Qi=function(t){return this.qi(t).next(function(n){return Ot.K(new Gn(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))})},e.prototype.Ki=function(t){return this.qi(t).next(function(n){return n.highestListenSequenceNumber})},e.prototype.Wi=function(t,n,r){var i=this;return this.qi(t).next(function(s){return s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.j()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),i.Ui(t,s)})},e.prototype.ji=function(t,n){var r=this;return this.Gi(t,n).next(function(){return r.qi(t).next(function(i){return i.targetCount+=1,r.zi(n,i),r.Ui(t,i)})})},e.prototype.Hi=function(t,n){return this.Gi(t,n)},e.prototype.Ji=function(t,n){var r=this;return this.Yi(t,n.targetId).next(function(){return Na(t).delete(n.targetId)}).next(function(){return r.qi(t)}).next(function(i){return yt(i.targetCount>0),i.targetCount-=1,r.Ui(t,i)})},e.prototype.Xi=function(t,n,r){var i=this,s=0,a=[];return Na(t).hs(function(c,l){var h=Wc(l);h.sequenceNumber<=n&&r.get(h.targetId)===null&&(s++,a.push(i.Ji(t,h)))}).next(function(){return $.Mn(a)}).next(function(){return s})},e.prototype.In=function(t,n){return Na(t).hs(function(r,i){var s=Wc(i);n(s)})},e.prototype.qi=function(t){return e1(t).get(nr.key).next(function(n){return yt(n!==null),n})},e.prototype.Ui=function(t,n){return e1(t).put(nr.key,n)},e.prototype.Gi=function(t,n){return Na(t).put(bx(this.Qt,n))},e.prototype.zi=function(t,n){var r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r},e.prototype.Zi=function(t){return this.qi(t).next(function(n){return n.targetCount})},e.prototype.tr=function(t,n){var r=tf(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Na(t).hs({range:i,index:Hn.queryTargetsIndexName},function(a,c,l){var h=Wc(c);vd(n,h.target)&&(s=h,l.done())}).next(function(){return s})},e.prototype.er=function(t,n,r){var i=this,s=[],a=go(t);return n.forEach(function(c){var l=Br(c.path);s.push(a.put(new an(r,l))),s.push(i.Ti.nr(t,r,c))}),$.Mn(s)},e.prototype.sr=function(t,n,r){var i=this,s=go(t);return $.forEach(n,function(a){var c=Br(a.path);return $.Mn([s.delete([r,c]),i.Ti.ir(t,r,a)])})},e.prototype.Yi=function(t,n){var r=go(t),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)},e.prototype.rr=function(t,n){var r=IDBKeyRange.bound([n],[n+1],!1,!0),i=go(t),s=Yt();return i.hs({range:r,us:!0},function(a,c,l){var h=Pi(a[1]),p=new ht(h);s=s.add(p)}).next(function(){return s})},e.prototype.Fi=function(t,n){var r=Br(n.path),i=IDBKeyRange.bound([r],[LO(r)],!1,!0),s=0;return go(t).hs({index:an.documentTargetsIndex,us:!0,range:i},function(a,c,l){var h=a[0];a[1],h!==0&&(s++,l.done())}).next(function(){return s>0})},e.prototype.Sn=function(t,n){return Na(t).get(n).next(function(r){return r?Wc(r):null})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Na(e){return Yn(e,Hn.store)}function e1(e){return Yn(e,nr.store)}function go(e){return Yn(e,an.store)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(e,t){var n=e[0],r=e[1],i=t[0],s=t[1],a=kt(n,i);return a===0?kt(r,s):a}var ZH=function(){function e(t){this.cr=t,this.buffer=new qe(n1),this.ar=0}return e.prototype.ur=function(){return++this.ar},e.prototype.hr=function(t){var n=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{var r=this.buffer.last();n1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),tG=function(){function e(t,n){this.lr=t,this._s=n,this._r=!1,this.dr=null}return e.prototype.start=function(t){this.lr.params.zs!==-1&&this.wr(t)},e.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(e.prototype,"Er",{get:function(){return this.dr!==null},enumerable:!1,configurable:!0}),e.prototype.wr=function(t){var n=this,r=this._r?3e5:6e4;X("LruGarbageCollector","Garbage collection scheduled in "+r+"ms"),this.dr=this._s.Tr("lru_garbage_collection",r,function(){return R(n,void 0,void 0,function(){var i;return N(this,function(s){switch(s.label){case 0:this.dr=null,this._r=!0,s.label=1;case 1:return s.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return s.sent(),[3,7];case 3:return Ws(i=s.sent())?(X("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i),[3,6]):[3,4];case 4:return[4,$s(i)];case 5:s.sent(),s.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return s.sent(),[2]}})})})},e}(),eG=function(){function e(t,n){this.mr=t,this.params=n}return e.prototype.Ar=function(t,n){return this.mr.Rr(t).next(function(r){return Math.floor(n/100*r)})},e.prototype.Pr=function(t,n){var r=this;if(n===0)return $.resolve(ir.q);var i=new ZH(n);return this.mr.In(t,function(s){return i.hr(s.sequenceNumber)}).next(function(){return r.mr.yr(t,function(s){return i.hr(s)})}).next(function(){return i.maxValue})},e.prototype.Xi=function(t,n,r){return this.mr.Xi(t,n,r)},e.prototype.gr=function(t,n){return this.mr.gr(t,n)},e.prototype.Vr=function(t,n){var r=this;return this.params.zs===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(t1)):this.pr(t).next(function(i){return i<r.params.zs?(X("LruGarbageCollector","Garbage collection skipped; Cache size "+i+" is lower than threshold "+r.params.zs),t1):r.br(t,n)})},e.prototype.pr=function(t){return this.mr.pr(t)},e.prototype.br=function(t,n){var r,i,s,a,c,l,h,p=this,v=Date.now();return this.Ar(t,this.params.Hs).next(function(m){return m>p.params.Js?(X("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+p.params.Js+" from "+m),i=p.params.Js):i=m,a=Date.now(),p.Pr(t,i)}).next(function(m){return r=m,c=Date.now(),p.Xi(t,r,n)}).next(function(m){return s=m,l=Date.now(),p.gr(t,r)}).next(function(m){return h=Date.now(),Zy()<=Rt.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in `+(a-v)+`ms
	Determined least recently used `+i+" in "+(c-a)+`ms
	Removed `+s+" targets in "+(l-c)+`ms
	Removed `+m+" documents in "+(h-l)+`ms
Total Duration: `+(h-v)+"ms"),$.resolve({Ks:!0,Ws:i,js:s,Gs:m})})},e}(),nG=function(){function e(t,n){this.db=t,this.lr=function(r,i){return new eG(r,i)}(this,n)}return e.prototype.Rr=function(t){var n=this.vr(t);return this.db.Sr().Zi(t).next(function(r){return n.next(function(i){return r+i})})},e.prototype.vr=function(t){var n=0;return this.yr(t,function(r){n++}).next(function(){return n})},e.prototype.In=function(t,n){return this.db.Sr().In(t,n)},e.prototype.yr=function(t,n){return this.Dr(t,function(r,i){return n(i)})},e.prototype.nr=function(t,n,r){return Ah(t,r)},e.prototype.ir=function(t,n,r){return Ah(t,r)},e.prototype.Xi=function(t,n,r){return this.db.Sr().Xi(t,n,r)},e.prototype.Ni=function(t,n){return Ah(t,n)},e.prototype.Cr=function(t,n){return function(r,i){var s=!1;return Sx(r).ls(function(a){return Tx(r,a,i).next(function(c){return c&&(s=!0),$.resolve(!c)})}).next(function(){return s})}(t,n)},e.prototype.gr=function(t,n){var r=this,i=this.db.$r().Nr(),s=[],a=0;return this.Dr(t,function(c,l){if(l<=n){var h=r.Cr(t,c).next(function(p){if(!p)return a++,i._i(t,c).next(function(){return i.li(c),go(t).delete([0,Br(c.path)])})});s.push(h)}}).next(function(){return $.Mn(s)}).next(function(){return i.apply(t)}).next(function(){return a})},e.prototype.removeTarget=function(t,n){var r=n.kt(t.bs);return this.db.Sr().Hi(t,r)},e.prototype.Fr=function(t,n){return Ah(t,n)},e.prototype.Dr=function(t,n){var r,i=go(t),s=ir.q;return i.hs({index:an.documentTargetsIndex},function(a,c){var l=a[0],h=(a[1],c.path),p=c.sequenceNumber;l===0?(s!==ir.q&&n(new ht(Pi(r)),s),s=p,r=h):s=ir.q}).next(function(){s!==ir.q&&n(new ht(Pi(r)),s)})},e.prototype.pr=function(t){return this.db.$r().Or(t)},e}();function Ah(e,t){return go(e).put(function(n,r){return new an(0,Br(n.path),r)}(t,e.bs))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rG=function(){function e(t,n){this.Qt=t,this.Ei=n}return e.prototype.ai=function(t,n,r){return ho(t).put(Ch(n),r)},e.prototype.li=function(t,n){var r=ho(t),i=Ch(n);return r.delete(i)},e.prototype.updateMetadata=function(t,n){var r=this;return this.getMetadata(t).next(function(i){return i.byteSize+=n,r.kr(t,i)})},e.prototype._i=function(t,n){var r=this;return ho(t).get(Ch(n)).next(function(i){return r.Mr(i)})},e.prototype.Lr=function(t,n){var r=this;return ho(t).get(Ch(n)).next(function(i){var s=r.Mr(i);return s?{hi:s,size:Rp(i)}:null})},e.prototype.getEntries=function(t,n){var r=this,i=Ap();return this.Br(t,n,function(s,a){var c=r.Mr(a);i=i.zt(s,c)}).next(function(){return i})},e.prototype.qr=function(t,n){var r=this,i=Ap(),s=new wn(ht.H);return this.Br(t,n,function(a,c){var l=r.Mr(c);l?(i=i.zt(a,l),s=s.zt(a,Rp(c))):(i=i.zt(a,null),s=s.zt(a,0))}).next(function(){return{Ur:i,Qr:s}})},e.prototype.Br=function(t,n,r){if(n.et())return $.resolve();var i=IDBKeyRange.bound(n.first().path.it(),n.last().path.it()),s=n.te(),a=s.oe();return ho(t).hs({range:i},function(c,l,h){for(var p=ht.Et(c);a&&ht.H(a,p)<0;)r(a,null),a=s.oe();a&&a.isEqual(p)&&(r(a,l),a=s.ce()?s.oe():null),a?h.ss(a.path.it()):h.done()}).next(function(){for(;a;)r(a,null),a=s.ce()?s.oe():null})},e.prototype.Kr=function(t,n,r){var i=this,s=Nl(),a=n.path.length+1,c={};if(r.isEqual(Ot.min())){var l=n.path.it();c.range=IDBKeyRange.lowerBound(l)}else{var h=n.path.it(),p=Jw(r);c.range=IDBKeyRange.lowerBound([h,p],!0),c.index=ye.collectionReadTimeIndex}return ho(t).hs(c,function(v,m,y){if(v.length===a){var b=o_(i.Qt,m);n.path.nt(b.key.path)?b instanceof te&&nf(n,b)&&(s=s.zt(b.key,b)):y.done()}}).next(function(){return s})},e.prototype.Nr=function(t){return new iG(this,!!t&&t.Wr)},e.prototype.Or=function(t){return this.getMetadata(t).next(function(n){return n.byteSize})},e.prototype.getMetadata=function(t){return r1(t).get(ui.key).next(function(n){return yt(!!n),n})},e.prototype.kr=function(t,n){return r1(t).put(ui.key,n)},e.prototype.Mr=function(t){if(t){var n=o_(this.Qt,t);return n instanceof Be&&n.version.isEqual(Ot.min())?null:n}return null},e}(),iG=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).jr=n,i.Wr=r,i.Gr=new Uu(function(s){return s.toString()},function(s,a){return s.isEqual(a)}),i}return Z(t,e),t.prototype.wi=function(n){var r=this,i=[],s=0,a=new qe(function(c,l){return kt(c.rt(),l.rt())});return this.ri.forEach(function(c,l){var h=r.Gr.get(c);if(l.hi){var p=YA(r.jr.Qt,l.hi,r.ci(c));a=a.add(c.path.X());var v=Rp(p);s+=v-h,i.push(r.jr.ai(n,c,p))}else if(s-=h,r.Wr){var m=YA(r.jr.Qt,new Be(c,Ot.min()),r.ci(c));i.push(r.jr.ai(n,c,m))}else i.push(r.jr.li(n,c))}),a.forEach(function(c){i.push(r.jr.Ei.qs(n,c))}),i.push(this.jr.updateMetadata(n,s)),$.Mn(i)},t.prototype.fi=function(n,r){var i=this;return this.jr.Lr(n,r).next(function(s){return s===null?(i.Gr.set(r,0),null):(i.Gr.set(r,s.size),s.hi)})},t.prototype.di=function(n,r){var i=this;return this.jr.qr(n,r).next(function(s){var a=s.Ur;return s.Qr.forEach(function(c,l){i.Gr.set(c,l)}),a})},t}(Ex);function r1(e){return Yn(e,ui.store)}function ho(e){return Yn(e,ye.store)}function Ch(e){return e.path.it()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oG=function(){function e(t){this.Qt=t}return e.prototype.Jn=function(t,n,r,i){var s=this;yt(r<i&&r>=0&&i<=11);var a=new gx("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore(tr.store)}(t),function(l){l.createObjectStore(Eo.store,{keyPath:Eo.keyPath}),l.createObjectStore(re.store,{keyPath:re.keyPath,autoIncrement:!0}).createIndex(re.userMutationsIndex,re.userMutationsKeyPath,{unique:!0}),l.createObjectStore(fn.store)}(t),i1(t),function(l){l.createObjectStore(ye.store)}(t));var c=$.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore(an.store),l.deleteObjectStore(Hn.store),l.deleteObjectStore(nr.store)}(t),i1(t)),c=c.next(function(){return function(l){var h=l.store(nr.store),p=new nr(0,0,Ot.min().j(),0);return h.put(nr.key,p)}(a)})),r<4&&i>=4&&(r!==0&&(c=c.next(function(){return function(l,h){return h.store(re.store).rs().next(function(p){l.deleteObjectStore(re.store),l.createObjectStore(re.store,{keyPath:re.keyPath,autoIncrement:!0}).createIndex(re.userMutationsIndex,re.userMutationsKeyPath,{unique:!0});var v=h.store(re.store),m=p.map(function(y){return v.put(y)});return $.Mn(m)})}(t,a)})),c=c.next(function(){(function(l){l.createObjectStore(Di.store,{keyPath:Di.keyPath})})(t)})),r<5&&i>=5&&(c=c.next(function(){return s.zr(a)})),r<6&&i>=6&&(c=c.next(function(){return function(l){l.createObjectStore(ui.store)}(t),s.Hr(a)})),r<7&&i>=7&&(c=c.next(function(){return s.Jr(a)})),r<8&&i>=8&&(c=c.next(function(){return s.Yr(t,a)})),r<9&&i>=9&&(c=c.next(function(){(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(t),function(l){var h=l.objectStore(ye.store);h.createIndex(ye.readTimeIndex,ye.readTimeIndexPath,{unique:!1}),h.createIndex(ye.collectionReadTimeIndex,ye.collectionReadTimeIndexPath,{unique:!1})}(n)})),r<10&&i>=10&&(c=c.next(function(){return s.Xr(a)})),r<11&&i>=11&&(c=c.next(function(){(function(l){l.createObjectStore(mu.store,{keyPath:mu.keyPath})})(t),function(l){l.createObjectStore(yu.store,{keyPath:yu.keyPath})}(t)})),c},e.prototype.Hr=function(t){var n=0;return t.store(ye.store).hs(function(r,i){n+=Rp(i)}).next(function(){var r=new ui(n);return t.store(ui.store).put(ui.key,r)})},e.prototype.zr=function(t){var n=this,r=t.store(Eo.store),i=t.store(re.store);return r.rs().next(function(s){return $.forEach(s,function(a){var c=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return i.rs(re.userMutationsIndex,c).next(function(l){return $.forEach(l,function(h){yt(h.userId===a.userId);var p=Da(n.Qt,h);return Ix(t,a.userId,p).next(function(){})})})})})},e.prototype.Jr=function(t){var n=t.store(an.store),r=t.store(ye.store);return t.store(nr.store).get(nr.key).next(function(i){var s=[];return r.hs(function(a,c){var l=new Ht(a),h=function(p){return[0,Br(p)]}(l);s.push(n.get(h).next(function(p){return p?$.resolve():function(v){return n.put(new an(0,Br(v),i.highestListenSequenceNumber))}(l)}))}).next(function(){return $.Mn(s)})})},e.prototype.Yr=function(t,n){t.createObjectStore(Ss.store,{keyPath:Ss.keyPath});var r=n.store(Ss.store),i=new tb,s=function(a){if(i.add(a)){var c=a.tt(),l=a.X();return r.put({collectionId:c,parent:Br(l)})}};return n.store(ye.store).hs({us:!0},function(a,c){var l=new Ht(a);return s(l.X())}).next(function(){return n.store(fn.store).hs({us:!0},function(a,c){a[0];var l=a[1],h=(a[2],Pi(l));return s(h.X())})})},e.prototype.Xr=function(t){var n=this,r=t.store(Hn.store);return r.hs(function(i,s){var a=Wc(s),c=bx(n.Qt,a);return r.put(c)})},e}();function i1(e){e.createObjectStore(an.store,{keyPath:an.keyPath}).createIndex(an.documentTargetsIndex,an.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Hn.store,{keyPath:Hn.keyPath}).createIndex(Hn.queryTargetsIndexName,Hn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(nr.store)}var Wm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sG=function(){function e(t,n,r,i,s,a,c,l,h,p){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Zr=s,this.window=a,this.document=c,this.eo=h,this.no=p,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(v){return Promise.resolve()},!e.Kn())throw new G(k.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new nG(this,i),this.ho=n+"main",this.Qt=new _x(l),this.lo=new gu(this.ho,11,new oG(this.Qt)),this._o=new JH(this.Ti,this.Qt),this.Ei=new YH,this.fo=function(v,m){return new rG(v,m)}(this.Qt,this.Ei),this.wo=new KH,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,p===!1&&Pe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var t=this;return this.To().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new G(k.FAILED_PRECONDITION,Wm);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(n){return t._o.Ki(n)})}).then(function(n){t.so=new ir(n,t.eo)}).then(function(){t.io=!0}).catch(function(n){return t.lo&&t.lo.close(),Promise.reject(n)})},e.prototype.Ro=function(t){var n=this;return this.uo=function(r){return R(n,void 0,void 0,function(){return N(this,function(i){return this.Er?[2,t(r)]:[2]})})},t(this.isPrimary)},e.prototype.Po=function(t){var n=this;this.lo.Xn(function(r){return R(n,void 0,void 0,function(){return N(this,function(i){switch(i.label){case 0:return r.newVersion===null?[4,t()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})})},e.prototype.yo=function(t){var n=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps(function(){return R(n,void 0,void 0,function(){return N(this,function(r){switch(r.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})}))},e.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(n){return Nh(n).put(new Di(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Vo(n).next(function(r){r||(t.isPrimary=!1,t.Zr.po(function(){return t.uo(!1)}))})}).next(function(){return t.bo(n)}).next(function(r){return t.isPrimary&&!r?t.vo(n).next(function(){return!1}):!!r&&t.So(n).next(function(){return!0})})}).catch(function(n){if(Ws(n))return X("IndexedDbPersistence","Failed to extend owner lease: ",n),t.isPrimary;if(!t.allowTabSynchronization)throw n;return X("IndexedDbPersistence","Releasing owner lease after error during lease refresh",n),!1}).then(function(n){t.isPrimary!==n&&t.Zr.po(function(){return t.uo(n)}),t.isPrimary=n})},e.prototype.Vo=function(t){var n=this;return Fc(t).get(tr.key).next(function(r){return $.resolve(n.Do(r))})},e.prototype.Co=function(t){return Nh(t).delete(this.clientId)},e.prototype.xo=function(){return R(this,void 0,void 0,function(){var t,n,r,i,s=this;return N(this,function(a){switch(a.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(c){var l=Yn(c,Di.store);return l.rs().next(function(h){var p=s.$o(h,18e5),v=h.filter(function(m){return p.indexOf(m)===-1});return $.forEach(v,function(m){return l.delete(m.clientId)}).next(function(){return v})})}).catch(function(){return[]})]);case 1:if(t=a.sent(),this.Eo)for(n=0,r=t;n<r.length;n++)i=r[n],this.Eo.removeItem(this.Fo(i.clientId));a.label=2;case 2:return[2]}})})},e.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,function(){return t.To().then(function(){return t.xo()}).then(function(){return t.Ao()})})},e.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.bo=function(t){var n=this;return this.no?$.resolve(!0):Fc(t).get(tr.key).next(function(r){if(r!==null&&n.No(r.leaseTimestampMs,5e3)&&!n.Oo(r.ownerId)){if(n.Do(r)&&n.networkEnabled)return!0;if(!n.Do(r)){if(!r.allowTabSynchronization)throw new G(k.FAILED_PRECONDITION,Wm);return!1}}return!(!n.networkEnabled||!n.inForeground)||Nh(t).rs().next(function(i){return n.$o(i,5e3).find(function(s){if(n.clientId!==s.clientId){var a=!n.networkEnabled&&s.networkEnabled,c=!n.inForeground&&s.inForeground,l=n.networkEnabled===s.networkEnabled;if(a||c&&l)return!0}return!1})===void 0})}).next(function(r){return n.isPrimary!==r&&X("IndexedDbPersistence","Client "+(r?"is":"is not")+" eligible for a primary lease."),r})},e.prototype.ko=function(){return R(this,void 0,void 0,function(){var t=this;return N(this,function(n){switch(n.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[tr.store,Di.store],function(r){var i=new QA(r,ir.q);return t.vo(i).next(function(){return t.Co(i)})})];case 1:return n.sent(),this.lo.close(),this.qo(),[2]}})})},e.prototype.$o=function(t,n){var r=this;return t.filter(function(i){return r.No(i.updateTimeMs,n)&&!r.Oo(i.clientId)})},e.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(n){return Nh(n).rs().next(function(r){return t.$o(r,18e5).map(function(i){return i.clientId})})})},Object.defineProperty(e.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),e.prototype.Qo=function(t){return XH.mi(t,this.Qt,this.Ei,this.Ti)},e.prototype.Sr=function(){return this._o},e.prototype.$r=function(){return this.fo},e.prototype.Ko=function(){return this.Ei},e.prototype.Wo=function(){return this.wo},e.prototype.runTransaction=function(t,n,r){var i=this;X("IndexedDbPersistence","Starting transaction:",t);var s,a=n==="readonly"?"readonly":"readwrite";return this.lo.runTransaction(t,a,$H,function(c){return s=new QA(c,i.so?i.so.next():ir.q),n==="readwrite-primary"?i.Vo(s).next(function(l){return!!l||i.bo(s)}).next(function(l){if(!l)throw Pe("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Zr.po(function(){return i.uo(!1)}),new G(k.FAILED_PRECONDITION,mx);return r(s)}).next(function(l){return i.So(s).next(function(){return l})}):i.jo(s).next(function(){return r(s)})}).then(function(c){return s.Vs(),c})},e.prototype.jo=function(t){var n=this;return Fc(t).get(tr.key).next(function(r){if(r!==null&&n.No(r.leaseTimestampMs,5e3)&&!n.Oo(r.ownerId)&&!n.Do(r)&&!(n.no||n.allowTabSynchronization&&r.allowTabSynchronization))throw new G(k.FAILED_PRECONDITION,Wm)})},e.prototype.So=function(t){var n=new tr(this.clientId,this.allowTabSynchronization,Date.now());return Fc(t).put(tr.key,n)},e.Kn=function(){return gu.Kn()},e.prototype.vo=function(t){var n=this,r=Fc(t);return r.get(tr.key).next(function(i){return n.Do(i)?(X("IndexedDbPersistence","Releasing primary lease."),r.delete(tr.key)):$.resolve()})},e.prototype.No=function(t,n){var r=Date.now();return!(t<r-n||t>r&&(Pe("Detected an update time that is in the future: "+t+" > "+r),1))},e.prototype.Io=function(){var t=this;this.document!==null&&typeof this.document.addEventListener=="function"&&(this.oo=function(){t.Zr.Ps(function(){return t.inForeground=t.document.visibilityState==="visible",t.To()})},this.document.addEventListener("visibilitychange",this.oo),this.inForeground=this.document.visibilityState==="visible")},e.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},e.prototype.mo=function(){var t,n=this;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.ro=function(){n.Mo(),n.Zr.Ps(function(){return n.ko()})},this.window.addEventListener("unload",this.ro))},e.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},e.prototype.Oo=function(t){var n;try{var r=((n=this.Eo)===null||n===void 0?void 0:n.getItem(this.Fo(t)))!==null;return X("IndexedDbPersistence","Client '"+t+"' "+(r?"is":"is not")+" zombied in LocalStorage"),r}catch(i){return Pe("IndexedDbPersistence","Failed to get zombied client id.",i),!1}},e.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){Pe("Failed to set zombie client id.",t)}},e.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch{}},e.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}();function Fc(e){return Yn(e,tr.store)}function Nh(e){return Yn(e,Di.store)}function eb(e,t){var n=e.projectId;return e.o||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var aG=function(e,t){this.progress=e,this.Go=t},Ax=function(){function e(t,n,r){this.fo=t,this.zo=n,this.Ei=r}return e.prototype.Ho=function(t,n){var r=this;return this.zo.bi(t,n).next(function(i){return r.Jo(t,n,i)})},e.prototype.Jo=function(t,n,r){return this.fo._i(t,n).next(function(i){for(var s=0,a=r;s<a.length;s++)i=a[s].Cs(n,i);return i})},e.prototype.Yo=function(t,n,r){var i=Ap();return n.forEach(function(s,a){for(var c=0,l=r;c<l.length;c++)a=l[c].Cs(s,a);i=i.zt(s,a)}),i},e.prototype.Xo=function(t,n){var r=this;return this.fo.getEntries(t,n).next(function(i){return r.Zo(t,i)})},e.prototype.Zo=function(t,n){var r=this;return this.zo.vi(t,n).next(function(i){var s=r.Yo(t,n,i),a=Vi();return s.forEach(function(c,l){l||(l=new Be(c,Ot.min())),a=a.zt(c,l)}),a})},e.prototype.Kr=function(t,n,r){return function(i){return ht.wt(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.tc(t,n.path):Gw(n)?this.ec(t,n,r):this.nc(t,n,r)},e.prototype.tc=function(t,n){return this.Ho(t,new ht(n)).next(function(r){var i=Nl();return r instanceof te&&(i=i.zt(r.key,r)),i})},e.prototype.ec=function(t,n,r){var i=this,s=n.collectionGroup,a=Nl();return this.Ei.Us(t,s).next(function(c){return $.forEach(c,function(l){var h=function(p,v){return new Wi(v,null,p.xt.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return i.nc(t,h,r).next(function(p){p.forEach(function(v,m){a=a.zt(v,m)})})}).next(function(){return a})})},e.prototype.nc=function(t,n,r){var i,s,a=this;return this.fo.Kr(t,n,r).next(function(c){return i=c,a.zo.Di(t,n)}).next(function(c){return s=c,a.sc(t,s,i).next(function(l){i=l;for(var h=0,p=s;h<p.length;h++)for(var v=p[h],m=0,y=v.mutations;m<y.length;m++){var b=y[m],E=b.key,I=r_(b,i.get(E),v.vs);i=I instanceof te?i.zt(E,I):i.remove(E)}})}).next(function(){return i.forEach(function(c,l){nf(n,l)||(i=i.remove(c))}),i})},e.prototype.sc=function(t,n,r){for(var i=Yt(),s=0,a=n;s<a.length;s++)for(var c=0,l=a[s].mutations;c<l.length;c++){var h=l[c];h instanceof Fo&&r.get(h.key)===null&&(i=i.add(h.key))}var p=r;return this.fo.getEntries(t,i).next(function(v){return v.forEach(function(m,y){y!==null&&y instanceof te&&(p=p.zt(m,y))}),p})},e}(),uG=function(){function e(t,n,r,i){this.targetId=t,this.fromCache=n,this.ic=r,this.rc=i}return e.oc=function(t,n){for(var r=Yt(),i=Yt(),s=0,a=n.docChanges;s<a.length;s++){var c=a[s];switch(c.type){case 0:r=r.add(c.doc.key);break;case 1:i=i.add(c.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),Cx=function(){function e(){}return e.prototype.cc=function(t){this.ac=t},e.prototype.Kr=function(t,n,r,i){var s=this;return function(a){return a.filters.length===0&&a.limit===null&&a.startAt==null&&a.endAt==null&&(a.xt.length===0||a.xt.length===1&&a.xt[0].field.ut())}(n)||r.isEqual(Ot.min())?this.uc(t,n):this.ac.Xo(t,i).next(function(a){var c=s.hc(n,a);return(Hh(n)||Sp(n))&&s.lc(n.limitType,c,i,r)?s.uc(t,n):(Zy()<=Rt.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),n_(n)),s.ac.Kr(t,n,r).next(function(l){return c.forEach(function(h){l=l.zt(h.key,h)}),l}))})},e.prototype.hc=function(t,n){var r=new qe(WO(t));return n.forEach(function(i,s){s instanceof te&&nf(t,s)&&(r=r.add(s))}),r},e.prototype.lc=function(t,n,r,i){if(r.size!==n.size)return!0;var s=t==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version._(i)>0)},e.prototype.uc=function(t,n){return Zy()<=Rt.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",n_(n)),this.ac.Kr(t,n,Ot.min())},e}(),cG=function(){function e(t,n,r,i){this.persistence=t,this._c=n,this.Qt=i,this.fc=new wn(kt),this.dc=new Uu(function(s){return tf(s)},vd),this.wc=Ot.min(),this.zo=t.Qo(r),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new Ax(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return e.prototype.Ir=function(t){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(r){return t.Vr(r,n.fc)})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(e,t,n,r){return new cG(e,t,n,r)}function Rx(e,t){return R(this,void 0,void 0,function(){var n,r,i,s;return N(this,function(a){switch(a.label){case 0:return n=tt(e),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",function(c){var l;return n.zo.pi(c).next(function(h){return l=h,r=n.persistence.Qo(t),i=new Ax(n.Ec,r,n.persistence.Ko()),r.pi(c)}).next(function(h){for(var p=[],v=[],m=Yt(),y=0,b=l;y<b.length;y++){var E=b[y];p.push(E.batchId);for(var I=0,C=E.mutations;I<C.length;I++){var P=C[I];m=m.add(P.key)}}for(var D=0,F=h;D<F.length;D++){var Y=F[D];v.push(Y.batchId);for(var U=0,_t=Y.mutations;U<_t.length;U++){var Wt=_t[U];m=m.add(Wt.key)}}return i.Xo(c,m).next(function(lt){return{Ic:lt,mc:p,Ac:v}})})})];case 1:return s=a.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),s)]}})})}function lG(e,t){var n=tt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(r){var i=t.batch.keys(),s=n.Ec.Nr({Wr:!0});return function(a,c,l,h){var p=l.batch,v=p.keys(),m=$.resolve();return v.forEach(function(y){m=m.next(function(){return h._i(c,y)}).next(function(b){var E=b,I=l.$s.get(y);yt(I!==null),(!E||E.version._(I)<0)&&(E=p.Ss(y,E,l))&&h.ai(E,l.Ns)})}),m.next(function(){return a.zo.Ci(c,p)})}(n,r,t,s).next(function(){return s.apply(r)}).next(function(){return n.zo.$i(r)}).next(function(){return n.Tc.Xo(r,i)})})}function Ox(e){var t=tt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(n){return t._o.Qi(n)})}function fG(e,t){var n=tt(e),r=t.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var a=n.Ec.Nr({Wr:!0});i=n.fc;var c=[];t.$e.forEach(function(p,v){var m=i.get(v);if(m){c.push(n._o.sr(s,p.Qe,v).next(function(){return n._o.er(s,p.qe,v)}));var y=p.resumeToken;if(y.l()>0){var b=m.Mt(y,r).kt(s.bs);i=i.zt(v,b),function(E,I,C){return yt(I.resumeToken.l()>0),E.resumeToken.l()===0||I.Ot.W()-E.Ot.W()>=3e8||C.qe.size+C.Ue.size+C.Qe.size>0}(m,b,p)&&c.push(n._o.Hi(s,b))}}});var l=Vi();if(t.Oe.forEach(function(p,v){t.ke.has(p)&&c.push(n.persistence.Ti.Fr(s,p))}),c.push(xx(s,a,t.Oe,r,void 0).next(function(p){l=p})),!r.isEqual(Ot.min())){var h=n._o.Qi(s).next(function(p){return n._o.Wi(s,s.bs,r)});c.push(h)}return $.Mn(c).next(function(){return a.apply(s)}).next(function(){return n.Tc.Zo(s,l)})}).then(function(s){return n.fc=i,s})}function xx(e,t,n,r,i){var s=Yt();return n.forEach(function(a){return s=s.add(a)}),t.getEntries(e,s).next(function(a){var c=Vi();return n.forEach(function(l,h){var p=a.get(l),v=(i==null?void 0:i.get(l))||r;h instanceof Be&&h.version.isEqual(Ot.min())?(t.li(l,v),c=c.zt(l,h)):p==null||h.version._(p.version)>0||h.version._(p.version)===0&&p.hasPendingWrites?(t.ai(h,v),c=c.zt(l,h)):X("LocalStore","Ignoring outdated watch update for ",l,". Current version:",p.version," Watch version:",h.version)}),c})}function hG(e,t){var n=tt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(r){return t===void 0&&(t=-1),n.zo.gi(r,t)})}function bu(e,t){var n=tt(e);return n.persistence.runTransaction("Allocate target","readwrite",function(r){var i;return n._o.tr(r,t).next(function(s){return s?(i=s,$.resolve(i)):n._o.Bi(r).next(function(a){return i=new gd(t,a,0,r.bs),n._o.ji(r,i).next(function(){return i})})})}).then(function(r){var i=n.fc.get(r.targetId);return(i===null||r.Ot._(i.Ot)>0)&&(n.fc=n.fc.zt(r.targetId,r),n.dc.set(t,r.targetId)),r})}function Eu(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a;return N(this,function(c){switch(c.label){case 0:r=tt(e),i=r.fc.get(t),s=n?"readwrite":"readwrite-primary",c.label=1;case 1:return c.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,function(l){return r.persistence.Ti.removeTarget(l,i)})];case 2:c.sent(),c.label=3;case 3:return[3,5];case 4:if(!Ws(a=c.sent()))throw a;return X("LocalStore","Failed to update sequence numbers for target "+t+": "+a),[3,5];case 5:return r.fc=r.fc.remove(t),r.dc.delete(i.target),[2]}})})}function xp(e,t,n){var r=tt(e),i=Ot.min(),s=Yt();return r.persistence.runTransaction("Execute query","readonly",function(a){return function(c,l,h){var p=tt(c),v=p.dc.get(h);return v!==void 0?$.resolve(p.fc.get(v)):p._o.tr(l,h)}(r,a,_r(t)).next(function(c){if(c)return i=c.lastLimboFreeSnapshotVersion,r._o.rr(a,c.targetId).next(function(l){s=l})}).next(function(){return r._c.Kr(a,t,n?i:Ot.min(),n?s:Yt())}).next(function(c){return{documents:c,Rc:s}})})}function Px(e,t){var n=tt(e),r=tt(n._o),i=n.fc.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(s){return r.Sn(s,t).next(function(a){return a?a.target:null})})}function kx(e){var t=tt(e);return t.persistence.runTransaction("Get new document changes","readonly",function(n){return function(r,i,s){var a=tt(r),c=Vi(),l=Jw(s),h=ho(i),p=IDBKeyRange.lowerBound(l,!0);return h.hs({index:ye.readTimeIndex,range:p},function(v,m){var y=o_(a.Qt,m);c=c.zt(y.key,y),l=m.readTime}).next(function(){return{Go:c,readTime:wx(l)}})}(t.Ec,n,t.wc)}).then(function(n){var r=n.Go,i=n.readTime;return t.wc=i,r})}function pG(e){return R(this,void 0,void 0,function(){var t;return N(this,function(n){return[2,(t=tt(e)).persistence.runTransaction("Synchronize last document change read time","readonly",function(r){return function(i){var s=ho(i),a=Ot.min();return s.hs({index:ye.readTimeIndex,reverse:!0},function(c,l,h){l.readTime&&(a=wx(l.readTime)),h.done()}).next(function(){return a})}(r)}).then(function(r){t.wc=r})]})})}function dG(e,t,n,r){return R(this,void 0,void 0,function(){var i,s,a,c,l,h,p,v,m,y;return N(this,function(b){switch(b.label){case 0:for(i=tt(e),s=Yt(),a=Vi(),c=nx(),l=0,h=n;l<h.length;l++)p=h[l],v=t.Pc(p.metadata.name),p.document&&(s=s.add(v)),a=a.zt(v,t.yc(p)),c=c.zt(v,t.gc(p.metadata.readTime));return m=i.Ec.Nr({Wr:!0}),[4,bu(i,function(E){return _r(Mu(Ht.ot("__bundle__/docs/"+E)))}(r))];case 1:return y=b.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(E){return xx(E,m,a,Ot.min(),c).next(function(I){return m.apply(E),I}).next(function(I){return i._o.Yi(E,y.targetId).next(function(){return i._o.er(E,s,y.targetId)}).next(function(){return i.Tc.Zo(E,I)})})})]}})})}function vG(e,t,n){return n===void 0&&(n=Yt()),R(this,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:return[4,bu(e,_r(Zw(t.bundledQuery)))];case 1:return r=s.sent(),[2,(i=tt(e)).persistence.runTransaction("Save named query","readwrite",function(a){var c=Xe(t.readTime);if(r.Ot._(c)>=0)return i.wo.Ls(a,t);var l=r.Mt(Pn.T,c);return i.fc=i.fc.zt(l.targetId,l),i._o.Hi(a,l).next(function(){return i._o.Yi(a,r.targetId)}).next(function(){return i._o.er(a,n,r.targetId)}).next(function(){return i.wo.Ls(a,t)})})]}})})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gG=function(){function e(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return e.prototype.Os=function(t,n){return $.resolve(this.Vc.get(n))},e.prototype.ks=function(t,n){var r;return this.Vc.set(n.id,{id:(r=n).id,version:r.version,createTime:Xe(r.createTime)}),$.resolve()},e.prototype.Ms=function(t,n){return $.resolve(this.bc.get(n))},e.prototype.Ls=function(t,n){return this.bc.set(n.name,function(r){return{name:r.name,query:Zw(r.bundledQuery),readTime:Xe(r.readTime)}}(n)),$.resolve()},e}(),nb=function(){function e(){this.vc=new qe(Ke.Sc),this.Dc=new qe(Ke.Cc)}return e.prototype.et=function(){return this.vc.et()},e.prototype.nr=function(t,n){var r=new Ke(t,n);this.vc=this.vc.add(r),this.Dc=this.Dc.add(r)},e.prototype.xc=function(t,n){var r=this;t.forEach(function(i){return r.nr(i,n)})},e.prototype.ir=function(t,n){this.Nc(new Ke(t,n))},e.prototype.$c=function(t,n){var r=this;t.forEach(function(i){return r.ir(i,n)})},e.prototype.Fc=function(t){var n=this,r=new ht(new Ht([])),i=new Ke(r,t),s=new Ke(r,t+1),a=[];return this.Dc.me([i,s],function(c){n.Nc(c),a.push(c.key)}),a},e.prototype.Oc=function(){var t=this;this.vc.forEach(function(n){return t.Nc(n)})},e.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},e.prototype.kc=function(t){var n=new ht(new Ht([])),r=new Ke(n,t),i=new Ke(n,t+1),s=Yt();return this.Dc.me([r,i],function(a){s=s.add(a.key)}),s},e.prototype.Fi=function(t){var n=new Ke(t,0),r=this.vc.Re(n);return r!==null&&t.isEqual(r.key)},e}(),Ke=function(){function e(t,n){this.key=t,this.Mc=n}return e.Sc=function(t,n){return ht.H(t.key,n.key)||kt(t.Mc,n.Mc)},e.Cc=function(t,n){return kt(t.Mc,n.Mc)||ht.H(t.key,n.key)},e}(),mG=function(){function e(t,n){this.Ei=t,this.Ti=n,this.zo=[],this.Lc=1,this.Bc=new qe(Ke.Sc)}return e.prototype.Ai=function(t){return $.resolve(this.zo.length===0)},e.prototype.Ri=function(t,n,r,i){var s=this.Lc;this.Lc++,this.zo.length>0&&this.zo[this.zo.length-1];var a=new Xw(s,n,r,i);this.zo.push(a);for(var c=0,l=i;c<l.length;c++){var h=l[c];this.Bc=this.Bc.add(new Ke(h.key,s)),this.Ei.qs(t,h.key.path.X())}return $.resolve(a)},e.prototype.Pi=function(t,n){return $.resolve(this.qc(n))},e.prototype.gi=function(t,n){var r=n+1,i=this.Uc(r),s=i<0?0:i;return $.resolve(this.zo.length>s?this.zo[s]:null)},e.prototype.Vi=function(){return $.resolve(this.zo.length===0?-1:this.Lc-1)},e.prototype.pi=function(t){return $.resolve(this.zo.slice())},e.prototype.bi=function(t,n){var r=this,i=new Ke(n,0),s=new Ke(n,Number.POSITIVE_INFINITY),a=[];return this.Bc.me([i,s],function(c){var l=r.qc(c.Mc);a.push(l)}),$.resolve(a)},e.prototype.vi=function(t,n){var r=this,i=new qe(kt);return n.forEach(function(s){var a=new Ke(s,0),c=new Ke(s,Number.POSITIVE_INFINITY);r.Bc.me([a,c],function(l){i=i.add(l.Mc)})}),$.resolve(this.Qc(i))},e.prototype.Di=function(t,n){var r=n.path,i=r.length+1,s=r;ht.wt(s)||(s=s.child(""));var a=new Ke(new ht(s),0),c=new qe(kt);return this.Bc.Ae(function(l){var h=l.key.path;return!!r.nt(h)&&(h.length===i&&(c=c.add(l.Mc)),!0)},a),$.resolve(this.Qc(c))},e.prototype.Qc=function(t){var n=this,r=[];return t.forEach(function(i){var s=n.qc(i);s!==null&&r.push(s)}),r},e.prototype.Ci=function(t,n){var r=this;yt(this.Kc(n.batchId,"removed")===0),this.zo.shift();var i=this.Bc;return $.forEach(n.mutations,function(s){var a=new Ke(s.key,n.batchId);return i=i.delete(a),r.Ti.Ni(t,s.key)}).next(function(){r.Bc=i})},e.prototype.xi=function(t){},e.prototype.Fi=function(t,n){var r=new Ke(n,0),i=this.Bc.Re(r);return $.resolve(n.isEqual(i&&i.key))},e.prototype.$i=function(t){return this.zo.length,$.resolve()},e.prototype.Kc=function(t,n){return this.Uc(t)},e.prototype.Uc=function(t){return this.zo.length===0?0:t-this.zo[0].batchId},e.prototype.qc=function(t){var n=this.Uc(t);return n<0||n>=this.zo.length?null:this.zo[n]},e}(),yG=function(){function e(t,n){this.Ei=t,this.Wc=n,this.docs=new wn(ht.H),this.size=0}return e.prototype.ai=function(t,n,r){var i=n.key,s=this.docs.get(i),a=s?s.size:0,c=this.Wc(n);return this.docs=this.docs.zt(i,{hi:n,size:c,readTime:r}),this.size+=c-a,this.Ei.qs(t,i.path.X())},e.prototype.li=function(t){var n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)},e.prototype._i=function(t,n){var r=this.docs.get(n);return $.resolve(r?r.hi:null)},e.prototype.getEntries=function(t,n){var r=this,i=Ap();return n.forEach(function(s){var a=r.docs.get(s);i=i.zt(s,a?a.hi:null)}),$.resolve(i)},e.prototype.Kr=function(t,n,r){for(var i=Nl(),s=new ht(n.path.child("")),a=this.docs.ee(s);a.ce();){var c=a.oe(),l=c.key,h=c.value,p=h.hi,v=h.readTime;if(!n.path.nt(l.path))break;v._(r)<=0||p instanceof te&&nf(n,p)&&(i=i.zt(p.key,p))}return $.resolve(i)},e.prototype.jc=function(t,n){return $.forEach(this.docs,function(r){return n(r)})},e.prototype.Nr=function(t){return new _G(this)},e.prototype.Or=function(t){return $.resolve(this.size)},e}(),_G=function(e){function t(n){var r=this;return(r=e.call(this)||this).jr=n,r}return Z(t,e),t.prototype.wi=function(n){var r=this,i=[];return this.ri.forEach(function(s,a){a&&a.hi?i.push(r.jr.ai(n,a.hi,r.ci(s))):r.jr.li(s)}),$.Mn(i)},t.prototype.fi=function(n,r){return this.jr._i(n,r)},t.prototype.di=function(n,r){return this.jr.getEntries(n,r)},t}(Ex),wG=function(){function e(t){this.persistence=t,this.Gc=new Uu(function(n){return tf(n)},vd),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.zc=0,this.Hc=new nb,this.targetCount=0,this.Jc=Op.Mi()}return e.prototype.In=function(t,n){return this.Gc.forEach(function(r,i){return n(i)}),$.resolve()},e.prototype.Qi=function(t){return $.resolve(this.lastRemoteSnapshotVersion)},e.prototype.Ki=function(t){return $.resolve(this.zc)},e.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),$.resolve(this.highestTargetId)},e.prototype.Wi=function(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.zc&&(this.zc=n),$.resolve()},e.prototype.Gi=function(t){this.Gc.set(t.target,t);var n=t.targetId;n>this.highestTargetId&&(this.Jc=new Op(n),this.highestTargetId=n),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},e.prototype.ji=function(t,n){return this.Gi(n),this.targetCount+=1,$.resolve()},e.prototype.Hi=function(t,n){return this.Gi(n),$.resolve()},e.prototype.Ji=function(t,n){return this.Gc.delete(n.target),this.Hc.Fc(n.targetId),this.targetCount-=1,$.resolve()},e.prototype.Xi=function(t,n,r){var i=this,s=0,a=[];return this.Gc.forEach(function(c,l){l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i.Gc.delete(c),a.push(i.Yi(t,l.targetId)),s++)}),$.Mn(a).next(function(){return s})},e.prototype.Zi=function(t){return $.resolve(this.targetCount)},e.prototype.tr=function(t,n){var r=this.Gc.get(n)||null;return $.resolve(r)},e.prototype.er=function(t,n,r){return this.Hc.xc(n,r),$.resolve()},e.prototype.sr=function(t,n,r){this.Hc.$c(n,r);var i=this.persistence.Ti,s=[];return i&&n.forEach(function(a){s.push(i.Ni(t,a))}),$.Mn(s)},e.prototype.Yi=function(t,n){return this.Hc.Fc(n),$.resolve()},e.prototype.rr=function(t,n){var r=this.Hc.kc(n);return $.resolve(r)},e.prototype.Fi=function(t,n){return $.resolve(this.Hc.Fi(n))},e}(),bG=function(){function e(t,n){var r=this;this.Yc={},this.so=new ir(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new wG(this),this.Ei=new QH,this.fo=function(i,s){return new yG(i,function(a){return r.Ti.Xc(a)})}(this.Ei),this.Qt=new _x(n),this.wo=new gG(this.Qt)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(e.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),e.prototype.Po=function(){},e.prototype.yo=function(){},e.prototype.Ko=function(){return this.Ei},e.prototype.Qo=function(t){var n=this.Yc[t.A()];return n||(n=new mG(this.Ei,this.Ti),this.Yc[t.A()]=n),n},e.prototype.Sr=function(){return this._o},e.prototype.$r=function(){return this.fo},e.prototype.Wo=function(){return this.wo},e.prototype.runTransaction=function(t,n,r){var i=this;X("MemoryPersistence","Starting transaction:",t);var s=new EG(this.so.next());return this.Ti.Zc(),r(s).next(function(a){return i.Ti.ta(s).next(function(){return a})}).On().then(function(a){return s.Vs(),a})},e.prototype.ea=function(t,n){return $.Ln(Object.values(this.Yc).map(function(r){return function(){return r.Fi(t,n)}}))},e}(),EG=function(e){function t(n){var r=this;return(r=e.call(this)||this).bs=n,r}return Z(t,e),t}(yx),IG=function(){function e(t){this.persistence=t,this.na=new nb,this.sa=null}return e.ia=function(t){return new e(t)},Object.defineProperty(e.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw ut()},enumerable:!1,configurable:!0}),e.prototype.nr=function(t,n,r){return this.na.nr(r,n),this.ra.delete(r.toString()),$.resolve()},e.prototype.ir=function(t,n,r){return this.na.ir(r,n),this.ra.add(r.toString()),$.resolve()},e.prototype.Ni=function(t,n){return this.ra.add(n.toString()),$.resolve()},e.prototype.removeTarget=function(t,n){var r=this;this.na.Fc(n.targetId).forEach(function(s){return r.ra.add(s.toString())});var i=this.persistence.Sr();return i.rr(t,n.targetId).next(function(s){s.forEach(function(a){return r.ra.add(a.toString())})}).next(function(){return i.Ji(t,n)})},e.prototype.Zc=function(){this.sa=new Set},e.prototype.ta=function(t){var n=this,r=this.persistence.$r().Nr();return $.forEach(this.ra,function(i){var s=ht._t(i);return n.oa(t,s).next(function(a){a||r.li(s)})}).next(function(){return n.sa=null,r.apply(t)})},e.prototype.Fr=function(t,n){var r=this;return this.oa(t,n).next(function(i){i?r.ra.delete(n.toString()):r.ra.add(n.toString())})},e.prototype.Xc=function(t){return 0},e.prototype.oa=function(t,n){var r=this;return $.Ln([function(){return $.resolve(r.na.Fi(n))},function(){return r.persistence.Sr().Fi(t,n)},function(){return r.persistence.ea(t,n)}])},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(e,t){return"firestore_clients_"+e+"_"+t}function s1(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.m()&&(r+="_"+t.uid),r}function $m(e,t){return"firestore_targets_"+e+"_"+t}var a1=function(){function e(t,n,r,i){this.user=t,this.batchId=n,this.state=r,this.error=i}return e.ca=function(t,n,r){var i,s=JSON.parse(r),a=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return a&&s.error&&(a=typeof s.error.message=="string"&&typeof s.error.code=="string")&&(i=new G(s.error.code,s.error.message)),a?new e(t,n,s.state,i):(Pe("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),zm=function(){function e(t,n,r){this.targetId=t,this.state=n,this.error=r}return e.ca=function(t,n){var r,i=JSON.parse(n),s=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string")&&(r=new G(i.error.code,i.error.message)),s?new e(t,i.state,r):(Pe("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},e}(),u1=function(){function e(t,n){this.clientId=t,this.activeTargetIds=n}return e.ca=function(t,n){for(var r=JSON.parse(n),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=_d(),a=0;i&&a<r.activeTargetIds.length;++a)i=jO(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new e(t,s):(Pe("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),TG=function(){function e(t,n){this.clientId=t,this.onlineState=n}return e.ca=function(t){var n=JSON.parse(t);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new e(n.clientId,n.onlineState):(Pe("SharedClientState","Failed to parse online state: "+t),null)},e}(),s_=function(){function e(){this.activeTargetIds=_d()}return e.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},e.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},e.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},e}(),Km=function(){function e(t,n,r,i,s){this.window=t,this.Zr=n,this.persistenceKey=r,this.la=i,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new wn(kt),this.Er=!1,this.Ta=[];var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ia=o1(this.persistenceKey,this.la),this.ma=function(c){return"firestore_sequence_number_"+c}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new s_),this.Aa=new RegExp("^firestore_clients_"+a+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+a+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+a+"_(\\d+)$"),this.ya=function(c){return"firestore_online_state_"+c}(this.persistenceKey),this.ga=function(c){return"firestore_bundle_loaded_"+c}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return e.Kn=function(t){return!(!t||!t.localStorage)},e.prototype.start=function(){return R(this,void 0,void 0,function(){var t,n,r,i,s,a,c,l,h,p,v,m=this;return N(this,function(y){switch(y.label){case 0:return[4,this._a.Uo()];case 1:for(t=y.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.la&&(s=this.getItem(o1(this.persistenceKey,i)))&&(a=u1.ca(i,s))&&(this.Ea=this.Ea.zt(a.clientId,a));for(this.Va(),(c=this.storage.getItem(this.ya))&&(l=this.pa(c))&&this.ba(l),h=0,p=this.Ta;h<p.length;h++)v=p[h],this.wa(v);return this.Ta=[],this.window.addEventListener("unload",function(){return m.ko()}),this.Er=!0,[2]}})})},e.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},e.prototype.va=function(){return this.Sa(this.Ea)},e.prototype.Da=function(t){var n=!1;return this.Ea.forEach(function(r,i){i.activeTargetIds.has(t)&&(n=!0)}),n},e.prototype.Ca=function(t){this.xa(t,"pending")},e.prototype.Na=function(t,n,r){this.xa(t,n,r),this.$a(t)},e.prototype.Fa=function(t){var n="not-current";if(this.Da(t)){var r=this.storage.getItem($m(this.persistenceKey,t));if(r){var i=zm.ca(t,r);i&&(n=i.state)}}return this.Oa.ua(t),this.Va(),n},e.prototype.ka=function(t){this.Oa.ha(t),this.Va()},e.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},e.prototype.La=function(t){this.removeItem($m(this.persistenceKey,t))},e.prototype.Ba=function(t,n,r){this.qa(t,n,r)},e.prototype.Ua=function(t,n,r){var i=this;n.forEach(function(s){i.$a(s)}),this.currentUser=t,r.forEach(function(s){i.Ca(s)})},e.prototype.Qa=function(t){this.Ka(t)},e.prototype.Wa=function(){this.ja()},e.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},e.prototype.getItem=function(t){var n=this.storage.getItem(t);return X("SharedClientState","READ",t,n),n},e.prototype.setItem=function(t,n){X("SharedClientState","SET",t,n),this.storage.setItem(t,n)},e.prototype.removeItem=function(t){X("SharedClientState","REMOVE",t),this.storage.removeItem(t)},e.prototype.wa=function(t){var n=this,r=t;if(r.storageArea===this.storage){if(X("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Ia)return void Pe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po(function(){return R(n,void 0,void 0,function(){var i,s,a,c,l,h;return N(this,function(p){if(this.Er){if(r.key!==null){if(this.Aa.test(r.key)){if(r.newValue==null)return i=this.Ga(r.key),[2,this.za(i,null)];if(s=this.Ha(r.key,r.newValue))return[2,this.za(s.clientId,s)]}else if(this.Ra.test(r.key)){if(r.newValue!==null&&(a=this.Ja(r.key,r.newValue)))return[2,this.Ya(a)]}else if(this.Pa.test(r.key)){if(r.newValue!==null&&(c=this.Xa(r.key,r.newValue)))return[2,this.Za(c)]}else if(r.key===this.ya){if(r.newValue!==null&&(l=this.pa(r.newValue)))return[2,this.ba(l)]}else if(r.key===this.ma)(h=function(v){var m=ir.q;if(v!=null)try{var y=JSON.parse(v);yt(typeof y=="number"),m=y}catch(b){Pe("SharedClientState","Failed to read sequence number from WebStorage",b)}return m}(r.newValue))!==ir.q&&this.k(h);else if(r.key===this.ga)return[2,this._a.tu()]}}else this.Ta.push(r);return[2]})})})}},Object.defineProperty(e.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),e.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},e.prototype.xa=function(t,n,r){var i=new a1(this.currentUser,t,n,r),s=s1(this.persistenceKey,this.currentUser,t);this.setItem(s,i.aa())},e.prototype.$a=function(t){var n=s1(this.persistenceKey,this.currentUser,t);this.removeItem(n)},e.prototype.Ka=function(t){var n={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(n))},e.prototype.qa=function(t,n,r){var i=$m(this.persistenceKey,t),s=new zm(t,n,r);this.setItem(i,s.aa())},e.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},e.prototype.Ga=function(t){var n=this.Aa.exec(t);return n?n[1]:null},e.prototype.Ha=function(t,n){var r=this.Ga(t);return u1.ca(r,n)},e.prototype.Ja=function(t,n){var r=this.Ra.exec(t),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return a1.ca(new er(s),i,n)},e.prototype.Xa=function(t,n){var r=this.Pa.exec(t),i=Number(r[1]);return zm.ca(i,n)},e.prototype.pa=function(t){return TG.ca(t)},e.prototype.Ya=function(t){return R(this,void 0,void 0,function(){return N(this,function(n){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(X("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},e.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},e.prototype.za=function(t,n){var r=this,i=n?this.Ea.zt(t,n):this.Ea.remove(t),s=this.Sa(this.Ea),a=this.Sa(i),c=[],l=[];return a.forEach(function(h){s.has(h)||c.push(h)}),s.forEach(function(h){a.has(h)||l.push(h)}),this._a.su(c,l).then(function(){r.Ea=i})},e.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},e.prototype.Sa=function(t){var n=_d();return t.forEach(function(r,i){n=n.Pe(i.activeTargetIds)}),n},e}(),Dx=function(){function e(){this.iu=new s_,this.ru={},this.fa=null,this.k=null}return e.prototype.Ca=function(t){},e.prototype.Na=function(t,n,r){},e.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},e.prototype.Ba=function(t,n,r){this.ru[t]=n},e.prototype.ka=function(t){this.iu.ha(t)},e.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},e.prototype.La=function(t){delete this.ru[t]},e.prototype.va=function(){return this.iu.activeTargetIds},e.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},e.prototype.start=function(){return this.iu=new s_,Promise.resolve()},e.prototype.Ua=function(t,n,r){},e.prototype.Qa=function(t){},e.prototype.ko=function(){},e.prototype.B=function(t){},e.prototype.Wa=function(){},e}(),SG=function(){function e(){}return e.prototype.ou=function(t){},e.prototype.ko=function(){},e}(),c1=function(){function e(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return e.prototype.ou=function(t){this.lu.push(t)},e.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},e.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},e.prototype.au=function(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,n=this.lu;t<n.length;t++)(0,n[t])(0)},e.prototype.hu=function(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,n=this.lu;t<n.length;t++)(0,n[t])(1)},e.Kn=function(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0},e}(),AG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},CG=function(){function e(t){this.fu=t.fu,this.du=t.du}return e.prototype.wu=function(t){this.Eu=t},e.prototype.Tu=function(t){this.Iu=t},e.prototype.onMessage=function(t){this.mu=t},e.prototype.close=function(){this.du()},e.prototype.send=function(t){this.fu(t)},e.prototype.Au=function(){this.Eu()},e.prototype.Ru=function(t){this.Iu(t)},e.prototype.Pu=function(t){this.mu(t)},e}(),NG=function(e){function t(n){var r=this;return(r=e.call(this,n)||this).forceLongPolling=n.forceLongPolling,r.i=n.i,r}return Z(t,e),t.prototype.Su=function(n,r,i,s){return new Promise(function(a,c){var l=new Zq;l.listenOnce(Xq.COMPLETE,function(){try{switch(l.getLastErrorCode()){case Gm.NO_ERROR:var p=l.getResponseJson();X("Connection","XHR received:",JSON.stringify(p)),a(p);break;case Gm.TIMEOUT:X("Connection",'RPC "'+n+'" timed out'),c(new G(k.DEADLINE_EXCEEDED,"Request time out"));break;case Gm.HTTP_ERROR:var v=l.getStatus();if(X("Connection",'RPC "'+n+'" failed with status:',v,"response text:",l.getResponseText()),v>0){var m=l.getResponseJson().error;if(m&&m.status&&m.message){var y=function(b){var E=b.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(E)>=0?E:k.UNKNOWN}(m.status);c(new G(y,m.message))}else c(new G(k.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new G(k.UNAVAILABLE,"Connection failed."));break;default:ut()}}finally{X("Connection",'RPC "'+n+'" completed.')}});var h=JSON.stringify(s);l.send(r,"POST",h,i,15)})},t.prototype.Cu=function(n,r){var i=[this.gu,"/","google.firestore.v1.Firestore","/",n,"/channel"],s=Qq(),a=Yq(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(c.initMessageHeaders,r),z_()||kN()||XV()||JV()||ZV()||K_()||(c.httpHeadersOverwriteParam="$httpHeaders");var l=i.join("");X("Connection","Creating WebChannel: "+l,c);var h=s.createWebChannel(l,c),p=!1,v=!1,m=new CG({fu:function(b){v?X("Connection","Not sending because WebChannel is closed:",b):(p||(X("Connection","Opening WebChannel transport."),h.open(),p=!0),X("Connection","WebChannel sending:",b),h.send(b))},du:function(){return h.close()}}),y=function(b,E,I){b.listen(E,function(C){try{I(C)}catch(P){setTimeout(function(){throw P},0)}})};return y(h,Th.EventType.OPEN,function(){v||X("Connection","WebChannel transport opened.")}),y(h,Th.EventType.CLOSE,function(){v||(v=!0,X("Connection","WebChannel transport closed"),m.Ru())}),y(h,Th.EventType.ERROR,function(b){v||(v=!0,wp("Connection","WebChannel transport errored:",b),m.Ru(new G(k.UNAVAILABLE,"The operation could not be completed")))}),y(h,Th.EventType.MESSAGE,function(b){var E;if(!v){var I=b.data[0];yt(!!I);var C=I,P=C.error||((E=C[0])===null||E===void 0?void 0:E.error);if(P){X("Connection","WebChannel received error:",P);var D=P.status,F=function(U){var _t=Oe[U];if(_t!==void 0)return ex(_t)}(D),Y=P.message;F===void 0&&(F=k.INTERNAL,Y="Unknown error status: "+D+" with message "+P.message),v=!0,m.Ru(new G(F,Y)),h.close()}else X("Connection","WebChannel received:",I),m.Pu(I)}}),y(a,Jq.STAT_EVENT,function(b){b.stat===TA.PROXY?X("Connection","Detected buffering proxy"):b.stat===TA.NOPROXY&&X("Connection","Detected no buffering proxy")}),setTimeout(function(){m.Au()},0),m},t}(function(){function e(t){this.yu=t,this.t=t.t;var n=t.ssl?"https":"http";this.gu=n+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return e.prototype.pu=function(t,n,r,i){var s=this.bu(t,n);X("RestConnection","Sending: ",s,r);var a={};return this.vu(a,i),this.Su(t,s,a,r).then(function(c){return X("RestConnection","Received: ",c),c},function(c){throw wp("RestConnection",t+" failed with error: ",c,"url: ",s,"request:",r),c})},e.prototype.Du=function(t,n,r,i){return this.pu(t,n,r,i)},e.prototype.vu=function(t,n){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.7",t["Content-Type"]="text/plain",n)for(var r in n.g)n.g.hasOwnProperty(r)&&(t[r]=n.g[r])},e.prototype.bu=function(t,n){var r=AG[t];return this.gu+"/v1/"+n+":"+r},e}());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(){return typeof window<"u"?window:null}function $h(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(e){return new PH(e,!0)}var rb=function(){function e(t,n,r,i,s){r===void 0&&(r=1e3),i===void 0&&(i=1.5),s===void 0&&(s=6e4),this.Zr=t,this.fs=n,this.xu=r,this.Nu=i,this.$u=s,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return e.prototype.reset=function(){this.Fu=0},e.prototype.Mu=function(){this.Fu=this.$u},e.prototype.Lu=function(t){var n=this;this.cancel();var r=Math.floor(this.Fu+this.Bu()),i=Math.max(0,Date.now()-this.ku),s=Math.max(0,r-i);s>0&&X("ExponentialBackoff","Backing off for "+s+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+r+" ms, last attempt: "+i+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,s,function(){return n.ku=Date.now(),t()}),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},e.prototype.qu=function(){this.Ou!==null&&(this.Ou.Rs(),this.Ou=null)},e.prototype.cancel=function(){this.Ou!==null&&(this.Ou.cancel(),this.Ou=null)},e.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},e}(),Mx=function(){function e(t,n,r,i,s,a){this.Zr=t,this.Uu=r,this.Qu=i,this.Ku=s,this.listener=a,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new rb(t,n)}return e.prototype.zu=function(){return this.state===1||this.state===2||this.state===4},e.prototype.Hu=function(){return this.state===2},e.prototype.start=function(){this.state!==3?this.auth():this.Ju()},e.prototype.stop=function(){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.Yu=function(){this.state=0,this.Gu.reset()},e.prototype.Xu=function(){var t=this;this.Hu()&&this.ju===null&&(this.ju=this.Zr.Tr(this.Uu,6e4,function(){return t.Zu()}))},e.prototype.th=function(t){this.eh(),this.stream.send(t)},e.prototype.Zu=function(){return R(this,void 0,void 0,function(){return N(this,function(t){return this.Hu()?[2,this.close(0)]:[2]})})},e.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},e.prototype.close=function(t,n){return R(this,void 0,void 0,function(){return N(this,function(r){switch(r.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,t!==3?this.Gu.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(Pe(n.toString()),Pe("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):n&&n.code===k.UNAUTHENTICATED&&this.Ku.p(),this.stream!==null&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(n)];case 1:return r.sent(),[2]}})})},e.prototype.nh=function(){},e.prototype.auth=function(){var t=this;this.state=1;var n=this.sh(this.Wu),r=this.Wu;this.Ku.getToken().then(function(i){t.Wu===r&&t.ih(i)},function(i){n(function(){var s=new G(k.UNKNOWN,"Fetching auth token failed: "+i.message);return t.rh(s)})})},e.prototype.ih=function(t){var n=this,r=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu(function(){r(function(){return n.state=2,n.listener.wu()})}),this.stream.Tu(function(i){r(function(){return n.rh(i)})}),this.stream.onMessage(function(i){r(function(){return n.onMessage(i)})})},e.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu(function(){return R(t,void 0,void 0,function(){return N(this,function(n){return this.state=0,this.start(),[2]})})})},e.prototype.rh=function(t){return X("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.sh=function(t){var n=this;return function(r){n.Zr.Ps(function(){return n.Wu===t?r():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},e}(),RG=function(e){function t(n,r,i,s,a){var c=this;return(c=e.call(this,n,"listen_stream_connection_backoff","listen_stream_idle",r,i,a)||this).Qt=s,c}return Z(t,e),t.prototype.oh=function(n){return this.Qu.Cu("Listen",n)},t.prototype.onMessage=function(n){this.Gu.reset();var r=function(s,a){var c;if("targetChange"in a){a.targetChange;var l=function(I){return I==="NO_CHANGE"?0:I==="ADD"?1:I==="REMOVE"?2:I==="CURRENT"?3:I==="RESET"?4:ut()}(a.targetChange.targetChangeType||"NO_CHANGE"),h=a.targetChange.targetIds||[],p=function(I,C){return I.Bt?(yt(C===void 0||typeof C=="string"),Pn.fromBase64String(C||"")):(yt(C===void 0||C instanceof Uint8Array),Pn.fromUint8Array(C||new Uint8Array))}(s,a.targetChange.resumeToken),v=(m=a.targetChange.cause)&&function(I){var C=I.code===void 0?k.UNKNOWN:ex(I.code);return new G(C,I.message||"")}(m);c=new ox(l,h,p,v||null)}else if("documentChange"in a){a.documentChange,(l=a.documentChange).document,l.document.name,l.document.updateTime,h=li(s,l.document.name),p=Xe(l.document.updateTime);var m=new xo({mapValue:{fields:l.document.fields}}),y=(v=new te(h,p,m,{}),l.targetIds||[]),b=l.removedTargetIds||[];c=new Wh(y,b,v.key,v)}else if("documentDelete"in a)a.documentDelete,(l=a.documentDelete).document,h=li(s,l.document),p=l.readTime?Xe(l.readTime):Ot.min(),m=new Be(h,p),v=l.removedTargetIds||[],c=new Wh([],v,m.key,m);else if("documentRemove"in a)a.documentRemove,(l=a.documentRemove).document,h=li(s,l.document),p=l.removedTargetIds||[],c=new Wh([],p,h,null);else{if(!("filter"in a))return ut();a.filter;var E=a.filter;E.targetId,l=E.count||0,h=new IH(l),p=E.targetId,c=new ix(p,h)}return c}(this.Qt,n),i=function(s){if(!("targetChange"in s))return Ot.min();var a=s.targetChange;return a.targetIds&&a.targetIds.length?Ot.min():a.readTime?Xe(a.readTime):Ot.min()}(n);return this.listener.ah(r,i)},t.prototype.uh=function(n){var r={};r.database=xl(this.Qt),r.addTarget=function(s,a){var c,l=a.target;return(c=Ip(l)?{documents:fx(s,l)}:{query:hx(s,l)}).targetId=a.targetId,a.resumeToken.l()>0?c.resumeToken=sx(s,a.resumeToken):a.Ot._(Ot.min())>0&&(c.readTime=Rl(s,a.Ot.j())),c}(this.Qt,n);var i=function(s,a){var c=function(l,h){switch(h){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ut()}}(0,a.Ft);return c==null?null:{"goog-listen-tags":c}}(this.Qt,n);i&&(r.labels=i),this.th(r)},t.prototype.hh=function(n){var r={};r.database=xl(this.Qt),r.removeTarget=n,this.th(r)},t}(Mx),OG=function(e){function t(n,r,i,s,a){var c=this;return(c=e.call(this,n,"write_stream_connection_backoff","write_stream_idle",r,i,a)||this).Qt=s,c.lh=!1,c}return Z(t,e),Object.defineProperty(t.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.nh=function(){this.lh&&this.fh([])},t.prototype.oh=function(n){return this.Qu.Cu("Write",n)},t.prototype.onMessage=function(n){if(yt(!!n.streamToken),this.lastStreamToken=n.streamToken,this.lh){this.Gu.reset();var r=function(s,a){return s&&s.length>0?(yt(a!==void 0),s.map(function(c){return function(l,h){var p=l.updateTime?Xe(l.updateTime):Xe(h);p.isEqual(Ot.min())&&(p=Xe(h));var v=null;return l.transformResults&&l.transformResults.length>0&&(v=l.transformResults),new wH(p,v)}(c,a)})):[]}(n.writeResults,n.commitTime),i=Xe(n.commitTime);return this.listener.dh(i,r)}return yt(!n.writeResults||n.writeResults.length===0),this.lh=!0,this.listener.wh()},t.prototype.Eh=function(){var n={};n.database=xl(this.Qt),this.th(n)},t.prototype.fh=function(n){var r=this,i={streamToken:this.lastStreamToken,writes:n.map(function(s){return Np(r.Qt,s)})};this.th(i)},t}(Mx),xG=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).credentials=n,s.Qu=r,s.Qt=i,s.Th=!1,s}return Z(t,e),t.prototype.Ih=function(){if(this.Th)throw new G(k.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.pu=function(n,r,i){var s=this;return this.Ih(),this.credentials.getToken().then(function(a){return s.Qu.pu(n,r,i,a)}).catch(function(a){throw a.code===k.UNAUTHENTICATED&&s.credentials.p(),a})},t.prototype.Du=function(n,r,i){var s=this;return this.Ih(),this.credentials.getToken().then(function(a){return s.Qu.Du(n,r,i,a)}).catch(function(a){throw a.code===k.UNAUTHENTICATED&&s.credentials.p(),a})},t.prototype.terminate=function(){this.Th=!1},t}(function(){}),PG=function(){function e(t,n){this._s=t,this.fa=n,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return e.prototype.Ph=function(){var t=this;this.mh===0&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()}))},e.prototype.Vh=function(t){this.state==="Online"?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},e.prototype.set=function(t){this.ph(),this.mh=0,t==="Online"&&(this.Rh=!1),this.yh(t)},e.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},e.prototype.gh=function(t){var n="Could not reach Cloud Firestore backend. "+t+`
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Rh?(Pe(n),this.Rh=!1):X("OnlineStateTracker",n)},e.prototype.ph=function(){this.Ah!==null&&(this.Ah.cancel(),this.Ah=null)},e}(),kG=function(e,t,n,r,i){var s=this;this.bh=e,this.Sh=t,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou(function(a){n.Ps(function(){return R(s,void 0,void 0,function(){return N(this,function(c){switch(c.label){case 0:return Uo(this)?(X("RemoteStore","Restarting streams for network reachability change."),[4,function(l){return R(this,void 0,void 0,function(){var h;return N(this,function(p){switch(p.label){case 0:return(h=tt(l)).Nh.add(4),[4,ju(h)];case 1:return p.sent(),h.Oh.set("Unknown"),h.Nh.delete(4),[4,uf(h)];case 2:return p.sent(),[2]}})})}(this)]):[3,2];case 1:c.sent(),c.label=2;case 2:return[2]}})})})}),this.Oh=new PG(n,r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(e){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:if(!Uo(e))return[3,4];t=0,n=e.$h,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function ju(e){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:t=0,n=e.$h,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}})})}function wd(e,t){var n=tt(e);n.xh.has(t.targetId)||(n.xh.set(t.targetId,t),sb(n)?ob(n):Bu(n).Hu()&&ib(n,t))}function Pl(e,t){var n=tt(e),r=Bu(n);n.xh.delete(t),r.Hu()&&Fx(n,t),n.xh.size===0&&(r.Hu()?r.Xu():Uo(n)&&n.Oh.set("Unknown"))}function ib(e,t){e.kh.on(t.targetId),Bu(e).uh(t)}function Fx(e,t){e.kh.on(t),Bu(e).hh(t)}function ob(e){e.kh=new RH({vn:function(t){return e.Dh.vn(t)},Sn:function(t){return e.xh.get(t)||null}}),Bu(e).start(),e.Oh.Ph()}function sb(e){return Uo(e)&&!Bu(e).zu()&&e.xh.size>0}function Uo(e){return tt(e).Nh.size===0}function Ux(e){e.kh=void 0}function DG(e){return R(this,void 0,void 0,function(){return N(this,function(t){return e.xh.forEach(function(n,r){ib(e,n)}),[2]})})}function LG(e,t){return R(this,void 0,void 0,function(){return N(this,function(n){return Ux(e),sb(e)?(e.Oh.Vh(t),ob(e)):e.Oh.set("Unknown"),[2]})})}function MG(e,t,n){return R(this,void 0,void 0,function(){var r,i,s;return N(this,function(a){switch(a.label){case 0:if(e.Oh.set("Online"),!(t instanceof ox&&t.state===2&&t.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(c,l){return R(this,void 0,void 0,function(){var h,p,v,m;return N(this,function(y){switch(y.label){case 0:h=l.cause,p=0,v=l.targetIds,y.label=1;case 1:return p<v.length?(m=v[p],c.xh.has(m)?[4,c.Dh.Mh(m,h)]:[3,3]):[3,5];case 2:y.sent(),c.xh.delete(m),c.kh.removeTarget(m),y.label=3;case 3:y.label=4;case 4:return p++,[3,1];case 5:return[2]}})})}(e,t)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),X("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,Pp(e,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Wh?e.kh.dn(t):t instanceof ix?e.kh.Pn(t):e.kh.Tn(t),n.isEqual(Ot.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Ox(e.bh)];case 8:return i=a.sent(),n._(i)>=0?[4,function(c,l){var h=c.kh.Vn(l);return h.$e.forEach(function(p,v){if(p.resumeToken.l()>0){var m=c.xh.get(v);m&&c.xh.set(v,m.Mt(p.resumeToken,l))}}),h.Fe.forEach(function(p){var v=c.xh.get(p);if(v){c.xh.set(p,v.Mt(Pn.T,v.Ot)),Fx(c,p);var m=new gd(v.target,p,1,v.sequenceNumber);ib(c,m)}}),c.Dh.Lh(h)}(e,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return X("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,Pp(e,s)];case 12:return a.sent(),[3,13];case 13:return[2]}})})}function Pp(e,t,n){return R(this,void 0,void 0,function(){var r=this;return N(this,function(i){switch(i.label){case 0:if(!Ws(t))throw t;return e.Nh.add(1),[4,ju(e)];case 1:return i.sent(),e.Oh.set("Offline"),n||(n=function(){return Ox(e.bh)}),e._s.po(function(){return R(r,void 0,void 0,function(){return N(this,function(s){switch(s.label){case 0:return X("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return s.sent(),e.Nh.delete(1),[4,uf(e)];case 2:return s.sent(),[2]}})})}),[2]}})})}function jx(e,t){return t().catch(function(n){return Pp(e,n,t)})}function Vu(e){return R(this,void 0,void 0,function(){var t,n,r,i,s;return N(this,function(a){switch(a.label){case 0:t=tt(e),n=Po(t),r=t.Ch.length>0?t.Ch[t.Ch.length-1].batchId:-1,a.label=1;case 1:if(!function(c){return Uo(c)&&c.Ch.length<10}(t))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,hG(t.bh,r)];case 3:return(i=a.sent())===null?(t.Ch.length===0&&n.Xu(),[3,7]):(r=i.batchId,function(c,l){c.Ch.push(l);var h=Po(c);h.Hu()&&h._h&&h.fh(l.mutations)}(t,i),[3,6]);case 4:return s=a.sent(),[4,Pp(t,s)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Vx(t)&&Bx(t),[2]}})})}function Vx(e){return Uo(e)&&!Po(e).zu()&&e.Ch.length>0}function Bx(e){Po(e).start()}function FG(e){return R(this,void 0,void 0,function(){return N(this,function(t){return Po(e).Eh(),[2]})})}function UG(e){return R(this,void 0,void 0,function(){var t,n,r,i;return N(this,function(s){for(t=Po(e),n=0,r=e.Ch;n<r.length;n++)i=r[n],t.fh(i.mutations);return[2]})})}function jG(e,t,n){return R(this,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:return r=e.Ch.shift(),i=zH.from(r,t,n),[4,jx(e,function(){return e.Dh.Bh(i)})];case 1:return s.sent(),[4,Vu(e)];case 2:return s.sent(),[2]}})})}function VG(e,t){return R(this,void 0,void 0,function(){return N(this,function(n){switch(n.label){case 0:return t&&Po(e)._h?[4,function(r,i){return R(this,void 0,void 0,function(){var s,a;return N(this,function(c){switch(c.label){case 0:return tx(a=i.code)&&a!==k.ABORTED?(s=r.Ch.shift(),Po(r).Yu(),[4,jx(r,function(){return r.Dh.qh(s.batchId,i)})]):[3,3];case 1:return c.sent(),[4,Vu(r)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Vx(e)&&Bx(e),[2]}})})}function a_(e,t){return R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return n=tt(e),t?(n.Nh.delete(2),[4,uf(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Nh.add(2),[4,ju(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Bu(e){var t=this;return e.Uh||(e.Uh=function(n,r,i){var s=tt(n);return s.Ih(),new RG(r,s.Qu,s.credentials,s.Qt,i)}(e.Sh,e._s,{wu:DG.bind(null,e),Tu:LG.bind(null,e),ah:MG.bind(null,e)}),e.$h.push(function(n){return R(t,void 0,void 0,function(){return N(this,function(r){switch(r.label){case 0:return n?(e.Uh.Yu(),sb(e)?ob(e):e.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Uh.stop()];case 2:r.sent(),Ux(e),r.label=3;case 3:return[2]}})})})),e.Uh}function Po(e){var t=this;return e.Qh||(e.Qh=function(n,r,i){var s=tt(n);return s.Ih(),new OG(r,s.Qu,s.credentials,s.Qt,i)}(e.Sh,e._s,{wu:FG.bind(null,e),Tu:VG.bind(null,e),wh:UG.bind(null,e),dh:jG.bind(null,e)}),e.$h.push(function(n){return R(t,void 0,void 0,function(){return N(this,function(r){switch(r.label){case 0:return n?(e.Qh.Yu(),[4,Vu(e)]):[3,2];case 1:return r.sent(),[3,4];case 2:return[4,e.Qh.stop()];case 3:r.sent(),e.Ch.length>0&&(X("RemoteStore","Stopping write stream with "+e.Ch.length+" pending writes"),e.Ch=[]),r.label=4;case 4:return[2]}})})})),e.Qh}var BG=function(){this.Kh=void 0,this.listeners=[]},qG=function(){this.queries=new Uu(function(e){return GO(e)},ef),this.onlineState="Unknown",this.Wh=new Set};function ab(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return N(this,function(h){switch(h.label){case 0:if(n=tt(e),r=t.query,i=!1,(s=n.queries.get(r))||(i=!0,s=new BG),!i)return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),a=s,[4,n.jh(r)];case 2:return a.Kh=h.sent(),[3,4];case 3:return c=h.sent(),l=Fu(c,"Initialization of query '"+n_(t.query)+"' failed"),[2,void t.onError(l)];case 4:return n.queries.set(r,s),s.listeners.push(t),t.Gh(n.onlineState),s.Kh&&t.zh(s.Kh)&&cb(n),[2]}})})}function ub(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a;return N(this,function(c){return n=tt(e),r=t.query,i=!1,(s=n.queries.get(r))&&(a=s.listeners.indexOf(t))>=0&&(s.listeners.splice(a,1),i=s.listeners.length===0),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]})})}function HG(e,t){for(var n=tt(e),r=!1,i=0,s=t;i<s.length;i++){var a=s[i],c=a.query,l=n.queries.get(c);if(l){for(var h=0,p=l.listeners;h<p.length;h++)p[h].zh(a)&&(r=!0);l.Kh=a}}r&&cb(n)}function GG(e,t,n){var r=tt(e),i=r.queries.get(t);if(i)for(var s=0,a=i.listeners;s<a.length;s++)a[s].onError(n);r.queries.delete(t)}function cb(e){e.Wh.forEach(function(t){t.next()})}var lb=function(){function e(t,n,r){this.query=t,this.Jh=n,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=r||{}}return e.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var n=[],r=0,i=t.docChanges;r<i.length;r++){var s=i[r];s.type!==3&&n.push(s)}t=new Cp(t.query,t.docs,t.Se,n,t.De,t.fromCache,t.Ce,!0)}var a=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),a=!0):this.tl(t,this.onlineState)&&(this.el(t),a=!0),this.Xh=t,a},e.prototype.onError=function(t){this.Jh.error(t)},e.prototype.Gh=function(t){this.onlineState=t;var n=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),n=!0),n},e.prototype.tl=function(t,n){if(!t.fromCache)return!0;var r=n!=="Offline";return!(this.options.nl&&r||t.docs.et()&&n!=="Offline")},e.prototype.Zh=function(t){if(t.docChanges.length>0)return!0;var n=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!n)&&this.options.includeMetadataChanges===!0},e.prototype.el=function(t){t=Cp.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},e}(),WG=function(){function e(t,n){this.payload=t,this.byteLength=n}return e.prototype.sl=function(){return"metadata"in this.payload},e}(),l1=function(){function e(t){this.Qt=t}return e.prototype.Pc=function(t){return li(this.Qt,t)},e.prototype.yc=function(t){return t.metadata.exists?lx(this.Qt,t.document,!1):new Be(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},e.prototype.gc=function(t){return Xe(t)},e}(),$G=function(){function e(t,n,r){this.il=t,this.bh=n,this.Qt=r,this.queries=[],this.documents=[],this.progress=qx(t)}return e.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var n=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++n):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++n),n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null},e.prototype.ol=function(t){for(var n=new Map,r=new l1(this.Qt),i=0,s=t;i<s.length;i++){var a=s[i];if(a.metadata.queries)for(var c=r.Pc(a.metadata.name),l=0,h=a.metadata.queries;l<h.length;l++){var p=h[l],v=(n.get(p)||Yt()).add(c);n.set(p,v)}}return n},e.prototype.complete=function(){return R(this,void 0,void 0,function(){var t,n,r,i,s;return N(this,function(a){switch(a.label){case 0:return[4,dG(this.bh,new l1(this.Qt),this.documents,this.il.id)];case 1:t=a.sent(),n=this.ol(this.documents),r=0,i=this.queries,a.label=2;case 2:return r<i.length?(s=i[r],[4,vG(this.bh,s,n.get(s.name))]):[3,5];case 3:a.sent(),a.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new aG(Object.assign({},this.progress),t))]}})})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hx=function(e){this.key=e},Gx=function(e){this.key=e},Wx=function(){function e(t,n){this.query=t,this.cl=n,this.al=null,this.Be=!1,this.ul=Yt(),this.De=Yt(),this.hl=WO(t),this.ll=new rx(this.hl)}return Object.defineProperty(e.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),e.prototype.fl=function(t,n){var r=this,i=n?n.dl:new jA,s=n?n.ll:this.ll,a=n?n.De:this.De,c=s,l=!1,h=Hh(this.query)&&s.size===this.query.limit?s.last():null,p=Sp(this.query)&&s.size===this.query.limit?s.first():null;if(t.Xt(function(m,y){var b=s.get(m),E=y instanceof te?y:null;E&&(E=nf(r.query,E)?E:null);var I=!!b&&r.De.has(b.key),C=!!E&&(E.Vt||r.De.has(E.key)&&E.hasCommittedMutations),P=!1;b&&E?b.data().isEqual(E.data())?I!==C&&(i.track({type:3,doc:E}),P=!0):r.wl(b,E)||(i.track({type:2,doc:E}),P=!0,(h&&r.hl(E,h)>0||p&&r.hl(E,p)<0)&&(l=!0)):!b&&E?(i.track({type:0,doc:E}),P=!0):b&&!E&&(i.track({type:1,doc:b}),P=!0,(h||p)&&(l=!0)),P&&(E?(c=c.add(E),a=C?a.add(m):a.delete(m)):(c=c.delete(m),a=a.delete(m)))}),Hh(this.query)||Sp(this.query))for(;c.size>this.query.limit;){var v=Hh(this.query)?c.last():c.first();c=c.delete(v.key),a=a.delete(v.key),i.track({type:1,doc:v})}return{ll:c,dl:i,lc:l,De:a}},e.prototype.wl=function(t,n){return t.Vt&&n.hasCommittedMutations&&!n.Vt},e.prototype.wi=function(t,n,r){var i=this,s=this.ll;this.ll=t.ll,this.De=t.De;var a=t.dl.ve();a.sort(function(p,v){return function(m,y){var b=function(E){switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ut()}};return b(m)-b(y)}(p.type,v.type)||i.hl(p.doc,v.doc)}),this.El(r);var c=n?this.Tl():[],l=this.ul.size===0&&this.Be?1:0,h=l!==this.al;return this.al=l,a.length!==0||h?{snapshot:new Cp(this.query,t.ll,s,a,t.De,l===0,h,!1),Il:c}:{Il:c}},e.prototype.Gh=function(t){return this.Be&&t==="Offline"?(this.Be=!1,this.wi({ll:this.ll,dl:new jA,De:this.De,lc:!1},!1)):{Il:[]}},e.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},e.prototype.El=function(t){var n=this;t&&(t.qe.forEach(function(r){return n.cl=n.cl.add(r)}),t.Ue.forEach(function(r){}),t.Qe.forEach(function(r){return n.cl=n.cl.delete(r)}),this.Be=t.Be)},e.prototype.Tl=function(){var t=this;if(!this.Be)return[];var n=this.ul;this.ul=Yt(),this.ll.forEach(function(i){t.ml(i.key)&&(t.ul=t.ul.add(i.key))});var r=[];return n.forEach(function(i){t.ul.has(i)||r.push(new Gx(i))}),this.ul.forEach(function(i){n.has(i)||r.push(new Hx(i))}),r},e.prototype.Al=function(t){this.cl=t.Rc,this.ul=Yt();var n=this.fl(t.documents);return this.wi(n,!0)},e.prototype.Rl=function(){return Cp.Ne(this.query,this.ll,this.De,this.al===0)},e}(),zG=function(e,t,n){this.query=e,this.targetId=t,this.view=n},KG=function(e){this.key=e,this.Pl=!1},QG=function(){function e(t,n,r,i,s,a){this.bh=t,this.yl=n,this.gl=r,this.Vl=i,this.currentUser=s,this.pl=a,this.bl={},this.vl=new Uu(function(c){return GO(c)},ef),this.Sl=new Map,this.Dl=new Set,this.Cl=new wn(ht.H),this.xl=new Map,this.Nl=new nb,this.$l={},this.Fl=new Map,this.Ol=Op.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(e.prototype,"Ml",{get:function(){return this.kl===!0},enumerable:!1,configurable:!0}),e}();function YG(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c;return N(this,function(l){switch(l.label){case 0:return n=vb(e),(s=n.vl.get(t))?(r=s.targetId,n.Vl.Fa(r),i=s.view.Rl(),[3,4]):[3,1];case 1:return[4,bu(n.bh,_r(t))];case 2:return a=l.sent(),c=n.Vl.Fa(a.targetId),r=a.targetId,[4,fb(n,t,r,c==="current")];case 3:i=l.sent(),n.Ml&&wd(n.yl,a),l.label=4;case 4:return[2,i]}})})}function fb(e,t,n,r){return R(this,void 0,void 0,function(){var i,s,a,c,l,h;return N(this,function(p){switch(p.label){case 0:return e.Ll=function(v,m,y){return function(b,E,I,C){return R(this,void 0,void 0,function(){var P,D,F;return N(this,function(Y){switch(Y.label){case 0:return P=E.view.fl(I),P.lc?[4,xp(b.bh,E.query,!1).then(function(U){var _t=U.documents;return E.view.fl(_t,P)})]:[3,2];case 1:P=Y.sent(),Y.label=2;case 2:return D=C&&C.$e.get(E.targetId),F=E.view.wi(P,b.Ml,D),[2,(u_(b,E.targetId,F.Il),F.snapshot)]}})})}(e,v,m,y)},[4,xp(e.bh,t,!0)];case 1:return i=p.sent(),s=new Wx(t,i.Rc),a=s.fl(i.documents),c=Kw.Le(n,r&&e.onlineState!=="Offline"),l=s.wi(a,e.Ml,c),u_(e,n,l.Il),h=new zG(t,n,s),[2,(e.vl.set(t,h),e.Sl.has(n)?e.Sl.get(n).push(t):e.Sl.set(n,[t]),l.snapshot)]}})})}function XG(e,t){return R(this,void 0,void 0,function(){var n,r,i;return N(this,function(s){switch(s.label){case 0:return n=tt(e),r=n.vl.get(t),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter(function(a){return!ef(a,t)})),void n.vl.delete(t))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,Eu(n.bh,r.targetId,!1).then(function(){n.Vl.La(r.targetId),Pl(n.yl,r.targetId),Iu(n,r.targetId)}).catch($s)]):[3,3];case 1:s.sent(),s.label=2;case 2:return[3,5];case 3:return Iu(n,r.targetId),[4,Eu(n.bh,r.targetId,!0)];case 4:s.sent(),s.label=5;case 5:return[2]}})})}function JG(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a;return N(this,function(c){switch(c.label){case 0:r=gb(e),c.label=1;case 1:return c.trys.push([1,5,,6]),[4,function(l,h){var p,v=tt(l),m=Gn.now(),y=h.reduce(function(b,E){return b.add(E.key)},Yt());return v.persistence.runTransaction("Locally write mutations","readwrite",function(b){return v.Tc.Xo(b,y).next(function(E){p=E;for(var I=[],C=0,P=h;C<P.length;C++){var D=P[C],F=EH(D,p.get(D.key));F!=null&&I.push(new Fo(D.key,F,VO(F.proto.mapValue),dn.exists(!0)))}return v.zo.Ri(b,m,I,h)})}).then(function(b){var E=b.xs(p);return{batchId:b.batchId,ri:E}})}(r.bh,t)];case 2:return i=c.sent(),r.Vl.Ca(i.batchId),function(l,h,p){var v=l.$l[l.currentUser.A()];v||(v=new wn(kt)),v=v.zt(h,p),l.$l[l.currentUser.A()]=v}(r,i.batchId,n),[4,$i(r,i.ri)];case 3:return c.sent(),[4,Vu(r.yl)];case 4:return c.sent(),[3,6];case 5:return s=c.sent(),a=Fu(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}})})}function $x(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:n=tt(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,fG(n.bh,t)];case 2:return r=i.sent(),t.$e.forEach(function(s,a){var c=n.xl.get(a);c&&(yt(s.qe.size+s.Ue.size+s.Qe.size<=1),s.qe.size>0?c.Pl=!0:s.Ue.size>0?yt(c.Pl):s.Qe.size>0&&(yt(c.Pl),c.Pl=!1))}),[4,$i(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,$s(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function f1(e,t,n){var r=tt(e);if(r.Ml&&n===0||!r.Ml&&n===1){var i=[];r.vl.forEach(function(s,a){var c=a.view.Gh(t);c.snapshot&&i.push(c.snapshot)}),function(s,a){var c=tt(s);c.onlineState=a;var l=!1;c.queries.forEach(function(h,p){for(var v=0,m=p.listeners;v<m.length;v++)m[v].Gh(a)&&(l=!0)}),l&&cb(c)}(r.gl,t),i.length&&r.bl.ah(i),r.onlineState=t,r.Ml&&r.Vl.Qa(t)}}function ZG(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a,c,l;return N(this,function(h){switch(h.label){case 0:return(r=tt(e)).Vl.Ba(t,"rejected",n),i=r.xl.get(t),(s=i&&i.key)?(a=(a=new wn(ht.H)).zt(s,new Be(s,Ot.min())),c=Yt().add(s),l=new zw(Ot.min(),new Map,new qe(kt),a,c),[4,$x(r,l)]):[3,2];case 1:return h.sent(),r.Cl=r.Cl.remove(s),r.xl.delete(t),db(r),[3,4];case 2:return[4,Eu(r.bh,t,!1).then(function(){return Iu(r,t,n)}).catch($s)];case 3:h.sent(),h.label=4;case 4:return[2]}})})}function tW(e,t){return R(this,void 0,void 0,function(){var n,r,i;return N(this,function(s){switch(s.label){case 0:n=tt(e),r=t.batch.batchId,s.label=1;case 1:return s.trys.push([1,4,,6]),[4,lG(n.bh,t)];case 2:return i=s.sent(),pb(n,r,null),hb(n,r),n.Vl.Na(r,"acknowledged"),[4,$i(n,i)];case 3:return s.sent(),[3,6];case 4:return[4,$s(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function eW(e,t,n){return R(this,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:r=tt(e),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,function(a,c){var l=tt(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",function(h){var p;return l.zo.Pi(h,c).next(function(v){return yt(v!==null),p=v.keys(),l.zo.Ci(h,v)}).next(function(){return l.zo.$i(h)}).next(function(){return l.Tc.Xo(h,p)})})}(r.bh,t)];case 2:return i=s.sent(),pb(r,t,n),hb(r,t),r.Vl.Na(t,"rejected",n),[4,$i(r,i)];case 3:return s.sent(),[3,6];case 4:return[4,$s(s.sent())];case 5:return s.sent(),[3,6];case 6:return[2]}})})}function nW(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a;return N(this,function(c){switch(c.label){case 0:Uo((n=tt(e)).yl)||X("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,function(l){var h=tt(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(p){return h.zo.Vi(p)})}(n.bh)];case 2:return(r=c.sent())===-1?[2,void t.resolve()]:((i=n.Fl.get(r)||[]).push(t),n.Fl.set(r,i),[3,4]);case 3:return s=c.sent(),a=Fu(s,"Initialization of waitForPendingWrites() operation failed"),t.reject(a),[3,4];case 4:return[2]}})})}function hb(e,t){(e.Fl.get(t)||[]).forEach(function(n){n.resolve()}),e.Fl.delete(t)}function pb(e,t,n){var r=tt(e),i=r.$l[r.currentUser.A()];if(i){var s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.$l[r.currentUser.A()]=i}}function Iu(e,t,n){n===void 0&&(n=null),e.Vl.ka(t);for(var r=0,i=e.Sl.get(t);r<i.length;r++){var s=i[r];e.vl.delete(s),n&&e.bl.Bl(s,n)}e.Sl.delete(t),e.Ml&&e.Nl.Fc(t).forEach(function(a){e.Nl.Fi(a)||zx(e,a)})}function zx(e,t){e.Dl.delete(t.path.rt());var n=e.Cl.get(t);n!==null&&(Pl(e.yl,n),e.Cl=e.Cl.remove(t),e.xl.delete(n),db(e))}function u_(e,t,n){for(var r=0,i=n;r<i.length;r++){var s=i[r];s instanceof Hx?(e.Nl.nr(s.key,t),rW(e,s)):s instanceof Gx?(X("SyncEngine","Document no longer in limbo: "+s.key),e.Nl.ir(s.key,t),e.Nl.Fi(s.key)||zx(e,s.key)):ut()}}function rW(e,t){var n=t.key,r=n.path.rt();e.Cl.get(n)||e.Dl.has(r)||(X("SyncEngine","New document in limbo: "+n),e.Dl.add(r),db(e))}function db(e){for(;e.Dl.size>0&&e.Cl.size<e.pl;){var t=e.Dl.values().next().value;e.Dl.delete(t);var n=new ht(Ht.ot(t)),r=e.Ol.next();e.xl.set(r,new KG(n)),e.Cl=e.Cl.zt(n,r),wd(e.yl,new gd(_r(Mu(n.path)),r,2,ir.q))}}function $i(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a;return N(this,function(c){switch(c.label){case 0:return r=tt(e),i=[],s=[],a=[],r.vl.et()?[3,3]:(r.vl.forEach(function(l,h){a.push(r.Ll(h,t,n).then(function(p){if(p){r.Ml&&r.Vl.Ba(h.targetId,p.fromCache?"not-current":"current"),i.push(p);var v=uG.oc(h.targetId,p);s.push(v)}}))}),[4,Promise.all(a)]);case 1:return c.sent(),r.bl.ah(i),[4,function(l,h){return R(this,void 0,void 0,function(){var p,v,m,y,b,E,I,C,P;return N(this,function(D){switch(D.label){case 0:p=tt(l),D.label=1;case 1:return D.trys.push([1,3,,4]),[4,p.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(F){return $.forEach(h,function(Y){return $.forEach(Y.ic,function(U){return p.persistence.Ti.nr(F,Y.targetId,U)}).next(function(){return $.forEach(Y.rc,function(U){return p.persistence.Ti.ir(F,Y.targetId,U)})})})})];case 2:return D.sent(),[3,4];case 3:if(!Ws(v=D.sent()))throw v;return X("LocalStore","Failed to update sequence numbers: "+v),[3,4];case 4:for(m=0,y=h;m<y.length;m++)b=y[m],E=b.targetId,b.fromCache||(I=p.fc.get(E),C=I.Ot,P=I.Lt(C),p.fc=p.fc.zt(E,P));return[2]}})})}(r.bh,s)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function iW(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return(n=tt(e)).currentUser.isEqual(t)?[3,3]:(X("SyncEngine","User change. New user:",t.A()),[4,Rx(n.bh,t)]);case 1:return r=i.sent(),n.currentUser=t,function(s,a){s.Fl.forEach(function(c){c.forEach(function(l){l.reject(new G(k.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Fl.clear()}(n),n.Vl.Ua(t,r.mc,r.Ac),[4,$i(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function oW(e,t){var n=tt(e),r=n.xl.get(t);if(r&&r.Pl)return Yt().add(r.key);var i=Yt(),s=n.Sl.get(t);if(!s)return i;for(var a=0,c=s;a<c.length;a++){var l=c[a],h=n.vl.get(l);i=i.Pe(h.view._l)}return i}function sW(e,t){return R(this,void 0,void 0,function(){var n,r,i;return N(this,function(s){switch(s.label){case 0:return[4,xp((n=tt(e)).bh,t.query,!0)];case 1:return r=s.sent(),i=t.view.Al(r),[2,(n.Ml&&u_(n,t.targetId,i.Il),i)]}})})}function aW(e){return R(this,void 0,void 0,function(){var t;return N(this,function(n){return[2,kx((t=tt(e)).bh).then(function(r){return $i(t,r)})]})})}function uW(e,t,n,r){return R(this,void 0,void 0,function(){var i,s;return N(this,function(a){switch(a.label){case 0:return[4,function(c,l){var h=tt(c),p=tt(h.zo);return h.persistence.runTransaction("Lookup mutation documents","readonly",function(v){return p.yi(v,l).next(function(m){return m?h.Tc.Xo(v,m):$.resolve(null)})})}((i=tt(e)).bh,t)];case 1:return(s=a.sent())===null?[3,6]:n!=="pending"?[3,3]:[4,Vu(i.yl)];case 2:return a.sent(),[3,4];case 3:n==="acknowledged"||n==="rejected"?(pb(i,t,r||null),hb(i,t),function(c,l){tt(tt(c).zo).xi(l)}(i.bh,t)):ut(),a.label=4;case 4:return[4,$i(i,s)];case 5:return a.sent(),[3,7];case 6:X("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}})})}function cW(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c,l,h;return N(this,function(p){switch(p.label){case 0:return vb(n=tt(e)),gb(n),t!==!0||n.kl===!0?[3,3]:(r=n.Vl.va(),[4,h1(n,r.it())]);case 1:return i=p.sent(),n.kl=!0,[4,a_(n.yl,!0)];case 2:for(p.sent(),s=0,a=i;s<a.length;s++)c=a[s],wd(n.yl,c);return[3,7];case 3:return t!==!1||n.kl===!1?[3,7]:(l=[],h=Promise.resolve(),n.Sl.forEach(function(v,m){n.Vl.Ma(m)?l.push(m):h=h.then(function(){return Iu(n,m),Eu(n.bh,m,!0)}),Pl(n.yl,m)}),[4,h]);case 4:return p.sent(),[4,h1(n,l)];case 5:return p.sent(),function(v){var m=tt(v);m.xl.forEach(function(y,b){Pl(m.yl,b)}),m.Nl.Oc(),m.xl=new Map,m.Cl=new wn(ht.H)}(n),n.kl=!1,[4,a_(n.yl,!1)];case 6:p.sent(),p.label=7;case 7:return[2]}})})}function h1(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a,c,l,h,p,v,m,y,b,E,I;return N(this,function(C){switch(C.label){case 0:r=tt(e),i=[],s=[],a=0,c=t,C.label=1;case 1:return a<c.length?(l=c[a],h=void 0,(p=r.Sl.get(l))&&p.length!==0?[4,bu(r.bh,_r(p[0]))]:[3,7]):[3,13];case 2:h=C.sent(),v=0,m=p,C.label=3;case 3:return v<m.length?(y=m[v],b=r.vl.get(y),[4,sW(r,b)]):[3,6];case 4:(E=C.sent()).snapshot&&s.push(E.snapshot),C.label=5;case 5:return v++,[3,3];case 6:return[3,11];case 7:return[4,Px(r.bh,l)];case 8:return I=C.sent(),[4,bu(r.bh,I)];case 9:return h=C.sent(),[4,fb(r,Kx(I),l,!1)];case 10:C.sent(),C.label=11;case 11:i.push(h),C.label=12;case 12:return a++,[3,1];case 13:return[2,(r.bl.ah(s),i)]}})})}function Kx(e){return qO(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function lW(e){var t=tt(e);return tt(tt(t.bh).persistence).Uo()}function fW(e,t,n,r){return R(this,void 0,void 0,function(){var i,s,a;return N(this,function(c){switch(c.label){case 0:return(i=tt(e)).kl?(X("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,kx(i.bh)];case 3:return s=c.sent(),a=zw.Me(t,n==="current"),[4,$i(i,s,a)];case 4:return c.sent(),[3,8];case 5:return[4,Eu(i.bh,t,!0)];case 6:return c.sent(),Iu(i,t,r),[3,8];case 7:ut(),c.label=8;case 8:return[2]}})})}function hW(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a,c,l,h,p,v,m;return N(this,function(y){switch(y.label){case 0:if(!(r=vb(e)).kl)return[3,10];i=0,s=t,y.label=1;case 1:return i<s.length?(a=s[i],r.Sl.has(a)?(X("SyncEngine","Adding an already active target "+a),[3,5]):[4,Px(r.bh,a)]):[3,6];case 2:return c=y.sent(),[4,bu(r.bh,c)];case 3:return l=y.sent(),[4,fb(r,Kx(c),l.targetId,!1)];case 4:y.sent(),wd(r.yl,l),y.label=5;case 5:return i++,[3,1];case 6:h=function(b){return N(this,function(E){switch(E.label){case 0:return r.Sl.has(b)?[4,Eu(r.bh,b,!1).then(function(){Pl(r.yl,b),Iu(r,b)}).catch($s)]:[3,2];case 1:E.sent(),E.label=2;case 2:return[2]}})},p=0,v=n,y.label=7;case 7:return p<v.length?(m=v[p],[5,h(m)]):[3,10];case 8:y.sent(),y.label=9;case 9:return p++,[3,7];case 10:return[2]}})})}function vb(e){var t=tt(e);return t.yl.Dh.Lh=$x.bind(null,t),t.yl.Dh.vn=oW.bind(null,t),t.yl.Dh.Mh=ZG.bind(null,t),t.bl.ah=HG.bind(null,t.gl),t.bl.Bl=GG.bind(null,t.gl),t}function gb(e){var t=tt(e);return t.yl.Dh.Bh=tW.bind(null,t),t.yl.Dh.qh=eW.bind(null,t),t}function pW(e,t,n){var r=tt(e);(function(i,s,a){return R(this,void 0,void 0,function(){var c,l,h,p,v,m;return N(this,function(y){switch(y.label){case 0:return y.trys.push([0,14,,15]),[4,s.getMetadata()];case 1:return c=y.sent(),[4,function(b,E){var I=tt(b),C=Xe(E.createTime);return I.persistence.runTransaction("hasNewerBundle","readonly",function(P){return I.wo.Os(P,E.id)}).then(function(P){return!!P&&P.createTime._(C)>=0})}(i.bh,c)];case 2:return y.sent()?[4,s.close()]:[3,4];case 3:return[2,(y.sent(),void a.ql(function(b){return{taskState:"Success",documentsLoaded:b.totalDocuments,bytesLoaded:b.totalBytes,totalDocuments:b.totalDocuments,totalBytes:b.totalBytes}}(c)))];case 4:return a.Ul(qx(c)),l=new $G(c,i.bh,s.Qt),[4,s.Ql()];case 5:h=y.sent(),y.label=6;case 6:return h?[4,l.rl(h)]:[3,10];case 7:return(p=y.sent())&&a.Ul(p),[4,s.Ql()];case 8:h=y.sent(),y.label=9;case 9:return[3,6];case 10:return[4,l.complete()];case 11:return v=y.sent(),[4,$i(i,v.Go,void 0)];case 12:return y.sent(),[4,function(b,E){var I=tt(b);return I.persistence.runTransaction("Save bundle","readwrite",function(C){return I.wo.ks(C,E)})}(i.bh,c)];case 13:return y.sent(),a.ql(v.progress),[3,15];case 14:return wp("SyncEngine","Loading bundle failed with "+(m=y.sent())),a.Kl(m),[3,15];case 15:return[2]}})})})(r,t,n).then(function(){r.Vl.Wa()})}var Qx=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(t){return R(this,void 0,void 0,function(){return N(this,function(n){switch(n.label){case 0:return this.Qt=af(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return n.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}})})},e.prototype.zl=function(t){return null},e.prototype.Hl=function(t){return Nx(this.persistence,new Cx,t.Jl,this.Qt)},e.prototype.jl=function(t){return new bG(IG.ia,this.Qt)},e.prototype.Wl=function(t){return new Dx},e.prototype.terminate=function(){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}})})},e}(),Yx=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).Yl=n,s.cacheSizeBytes=r,s.forceOwnership=i,s.synchronizeTabs=!1,s}return Z(t,e),t.prototype.initialize=function(n){return R(this,void 0,void 0,function(){return N(this,function(r){switch(r.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return r.sent(),[4,pG(this.bh)];case 2:return r.sent(),[4,this.Yl.initialize(this,n)];case 3:return r.sent(),[4,gb(this.Yl._a)];case 4:return r.sent(),[4,Vu(this.Yl.yl)];case 5:return r.sent(),[2]}})})},t.prototype.Hl=function(n){return Nx(this.persistence,new Cx,n.Jl,this.Qt)},t.prototype.zl=function(n){var r=this.persistence.Ti.lr;return new tG(r,n._s)},t.prototype.jl=function(n){var r=eb(n.yu.t,n.yu.persistenceKey),i=this.cacheSizeBytes!==void 0?ri.Ys(this.cacheSizeBytes):ri.ti;return new sG(this.synchronizeTabs,r,n.clientId,i,n._s,Lx(),$h(),this.Qt,this.Vl,!!this.forceOwnership)},t.prototype.Wl=function(n){return new Dx},t}(Qx),dW=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r,!1)||this).Yl=n,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return Z(t,e),t.prototype.initialize=function(n){return R(this,void 0,void 0,function(){var r,i=this;return N(this,function(s){switch(s.label){case 0:return[4,e.prototype.initialize.call(this,n)];case 1:return s.sent(),r=this.Yl._a,this.Vl instanceof Km?(this.Vl._a={eu:uW.bind(null,r),nu:fW.bind(null,r),su:hW.bind(null,r),Uo:lW.bind(null,r),tu:aW.bind(null,r)},[4,this.Vl.start()]):[3,3];case 2:s.sent(),s.label=3;case 3:return[4,this.persistence.Ro(function(a){return R(i,void 0,void 0,function(){return N(this,function(c){switch(c.label){case 0:return[4,cW(this.Yl._a,a)];case 1:return c.sent(),this.Gl&&(a&&!this.Gl.Er?this.Gl.start(this.bh):a||this.Gl.stop()),[2]}})})})];case 4:return s.sent(),[2]}})})},t.prototype.Wl=function(n){var r=Lx();if(!Km.Kn(r))throw new G(k.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var i=eb(n.yu.t,n.yu.persistenceKey);return new Km(r,n._s,i,n.clientId,n.Jl)},t}(Yx),c_=function(){function e(){}return e.prototype.initialize=function(t,n){return R(this,void 0,void 0,function(){var r=this;return N(this,function(i){switch(i.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(n),this.yl=this.Zl(n),this.gl=this.t_(n),this._a=this.e_(n,!t.synchronizeTabs),this.Vl.fa=function(s){return f1(r._a,s,1)},this.yl.Dh.n_=iW.bind(null,this._a),[4,a_(this.yl,this._a.Ml)]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.t_=function(t){return new qG},e.prototype.Xl=function(t){var n,r=af(t.yu.t),i=(n=t.yu,new NG(n));return function(s,a,c){return new xG(s,a,c)}(t.credentials,i,r)},e.prototype.Zl=function(t){var n,r,i,s,a,c=this;return n=this.bh,r=this.Sh,i=t._s,s=function(l){return f1(c._a,l,0)},a=c1.Kn()?new c1:new SG,new kG(n,r,i,s,a)},e.prototype.e_=function(t,n){return function(r,i,s,a,c,l,h){var p=new QG(r,i,s,a,c,l);return h&&(p.kl=!0),p}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,n)},e.prototype.terminate=function(){return function(t){return R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return n=tt(t),X("RemoteStore","RemoteStore shutting down."),n.Nh.add(5),[4,ju(n)];case 1:return r.sent(),n.Fh.ko(),n.Oh.set("Unknown"),[2]}})})}(this.yl)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p1(e,t){t===void 0&&(t=10240);var n=0;return{read:function(){return R(this,void 0,void 0,function(){var r;return N(this,function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]})})},cancel:function(){return R(this,void 0,void 0,function(){return N(this,function(r){return[2]})})},releaseLock:function(){}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bd=function(){function e(t){this.observer=t,this.muted=!1}return e.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},e.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},e.prototype.i_=function(){this.muted=!0},e.prototype.s_=function(t,n){var r=this;this.muted||setTimeout(function(){r.muted||t(n)},0)},e}(),vW=function(){function e(t,n){var r=this;this.r_=t,this.Qt=n,this.metadata=new kn,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then(function(i){i&&i.sl()?r.metadata.resolve(i.payload.metadata):r.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             `+JSON.stringify(i==null?void 0:i.payload)))},function(i){return r.metadata.reject(i)})}return e.prototype.close=function(){return this.r_.cancel()},e.prototype.getMetadata=function(){return R(this,void 0,void 0,function(){return N(this,function(t){return[2,this.metadata.promise]})})},e.prototype.Ql=function(){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}})})},e.prototype.c_=function(){return R(this,void 0,void 0,function(){var t,n,r,i;return N(this,function(s){switch(s.label){case 0:return[4,this.a_()];case 1:return(t=s.sent())===null?[2,null]:(n=this.o_.decode(t),r=Number(n),isNaN(r)&&this.u_("length string ("+n+") is not valid number"),[4,this.h_(r)]);case 2:return i=s.sent(),[2,new WG(JSON.parse(i),t.length+r)]}})})},e.prototype.l_=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},e.prototype.a_=function(){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(r.sent())return[3,3];r.label=2;case 2:return[3,0];case 3:return this.buffer.length===0?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),n)])}})})},e.prototype.h_=function(t){return R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:r.sent()&&this.u_("Reached the end of bundle when more is expected."),r.label=2;case 2:return[3,0];case 3:return n=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),n)]}})})},e.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},e.prototype.__=function(){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return[4,this.r_.read()];case 1:return(t=r.sent()).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),[2,t.done]}})})},e}(),Li=function(){function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=0;r<t.length;++r)if(t[r].length===0)throw new G(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new Gr(t)}return e.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},e}(),zs=function(e){this._methodName=e},Mt=function(e){this.d_=e};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(e,t,n){if(!n)throw new G(k.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function yb(e,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new G(k.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Xx(e,t,n,r){if(t===!0&&r===!0)throw new G(k.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function d1(e){if(!ht.wt(e))throw new G(k.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function v1(e){if(ht.wt(e))throw new G(k.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function Ed(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";var t=function(n){if(n.constructor){var r=/function\s+([^\s(]+)\s*\(/.exec(n.constructor.toString());if(r&&r.length>1)return r[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return typeof e=="function"?"a function":ut()}function qt(e,t){if("_delegate"in e&&(e=e.d_),!(e instanceof t)){if(t.name===e.constructor.name)throw new G(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ed(e);throw new G(k.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function g1(e,t){if(t<=0)throw new G(k.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var m1=function(){function e(t){var n;if(t.host===void 0){if(t.ssl!==void 0)throw new G(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new G(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Xx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},e}(),y1=new Map,kl=function(){function e(t,n){this.w_="(lite)",this.E_=new m1({}),this.T_=!1,t instanceof _p?(this.I_=t,this.m_=new SA):(this.A_=t,this.I_=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new G(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _p(r.options.projectId)}(t),this.m_=new rH(n))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this.A_)throw new G(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"P_",{get:function(){return this.y_!==void 0},enumerable:!1,configurable:!0}),e.prototype.g_=function(t){if(this.T_)throw new G(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new m1(t),t.credentials!==void 0&&(this.m_=function(n){if(!n)return new SA;switch(n.type){case"gapi":var r=n.client;return yt(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new oH(r,n.sessionIndex||"0");case"provider":return n.client;default:throw new G(k.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},e.prototype.V_=function(){return this.E_},e.prototype.p_=function(){return this.T_=!0,this.E_},e.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},e.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},e.prototype.b_=function(){return t=this,(n=y1.get(t))&&(X("ComponentProvider","Removing Datastore"),y1.delete(t),n.terminate()),Promise.resolve();var t,n},e}(),ve=function(){function e(t,n,r){this.v_=n,this.S_=r,this.type="document",this.firestore=t}return Object.defineProperty(e.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Io(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.S_)},e}(),Wn=function(){function e(t,n,r){this.v_=n,this.C_=r,this.type="query",this.firestore=t}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this.C_)},e}(),Io=function(e){function t(n,r,i){var s=this;return(s=e.call(this,n,r,Mu(i))||this).firestore=n,s.D_=i,s.type="collection",s}return Z(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this.D_.X();return n.et()?null:new ve(this.firestore,null,new ht(n))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(n){return new t(this.firestore,n,this.D_)},t}(Wn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e instanceof Mt&&(e=e.d_),mb("collection","path",t),e instanceof kl)return v1(n=Ht.ot.apply(Ht,Ae([t],r))),new Io(e,null,n);if(!(e instanceof ve||e instanceof Io))throw new G(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return v1(n=Ht.ot.apply(Ht,Ae([e.path],r)).child(Ht.ot(t))),new Io(e.firestore,null,n)}function zh(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e instanceof Mt&&(e=e.d_),arguments.length===1&&(t=DO.u()),mb("doc","path",t),e instanceof kl)return d1(n=Ht.ot.apply(Ht,Ae([t],r))),new ve(e,null,new ht(n));if(!(e instanceof ve||e instanceof Io))throw new G(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return d1(n=e.D_.child(Ht.ot.apply(Ht,Ae([t],r)))),new ve(e.firestore,e instanceof Io?e.v_:null,new ht(n))}function Zx(e,t){return e instanceof Mt&&(e=e.d_),t instanceof Mt&&(t=t.d_),(e instanceof ve||e instanceof Io)&&(t instanceof ve||t instanceof Io)&&e.firestore===t.firestore&&e.path===t.path&&e.v_===t.v_}function tP(e,t){return e instanceof Mt&&(e=e.d_),t instanceof Mt&&(t=t.d_),e instanceof Wn&&t instanceof Wn&&e.firestore===t.firestore&&ef(e.C_,t.C_)&&e.v_===t.v_}var Id=function(){function e(t,n){if(!isFinite(t)||t<-90||t>90)throw new G(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new G(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this.x_=t,this.N_=n}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},e.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},e.prototype.U=function(t){return kt(this.x_,t.x_)||kt(this.N_,t.N_)},e}(),gW=/^__.*__$/,mW=function(){function e(t,n,r){this.data=t,this.Gt=n,this.fieldTransforms=r}return e.prototype.F_=function(t,n){return this.Gt!==null?new Fo(t,this.data,this.Gt,n,this.fieldTransforms):new of(t,this.data,n,this.fieldTransforms)},e}(),eP=function(){function e(t,n,r){this.data=t,this.Gt=n,this.fieldTransforms=r}return e.prototype.F_=function(t,n){return new Fo(t,this.data,this.Gt,n,this.fieldTransforms)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ut()}}var rP=function(){function e(t,n,r,i,s,a){this.settings=t,this.t=n,this.Qt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.O_(),this.fieldTransforms=s||[],this.Gt=a||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),e.prototype.M_=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},e.prototype.L_=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.M_({path:r,B_:!1});return i.q_(t),i},e.prototype.U_=function(t){var n,r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.M_({path:r,B_:!1});return i.O_(),i},e.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},e.prototype.K_=function(t){return kp(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},e.prototype.contains=function(t){return this.Gt.find(function(n){return t.nt(n)})!==void 0||this.fieldTransforms.find(function(n){return t.nt(n.field)})!==void 0},e.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},e.prototype.q_=function(t){if(t.length===0)throw this.K_("Document fields must not be empty");if(nP(this.k_)&&gW.test(t))throw this.K_('Document fields cannot begin and end with "__"')},e}(),yW=function(){function e(t,n,r){this.t=t,this.ignoreUndefinedProperties=n,this.Qt=r||af(t)}return e.prototype.G_=function(t,n,r,i){return i===void 0&&(i=!1),new rP({k_:t,methodName:n,j_:r,path:Gr.ct(),B_:!1,W_:i},this.t,this.Qt,this.ignoreUndefinedProperties)},e}();function Ks(e){var t=e.p_(),n=af(e.I_);return new yW(e.I_,!!t.ignoreUndefinedProperties,n)}function Td(e,t,n,r,i,s){s===void 0&&(s={});var a=e.G_(s.merge||s.mergeFields?2:0,t,n,i);Eb("Data must be an object, but it was:",a,r);var c,l,h=sP(r,a);if(s.merge)c=new lu(a.Gt),l=a.fieldTransforms;else if(s.mergeFields){for(var p=[],v=0,m=s.mergeFields;v<m.length;v++){var y=l_(t,m[v],n);if(!a.contains(y))throw new G(k.INVALID_ARGUMENT,"Field '"+y+"' is specified in your field mask but missing from your input data.");uP(p,y)||p.push(y)}c=new lu(p),l=a.fieldTransforms.filter(function(b){return c.Tt(b.field)})}else c=null,l=a.fieldTransforms;return new mW(new xo(h),c,l)}var _b=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.z_=function(n){if(n.k_!==2)throw n.k_===1?n.K_(this._methodName+"() can only appear at the top level of your update data"):n.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return n.Gt.push(n.path),null},t.prototype.isEqual=function(n){return n instanceof t},t}(zs);function iP(e,t,n){return new rP({k_:3,j_:t.settings.j_,methodName:e._methodName,B_:n},t.t,t.Qt,t.ignoreUndefinedProperties)}var _W=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.z_=function(n){return new rf(n.path,new du)},t.prototype.isEqual=function(n){return n instanceof t},t}(zs),wW=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).H_=r,i}return Z(t,e),t.prototype.z_=function(n){var r=iP(this,n,!0),i=this.H_.map(function(a){return Qs(a,r)}),s=new Ls(i);return new rf(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(zs),bW=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).H_=r,i}return Z(t,e),t.prototype.z_=function(n){var r=iP(this,n,!0),i=this.H_.map(function(a){return Qs(a,r)}),s=new Ms(i);return new rf(n.path,s)},t.prototype.isEqual=function(n){return this===n},t}(zs),EW=function(e){function t(n,r){var i=this;return(i=e.call(this,n)||this).J_=r,i}return Z(t,e),t.prototype.z_=function(n){var r=new vu(n.Qt,KO(n.Qt,this.J_));return new rf(n.path,r)},t.prototype.isEqual=function(n){return this===n},t}(zs);function wb(e,t,n,r){var i=e.G_(1,t,n);Eb("Data must be an object, but it was:",i,r);var s=[],a=new Zl;Jl(r,function(l,h){var p=Ib(t,l,n);h instanceof Mt&&(h=h.d_);var v=i.U_(p);if(h instanceof _b)s.push(p);else{var m=Qs(h,v);m!=null&&(s.push(p),a.set(p,m))}});var c=new lu(s);return new eP(a.Pt(),c,i.fieldTransforms)}function bb(e,t,n,r,i,s){var a=e.G_(1,t,n),c=[l_(t,r,n)],l=[i];if(s.length%2!=0)throw new G(k.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<s.length;h+=2)c.push(l_(t,s[h])),l.push(s[h+1]);for(var p=[],v=new Zl,m=c.length-1;m>=0;--m)if(!uP(p,c[m])){var y=c[m],b=l[m];b instanceof Mt&&(b=b.d_);var E=a.U_(y);if(b instanceof _b)p.push(y);else{var I=Qs(b,E);I!=null&&(p.push(y),v.set(y,I))}}var C=new lu(p);return new eP(v.Pt(),C,a.fieldTransforms)}function oP(e,t,n,r){return r===void 0&&(r=!1),Qs(n,e.G_(r?4:3,t))}function Qs(e,t){if(e instanceof Mt&&(e=e.d_),aP(e))return Eb("Unsupported field value:",t,e),sP(e,t);if(e instanceof zs)return function(n,r){if(!nP(r.k_))throw r.K_(n._methodName+"() can only be used with update() and set()");if(!r.path)throw r.K_(n._methodName+"() is not currently supported inside arrays");var i=n.z_(r);i&&r.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.Gt.push(t.path),e instanceof Array){if(t.settings.B_&&t.k_!==4)throw t.K_("Nested arrays are not supported");return function(n,r){for(var i=[],s=0,a=0,c=n;a<c.length;a++){var l=Qs(c[a],r.Q_(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(e,t)}return function(n,r){if(n instanceof Mt&&(n=n.d_),n===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return KO(r.Qt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){var i=Gn.fromDate(n);return{timestampValue:Rl(r.Qt,i)}}if(n instanceof Gn)return i=new Gn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3)),{timestampValue:Rl(r.Qt,i)};if(n instanceof Id)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ds)return{bytesValue:sx(r.Qt,n.I)};if(n instanceof ve){i=r.t;var s=n.firestore.I_;if(!s.isEqual(i))throw r.K_("Document reference is for database "+s.projectId+"/"+s.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Qw(n.firestore.I_||r.t,n.S_.path)}}throw r.K_("Unsupported field value: "+Ed(n))}(e,t)}function sP(e,t){var n={};return FO(e)?t.path&&t.path.length>0&&t.Gt.push(t.path):Jl(e,function(r,i){var s=Qs(i,t.L_(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function aP(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Gn||e instanceof Id||e instanceof Ds||e instanceof ve||e instanceof zs)}function Eb(e,t,n){if(!aP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){var r=Ed(n);throw r==="an object"?t.K_(e+" a custom object"):t.K_(e+" "+r)}}function l_(e,t,n){if(t instanceof Mt&&(t=t.d_),t instanceof Li)return t.f_;if(typeof t=="string")return Ib(e,t);throw kp("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var IW=new RegExp("[~\\*/\\[\\]]");function Ib(e,t,n){if(t.search(IW)>=0)throw kp("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return new(Li.bind.apply(Li,Ae([void 0],t.split("."))))().f_}catch{throw kp("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function kp(e,t,n,r,i){var s=r&&!r.et(),a=i!==void 0,c="Function "+t+"() called with invalid data";n&&(c+=" (via `toFirestore()`)");var l="";return(s||a)&&(l+=" (found",s&&(l+=" in field "+r),a&&(l+=" in document "+i),l+=")"),new G(k.INVALID_ARGUMENT,(c+=". ")+e+l)}function uP(e,t){return e.some(function(n){return n.isEqual(t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var TW=function(){function e(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return e.prototype.ef=function(t){return R(this,void 0,void 0,function(){var n,r=this;return N(this,function(i){switch(i.label){case 0:if(this.nf(),this.mutations.length>0)throw new G(k.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return R(this,void 0,void 0,function(){var c,l,h,p,v,m;return N(this,function(y){switch(y.label){case 0:return c=tt(s),l=xl(c.Qt)+"/documents",h={documents:a.map(function(b){return Ol(c.Qt,b)})},[4,c.Du("BatchGetDocuments",l,h)];case 1:return p=y.sent(),v=new Map,p.forEach(function(b){var E=function(I,C){return"found"in C?function(P,D){yt(!!D.found),D.found.name,D.found.updateTime;var F=li(P,D.found.name),Y=Xe(D.found.updateTime),U=new xo({mapValue:{fields:D.found.fields}});return new te(F,Y,U,{})}(I,C):"missing"in C?function(P,D){yt(!!D.missing),yt(!!D.readTime);var F=li(P,D.missing),Y=Xe(D.readTime);return new Be(F,Y)}(I,C):ut()}(c.Qt,b);v.set(E.key.toString(),E)}),m=[],[2,(a.forEach(function(b){var E=v.get(b.toString());yt(!!E),m.push(E)}),m)]}})})}(this.Sh,t)];case 1:return[2,((n=i.sent()).forEach(function(s){s instanceof Be||s instanceof te?r.sf(s):ut()}),n)]}})})},e.prototype.set=function(t,n){this.write(n.F_(t,this.jt(t))),this.tf.add(t.toString())},e.prototype.update=function(t,n){try{this.write(n.F_(t,this.rf(t)))}catch(r){this.Z_=r}this.tf.add(t.toString())},e.prototype.delete=function(t){this.write(new sf(t,this.jt(t))),this.tf.add(t.toString())},e.prototype.commit=function(){return R(this,void 0,void 0,function(){var t,n=this;return N(this,function(r){switch(r.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach(function(i){t.delete(i.key.toString())}),t.forEach(function(i,s){var a=ht._t(s);n.mutations.push(new $w(a,n.jt(a)))}),[4,function(i,s){return R(this,void 0,void 0,function(){var a,c,l;return N(this,function(h){switch(h.label){case 0:return a=tt(i),c=xl(a.Qt)+"/documents",l={writes:s.map(function(p){return Np(a.Qt,p)})},[4,a.pu("Commit",c,l)];case 1:return h.sent(),[2]}})})}(this.Sh,this.mutations)];case 1:return r.sent(),this.X_=!0,[2]}})})},e.prototype.sf=function(t){var n;if(t instanceof te)n=t.version;else{if(!(t instanceof Be))throw ut();n=Ot.min()}var r=this.Y_.get(t.key.toString());if(r){if(!n.isEqual(r))throw new G(k.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),n)},e.prototype.jt=function(t){var n=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&n?dn.updateTime(n):dn.Kt()},e.prototype.rf=function(t){var n=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&n){if(n.isEqual(Ot.min()))throw new G(k.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dn.updateTime(n)}return dn.exists(!0)},e.prototype.write=function(t){this.nf(),this.mutations.push(t)},e.prototype.nf=function(){},e}(),SW=function(){function e(t,n,r,i){this._s=t,this.Sh=n,this.updateFunction=r,this.Es=i,this.cf=5,this.Gu=new rb(this._s,"transaction_retry")}return e.prototype.run=function(){this.af()},e.prototype.af=function(){var t=this;this.Gu.Lu(function(){return R(t,void 0,void 0,function(){var n,r,i=this;return N(this,function(s){return n=new TW(this.Sh),(r=this.uf(n))&&r.then(function(a){i._s.Ps(function(){return n.commit().then(function(){i.Es.resolve(a)}).catch(function(c){i.hf(c)})})}).catch(function(a){i.hf(a)}),[2]})})})},e.prototype.uf=function(t){try{var n=this.updateFunction(t);return!Gs(n)&&n.catch&&n.then?n:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.Es.reject(r),null}},e.prototype.hf=function(t){var n=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps(function(){return n.af(),Promise.resolve()})):this.Es.reject(t)},e.prototype.lf=function(t){if(t.name==="FirebaseError"){var n=t.code;return n==="aborted"||n==="failed-precondition"||!tx(n)}return!1},e}(),AW=function(){function e(t,n,r){var i=this;this.credentials=t,this._s=n,this.yu=r,this.user=er.UNAUTHENTICATED,this.clientId=DO.u(),this._f=function(){},this.C=new kn,this.credentials.v(function(s){X("FirestoreClient","Received user=",s.uid),i.user=s,i._f(s),i.C.resolve()})}return e.prototype.getConfiguration=function(){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}})})},e.prototype.ff=function(t){var n=this;this._f=t,this.C.promise.then(function(){return n._f(n.user)})},e.prototype.df=function(){if(this._s.wf)throw new G(k.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var t=this;this._s.Ef();var n=new kn;return this._s.Tf(function(){return R(t,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:s.sent(),s.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:s.sent(),s.label=4;case 4:return this.credentials.S(),n.resolve(),[3,6];case 5:return r=s.sent(),i=Fu(r,"Failed to shutdown persistence"),n.reject(i),[3,6];case 6:return[2]}})})}),n.promise},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(e,t){return R(this,void 0,void 0,function(){var n,r,i=this;return N(this,function(s){switch(s.label){case 0:return e._s.Af(),X("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=s.sent(),[4,t.initialize(n)];case 2:return s.sent(),r=n.Jl,e.ff(function(a){r.isEqual(a)||(r=a,e._s.po(function(){return R(i,void 0,void 0,function(){return N(this,function(c){switch(c.label){case 0:return[4,Rx(t.bh,a)];case 1:return c.sent(),[2]}})})}))}),t.persistence.Po(function(){return e.terminate()}),e.mf=t,[2]}})})}function lP(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return e._s.Af(),[4,Tb(e)];case 1:return n=i.sent(),X("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.ff(function(s){return e._s.po(function(){return function(a,c){return R(this,void 0,void 0,function(){var l,h;return N(this,function(p){switch(p.label){case 0:return(l=tt(a))._s.Af(),X("RemoteStore","RemoteStore received new credentials"),h=Uo(l),l.Nh.add(3),[4,ju(l)];case 1:return p.sent(),h&&l.Oh.set("Unknown"),[4,l.Dh.n_(c)];case 2:return p.sent(),l.Nh.delete(3),[4,uf(l)];case 3:return p.sent(),[2]}})})}(t.yl,s)})}),e.If=t,[2]}})})}function Tb(e){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return e.mf?[3,2]:(X("FirestoreClient","Using default OfflineComponentProvider"),[4,cP(e,new Qx)]);case 1:t.sent(),t.label=2;case 2:return[2,e.mf]}})})}function Sd(e){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return e.If?[3,2]:(X("FirestoreClient","Using default OnlineComponentProvider"),[4,lP(e,new c_)]);case 1:t.sent(),t.label=2;case 2:return[2,e.If]}})})}function _1(e){return Tb(e).then(function(t){return t.persistence})}function Sb(e){return Tb(e).then(function(t){return t.bh})}function w1(e){return Sd(e).then(function(t){return t.yl})}function Ab(e){return Sd(e).then(function(t){return t._a})}function Tu(e){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return[4,Sd(e)];case 1:return t=r.sent(),[2,((n=t.gl).jh=YG.bind(null,t._a),n.Hh=XG.bind(null,t._a),n)]}})})}function b1(e,t,n){var r=this;n===void 0&&(n={});var i=new kn;return e._s.Ps(function(){return R(r,void 0,void 0,function(){var s;return N(this,function(a){switch(a.label){case 0:return s=function(c,l,h,p,v){var m=new bd({next:function(b){l.Ps(function(){return ub(c,y)});var E=b.docs.has(h);!E&&b.fromCache?v.reject(new G(k.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&b.fromCache&&p&&p.source==="server"?v.reject(new G(k.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(b)},error:function(b){return v.reject(b)}}),y=new lb(Mu(h.path),m,{includeMetadataChanges:!0,nl:!0});return ab(c,y)},[4,Tu(e)];case 1:return[2,s.apply(void 0,[a.sent(),e._s,t,n,i])]}})})}),i.promise}function E1(e,t,n){var r=this;n===void 0&&(n={});var i=new kn;return e._s.Ps(function(){return R(r,void 0,void 0,function(){var s;return N(this,function(a){switch(a.label){case 0:return s=function(c,l,h,p,v){var m=new bd({next:function(b){l.Ps(function(){return ub(c,y)}),b.fromCache&&p.source==="server"?v.reject(new G(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(b)},error:function(b){return v.reject(b)}}),y=new lb(h,m,{includeMetadataChanges:!0,nl:!0});return ab(c,y)},[4,Tu(e)];case 1:return[2,s.apply(void 0,[a.sent(),e._s,t,n,i])]}})})}),i.promise}var CW=function(){function e(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new rb(this,"async_queue_retry"),this.vf=function(){var r=$h();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),t.Gu.qu()};var n=$h();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(e.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),e.prototype.Ps=function(t){this.enqueue(t)},e.prototype.Tf=function(t){this.Sf(),this.Df(t)},e.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=$h();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.vf)}},e.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(n){}):this.Df(t)},e.prototype.po=function(t){var n=this;this.Ps(function(){return n.Pf.push(t),n.Cf()})},e.prototype.Cf=function(){return R(this,void 0,void 0,function(){var t,n=this;return N(this,function(r){switch(r.label){case 0:if(this.Pf.length===0)return[3,5];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return r.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!Ws(t=r.sent()))throw t;return X("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu(function(){return n.Cf()}),r.label=5;case 5:return[2]}})})},e.prototype.Df=function(t){var n=this,r=this.Rf.then(function(){return n.pf=!0,t().catch(function(i){throw n.Vf=i,n.pf=!1,Pe("INTERNAL UNHANDLED ERROR: ",function(s){var a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(i)),i}).then(function(i){return n.pf=!1,i})});return this.Rf=r,r},e.prototype.Tr=function(t,n,r){var i=this;this.Sf(),this.bf.indexOf(t)>-1&&(n=0);var s=BH.Ts(this,t,n,r,function(a){return i.xf(a)});return this.gf.push(s),s},e.prototype.Sf=function(){this.Vf&&ut()},e.prototype.Af=function(){},e.prototype.Nf=function(){return R(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return[4,t=this.Rf];case 1:n.sent(),n.label=2;case 2:if(t!==this.Rf)return[3,0];n.label=3;case 3:return[2]}})})},e.prototype.$f=function(t){for(var n=0,r=this.gf;n<r.length;n++)if(r[n].fs===t)return!0;return!1},e.prototype.Ff=function(t){var n=this;return this.Nf().then(function(){n.gf.sort(function(a,c){return a.ds-c.ds});for(var r=0,i=n.gf;r<i.length;r++){var s=i[r];if(s.Rs(),t!=="all"&&s.fs===t)break}return n.Nf()})},e.prototype.Of=function(t){this.bf.push(t)},e.prototype.xf=function(t){var n=this.gf.indexOf(t);this.gf.splice(n,1)},e}();function Su(e){return function(t,n){if(typeof t!="object"||t===null)return!1;for(var r=t,i=0,s=["next","error","complete"];i<s.length;i++){var a=s[i];if(a in r&&typeof r[a]=="function")return!0}return!1}(e)}var NW=function(){function e(){this.kf={},this.Mf=new kn,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(t,n,r){this.kf={next:t,error:n,complete:r}},e.prototype.catch=function(t){return this.Mf.promise.catch(t)},e.prototype.then=function(t,n){return this.Mf.promise.then(t,n)},e.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},e.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},e.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)},e}(),RW=-1,Se=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).Bf=new CW,i.w_="name"in n?n.name:"[DEFAULT]",i}return Z(t,e),t.prototype.b_=function(){return this.qf||fP(this),this.qf.terminate()},t}(kl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(e){return e.qf||fP(e),e.qf.df(),e.qf}function fP(e){var t=e.p_(),n=function(r,i,s){return new tH(r,i,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling)}(e.I_,e.w_,t);e.qf=new AW(e.m_,e.Bf,n)}function I1(e,t,n){var r=this,i=new kn;return e._s.enqueue(function(){return R(r,void 0,void 0,function(){var s;return N(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),[4,cP(e,n)];case 1:return a.sent(),[4,lP(e,t)];case 2:return a.sent(),i.resolve(),[3,4];case 3:if(!function(c){return c.name==="FirebaseError"?c.code===k.FAILED_PRECONDITION||c.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||c.code===22||c.code===20||c.code===11}(s=a.sent()))throw s;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function T1(e){if(e.R_||e.P_)throw new G(k.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cb=function(){function e(){}return e.prototype.Uf=function(t,n){switch(n===void 0&&(n="none"),Oo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return xe(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,n);case 5:return t.stringValue;case 6:return this.Wf(fu(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,n);case 10:return this.Hf(t.mapValue,n);default:throw ut()}},e.prototype.Hf=function(t,n){var r=this,i={};return Jl(t.fields||{},function(s,a){i[s]=r.Uf(a,n)}),i},e.prototype.Gf=function(t){return new Id(xe(t.latitude),xe(t.longitude))},e.prototype.zf=function(t,n){var r=this;return(t.values||[]).map(function(i){return r.Uf(i,n)})},e.prototype.Kf=function(t,n){switch(n){case"previous":var r=UO(t);return r==null?null:this.Uf(r,n);case"estimate":return this.Qf(Sl(t));default:return null}},e.prototype.Qf=function(t){var n=Ro(t);return new Gn(n.seconds,n.nanos)},e.prototype.Jf=function(t,n){var r=Ht.ot(t);yt(vx(r));var i=new _p(r.get(1),r.get(3)),s=new ht(r.Y(5));return i.isEqual(n)||Pe("Document "+s+" contains a document reference within a different database ("+i.projectId+"/"+i.database+") which is not supported. It will be treated as a reference in the current database ("+n.projectId+"/"+n.database+") instead."),s},e}(),Dl=function(){function e(t,n,r,i,s){this.Yf=t,this.Xf=n,this.S_=r,this.Zf=i,this.v_=s}return Object.defineProperty(e.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new ve(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return this.Zf!==null},e.prototype.data=function(){if(this.Zf){if(this.v_){var t=new OW(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},e.prototype.get=function(t){if(this.Zf){var n=this.Zf.data().field(Dp("DocumentSnapshot.get",t));if(n!==null)return this.Xf.Uf(n)}},e}(),OW=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(Dl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(e,t){return typeof t=="string"?Ib(e,t):t instanceof Mt?t.d_.f_:t.f_}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(e){if(Sp(e)&&e.xt.length===0)throw new G(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var cf=function(){};function ao(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var s=i[r];e=s.td(e)}return e}var xW=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).ed=n,s.nd=r,s.sd=i,s.type="where",s}return Z(t,e),t.prototype.td=function(n){var r=Ks(n.firestore),i=function(s,a,c,l,h,p,v){var m;if(h.ut()){if(p==="array-contains"||p==="array-contains-any")throw new G(k.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+p+"' queries on FieldPath.documentId().");if(p==="in"||p==="not-in"){R1(v,p);for(var y=[],b=0,E=v;b<E.length;b++){var I=E[b];y.push(N1(l,s,I))}m={arrayValue:{values:y}}}else m=N1(l,s,v)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||R1(v,p),m=oP(c,"where",v,p==="in"||p==="not-in");var C=or.create(h,p,m);return function(P,D){if(D.Ct()){var F=Hw(P);if(F!==null&&!F.isEqual(D.field))throw new G(k.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+F.toString()+"' and '"+D.field.toString()+"'");var Y=qw(P);Y!==null&&dP(P,D.field,Y)}var U=function(_t,Wt){for(var lt=0,Ze=_t.filters;lt<Ze.length;lt++){var O=Ze[lt];if(Wt.indexOf(O.op)>=0)return O.op}return null}(P,function(_t){switch(_t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(D.op));if(U!==null)throw U===D.op?new G(k.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+D.op.toString()+"' filter."):new G(k.INVALID_ARGUMENT,"Invalid query. You cannot use '"+D.op.toString()+"' filters with '"+U.toString()+"' filters.")}(s,C),C}(n.C_,0,r,n.firestore.I_,this.ed,this.nd,this.sd);return new Wn(n.firestore,n.v_,function(s,a){var c=s.filters.concat([a]);return new Wi(s.path,s.collectionGroup,s.xt.slice(),c,s.limit,s.limitType,s.startAt,s.endAt)}(n.C_,i))},t}(cf),PW=function(e){function t(n,r){var i=this;return(i=e.call(this)||this).ed=n,i.rd=r,i.type="orderBy",i}return Z(t,e),t.prototype.td=function(n){var r=function(i,s,a){if(i.startAt!==null)throw new G(k.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(k.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var c=new Qa(s,a);return function(l,h){if(qw(l)===null){var p=Hw(l);p!==null&&dP(l,p,h.field)}}(i,c),c}(n.C_,this.ed,this.rd);return new Wn(n.firestore,n.v_,function(i,s){var a=i.xt.concat([s]);return new Wi(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(n.C_,r))},t}(cf),S1=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.od=r,s.ad=i,s}return Z(t,e),t.prototype.td=function(n){return new Wn(n.firestore,n.v_,HO(n.C_,this.od,this.ad))},t}(cf),A1=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.ud=r,s.hd=i,s}return Z(t,e),t.prototype.td=function(n){var r=pP(n,this.type,this.ud,this.hd);return new Wn(n.firestore,n.v_,function(i,s){return new Wi(i.path,i.collectionGroup,i.xt.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(n.C_,r))},t}(cf),C1=function(e){function t(n,r,i){var s=this;return(s=e.call(this)||this).type=n,s.ud=r,s.hd=i,s}return Z(t,e),t.prototype.td=function(n){var r=pP(n,this.type,this.ud,this.hd);return new Wn(n.firestore,n.v_,function(i,s){return new Wi(i.path,i.collectionGroup,i.xt.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(n.C_,r))},t}(cf);function pP(e,t,n,r){if(n[0]instanceof Mt&&(n[0]=n[0].d_),n[0]instanceof Dl)return function(s,a,c,l,h){if(!l)throw new G(k.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var p=[],v=0,m=pu(s);v<m.length;v++){var y=m[v];if(y.field.ut())p.push(Ep(a,l.key));else{var b=l.field(y.field);if(Mw(b))throw new G(k.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){var E=y.field.rt();throw new G(k.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+E+"' (used as the orderBy) does not exist.")}p.push(b)}}return new Cl(p,h)}(e.C_,e.firestore.I_,t,n[0].Zf,r);var i=Ks(e.firestore);return function(s,a,c,l,h,p){var v=s.xt;if(h.length>v.length)throw new G(k.INVALID_ARGUMENT,"Too many arguments provided to "+l+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var m=[],y=0;y<h.length;y++){var b=h[y];if(v[y].field.ut()){if(typeof b!="string")throw new G(k.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+l+"(), but got a "+typeof b);if(!Gw(s)&&b.indexOf("/")!==-1)throw new G(k.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+l+"() must be a plain document ID, but '"+b+"' contains a slash.");var E=s.path.child(Ht.ot(b));if(!ht.wt(E))throw new G(k.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+l+"() must result in a valid document path, but '"+E+"' is not because it contains an odd number of segments.");var I=new ht(E);m.push(Ep(a,I))}else{var C=oP(c,l,b);m.push(C)}}return new Cl(m,p)}(e.C_,e.firestore.I_,i,t,n,r)}function N1(e,t,n){if(n instanceof Mt&&(n=n.d_),typeof n=="string"){if(n==="")throw new G(k.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gw(t)&&n.indexOf("/")!==-1)throw new G(k.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(Ht.ot(n));if(!ht.wt(r))throw new G(k.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ep(e,new ht(r))}if(n instanceof ve)return Ep(e,n.S_);throw new G(k.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ed(n)+".")}function R1(e,t){if(!Array.isArray(e)||e.length===0)throw new G(k.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new G(k.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function dP(e,t,n){if(!n.isEqual(t))throw new G(k.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var kW=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return Z(t,e),t.prototype.Wf=function(n){return new Ds(n)},t.prototype.jf=function(n){var r=this.Jf(n,this.firestore.I_);return new ve(this.firestore,null,r)},t}(Cb),ys=function(){function e(t,n){this.hasPendingWrites=t,this.fromCache=n}return e.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},e}(),Mi=function(e){function t(n,r,i,s,a,c){var l=this;return(l=e.call(this,n,r,i,s,c)||this).Yf=n,l.ld=n,l.metadata=a,l}return Z(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(n){if(n===void 0&&(n={}),this.Zf){if(this.v_){var r=new Zc(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(r,n)}return this.Xf.Uf(this.Zf.bt(),n.serverTimestamps)}},t.prototype.get=function(n,r){if(r===void 0&&(r={}),this.Zf){var i=this.Zf.data().field(Dp("DocumentSnapshot.get",n));if(i!==null)return this.Xf.Uf(i,r.serverTimestamps)}},t}(Dl),Zc=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.data=function(n){return n===void 0&&(n={}),e.prototype.data.call(this,n)},t}(Mi),mo=function(){function e(t,n,r,i){this.Yf=t,this.Xf=n,this._d=i,this.metadata=new ys(i.hasPendingWrites,i.fromCache),this.query=r}return Object.defineProperty(e.prototype,"docs",{get:function(){var t=[];return this.forEach(function(n){return t.push(n)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.size===0},enumerable:!1,configurable:!0}),e.prototype.forEach=function(t,n){var r=this;this._d.docs.forEach(function(i){t.call(n,new Zc(r.Yf,r.Xf,i.key,i,new ys(r._d.De.has(i.key),r._d.fromCache),r.query.v_))})},e.prototype.docChanges=function(t){t===void 0&&(t={});var n=!!t.includeMetadataChanges;if(n&&this._d.xe)throw new G(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===n||(this.fd=function(r,i){if(r._d.Se.et()){var s=0;return r._d.docChanges.map(function(c){var l=new Zc(r.Yf,r.Xf,c.doc.key,c.doc,new ys(r._d.De.has(c.doc.key),r._d.fromCache),r.query.v_);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}var a=r._d.Se;return r._d.docChanges.filter(function(c){return i||c.type!==3}).map(function(c){var l=new Zc(r.Yf,r.Xf,c.doc.key,c.doc,new ys(r._d.De.has(c.doc.key),r._d.fromCache),r.query.v_),h=-1,p=-1;return c.type!==0&&(h=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(p=(a=a.add(c.doc)).indexOf(c.doc.key)),{type:DW(c.type),doc:l,oldIndex:h,newIndex:p}})}(this,n),this.dd=n),this.fd},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DW(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ut()}}function vP(e,t){return e instanceof Mi&&t instanceof Mi?e.Yf===t.Yf&&e.S_.isEqual(t.S_)&&(e.Zf===null?t.Zf===null:e.Zf.isEqual(t.Zf))&&e.v_===t.v_:e instanceof mo&&t instanceof mo&&e.Yf===t.Yf&&tP(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._d.isEqual(t._d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var As=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return Z(t,e),t.prototype.Wf=function(n){return new Ds(n)},t.prototype.jf=function(n){var r=this.Jf(n,this.firestore.I_);return new ve(this.firestore,null,r)},t}(Cb);function O1(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=qt(e,ve);var s=qt(e.firestore,Se),a=Ks(s);return t instanceof Mt&&(t=t.d_),Ll(s,[(typeof t=="string"||t instanceof Li?bb(a,"updateDoc",e.S_,t,n,r):wb(a,"updateDoc",e.S_,t)).F_(e.S_,dn.exists(!0))])}function gP(e){for(var t,n,r,i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];e instanceof Mt&&(e=e.d_);var a={includeMetadataChanges:!1},c=0;typeof i[c]!="object"||Su(i[c])||(a=i[c],c++);var l,h,p,v={includeMetadataChanges:a.includeMetadataChanges};if(Su(i[c])){var m=i[c];i[c]=(t=m.next)===null||t===void 0?void 0:t.bind(m),i[c+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),i[c+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}if(e instanceof ve)h=qt(e.firestore,Se),p=Mu(e.S_.path),l={next:function(E){i[c]&&i[c](f_(h,e,E))},error:i[c+1],complete:i[c+2]};else{var y=qt(e,Wn);h=qt(y.firestore,Se),p=y.C_;var b=new As(h);l={next:function(E){i[c]&&i[c](new mo(h,b,y,E))},error:i[c+1],complete:i[c+2]},hP(e.C_)}return function(E,I,C,P){var D=this,F=new bd(P),Y=new lb(I,F,C);return E._s.Ps(function(){return R(D,void 0,void 0,function(){var U;return N(this,function(_t){switch(_t.label){case 0:return U=ab,[4,Tu(E)];case 1:return[2,U.apply(void 0,[_t.sent(),Y])]}})})}),function(){F.i_(),E._s.Ps(function(){return R(D,void 0,void 0,function(){var U;return N(this,function(_t){switch(_t.label){case 0:return U=ub,[4,Tu(E)];case 1:return[2,U.apply(void 0,[_t.sent(),Y])]}})})})}}(Ye(h),p,v,l)}function Ll(e,t){return function(n,r){var i=this,s=new kn;return n._s.Ps(function(){return R(i,void 0,void 0,function(){var a;return N(this,function(c){switch(c.label){case 0:return a=JG,[4,Ab(n)];case 1:return[2,a.apply(void 0,[c.sent(),r,s])]}})})}),s.promise}(Ye(e),t)}function f_(e,t,n){var r=n.docs.get(t.S_),i=new As(e);return new Mi(e,i,t.S_,r,new ys(n.hasPendingWrites,n.fromCache),t.v_)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LW=function(){function e(t,n){this.Yf=t,this.wd=n,this.Ed=[],this.Td=!1,this.Id=Ks(t)}return e.prototype.set=function(t,n,r){this.md();var i=yo(t,this.Yf),s=Ad(i.v_,n,r),a=Td(this.Id,"WriteBatch.set",i.S_,s,i.v_!==null,r);return this.Ed.push(a.F_(i.S_,dn.Kt())),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];this.md();var a,c=yo(t,this.Yf);return n instanceof Mt&&(n=n.d_),a=typeof n=="string"||n instanceof Li?bb(this.Id,"WriteBatch.update",c.S_,n,r,i):wb(this.Id,"WriteBatch.update",c.S_,n),this.Ed.push(a.F_(c.S_,dn.exists(!0))),this},e.prototype.delete=function(t){this.md();var n=yo(t,this.Yf);return this.Ed=this.Ed.concat(new sf(n.S_,dn.Kt())),this},e.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},e.prototype.md=function(){if(this.Td)throw new G(k.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();function yo(e,t){if(e instanceof Mt&&(e=e.d_),e.firestore!==t)throw new G(k.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MW=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).Yf=n,i}return Z(t,e),t.prototype.get=function(n){var r=this,i=yo(n,this.Yf),s=new As(this.Yf);return e.prototype.get.call(this,n).then(function(a){return new Mi(r.Yf,s,i.S_,a.Zf,new ys(!1,!1),i.v_)})},t}(function(){function e(t,n){this.Yf=t,this.Ad=n,this.Id=Ks(t)}return e.prototype.get=function(t){var n=this,r=yo(t,this.Yf),i=new kW(this.Yf);return this.Ad.ef([r.S_]).then(function(s){if(!s||s.length!==1)return ut();var a=s[0];if(a instanceof Be)return new Dl(n.Yf,i,r.S_,null,r.v_);if(a instanceof te)return new Dl(n.Yf,i,a.key,a,r.v_);throw ut()})},e.prototype.set=function(t,n,r){var i=yo(t,this.Yf),s=Ad(i.v_,n,r),a=Td(this.Id,"Transaction.set",i.S_,s,i.v_!==null,r);return this.Ad.set(i.S_,a),this},e.prototype.update=function(t,n,r){for(var i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];var a,c=yo(t,this.Yf);return n instanceof Mt&&(n=n.d_),a=typeof n=="string"||n instanceof Li?bb(this.Id,"Transaction.update",c.S_,n,r,i):wb(this.Id,"Transaction.update",c.S_,n),this.Ad.update(c.S_,a),this},e.prototype.delete=function(t){var n=yo(t,this.Yf);return this.Ad.delete(n.S_),this},e}());/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(){if(typeof Uint8Array>"u")throw new G(k.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function P1(){if(typeof atob>"u")throw new G(k.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var mP=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.fromBase64String=function(n){return P1(),new t(Ds.fromBase64String(n))},t.fromUint8Array=function(n){return x1(),new t(Ds.fromUint8Array(n))},t.prototype.toBase64=function(){return P1(),this.d_.toBase64()},t.prototype.toUint8Array=function(){return x1(),this.d_.toUint8Array()},t.prototype.isEqual=function(n){return this.d_.isEqual(n.d_)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(Mt),FW=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(t,n){return function(r,i){T1(r=qt(r,Se));var s=Ye(r),a=r.p_(),c=new c_;return I1(s,c,new Yx(c,a.cacheSizeBytes,i==null?void 0:i.forceOwnership))}(t.d_,{forceOwnership:n})},e.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(n){T1(n=qt(n,Se));var r=Ye(n),i=n.p_(),s=new c_;return I1(r,s,new dW(s,i.cacheSizeBytes))}(t.d_)},e.prototype.clearIndexedDbPersistence=function(t){return function(n){var r=this;if(n.R_&&!n.P_)throw new G(k.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var i=new kn;return n.Bf.Tf(function(){return R(r,void 0,void 0,function(){var s;return N(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,function(c){return R(this,void 0,void 0,function(){var l;return N(this,function(h){switch(h.label){case 0:return gu.Kn()?(l=c+"main",[4,gu.delete(l)]):[2,Promise.resolve()];case 1:return h.sent(),[2]}})})}(eb(n.I_,n.w_))];case 1:return a.sent(),i.resolve(),[3,3];case 2:return s=a.sent(),i.reject(s),[3,3];case 3:return[2]}})})}),i.promise}(t.d_)},e}(),Nb=function(e){function t(n,r,i){var s=this;return(s=e.call(this,r)||this).Rd=i,s.INTERNAL={delete:function(){return s.terminate()}},n instanceof _p||(s.Pd=n),s}return Z(t,e),Object.defineProperty(t.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),t.prototype.settings=function(n){n.merge&&delete(n=Object.assign(Object.assign({},this.d_.V_()),n)).merge,this.d_.g_(n)},t.prototype.useEmulator=function(n,r){(function(i,s,a){var c=(i=qt(i,kl)).V_();c.host!=="firestore.googleapis.com"&&c.host!==s&&wp("Host has been set in both settings() and useEmulator(), emulator host will be used"),i.g_(Object.assign(Object.assign({},c),{host:s+":"+a,ssl:!1}))})(this.d_,n,r)},t.prototype.enableNetwork=function(){return function(n){var r=this;return n._s.enqueue(function(){return R(r,void 0,void 0,function(){var i,s;return N(this,function(a){switch(a.label){case 0:return[4,_1(n)];case 1:return i=a.sent(),[4,w1(n)];case 2:return s=a.sent(),[2,(i.yo(!0),function(c){var l=tt(c);return l.Nh.delete(0),uf(l)}(s))]}})})})}(Ye(qt(this.d_,Se)))},t.prototype.disableNetwork=function(){return function(n){var r=this;return n._s.enqueue(function(){return R(r,void 0,void 0,function(){var i,s;return N(this,function(a){switch(a.label){case 0:return[4,_1(n)];case 1:return i=a.sent(),[4,w1(n)];case 2:return s=a.sent(),[2,(i.yo(!1),function(c){return R(this,void 0,void 0,function(){var l;return N(this,function(h){switch(h.label){case 0:return(l=tt(c)).Nh.add(0),[4,ju(l)];case 1:return h.sent(),l.Oh.set("Offline"),[2]}})})}(s))]}})})})}(Ye(qt(this.d_,Se)))},t.prototype.enablePersistence=function(n){var r=!1,i=!1;return n&&Xx("synchronizeTabs",r=!!n.synchronizeTabs,"experimentalForceOwningTab",i=!!n.experimentalForceOwningTab),r?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,i)},t.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},t.prototype.waitForPendingWrites=function(){return function(n){var r=this,i=new kn;return n._s.Ps(function(){return R(r,void 0,void 0,function(){var s;return N(this,function(a){switch(a.label){case 0:return s=nW,[4,Ab(n)];case 1:return[2,s.apply(void 0,[a.sent(),i])]}})})}),i.promise}(Ye(qt(this.d_,Se)))},t.prototype.onSnapshotsInSync=function(n){return function(r,i){return function(s,a){var c=this,l=new bd(a);return s._s.Ps(function(){return R(c,void 0,void 0,function(){var h;return N(this,function(p){switch(p.label){case 0:return h=function(v,m){tt(v).Wh.add(m),m.next()},[4,Tu(s)];case 1:return[2,h.apply(void 0,[p.sent(),l])]}})})}),function(){l.i_(),s._s.Ps(function(){return R(c,void 0,void 0,function(){var h;return N(this,function(p){switch(p.label){case 0:return h=function(v,m){tt(v).Wh.delete(m)},[4,Tu(s)];case 1:return[2,h.apply(void 0,[p.sent(),l])]}})})})}}(Ye(r=qt(r,Se)),Su(i)?i:{next:i})}(this.d_,n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Pd)throw new G(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),t.prototype.collection=function(n){try{return new Lp(this,Jx(this.d_,n))}catch(r){throw Cn(r,"collection()","Firestore.collection()")}},t.prototype.doc=function(n){try{return new Cs(this,zh(this.d_,n))}catch(r){throw Cn(r,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(n){try{return new lf(this,function(r,i){if(r=qt(r,kl),mb("collectionGroup","collection id",i),i.indexOf("/")>=0)throw new G(k.INVALID_ARGUMENT,"Invalid collection ID '"+i+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Wn(r,null,function(s){return new Wi(Ht.ct(),s)}(i))}(this.d_,n))}catch(r){throw Cn(r,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(n){var r=this;return function(i,s){return function(a,c){var l=this,h=new kn;return a._s.Ps(function(){return R(l,void 0,void 0,function(){var p;return N(this,function(v){switch(v.label){case 0:return[4,function(m){return Sd(m).then(function(y){return y.Sh})}(a)];case 1:return p=v.sent(),new SW(a._s,p,c,h).run(),[2]}})})}),h.promise}(Ye(i),function(a){return s(new MW(i,a))})}(this.d_,function(i){return n(new yP(r,i))})},t.prototype.batch=function(){var n=this;return Ye(this.d_),new _P(new LW(this.d_,function(r){return Ll(n.d_,r)}))},t.prototype.loadBundle=function(n){throw new G(k.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(n){throw new G(k.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(Mt),Cd=function(e){function t(n){var r=this;return(r=e.call(this)||this).firestore=n,r}return Z(t,e),t.prototype.Wf=function(n){return new mP(new Ds(n))},t.prototype.jf=function(n){var r=this.Jf(n,this.firestore.I_);return Cs.yd(r,this.firestore,null)},t}(Cb);function UW(e){var t;t=e,Vr.setLogLevel(t)}var yP=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).Yf=n,i.Xf=new Cd(n),i}return Z(t,e),t.prototype.get=function(n){var r=this,i=_s(n);return this.d_.get(i).then(function(s){return new Ml(r.Yf,new Mi(r.Yf.d_,r.Xf,s.S_,s.Zf,s.metadata,i.v_))})},t.prototype.set=function(n,r,i){var s=_s(n);return i?(yb("Transaction.set",i),this.d_.set(s,r,i)):this.d_.set(s,r),this},t.prototype.update=function(n,r,i){for(var s,a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];var l=_s(n);return arguments.length===2?this.d_.update(l,r):(s=this.d_).update.apply(s,Ae([l,r,i],a)),this},t.prototype.delete=function(n){var r=_s(n);return this.d_.delete(r),this},t}(Mt),_P=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.set=function(n,r,i){var s=_s(n);return i?(yb("WriteBatch.set",i),this.d_.set(s,r,i)):this.d_.set(s,r),this},t.prototype.update=function(n,r,i){for(var s,a=[],c=3;c<arguments.length;c++)a[c-3]=arguments[c];var l=_s(n);return arguments.length===2?this.d_.update(l,r):(s=this.d_).update.apply(s,Ae([l,r,i],a)),this},t.prototype.delete=function(n){var r=_s(n);return this.d_.delete(r),this},t.prototype.commit=function(){return this.d_.commit()},t}(Mt),Nd=function(e){function t(n,r,i){var s=this;return(s=e.call(this,i)||this).Yf=n,s.Xf=r,s}return Z(t,e),t.prototype.fromFirestore=function(n,r){var i=new Zc(this.Yf.d_,this.Xf,n.S_,n.Zf,n.metadata,null);return this.d_.fromFirestore(new Fl(this.Yf,i),r??{})},t.prototype.toFirestore=function(n,r){return r?this.d_.toFirestore(n,r):this.d_.toFirestore(n)},t.gd=function(n,r){var i=t.Vd,s=i.get(n);s||(s=new WeakMap,i.set(n,s));var a=s.get(r);return a||(a=new t(n,new Cd(n),r),s.set(r,a)),a},t}(Mt);Nd.Vd=new WeakMap;var Cs=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).firestore=n,i.Xf=new Cd(n),i}return Z(t,e),t.pd=function(n,r,i){if(n.length%2!=0)throw new G(k.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+n.rt()+" has "+n.length);return new t(r,new ve(r.d_,i,new ht(n)))},t.yd=function(n,r,i){return new t(r,new ve(r.d_,i,n))},Object.defineProperty(t.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Lp(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(n){try{return new Lp(this.firestore,Jx(this.d_,n))}catch(r){throw Cn(r,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(n){return n instanceof Mt&&(n=n.d_),n instanceof ve&&Zx(this.d_,n)},t.prototype.set=function(n,r){r=yb("DocumentReference.set",r);try{return function(i,s,a){i=qt(i,ve);var c=qt(i.firestore,Se),l=Ad(i.v_,s,a);return Ll(c,[Td(Ks(c),"setDoc",i.S_,l,i.v_!==null,a).F_(i.S_,dn.Kt())])}(this.d_,n,r)}catch(i){throw Cn(i,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(n,r){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];try{return arguments.length===1?O1(this.d_,n):O1.apply(void 0,Ae([this.d_,n,r],i))}catch(a){throw Cn(a,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Ll(qt((n=this.d_).firestore,Se),[new sf(n.S_,dn.Kt())]);var n},t.prototype.onSnapshot=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=wP(r),a=bP(r,function(c){return new Ml(n.firestore,new Mi(n.firestore.d_,n.Xf,c.S_,c.Zf,c.metadata,n.d_.v_))});return gP(this.d_,s,a)},t.prototype.get=function(n){var r=this;return((n==null?void 0:n.source)==="cache"?function(i){i=qt(i,ve);var s=qt(i.firestore,Se),a=Ye(s),c=new As(s);return function(l,h){var p=this,v=new kn;return l._s.Ps(function(){return R(p,void 0,void 0,function(){var m;return N(this,function(y){switch(y.label){case 0:return m=function(b,E,I){return R(this,void 0,void 0,function(){var C,P;return N(this,function(D){switch(D.label){case 0:return D.trys.push([0,2,,3]),[4,function(F,Y){var U=tt(F);return U.persistence.runTransaction("read document","readonly",function(_t){return U.Tc.Ho(_t,Y)})}(b,E)];case 1:return(P=D.sent())instanceof te?I.resolve(P):P instanceof Be?I.resolve(null):I.reject(new G(k.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return C=D.sent(),P=Fu(C,"Failed to get document '"+E+" from cache"),I.reject(P),[3,3];case 3:return[2]}})})},[4,Sb(l)];case 1:return[2,m.apply(void 0,[y.sent(),h,v])]}})})}),v.promise}(a,i.S_).then(function(l){return new Mi(s,c,i.S_,l,new ys(l instanceof te&&l.Vt,!0),i.v_)})}(this.d_):(n==null?void 0:n.source)==="server"?function(i){i=qt(i,ve);var s=qt(i.firestore,Se);return b1(Ye(s),i.S_,{source:"server"}).then(function(a){return f_(s,i,a)})}(this.d_):function(i){i=qt(i,ve);var s=qt(i.firestore,Se);return b1(Ye(s),i.S_).then(function(a){return f_(s,i,a)})}(this.d_)).then(function(i){return new Ml(r.firestore,new Mi(r.firestore.d_,r.Xf,i.S_,i.Zf,i.metadata,r.d_.v_))})},t.prototype.withConverter=function(n){return new t(this.firestore,this.d_.withConverter(Nd.gd(this.firestore,n)))},t}(Mt);function Cn(e,t,n){return e.message=e.message.replace(t,n),e}function wP(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(typeof r=="object"&&!Su(r))return r}return{}}function bP(e,t){var n,r,i;return{next:function(s){i.next&&i.next(t(s))},error:(n=(i=Su(e[0])?e[0]:Su(e[1])?e[1]:typeof e[0]=="function"?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Ml=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).Yf=n,i}return Z(t,e),Object.defineProperty(t.prototype,"ref",{get:function(){return new Cs(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(n){return this.d_.data(n)},t.prototype.get=function(n,r){return this.d_.get(n,r)},t.prototype.isEqual=function(n){return vP(this.d_,n.d_)},t}(Mt),Fl=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.prototype.data=function(n){return this.d_.data(n)},t}(Ml),lf=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).firestore=n,i.Xf=new Cd(n),i}return Z(t,e),t.prototype.where=function(n,r,i){try{return new t(this.firestore,ao(this.d_,function(s,a,c){var l=a,h=Dp("where",s);return new xW(h,l,c)}(n,r,i)))}catch(s){throw Cn(s,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(n,r){try{return new t(this.firestore,ao(this.d_,function(i,s){s===void 0&&(s="asc");var a=s,c=Dp("orderBy",i);return new PW(c,a)}(n,r)))}catch(i){throw Cn(i,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(n){try{return new t(this.firestore,ao(this.d_,function(r){return g1("limit",r),new S1("limit",r,"F")}(n)))}catch(r){throw Cn(r,"limit()","Query.limit()")}},t.prototype.limitToLast=function(n){try{return new t(this.firestore,ao(this.d_,function(r){return g1("limitToLast",r),new S1("limitToLast",r,"L")}(n)))}catch(r){throw Cn(r,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return new t(this.firestore,ao(this.d_,(function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new A1("startAt",i,!0)}).apply(void 0,n)))}catch(i){throw Cn(i,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return new t(this.firestore,ao(this.d_,(function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new A1("startAfter",i,!1)}).apply(void 0,n)))}catch(i){throw Cn(i,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return new t(this.firestore,ao(this.d_,(function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new C1("endBefore",i,!0)}).apply(void 0,n)))}catch(i){throw Cn(i,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{return new t(this.firestore,ao(this.d_,(function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return new C1("endAt",i,!1)}).apply(void 0,n)))}catch(i){throw Cn(i,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(n){return tP(this.d_,n.d_)},t.prototype.get=function(n){var r=this;return((n==null?void 0:n.source)==="cache"?function(i){i=qt(i,Wn);var s=qt(i.firestore,Se),a=Ye(s),c=new As(s);return function(l,h){var p=this,v=new kn;return l._s.Ps(function(){return R(p,void 0,void 0,function(){var m;return N(this,function(y){switch(y.label){case 0:return m=function(b,E,I){return R(this,void 0,void 0,function(){var C,P,D,F,Y;return N(this,function(U){switch(U.label){case 0:return U.trys.push([0,2,,3]),[4,xp(b,E,!0)];case 1:return Y=U.sent(),C=new Wx(E,Y.Rc),P=C.fl(Y.documents),D=C.wi(P,!1),I.resolve(D.snapshot),[3,3];case 2:return F=U.sent(),Y=Fu(F,"Failed to execute query '"+E+" against cache"),I.reject(Y),[3,3];case 3:return[2]}})})},[4,Sb(l)];case 1:return[2,m.apply(void 0,[y.sent(),h,v])]}})})}),v.promise}(a,i.C_).then(function(l){return new mo(s,c,i,l)})}(this.d_):(n==null?void 0:n.source)==="server"?function(i){i=qt(i,Wn);var s=qt(i.firestore,Se),a=Ye(s),c=new As(s);return E1(a,i.C_,{source:"server"}).then(function(l){return new mo(s,c,i,l)})}(this.d_):function(i){i=qt(i,Wn);var s=qt(i.firestore,Se),a=Ye(s),c=new As(s);return hP(i.C_),E1(a,i.C_).then(function(l){return new mo(s,c,i,l)})}(this.d_)).then(function(i){return new h_(r.firestore,new mo(r.firestore.d_,r.Xf,r.d_,i._d))})},t.prototype.onSnapshot=function(){for(var n=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=wP(r),a=bP(r,function(c){return new h_(n.firestore,new mo(n.firestore.d_,n.Xf,n.d_,c._d))});return gP(this.d_,s,a)},t.prototype.withConverter=function(n){return new t(this.firestore,this.d_.withConverter(Nd.gd(this.firestore,n)))},t}(Mt),jW=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).Yf=n,i}return Z(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Fl(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),t}(Mt),h_=function(e){function t(n,r){var i=this;return(i=e.call(this,r)||this).Yf=n,i}return Z(t,e),Object.defineProperty(t.prototype,"query",{get:function(){return new lf(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var n=this;return this.d_.docs.map(function(r){return new Fl(n.Yf,r)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(n){var r=this;return this.d_.docChanges(n).map(function(i){return new jW(r.Yf,i)})},t.prototype.forEach=function(n,r){var i=this;this.d_.forEach(function(s){n.call(r,new Fl(i.Yf,s))})},t.prototype.isEqual=function(n){return vP(this.d_,n.d_)},t}(Mt),Lp=function(e){function t(n,r){var i=this;return(i=e.call(this,n,r)||this).firestore=n,i.d_=r,i}return Z(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var n=this.d_.parent;return n?new Cs(this.firestore,n):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(n){try{return new Cs(this.firestore,n===void 0?zh(this.d_):zh(this.d_,n))}catch(r){throw Cn(r,"doc()","CollectionReference.doc()")}},t.prototype.add=function(n){var r=this;return function(i,s){var a=qt(i.firestore,Se),c=zh(i),l=Ad(i.v_,s);return Ll(a,[Td(Ks(i.firestore),"addDoc",c.S_,l,i.v_!==null,{}).F_(c.S_,dn.exists(!1))]).then(function(){return c})}(this.d_,n).then(function(i){return new Cs(r.firestore,i)})},t.prototype.isEqual=function(n){return Zx(this.d_,n.d_)},t.prototype.withConverter=function(n){return new t(this.firestore,this.d_.withConverter(Nd.gd(this.firestore,n)))},t}(lf);function _s(e){return e instanceof Mt&&(e=e.d_),qt(e,ve)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var VW=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.call(this,new(Li.bind.apply(Li,Ae([void 0],n))))||this}return Z(t,e),t.documentId=function(){return new t(Gr.ht().rt())},t.prototype.isEqual=function(n){return n instanceof Mt&&(n=n.d_),n instanceof Li&&this.d_.f_.isEqual(n.f_)},t}(Mt),BW=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Z(t,e),t.serverTimestamp=function(){var n=new _W("serverTimestamp");return n._methodName="FieldValue.serverTimestamp",new t(n)},t.delete=function(){var n=new _b("deleteField");return n._methodName="FieldValue.delete",new t(n)},t.arrayUnion=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=(function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return new wW("arrayUnion",s)}).apply(void 0,n);return i._methodName="FieldValue.arrayUnion",new t(i)},t.arrayRemove=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=(function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];return new bW("arrayRemove",s)}).apply(void 0,n);return i._methodName="FieldValue.arrayRemove",new t(i)},t.increment=function(n){var r=function(i){return new EW("increment",i)}(n);return r._methodName="FieldValue.increment",new t(r)},t.prototype.isEqual=function(n){return this.d_.isEqual(n.d_)},t}(Mt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qW(e){return function(t,n){var r=Ye(t=qt(t,Se)),i=new NW;return function(s,a,c,l){var h=this,p=function(v,m){return function(y,b){return new vW(y,b)}(function(y,b){if(y instanceof Uint8Array)return p1(y,b);if(y instanceof ArrayBuffer)return p1(new Uint8Array(y),b);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(typeof v=="string"?new TextEncoder().encode(v):v),m)}(c,af(a));s._s.Ps(function(){return R(h,void 0,void 0,function(){var v;return N(this,function(m){switch(m.label){case 0:return v=pW,[4,Ab(s)];case 1:return v.apply(void 0,[m.sent(),p,l]),[2]}})})})}(r,t.I_,n,i),i}(this.d_,e)}function HW(e){var t,n,r=this;return(t=this.d_,n=e,function(i,s){var a=this;return i._s.enqueue(function(){return R(a,void 0,void 0,function(){var c;return N(this,function(l){switch(l.label){case 0:return c=function(h,p){var v=tt(h);return v.persistence.runTransaction("Get named query","readonly",function(m){return v.wo.Ms(m,p)})},[4,Sb(i)];case 1:return[2,c.apply(void 0,[l.sent(),s])]}})})})}(Ye(t=qt(t,Se)),n).then(function(i){return i?new Wn(t,null,i.query):null})).then(function(i){return i?new lf(r,i):null})}var GW={Firestore:Nb,GeoPoint:Id,Timestamp:Gn,Blob:mP,Transaction:yP,WriteBatch:_P,DocumentReference:Cs,DocumentSnapshot:Ml,Query:lf,QueryDocumentSnapshot:Fl,QuerySnapshot:h_,CollectionReference:Lp,FieldPath:VW,FieldValue:BW,setLogLevel:UW,CACHE_SIZE_UNLIMITED:RW};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WW(e){(function(t,n){t.INTERNAL.registerComponent(new Kn("firestore",function(r){var i=r.getProvider("app").getImmediate();return n(i,r.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},GW)))})(e,function(t,n){return new Nb(t,new Se(t,n),new FW)}),e.registerVersion("@firebase/firestore","2.1.6")}WW(at);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $W(e){e.prototype.loadBundle=qW,e.prototype.namedQuery=HW}$W(Nb);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var k1={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ya=function(e){Z(t,e);function t(n,r,i){var s=e.call(this,r)||this;return Object.setPrototypeOf(s,t.prototype),s.code=n,s.details=i,s}return t}(Error);function zW(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function KW(e,t,n){var r=zW(e),i=r,s=void 0;try{var a=t&&t.error;if(a){var c=a.status;if(typeof c=="string"){if(!k1[c])return new Ya("internal","internal");r=k1[c],i=c}var l=a.message;typeof l=="string"&&(i=l),s=a.details,s!==void 0&&(s=n.decode(s))}}catch{}return r==="ok"?null:new Ya(r,i,s)}var QW=function(){function e(t,n){var r=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(function(i){return r.auth=i},function(){}),this.messaging||n.get().then(function(i){return r.messaging=i},function(){})}return e.prototype.getAuthToken=function(){return R(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:if(!this.auth)return[2,void 0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return t=n.sent(),t?[2,t.accessToken]:[2,void 0];case 3:return n.sent(),[2,void 0];case 4:return[2]}})})},e.prototype.getInstanceIdToken=function(){return R(this,void 0,void 0,function(){return N(this,function(t){if(!this.messaging||!("Notification"in self)||Notification.permission!=="granted")return[2,void 0];try{return[2,this.messaging.getToken()]}catch{return[2,void 0]}return[2]})})},e.prototype.getContext=function(){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return[4,this.getAuthToken()];case 1:return t=r.sent(),[4,this.getInstanceIdToken()];case 2:return n=r.sent(),[2,{authToken:t,instanceIdToken:n}]}})})},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YW="type.googleapis.com/google.protobuf.Int64Value",XW="type.googleapis.com/google.protobuf.UInt64Value";function D1(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var JW=function(){function e(){}return e.prototype.encode=function(t){var n=this;if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(Array.isArray(t))return t.map(function(r){return n.encode(r)});if(typeof t=="function"||typeof t=="object")return D1(t,function(r){return n.encode(r)});throw new Error("Data cannot be encoded in JSON: "+t)},e.prototype.decode=function(t){var n=this;if(t==null)return t;if(t["@type"])switch(t["@type"]){case YW:case XW:{var r=Number(t.value);if(isNaN(r))throw new Error("Data cannot be decoded from JSON: "+t);return r}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(i){return n.decode(i)}):typeof t=="function"||typeof t=="object"?D1(t,function(i){return n.decode(i)}):t},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZW(e){var t,n=new Promise(function(r,i){t=setTimeout(function(){i(new Ya("deadline-exceeded","deadline-exceeded"))},e)});return{timer:t,promise:n}}var L1=function(){function e(t,n,r,i,s){var a=this;i===void 0&&(i="us-central1"),this.app_=t,this.fetchImpl=s,this.serializer=new JW,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new QW(n,r),this.cancelAllRequests=new Promise(function(l){a.deleteService=function(){return l()}});try{var c=new URL(i);this.customDomain=c.origin,this.region="us-central1"}catch{this.customDomain=null,this.region=i}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(t){var n=this.app_.options.projectId;if(this.emulatorOrigin!==null){var r=this.emulatorOrigin;return r+"/"+n+"/"+this.region+"/"+t}return this.customDomain!==null?this.customDomain+"/"+t:"https://"+this.region+"-"+n+".cloudfunctions.net/"+t},e.prototype.useEmulator=function(t,n){this.emulatorOrigin="http://"+t+":"+n},e.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},e.prototype.httpsCallable=function(t,n){var r=this;return function(i){return r.call(t,i,n||{})}},e.prototype.postJSON=function(t,n,r){return R(this,void 0,void 0,function(){var i,s;return N(this,function(a){switch(a.label){case 0:r["Content-Type"]="application/json",a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(n),headers:r})];case 2:return i=a.sent(),[3,4];case 3:return a.sent(),[2,{status:0,json:null}];case 4:s=null,a.label=5;case 5:return a.trys.push([5,7,,8]),[4,i.json()];case 6:return s=a.sent(),[3,8];case 7:return a.sent(),[3,8];case 8:return[2,{status:i.status,json:s}]}})})},e.prototype.call=function(t,n,r){return R(this,void 0,void 0,function(){var i,s,a,c,l,h,p,v,m,y,b,E;return N(this,function(I){switch(I.label){case 0:return i=this._url(t),n=this.serializer.encode(n),s={data:n},a={},[4,this.contextProvider.getContext()];case 1:return c=I.sent(),c.authToken&&(a.Authorization="Bearer "+c.authToken),c.instanceIdToken&&(a["Firebase-Instance-ID-Token"]=c.instanceIdToken),l=r.timeout||7e4,h=ZW(l),p=h.timer,v=h.promise,[4,Promise.race([M1(p,this.postJSON(i,s,a)),v,M1(p,this.cancelAllRequests)])];case 2:if(m=I.sent(),!m)throw new Ya("cancelled","Firebase Functions instance was deleted.");if(y=KW(m.status,m.json,this.serializer),y)throw y;if(!m.json)throw new Ya("internal","Response is not valid JSON object.");if(b=m.json.data,typeof b>"u"&&(b=m.json.result),typeof b>"u")throw new Ya("internal","Response is missing data field.");return E=this.serializer.decode(b),[2,{data:E}]}})})},e}();function M1(e,t){return R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t$="functions";function e$(e,t){var n={Functions:L1};function r(i,s){var a=i.getProvider("app").getImmediate(),c=i.getProvider("auth-internal"),l=i.getProvider("messaging");return new L1(a,c,l,s,t)}e.INTERNAL.registerComponent(new Kn(t$,r,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}var n$="@firebase/functions",r$="0.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */e$(at,fetch.bind(self));at.registerVersion(n$,r$);function i$(e){return Array.prototype.slice.call(e)}function EP(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function Rd(e,t,n){var r,i=new Promise(function(s,a){r=e[t].apply(e,n),EP(r).then(s,a)});return i.request=r,i}function o$(e,t,n){var r=Rd(e,t,n);return r.then(function(i){if(i)return new Ul(i,r.request)})}function qu(e,t,n){n.forEach(function(r){Object.defineProperty(e.prototype,r,{get:function(){return this[t][r]},set:function(i){this[t][r]=i}})})}function Rb(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return Rd(this[t],i,arguments)})})}function Od(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return this[t][i].apply(this[t],arguments)})})}function IP(e,t,n,r){r.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return o$(this[t],i,arguments)})})}function Ys(e){this._index=e}qu(Ys,"_index",["name","keyPath","multiEntry","unique"]);Rb(Ys,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]);IP(Ys,"_index",IDBIndex,["openCursor","openKeyCursor"]);function Ul(e,t){this._cursor=e,this._request=t}qu(Ul,"_cursor",["direction","key","primaryKey","value"]);Rb(Ul,"_cursor",IDBCursor,["update","delete"]);["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(Ul.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,n),EP(t._request).then(function(r){if(r)return new Ul(r,t._request)})})})});function gi(e){this._store=e}gi.prototype.createIndex=function(){return new Ys(this._store.createIndex.apply(this._store,arguments))};gi.prototype.index=function(){return new Ys(this._store.index.apply(this._store,arguments))};qu(gi,"_store",["name","keyPath","indexNames","autoIncrement"]);Rb(gi,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]);IP(gi,"_store",IDBObjectStore,["openCursor","openKeyCursor"]);Od(gi,"_store",IDBObjectStore,["deleteIndex"]);function ff(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}ff.prototype.objectStore=function(){return new gi(this._tx.objectStore.apply(this._tx,arguments))};qu(ff,"_tx",["objectStoreNames","mode"]);Od(ff,"_tx",IDBTransaction,["abort"]);function xd(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new ff(n)}xd.prototype.createObjectStore=function(){return new gi(this._db.createObjectStore.apply(this._db,arguments))};qu(xd,"_db",["name","version","objectStoreNames"]);Od(xd,"_db",IDBDatabase,["deleteObjectStore","close"]);function Pd(e){this._db=e}Pd.prototype.transaction=function(){return new ff(this._db.transaction.apply(this._db,arguments))};qu(Pd,"_db",["name","version","objectStoreNames"]);Od(Pd,"_db",IDBDatabase,["close"]);["openCursor","openKeyCursor"].forEach(function(e){[gi,Ys].forEach(function(t){e in t.prototype&&(t.prototype[e.replace("open","iterate")]=function(){var n=i$(arguments),r=n[n.length-1],i=this._store||this._index,s=i[e].apply(i,n.slice(0,-1));s.onsuccess=function(){r(s.result)}})})});[Ys,gi].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(s){r.iterateCursor(t,function(a){if(!a){s(i);return}if(i.push(a.value),n!==void 0&&i.length==n){s(i);return}a.continue()})})})});function Ob(e,t,n){var r=Rd(indexedDB,"open",[e,t]),i=r.request;return i&&(i.onupgradeneeded=function(s){n&&n(new xd(i.result,s.oldVersion,i.transaction))}),r.then(function(s){return new Pd(s)})}function Qm(e){return Rd(indexedDB,"deleteDatabase",[e])}var s$="@firebase/installations",TP="0.4.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SP=1e4,AP="w:"+TP,CP="FIS_v2",a$="https://firebaseinstallations.googleapis.com/v1",u$=60*60*1e3,c$="installations",l$="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uo,f$=(uo={},uo["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',uo["not-registered"]="Firebase Installation is not registered.",uo["installation-not-found"]="Firebase Installation not found.",uo["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',uo["app-offline"]="Could not process request. Application offline.",uo["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",uo),Bi=new Do(c$,l$,f$);function NP(e){return e instanceof xu&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xb(e){var t=e.projectId;return a$+"/projects/"+t+"/installations"}function RP(e){return{token:e.token,requestStatus:2,expiresIn:h$(e.expiresIn),creationTime:Date.now()}}function Pb(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,Bi.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}})})}function OP(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function xP(e,t){var n=t.refreshToken,r=OP(e);return r.append("Authorization",p$(n)),r}function kb(e){return R(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return[4,e()];case 1:return t=n.sent(),t.status>=500&&t.status<600?[2,e()]:[2,t]}})})}function h$(e){return Number(e.replace("s","000"))}function p$(e){return CP+" "+e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d$(e,t){var n=t.fid;return R(this,void 0,void 0,function(){var r,i,s,a,c,l,h;return N(this,function(p){switch(p.label){case 0:return r=xb(e),i=OP(e),s={fid:n,authVersion:CP,appId:e.appId,sdkVersion:AP},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,kb(function(){return fetch(r,a)})];case 1:return c=p.sent(),c.ok?[4,c.json()]:[3,3];case 2:return l=p.sent(),h={fid:l.fid||n,registrationStatus:2,refreshToken:l.refreshToken,authToken:RP(l.authToken)},[2,h];case 3:return[4,Pb("Create Installation",c)];case 4:throw p.sent()}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$(e){var t=btoa(String.fromCharCode.apply(String,Gi(e)));return t.replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var g$=/^[cdef][\w-]{21}$/,p_="";function m$(){try{var e=new Uint8Array(17),t=self.crypto||self.msCrypto;t.getRandomValues(e),e[0]=112+e[0]%16;var n=y$(e);return g$.test(n)?n:p_}catch{return p_}}function y$(e){var t=v$(e);return t.substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hu(e){return e.appName+"!"+e.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Au=new Map;function kP(e,t){var n=Hu(e);DP(n,t),b$(n,t)}function _$(e,t){LP();var n=Hu(e),r=Au.get(n);r||(r=new Set,Au.set(n,r)),r.add(t)}function w$(e,t){var n=Hu(e),r=Au.get(n);r&&(r.delete(t),r.size===0&&Au.delete(n),MP())}function DP(e,t){var n,r,i=Au.get(e);if(i)try{for(var s=Te(i),a=s.next();!a.done;a=s.next()){var c=a.value;c(t)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}function b$(e,t){var n=LP();n&&n.postMessage({key:e,fid:t}),MP()}var ws=null;function LP(){return!ws&&"BroadcastChannel"in self&&(ws=new BroadcastChannel("[Firebase] FID Change"),ws.onmessage=function(e){DP(e.data.key,e.data.fid)}),ws}function MP(){Au.size===0&&ws&&(ws.close(),ws=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E$="firebase-installations-database",I$=1,Fs="firebase-installations-store",Ym=null;function Db(){return Ym||(Ym=Ob(E$,I$,function(e){switch(e.oldVersion){case 0:e.createObjectStore(Fs)}})),Ym}function Mp(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a;return N(this,function(c){switch(c.label){case 0:return n=Hu(e),[4,Db()];case 1:return r=c.sent(),i=r.transaction(Fs,"readwrite"),s=i.objectStore(Fs),[4,s.get(n)];case 2:return a=c.sent(),[4,s.put(t,n)];case 3:return c.sent(),[4,i.complete];case 4:return c.sent(),(!a||a.fid!==t.fid)&&kP(e,t.fid),[2,t]}})})}function Lb(e){return R(this,void 0,void 0,function(){var t,n,r;return N(this,function(i){switch(i.label){case 0:return t=Hu(e),[4,Db()];case 1:return n=i.sent(),r=n.transaction(Fs,"readwrite"),[4,r.objectStore(Fs).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function hf(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c;return N(this,function(l){switch(l.label){case 0:return n=Hu(e),[4,Db()];case 1:return r=l.sent(),i=r.transaction(Fs,"readwrite"),s=i.objectStore(Fs),[4,s.get(n)];case 2:return a=l.sent(),c=t(a),c!==void 0?[3,4]:[4,s.delete(n)];case 3:return l.sent(),[3,6];case 4:return[4,s.put(c,n)];case 5:l.sent(),l.label=6;case 6:return[4,i.complete];case 7:return l.sent(),c&&(!a||a.fid!==c.fid)&&kP(e,c.fid),[2,c]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb(e){return R(this,void 0,void 0,function(){var t,n,r;return N(this,function(i){switch(i.label){case 0:return[4,hf(e,function(s){var a=T$(s),c=S$(e,a);return t=c.registrationPromise,c.installationEntry})];case 1:return n=i.sent(),n.fid!==p_?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}})})}function T$(e){var t=e||{fid:m$(),registrationStatus:0};return FP(t)}function S$(e,t){if(t.registrationStatus===0){if(!navigator.onLine){var n=Promise.reject(Bi.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=A$(e,r);return{installationEntry:r,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:C$(e)}:{installationEntry:t}}function A$(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,d$(e,t)];case 1:return n=i.sent(),[2,Mp(e,n)];case 2:return r=i.sent(),NP(r)&&r.customData.serverCode===409?[4,Lb(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Mp(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}})})}function C$(e){return R(this,void 0,void 0,function(){var t,n,r,i;return N(this,function(s){switch(s.label){case 0:return[4,F1(e)];case 1:t=s.sent(),s.label=2;case 2:return t.registrationStatus!==1?[3,5]:[4,PP(100)];case 3:return s.sent(),[4,F1(e)];case 4:return t=s.sent(),[3,2];case 5:return t.registrationStatus!==0?[3,7]:[4,Mb(e)];case 6:return n=s.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,t]}})})}function F1(e){return hf(e,function(t){if(!t)throw Bi.create("installation-not-found");return FP(t)})}function FP(e){return N$(e)?{fid:e.fid,registrationStatus:0}:e}function N$(e){return e.registrationStatus===1&&e.registrationTime+SP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R$(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return R(this,void 0,void 0,function(){var i,s,a,c,l,h,p,v;return N(this,function(m){switch(m.label){case 0:return i=O$(n,t),s=xP(n,t),a=r.getImmediate({optional:!0}),a&&s.append("x-firebase-client",a.getPlatformInfoString()),c={installation:{sdkVersion:AP}},l={method:"POST",headers:s,body:JSON.stringify(c)},[4,kb(function(){return fetch(i,l)})];case 1:return h=m.sent(),h.ok?[4,h.json()]:[3,3];case 2:return p=m.sent(),v=RP(p),[2,v];case 3:return[4,Pb("Generate Auth Token",h)];case 4:throw m.sent()}})})}function O$(e,t){var n=t.fid;return xb(e)+"/"+n+"/authTokens:generate"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fb(e,t){return t===void 0&&(t=!1),R(this,void 0,void 0,function(){var n,r,i,s;return N(this,function(a){switch(a.label){case 0:return[4,hf(e.appConfig,function(c){if(!UP(c))throw Bi.create("not-registered");var l=c.authToken;if(!t&&k$(l))return c;if(l.requestStatus===1)return n=x$(e,t),c;if(!navigator.onLine)throw Bi.create("app-offline");var h=L$(c);return n=P$(e,h),h})];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return s=a.sent(),[3,4];case 3:s=r.authToken,a.label=4;case 4:return i=s,[2,i]}})})}function x$(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return[4,U1(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return n.authToken.requestStatus!==1?[3,5]:[4,PP(100)];case 3:return i.sent(),[4,U1(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,r.requestStatus===0?[2,Fb(e,t)]:[2,r]}})})}function U1(e){return hf(e,function(t){if(!UP(t))throw Bi.create("not-registered");var n=t.authToken;return M$(n)?ee(ee({},t),{authToken:{requestStatus:0}}):t})}function P$(e,t){return R(this,void 0,void 0,function(){var n,i,r,i;return N(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,8]),[4,R$(e,t)];case 1:return n=s.sent(),i=ee(ee({},t),{authToken:n}),[4,Mp(e.appConfig,i)];case 2:return s.sent(),[2,n];case 3:return r=s.sent(),NP(r)&&(r.customData.serverCode===401||r.customData.serverCode===404)?[4,Lb(e.appConfig)]:[3,5];case 4:return s.sent(),[3,7];case 5:return i=ee(ee({},t),{authToken:{requestStatus:0}}),[4,Mp(e.appConfig,i)];case 6:s.sent(),s.label=7;case 7:throw r;case 8:return[2]}})})}function UP(e){return e!==void 0&&e.registrationStatus===2}function k$(e){return e.requestStatus===2&&!D$(e)}function D$(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+u$}function L$(e){var t={requestStatus:1,requestTime:Date.now()};return ee(ee({},e),{authToken:t})}function M$(e){return e.requestStatus===1&&e.requestTime+SP<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F$(e){return R(this,void 0,void 0,function(){var t,n,r;return N(this,function(i){switch(i.label){case 0:return[4,Mb(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,r=t.registrationPromise,r?r.catch(console.error):Fb(e).catch(console.error),[2,n.fid]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U$(e,t){return t===void 0&&(t=!1),R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return[4,j$(e.appConfig)];case 1:return r.sent(),[4,Fb(e,t)];case 2:return n=r.sent(),[2,n.token]}})})}function j$(e){return R(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return[4,Mb(e)];case 1:return t=n.sent().registrationPromise,t?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V$(e,t){return R(this,void 0,void 0,function(){var n,r,i,s;return N(this,function(a){switch(a.label){case 0:return n=B$(e,t),r=xP(e,t),i={method:"DELETE",headers:r},[4,kb(function(){return fetch(n,i)})];case 1:return s=a.sent(),s.ok?[3,3]:[4,Pb("Delete Installation",s)];case 2:throw a.sent();case 3:return[2]}})})}function B$(e,t){var n=t.fid;return xb(e)+"/"+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q$(e){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return t=e.appConfig,[4,hf(t,function(i){if(!(i&&i.registrationStatus===0))return i})];case 1:if(n=r.sent(),!n)return[3,6];if(n.registrationStatus!==1)return[3,2];throw Bi.create("delete-pending-registration");case 2:if(n.registrationStatus!==2)return[3,6];if(navigator.onLine)return[3,3];throw Bi.create("app-offline");case 3:return[4,V$(t,n)];case 4:return r.sent(),[4,Lb(t)];case 5:r.sent(),r.label=6;case 6:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$(e,t){var n=e.appConfig;return _$(n,t),function(){w$(n,t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(e){var t,n;if(!e||!e.options)throw Xm("App Configuration");if(!e.name)throw Xm("App Name");var r=["projectId","apiKey","appId"];try{for(var i=Te(r),s=i.next();!s.done;s=i.next()){var a=s.value;if(!e.options[a])throw Xm(a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Xm(e){return Bi.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W$(e){var t="installations";e.INTERNAL.registerComponent(new Kn(t,function(n){var r=n.getProvider("app").getImmediate(),i=G$(r),s=n.getProvider("platform-logger"),a={appConfig:i,platformLoggerProvider:s},c={app:r,getId:function(){return F$(a)},getToken:function(l){return U$(a,l)},delete:function(){return q$(a)},onIdChange:function(l){return H$(a,l)}};return c},"PUBLIC")),e.registerVersion(s$,TP)}W$(at);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me,$$=(Me={},Me["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Me["only-available-in-window"]="This method is available in a Window context.",Me["only-available-in-sw"]="This method is available in a service worker context.",Me["permission-default"]="The notification permission was not granted and dismissed instead.",Me["permission-blocked"]="The notification permission was not granted and blocked instead.",Me["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Me["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Me["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Me["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Me["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Me["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Me["token-update-no-token"]="FCM returned no token when updating the user to push.",Me["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Me["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Me["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Me["invalid-vapid-key"]="The public VAPID key must be a string.",Me["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Me),Qt=new Do("messaging","Messaging",$$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z$="/firebase-messaging-sw.js",K$="/firebase-cloud-messaging-push-scope",Fp="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Q$="https://fcmregistrations.googleapis.com/v1",jP="FCM_MSG",Y$="FirebaseMessaging: ",X$="google.c.a.e",VP="google.c.a.c_id",J$="google.c.a.ts",Z$="google.c.a.c_l",tz=1e3,ez=3e3;/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Us;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(Us||(Us={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(e){var t=new Uint8Array(e),n=btoa(String.fromCharCode.apply(String,Gi(t)));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nz(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jm="fcm_token_details_db",rz=5,j1="fcm_token_object_Store";function iz(e){return R(this,void 0,void 0,function(){var t,n,r,i,s=this;return N(this,function(a){switch(a.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=a.sent(),n=t.map(function(c){return c.name}),!n.includes(Jm))return[2,null];a.label=2;case 2:return r=null,[4,Ob(Jm,rz,function(c){return R(s,void 0,void 0,function(){var l,h,p,p,p,v;return N(this,function(m){switch(m.label){case 0:return c.oldVersion<2?[2]:c.objectStoreNames.contains(j1)?(l=c.transaction.objectStore(j1),[4,l.index("fcmSenderId").get(e)]):[2];case 1:return h=m.sent(),[4,l.clear()];case 2:if(m.sent(),!h)return[2];if(c.oldVersion===2){if(p=h,!p.auth||!p.p256dh||!p.endpoint)return[2];r={token:p.fcmToken,createTime:(v=p.createTime)!==null&&v!==void 0?v:Date.now(),subscriptionOptions:{auth:p.auth,p256dh:p.p256dh,endpoint:p.endpoint,swScope:p.swScope,vapidKey:typeof p.vapidKey=="string"?p.vapidKey:Ri(p.vapidKey)}}}else c.oldVersion===3?(p=h,r={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:Ri(p.auth),p256dh:Ri(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:Ri(p.vapidKey)}}):c.oldVersion===4&&(p=h,r={token:p.fcmToken,createTime:p.createTime,subscriptionOptions:{auth:Ri(p.auth),p256dh:Ri(p.p256dh),endpoint:p.endpoint,swScope:p.swScope,vapidKey:Ri(p.vapidKey)}});return[2]}})})})];case 3:return i=a.sent(),i.close(),[4,Qm(Jm)];case 4:return a.sent(),[4,Qm("fcm_vapid_details_db")];case 5:return a.sent(),[4,Qm("undefined")];case 6:return a.sent(),[2,oz(r)?r:null]}})})}function oz(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sz="firebase-messaging-database",az=1,js="firebase-messaging-store",Zm=null;function Ub(){return Zm||(Zm=Ob(sz,az,function(e){switch(e.oldVersion){case 0:e.createObjectStore(js)}})),Zm}function Up(e){return R(this,void 0,void 0,function(){var t,n,r,i;return N(this,function(s){switch(s.label){case 0:return t=Vb(e),[4,Ub()];case 1:return n=s.sent(),[4,n.transaction(js).objectStore(js).get(t)];case 2:return r=s.sent(),r?[2,r]:[3,3];case 3:return[4,iz(e.appConfig.senderId)];case 4:return i=s.sent(),i?[4,jb(e,i)]:[3,6];case 5:return s.sent(),[2,i];case 6:return[2]}})})}function jb(e,t){return R(this,void 0,void 0,function(){var n,r,i;return N(this,function(s){switch(s.label){case 0:return n=Vb(e),[4,Ub()];case 1:return r=s.sent(),i=r.transaction(js,"readwrite"),[4,i.objectStore(js).put(t,n)];case 2:return s.sent(),[4,i.complete];case 3:return s.sent(),[2,t]}})})}function uz(e){return R(this,void 0,void 0,function(){var t,n,r;return N(this,function(i){switch(i.label){case 0:return t=Vb(e),[4,Ub()];case 1:return n=i.sent(),r=n.transaction(js,"readwrite"),[4,r.objectStore(js).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}})})}function Vb(e){var t=e.appConfig;return t.appId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cz(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return N(this,function(h){switch(h.label){case 0:return[4,qb(e)];case 1:n=h.sent(),r=qP(t),i={method:"POST",headers:n,body:JSON.stringify(r)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(Bb(e.appConfig),i)];case 3:return a=h.sent(),[4,a.json()];case 4:return s=h.sent(),[3,6];case 5:throw c=h.sent(),Qt.create("token-subscribe-failed",{errorInfo:c});case 6:if(s.error)throw l=s.error.message,Qt.create("token-subscribe-failed",{errorInfo:l});if(!s.token)throw Qt.create("token-subscribe-no-token");return[2,s.token]}})})}function lz(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return N(this,function(h){switch(h.label){case 0:return[4,qb(e)];case 1:n=h.sent(),r=qP(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},h.label=2;case 2:return h.trys.push([2,5,,6]),[4,fetch(Bb(e.appConfig)+"/"+t.token,i)];case 3:return a=h.sent(),[4,a.json()];case 4:return s=h.sent(),[3,6];case 5:throw c=h.sent(),Qt.create("token-update-failed",{errorInfo:c});case 6:if(s.error)throw l=s.error.message,Qt.create("token-update-failed",{errorInfo:l});if(!s.token)throw Qt.create("token-update-no-token");return[2,s.token]}})})}function BP(e,t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c;return N(this,function(l){switch(l.label){case 0:return[4,qb(e)];case 1:n=l.sent(),r={method:"DELETE",headers:n},l.label=2;case 2:return l.trys.push([2,5,,6]),[4,fetch(Bb(e.appConfig)+"/"+t,r)];case 3:return i=l.sent(),[4,i.json()];case 4:if(s=l.sent(),s.error)throw a=s.error.message,Qt.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw c=l.sent(),Qt.create("token-unsubscribe-failed",{errorInfo:c});case 6:return[2]}})})}function Bb(e){var t=e.projectId;return Q$+"/projects/"+t+"/registrations"}function qb(e){var t=e.appConfig,n=e.installations;return R(this,void 0,void 0,function(){var r;return N(this,function(i){switch(i.label){case 0:return[4,n.getToken()];case 1:return r=i.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+r})]}})})}function qP(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,s={web:{endpoint:r,auth:n,p256dh:t}};return i!==Fp&&(s.web.applicationPubKey=i),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fz=7*24*60*60*1e3;function d_(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a;return N(this,function(c){switch(c.label){case 0:if(Notification.permission!=="granted")throw Qt.create("permission-blocked");return[4,pz(t,n)];case 1:return r=c.sent(),[4,Up(e)];case 2:return i=c.sent(),s={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:Ri(r.getKey("auth")),p256dh:Ri(r.getKey("p256dh"))},i?[3,3]:[2,V1(e,s)];case 3:if(dz(i.subscriptionOptions,s))return[3,8];c.label=4;case 4:return c.trys.push([4,6,,7]),[4,BP(e,i.token)];case 5:return c.sent(),[3,7];case 6:return a=c.sent(),console.warn(a),[3,7];case 7:return[2,V1(e,s)];case 8:return Date.now()>=i.createTime+fz?[2,hz({token:i.token,createTime:Date.now(),subscriptionOptions:s},e,t)]:[2,i.token];case 9:return[2]}})})}function tl(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return[4,Up(e)];case 1:return n=i.sent(),n?[4,BP(e,n.token)]:[3,4];case 2:return i.sent(),[4,uz(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}})})}function hz(e,t,n){return R(this,void 0,void 0,function(){var r,i,s;return N(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,lz(t,e)];case 1:return r=a.sent(),i=ee(ee({},e),{token:r,createTime:Date.now()}),[4,jb(t,i)];case 2:return a.sent(),[2,r];case 3:return s=a.sent(),[4,tl(t,n)];case 4:throw a.sent(),s;case 5:return[2]}})})}function V1(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return[4,cz(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,jb(e,r)];case 2:return i.sent(),[2,r.token]}})})}function pz(e,t){return R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:nz(t)})]}})})}function dz(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,s=t.p256dh===e.p256dh;return n&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vz(e){var t={from:e.from,collapseKey:e.collapse_key};return gz(t,e),mz(t,e),yz(t,e),t}function gz(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}function mz(e,t){t.data&&(e.data=t.data)}function yz(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(e){return typeof e=="object"&&!!e&&VP in e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(e){return new Promise(function(t){setTimeout(t,e)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _z=function(){function e(t){var n=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(r){r.waitUntil(n.onPush(r))}),self.addEventListener("pushsubscriptionchange",function(r){r.waitUntil(n.onSubChange(r))}),self.addEventListener("notificationclick",function(r){r.waitUntil(n.onNotificationClick(r))})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||typeof t!="function")throw Qt.create("invalid-bg-handler");this.bgMessageHandler=t},e.prototype.onBackgroundMessage=function(t){var n=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){n.bgMessageHandler=null}},e.prototype.getToken=function(){var t,n;return R(this,void 0,void 0,function(){var r;return N(this,function(i){switch(i.label){case 0:return this.vapidKey?[3,2]:[4,Up(this.firebaseDependencies)];case 1:r=i.sent(),this.vapidKey=(n=(t=r==null?void 0:r.subscriptionOptions)===null||t===void 0?void 0:t.vapidKey)!==null&&n!==void 0?n:Fp,i.label=2;case 2:return[2,d_(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},e.prototype.deleteToken=function(){return tl(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw Qt.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(t){if(this.vapidKey!==null)throw Qt.create("use-vapid-key-after-get-token");if(typeof t!="string"||t.length===0)throw Qt.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(){throw Qt.create("only-available-in-window")},e.prototype.onMessage=function(){throw Qt.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw Qt.create("only-available-in-window")},e.prototype.onPush=function(t){return R(this,void 0,void 0,function(){var n,r,i,s;return N(this,function(a){switch(a.label){case 0:return n=bz(t),n?[4,GP()]:(console.debug(Y$+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return r=a.sent(),Iz(r)?[2,Tz(r,n)]:(i=!1,n.notification?[4,Sz(wz(n))]:[3,3]);case 2:a.sent(),i=!0,a.label=3;case 3:return i===!0&&this.isOnBackgroundMessageUsed===!1?[2]:(this.bgMessageHandler&&(s=vz(n),typeof this.bgMessageHandler=="function"?this.bgMessageHandler(s):this.bgMessageHandler.next(s)),[4,B1(tz)]);case 4:return a.sent(),[2]}})})},e.prototype.onSubChange=function(t){var n,r;return R(this,void 0,void 0,function(){var i,s;return N(this,function(a){switch(a.label){case 0:return i=t.newSubscription,i?[3,2]:[4,tl(this.firebaseDependencies,self.registration)];case 1:return a.sent(),[2];case 2:return[4,Up(this.firebaseDependencies)];case 3:return s=a.sent(),[4,tl(this.firebaseDependencies,self.registration)];case 4:return a.sent(),[4,d_(this.firebaseDependencies,self.registration,(r=(n=s==null?void 0:s.subscriptionOptions)===null||n===void 0?void 0:n.vapidKey)!==null&&r!==void 0?r:Fp)];case 5:return a.sent(),[2]}})})},e.prototype.onNotificationClick=function(t){var n,r;return R(this,void 0,void 0,function(){var i,s,a,c,l;return N(this,function(h){switch(h.label){case 0:if(i=(r=(n=t.notification)===null||n===void 0?void 0:n.data)===null||r===void 0?void 0:r[jP],i){if(t.action)return[2]}else return[2];return t.stopImmediatePropagation(),t.notification.close(),s=Az(i),s?(a=new URL(s,self.location.href),c=new URL(self.location.origin),a.host!==c.host?[2]:[4,Ez(a)]):[2];case 1:return l=h.sent(),l?[3,4]:[4,self.clients.openWindow(s)];case 2:return l=h.sent(),[4,B1(ez)];case 3:return h.sent(),[3,6];case 4:return[4,l.focus()];case 5:l=h.sent(),h.label=6;case 6:return l?(i.messageType=Us.NOTIFICATION_CLICKED,i.isFirebaseMessaging=!0,[2,l.postMessage(i)]):[2]}})})},e}();function wz(e){var t,n=ee({},e.notification);return n.data=(t={},t[jP]=e,t),n}function bz(e){var t=e.data;if(!t)return null;try{return t.json()}catch{return null}}function Ez(e){return R(this,void 0,void 0,function(){var t,n,r,i,s,a,c;return N(this,function(l){switch(l.label){case 0:return[4,GP()];case 1:t=l.sent();try{for(n=Te(t),r=n.next();!r.done;r=n.next())if(i=r.value,s=new URL(i.url,self.location.href),e.host===s.host)return[2,i]}catch(h){a={error:h}}finally{try{r&&!r.done&&(c=n.return)&&c.call(n)}finally{if(a)throw a.error}}return[2,null]}})})}function Iz(e){return e.some(function(t){return t.visibilityState==="visible"&&!t.url.startsWith("chrome-extension://")})}function Tz(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=Us.PUSH_RECEIVED;try{for(var i=Te(e),s=i.next();!s.done;s=i.next()){var a=s.value;a.postMessage(t)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function GP(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Sz(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification((t=e.title)!==null&&t!==void 0?t:"",e)}function Az(e){var t,n,r,i=(n=(t=e.fcmOptions)===null||t===void 0?void 0:t.link)!==null&&n!==void 0?n:(r=e.notification)===null||r===void 0?void 0:r.click_action;return i||(HP(e.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cz=function(){function e(t){var n=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(r){return n.messageEventListener(r)})}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return n=t.data,n.isFirebaseMessaging?(this.onMessageCallback&&n.messageType===Us.PUSH_RECEIVED&&(typeof this.onMessageCallback=="function"?this.onMessageCallback(Rz(Object.assign({},n))):this.onMessageCallback.next(Object.assign({},n))),r=n.data,HP(r)&&r[X$]==="1"?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(t){return R(this,void 0,void 0,function(){return N(this,function(n){switch(n.label){case 0:return Notification.permission!=="default"?[3,2]:[4,Notification.requestPermission()];case 1:n.sent(),n.label=2;case 2:if(Notification.permission!=="granted")throw Qt.create("permission-blocked");return[4,this.updateVapidKey(t==null?void 0:t.vapidKey)];case 3:return n.sent(),[4,this.updateSwReg(t==null?void 0:t.serviceWorkerRegistration)];case 4:return n.sent(),[2,d_(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},e.prototype.updateVapidKey=function(t){return R(this,void 0,void 0,function(){return N(this,function(n){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=Fp),[2]})})},e.prototype.updateSwReg=function(t){return R(this,void 0,void 0,function(){return N(this,function(n){switch(n.label){case 0:return!t&&!this.swRegistration?[4,this.registerDefaultSw()]:[3,2];case 1:n.sent(),n.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw Qt.create("invalid-sw-registration");return this.swRegistration=t,[2]}})})},e.prototype.registerDefaultSw=function(){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register(z$,{scope:K$})];case 1:return t.swRegistration=r.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw n=r.sent(),Qt.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 3:return[2]}})})},e.prototype.deleteToken=function(){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,tl(this.firebaseDependencies,this.swRegistration)]}})})},e.prototype.requestPermission=function(){return R(this,void 0,void 0,function(){var t;return N(this,function(n){switch(n.label){case 0:return Notification.permission==="granted"?[2]:[4,Notification.requestPermission()];case 1:if(t=n.sent(),t==="granted")return[2];throw t==="denied"?Qt.create("permission-blocked"):Qt.create("permission-default")}})})},e.prototype.usePublicVapidKey=function(t){if(this.vapidKey!==null)throw Qt.create("use-vapid-key-after-get-token");if(typeof t!="string"||t.length===0)throw Qt.create("invalid-vapid-key");this.vapidKey=t},e.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Qt.create("invalid-sw-registration");if(this.swRegistration)throw Qt.create("use-sw-after-get-token");this.swRegistration=t},e.prototype.onMessage=function(t){var n=this;return this.onMessageCallback=t,function(){n.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw Qt.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw Qt.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(t,n){return R(this,void 0,void 0,function(){var r,i;return N(this,function(s){switch(s.label){case 0:return r=Nz(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return i=s.sent(),i.logEvent(r,{message_id:n[VP],message_name:n[Z$],message_time:n[J$],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},e}();function Nz(e){switch(e){case Us.NOTIFICATION_CLICKED:return"notification_open";case Us.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Rz(e){return delete e.messageType,delete e.isFirebaseMessaging,e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oz(e){var t,n;if(!e||!e.options)throw ty("App Configuration Object");if(!e.name)throw ty("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=e.options;try{for(var s=Te(r),a=s.next();!a.done;a=s.next()){var c=a.value;if(!i[c])throw ty(c)}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return{appName:e.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function ty(e){return Qt.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xz="messaging";function Pz(e){var t=e.getProvider("app").getImmediate(),n=Oz(t),r=e.getProvider("installations").getImmediate(),i=e.getProvider("analytics-internal"),s={app:t,appConfig:n,installations:r,analyticsProvider:i};if(!WP())throw Qt.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new _z(s):new Cz(s)}var kz={isSupported:WP};at.INTERNAL.registerComponent(new Kn(xz,Pz,"PUBLIC").setServiceProps(kz));function WP(){return self&&"ServiceWorkerGlobalScope"in self?Lz():Dz()}function Dz(){return"indexedDB"in window&&indexedDB!==null&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function Lz(){return"indexedDB"in self&&indexedDB!==null&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $P="firebasestorage.googleapis.com",zP="storageBucket",Mz=2*60*1e3,Fz=10*60*1e3,Ce=function(e){Z(t,e);function t(n,r){var i=e.call(this,ey(n),"Firebase Storage: "+r+" ("+ey(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,t.prototype),i}return t.prototype.codeEquals=function(n){return ey(n)===this.code},Object.defineProperty(t.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+`
`+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(n){this.customData.serverResponse=n},enumerable:!1,configurable:!0}),t}(xu),ge={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error",UNSUPPORTED_ENVIRONMENT:"unsupported-environment"};function ey(e){return"storage/"+e}function Hb(){var e="An unknown error occurred, please check the error payload for server response.";return new Ce(ge.UNKNOWN,e)}function Uz(e){return new Ce(ge.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function jz(e){return new Ce(ge.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Vz(){var e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ce(ge.UNAUTHENTICATED,e)}function Bz(e){return new Ce(ge.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function qz(){return new Ce(ge.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function KP(){return new Ce(ge.CANCELED,"User canceled the upload/download.")}function Hz(e){return new Ce(ge.INVALID_URL,"Invalid URL '"+e+"'.")}function Gz(e){return new Ce(ge.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Wz(){return new Ce(ge.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+zP+"' property when initializing the app?")}function QP(){return new Ce(ge.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $z(){return new Ce(ge.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function zz(){return new Ce(ge.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function el(e){return new Ce(ge.INVALID_ARGUMENT,e)}function YP(){return new Ce(ge.APP_DELETED,"The Firebase app was deleted.")}function XP(e){return new Ce(ge.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function nl(e,t){return new Ce(ge.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Rh(e){throw new Ce(ge.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ny=function(){function e(t,n){this.data=t,this.contentType=n||null}return e}();function JP(e,t){switch(e){case sr.RAW:return new ny(ZP(t));case sr.BASE64:case sr.BASE64URL:return new ny(tk(e,t));case sr.DATA_URL:return new ny(Qz(t),Yz(t))}throw Hb()}function ZP(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296){var i=n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320;if(!i)t.push(239,191,189);else{var s=r,a=e.charCodeAt(++n);r=65536|(s&1023)<<10|a&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function Kz(e){var t;try{t=decodeURIComponent(e)}catch{throw nl(sr.DATA_URL,"Malformed data URL.")}return ZP(t)}function tk(e,t){switch(e){case sr.BASE64:{var n=t.indexOf("-")!==-1,r=t.indexOf("_")!==-1;if(n||r){var i=n?"-":"_";throw nl(e,"Invalid character '"+i+"' found: is it base64url encoded?")}break}case sr.BASE64URL:{var s=t.indexOf("+")!==-1,a=t.indexOf("/")!==-1;if(s||a){var i=s?"+":"/";throw nl(e,"Invalid character '"+i+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}var c;try{c=atob(t)}catch{throw nl(e,"Invalid character found")}for(var l=new Uint8Array(c.length),h=0;h<c.length;h++)l[h]=c.charCodeAt(h);return l}var ek=function(){function e(t){this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(n===null)throw nl(sr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;r!=null&&(this.base64=Xz(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}return e}();function Qz(e){var t=new ek(e);return t.base64?tk(sr.BASE64,t.rest):Kz(t.rest)}function Yz(e){var t=new ek(e);return t.contentType}function Xz(e,t){var n=e.length>=t.length;return n?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jz={STATE_CHANGED:"state_changed"},At={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},Nn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ry(e){switch(e){case At.RUNNING:case At.PAUSING:case At.CANCELING:return Nn.RUNNING;case At.PAUSED:return Nn.PAUSED;case At.SUCCESS:return Nn.SUCCESS;case At.CANCELED:return Nn.CANCELED;case At.ERROR:return Nn.ERROR;default:return Nn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ns;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Ns||(Ns={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zz=function(){function e(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ns.NO_ERROR,this.sendPromise_=new Promise(function(n){t.xhr_.addEventListener("abort",function(){t.errorCode_=Ns.ABORT,n(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=Ns.NETWORK_ERROR,n(t)}),t.xhr_.addEventListener("load",function(){n(t)})})}return e.prototype.send=function(t,n,r,i){if(this.sent_)throw Rh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(var s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw Rh("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw Rh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw Rh("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},e.prototype.addUploadProgressListener=function(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)},e.prototype.removeUploadProgressListener=function(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tK=function(){function e(){}return e.prototype.createXhrIo=function(){return new Zz},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eK(e){return e!==void 0}function nK(e){return typeof e=="function"}function rK(e){return typeof e=="object"&&!Array.isArray(e)}function kd(e){return typeof e=="string"||e instanceof String}function q1(e){return Gb()&&e instanceof Blob}function Gb(){return typeof Blob<"u"}function v_(e,t,n,r){if(r<t)throw new Ce(ge.INVALID_ARGUMENT,"Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw new Ce(ge.INVALID_ARGUMENT,"Invalid value for '"+e+"'. Expected "+n+" or less.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iK(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function oK(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=iK();if(n!==void 0){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}else{if(Gb())return new Blob(e);throw new Ce(ge.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function sK(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wb=function(){function e(t,n){var r=0,i="";q1(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(q1(this.data_)){var r=this.data_,i=sK(r,t,n);return i===null?null:new e(i)}else{var s=new Uint8Array(this.data_.buffer,t,n-t);return new e(s,!0)}},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(Gb()){var r=t.map(function(l){return l instanceof e?l.data_:l});return new e(oK.apply(null,r))}else{var i=t.map(function(l){return kd(l)?JP(sr.RAW,l).data:l.data_}),s=0;i.forEach(function(l){s+=l.byteLength});var a=new Uint8Array(s),c=0;return i.forEach(function(l){for(var h=0;h<l.length;h++)a[c++]=l[h]}),new e(a,!0)}},e.prototype.uploadData=function(){return this.data_},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mr=function(){function e(t,n){this.bucket=t,this.path_=n}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return this.path.length===0},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},e.prototype.bucketOnlyServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch{return new e(t,"")}if(n.path==="")return n;throw Gz(t)},e.makeFromUrl=function(t){var n=null,r="([A-Za-z0-9.\\-_]+)";function i(Wt){Wt.path.charAt(Wt.path.length-1)==="/"&&(Wt.path_=Wt.path_.slice(0,-1))}var s="(/(.*))?$",a=new RegExp("^gs://"+r+s,"i"),c={bucket:1,path:3};function l(Wt){Wt.path_=decodeURIComponent(Wt.path)}for(var h="v[A-Za-z0-9_]+",p=$P.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",m=new RegExp("^https?://"+p+"/"+h+"/b/"+r+"/o"+v,"i"),y={bucket:1,path:3},b="(?:storage.googleapis.com|storage.cloud.google.com)",E="([^?#]*)",I=new RegExp("^https?://"+b+"/"+r+"/"+E,"i"),C={bucket:1,path:2},P=[{regex:a,indices:c,postModify:i},{regex:m,indices:y,postModify:l},{regex:I,indices:C,postModify:l}],D=0;D<P.length;D++){var F=P[D],Y=F.regex.exec(t);if(Y){var U=Y[F.indices.bucket],_t=Y[F.indices.path];_t||(_t=""),n=new e(U,_t),F.postModify(n);break}}if(n==null)throw Hz(t);return n},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(e){var t;try{t=JSON.parse(e)}catch{return null}return rK(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aK(e){if(e.length===0)return null;var t=e.lastIndexOf("/");if(t===-1)return"";var n=e.slice(0,t);return n}function uK(e,t){var n=t.split("/").filter(function(r){return r.length>0}).join("/");return e.length===0?n:e+"/"+n}function nk(e){var t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(e){return"https://"+$P+"/v0"+e}function rk(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){var i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cK(e,t){return t}var Tn=function(){function e(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||cK}return e}(),Oh=null;function lK(e){return!kd(e)||e.length<2?e:nk(e)}function Dd(){if(Oh)return Oh;var e=[];e.push(new Tn("bucket")),e.push(new Tn("generation")),e.push(new Tn("metageneration")),e.push(new Tn("name","fullPath",!0));function t(s,a){return lK(a)}var n=new Tn("name");n.xform=t,e.push(n);function r(s,a){return a!==void 0?Number(a):a}var i=new Tn("size");return i.xform=r,e.push(i),e.push(new Tn("timeCreated")),e.push(new Tn("updated")),e.push(new Tn("md5Hash",null,!0)),e.push(new Tn("cacheControl",null,!0)),e.push(new Tn("contentDisposition",null,!0)),e.push(new Tn("contentEncoding",null,!0)),e.push(new Tn("contentLanguage",null,!0)),e.push(new Tn("contentType",null,!0)),e.push(new Tn("metadata","customMetadata",!0)),Oh=e,Oh}function fK(e,t){function n(){var r=e.bucket,i=e.fullPath,s=new Mr(r,i);return t.makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function hK(e,t,n){var r={};r.type="file";for(var i=n.length,s=0;s<i;s++){var a=n[s];r[a.local]=a.xform(r,t[a.server])}return fK(r,e),r}function ik(e,t,n){var r=$b(t);if(r===null)return null;var i=r;return hK(e,i,n)}function pK(e,t){var n=$b(t);if(n===null||!kd(n.downloadTokens))return null;var r=n.downloadTokens;if(r.length===0)return null;var i=encodeURIComponent,s=r.split(","),a=s.map(function(c){var l=e.bucket,h=e.fullPath,p="/b/"+i(l)+"/o/"+i(h),v=jo(p),m=rk({alt:"media",token:c});return v+m});return a[0]}function zb(e,t){for(var n={},r=t.length,i=0;i<r;i++){var s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H1="prefixes",G1="items";function dK(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[H1])for(var i=0,s=n[H1];i<s.length;i++){var a=s[i],c=a.replace(/\/$/,""),l=e.makeStorageReference(new Mr(t,c));r.prefixes.push(l)}if(n[G1])for(var h=0,p=n[G1];h<p.length;h++){var v=p[h],l=e.makeStorageReference(new Mr(t,v.name));r.items.push(l)}return r}function vK(e,t,n){var r=$b(n);if(r===null)return null;var i=r;return dK(e,t,i)}var zi=function(){function e(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(e){if(!e)throw Hb()}function Ld(e,t){function n(r,i){var s=ik(e,i,t);return fi(s!==null),s}return n}function gK(e,t){function n(r,i){var s=vK(e,t,i);return fi(s!==null),s}return n}function mK(e,t){function n(r,i){var s=ik(e,i,t);return fi(s!==null),pK(s,i)}return n}function Gu(e){function t(n,r){var i;return n.getStatus()===401?i=Vz():n.getStatus()===402?i=jz(e.bucket):n.getStatus()===403?i=Bz(e.path):i=r,i.serverResponse=r.serverResponse,i}return t}function Md(e){var t=Gu(e);function n(r,i){var s=t(r,i);return r.getStatus()===404&&(s=Uz(e.path)),s.serverResponse=i.serverResponse,s}return n}function ok(e,t,n){var r=t.fullServerUrl(),i=jo(r),s="GET",a=e.maxOperationRetryTime,c=new zi(i,s,Ld(e,n),a);return c.errorHandler=Md(t),c}function yK(e,t,n,r,i){var s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);var a=t.bucketOnlyServerUrl(),c=jo(a),l="GET",h=e.maxOperationRetryTime,p=new zi(c,l,gK(e,t.bucket),h);return p.urlParams=s,p.errorHandler=Gu(t),p}function _K(e,t,n){var r=t.fullServerUrl(),i=jo(r),s="GET",a=e.maxOperationRetryTime,c=new zi(i,s,mK(e,n),a);return c.errorHandler=Md(t),c}function wK(e,t,n,r){var i=t.fullServerUrl(),s=jo(i),a="PATCH",c=zb(n,r),l={"Content-Type":"application/json; charset=utf-8"},h=e.maxOperationRetryTime,p=new zi(s,a,Ld(e,r),h);return p.headers=l,p.body=c,p.errorHandler=Md(t),p}function bK(e,t){var n=t.fullServerUrl(),r=jo(n),i="DELETE",s=e.maxOperationRetryTime;function a(l,h){}var c=new zi(r,i,a,s);return c.successCodes=[200,204],c.errorHandler=Md(t),c}function EK(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function sk(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=EK(null,t)),r}function IK(e,t,n,r,i){var s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){for(var D="",F=0;F<2;F++)D=D+Math.random().toString().slice(2);return D}var l=c();a["Content-Type"]="multipart/related; boundary="+l;var h=sk(t,r,i),p=zb(h,n),v="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,m=`\r
--`+l+"--",y=Wb.getBlob(v,r,m);if(y===null)throw QP();var b={name:h.fullPath},E=jo(s),I="POST",C=e.maxUploadRetryTime,P=new zi(E,I,Ld(e,n),C);return P.urlParams=b,P.headers=a,P.body=y.uploadData(),P.errorHandler=Gu(t),P}var jp=function(){function e(t,n,r,i){this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}return e}();function Kb(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch{fi(!1)}var r=t||["active"];return fi(!!n&&r.indexOf(n)!==-1),n}function TK(e,t,n,r,i){var s=t.bucketOnlyServerUrl(),a=sk(t,r,i),c={name:a.fullPath},l=jo(s),h="POST",p={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},v=zb(a,n),m=e.maxUploadRetryTime;function y(E){Kb(E);var I;try{I=E.getResponseHeader("X-Goog-Upload-URL")}catch{fi(!1)}return fi(kd(I)),I}var b=new zi(l,h,y,m);return b.urlParams=c,b.headers=p,b.body=v,b.errorHandler=Gu(t),b}function SK(e,t,n,r){var i={"X-Goog-Upload-Command":"query"};function s(h){var p=Kb(h,["active","final"]),v=null;try{v=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{fi(!1)}v||fi(!1);var m=Number(v);return fi(!isNaN(m)),new jp(m,r.size(),p==="final")}var a="POST",c=e.maxUploadRetryTime,l=new zi(n,a,s,c);return l.headers=i,l.errorHandler=Gu(t),l}var W1=256*1024;function AK(e,t,n,r,i,s,a,c){var l=new jp(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw $z();var h=l.total-l.current,p=h;i>0&&(p=Math.min(p,i));var v=l.current,m=v+p,y=p===h?"upload, finalize":"upload",b={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":l.current},E=r.slice(v,m);if(E===null)throw QP();function I(F,Y){var U=Kb(F,["active","final"]),_t=l.current+p,Wt=r.size(),lt;return U==="final"?lt=Ld(t,s)(F,Y):lt=null,new jp(_t,Wt,U==="final",lt)}var C="POST",P=t.maxUploadRetryTime,D=new zi(n,C,I,P);return D.headers=b,D.body=E.uploadData(),D.progressCallback=c||null,D.errorHandler=Gu(e),D}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CK=function(){function e(t,n,r){var i=nK(t)||n!=null||r!=null;if(i)this.next=t,this.error=n,this.complete=r;else{var s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}return e}(),NK=function(){function e(t,n,r,i,s,a){this.bytesTransferred=t,this.totalBytes=n,this.state=r,this.metadata=i,this.task=s,this.ref=a}return e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then(function(){return e.apply(void 0,t)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ak=function(){function e(t,n,r){var i=this;r===void 0&&(r=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=r,this._mappings=Dd(),this._resumable=this._shouldDoResumable(this._blob),this._state=At.RUNNING,this._errorHandler=function(s){i._request=void 0,i._chunkMultiplier=1,s.codeEquals(ge.CANCELED)?(i._needToFetchStatus=!0,i.completeTransitions_()):(i._error=s,i._transition(At.ERROR))},this._metadataErrorHandler=function(s){i._request=void 0,s.codeEquals(ge.CANCELED)?i.completeTransitions_():(i._error=s,i._transition(At.ERROR))},this._promise=new Promise(function(s,a){i._resolve=s,i._reject=a,i._start()}),this._promise.then(null,function(){})}return e.prototype._makeProgressCallback=function(){var t=this,n=this._transferred;return function(r){return t._updateProgress(n+r)}},e.prototype._shouldDoResumable=function(t){return t.size()>256*1024},e.prototype._start=function(){this._state===At.RUNNING&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(t){var n=this;this._ref.storage.getAuthToken().then(function(r){switch(n._state){case At.RUNNING:t(r);break;case At.CANCELING:n._transition(At.CANCELED);break;case At.PAUSING:n._transition(At.PAUSED);break}})},e.prototype._createResumable=function(){var t=this;this._resolveToken(function(n){var r=TK(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then(function(s){t._request=void 0,t._uploadUrl=s,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},e.prototype._fetchStatus=function(){var t=this,n=this._uploadUrl;this._resolveToken(function(r){var i=SK(t._ref.storage,t._ref._location,n,t._blob),s=t._ref.storage.makeRequest(i,r);t._request=s,s.getPromise().then(function(a){a=a,t._request=void 0,t._updateProgress(a.current),t._needToFetchStatus=!1,a.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},e.prototype._continueUpload=function(){var t=this,n=W1*this._chunkMultiplier,r=new jp(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken(function(s){var a;try{a=AK(t._ref._location,t._ref.storage,i,t._blob,n,t._mappings,r,t._makeProgressCallback())}catch(l){t._error=l,t._transition(At.ERROR);return}var c=t._ref.storage.makeRequest(a,s);t._request=c,c.getPromise().then(function(l){t._increaseMultiplier(),t._request=void 0,t._updateProgress(l.current),l.finalized?(t._metadata=l.metadata,t._transition(At.SUCCESS)):t.completeTransitions_()},t._errorHandler)})},e.prototype._increaseMultiplier=function(){var t=W1*this._chunkMultiplier;t<32*1024*1024&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(n){var r=ok(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then(function(s){t._request=void 0,t._metadata=s,t._transition(At.SUCCESS)},t._metadataErrorHandler)})},e.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(n){var r=IK(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then(function(s){t._request=void 0,t._metadata=s,t._updateProgress(t._blob.size()),t._transition(At.SUCCESS)},t._errorHandler)})},e.prototype._updateProgress=function(t){var n=this._transferred;this._transferred=t,this._transferred!==n&&this._notifyObservers()},e.prototype._transition=function(t){if(this._state!==t)switch(t){case At.CANCELING:this._state=t,this._request!==void 0&&this._request.cancel();break;case At.PAUSING:this._state=t,this._request!==void 0&&this._request.cancel();break;case At.RUNNING:var n=this._state===At.PAUSED;this._state=t,n&&(this._notifyObservers(),this._start());break;case At.PAUSED:this._state=t,this._notifyObservers();break;case At.CANCELED:this._error=KP(),this._state=t,this._notifyObservers();break;case At.ERROR:this._state=t,this._notifyObservers();break;case At.SUCCESS:this._state=t,this._notifyObservers();break}},e.prototype.completeTransitions_=function(){switch(this._state){case At.PAUSING:this._transition(At.PAUSED);break;case At.CANCELING:this._transition(At.CANCELED);break;case At.RUNNING:this._start();break}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var t=ry(this._state);return new NK(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.on=function(t,n,r,i){var s=this,a=new CK(n,r,i);return this._addObserver(a),function(){s._removeObserver(a)}},e.prototype.then=function(t,n){return this._promise.then(t,n)},e.prototype.catch=function(t){return this.then(null,t)},e.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},e.prototype._removeObserver=function(t){var n=this._observers.indexOf(t);n!==-1&&this._observers.splice(n,1)},e.prototype._notifyObservers=function(){var t=this;this._finishPromise();var n=this._observers.slice();n.forEach(function(r){t._notifyObserver(r)})},e.prototype._finishPromise=function(){if(this._resolve!==void 0){var t=!0;switch(ry(this._state)){case Nn.SUCCESS:Ra(this._resolve.bind(null,this.snapshot))();break;case Nn.CANCELED:case Nn.ERROR:var n=this._reject;Ra(n.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(t){var n=ry(this._state);switch(n){case Nn.RUNNING:case Nn.PAUSED:t.next&&Ra(t.next.bind(t,this.snapshot))();break;case Nn.SUCCESS:t.complete&&Ra(t.complete.bind(t))();break;case Nn.CANCELED:case Nn.ERROR:t.error&&Ra(t.error.bind(t,this._error))();break;default:t.error&&Ra(t.error.bind(t,this._error))()}},e.prototype.resume=function(){var t=this._state===At.PAUSED||this._state===At.PAUSING;return t&&this._transition(At.RUNNING),t},e.prototype.pause=function(){var t=this._state===At.RUNNING;return t&&this._transition(At.PAUSING),t},e.prototype.cancel=function(){var t=this._state===At.RUNNING||this._state===At.PAUSING;return t&&this._transition(At.CANCELING),t},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fd=function(){function e(t,n){this._service=t,n instanceof Mr?this._location=n:this._location=Mr.makeFromUrl(n)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype.newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var t=new Mr(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return nk(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=aK(this._location.path);if(t===null)return null;var n=new Mr(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(t){if(this._location.path==="")throw XP(t)},e}();function RK(e,t,n){return n===void 0&&(n=null),e._throwIfRoot("uploadBytesResumable"),new ak(e,new Wb(t),n)}function OK(e,t,n,r){n===void 0&&(n=sr.RAW),e._throwIfRoot("putString");var i=JP(n,t),s=ee({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new ak(e,new Wb(i.data,!0),s)}function xK(e){var t={prefixes:[],items:[]};return uk(e,t).then(function(){return t})}function uk(e,t,n){return R(this,void 0,void 0,function(){var r,i,s,a;return N(this,function(c){switch(c.label){case 0:return r={pageToken:n},[4,ck(e,r)];case 1:return i=c.sent(),(s=t.prefixes).push.apply(s,i.prefixes),(a=t.items).push.apply(a,i.items),i.nextPageToken==null?[3,3]:[4,uk(e,t,i.nextPageToken)];case 2:c.sent(),c.label=3;case 3:return[2]}})})}function ck(e,t){return R(this,void 0,void 0,function(){var n,r,i;return N(this,function(s){switch(s.label){case 0:return t!=null&&typeof t.maxResults=="number"&&v_("options.maxResults",1,1e3,t.maxResults),[4,e.storage.getAuthToken()];case 1:return n=s.sent(),r=t||{},i=yK(e.storage,e._location,"/",r.pageToken,r.maxResults),[2,e.storage.makeRequest(i,n).getPromise()]}})})}function PK(e){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return e._throwIfRoot("getMetadata"),[4,e.storage.getAuthToken()];case 1:return t=r.sent(),n=ok(e.storage,e._location,Dd()),[2,e.storage.makeRequest(n,t).getPromise()]}})})}function kK(e,t){return R(this,void 0,void 0,function(){var n,r;return N(this,function(i){switch(i.label){case 0:return e._throwIfRoot("updateMetadata"),[4,e.storage.getAuthToken()];case 1:return n=i.sent(),r=wK(e.storage,e._location,t,Dd()),[2,e.storage.makeRequest(r,n).getPromise()]}})})}function DK(e){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return e._throwIfRoot("getDownloadURL"),[4,e.storage.getAuthToken()];case 1:return t=r.sent(),n=_K(e.storage,e._location,Dd()),[2,e.storage.makeRequest(n,t).getPromise().then(function(i){if(i===null)throw zz();return i})]}})})}function LK(e){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return e._throwIfRoot("deleteObject"),[4,e.storage.getAuthToken()];case 1:return t=r.sent(),n=bK(e.storage,e._location),[2,e.storage.makeRequest(n,t).getPromise()]}})})}function lk(e,t){var n=uK(e._location.path,t),r=new Mr(e._location.bucket,n);return new Fd(e.storage,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xh=function(){function e(t,n,r){this._delegate=t,this.task=n,this.ref=r}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $1=function(){function e(t,n){this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new xh(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),e.prototype.then=function(t,n){var r=this;return this._delegate.then(function(i){if(t)return t(new xh(i,r,r._ref))},n)},e.prototype.on=function(t,n,r,i){var s=this,a=void 0;return n&&(typeof n=="function"?a=function(c){return n(new xh(c,s,s._ref))}:a={next:n.next?function(c){return n.next(new xh(c,s,s._ref))}:void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(t,a,r||void 0,i||void 0)},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z1=function(){function e(t,n){this._delegate=t,this._service=n}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(n){return new jl(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(n){return new jl(n,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jl=function(){function e(t,n){this._delegate=t,this.storage=n}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){var n=lk(this._delegate,t);return new e(n,this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t==null?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(t,n){return this._throwIfRoot("put"),new $1(RK(this._delegate,t,n),this)},e.prototype.putString=function(t,n,r){return n===void 0&&(n=sr.RAW),this._throwIfRoot("putString"),new $1(OK(this._delegate,t,n,r),this)},e.prototype.listAll=function(){var t=this;return xK(this._delegate).then(function(n){return new z1(n,t.storage)})},e.prototype.list=function(t){var n=this;return ck(this._delegate,t).then(function(r){return new z1(r,n.storage)})},e.prototype.getMetadata=function(){return PK(this._delegate)},e.prototype.updateMetadata=function(t){return kK(this._delegate,t)},e.prototype.getDownloadURL=function(){return DK(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),LK(this._delegate)},e.prototype._throwIfRoot=function(t){if(this._delegate._location.path==="")throw XP(t)},e}(),MK=function(){function e(t){this.promise_=Promise.reject(t)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){},e}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FK(e,t,n){var r=1,i=null,s=!1,a=0;function c(){return a===2}var l=!1;function h(){for(var b=[],E=0;E<arguments.length;E++)b[E]=arguments[E];l||(l=!0,t.apply(null,b))}function p(b){i=setTimeout(function(){i=null,e(v,c())},b)}function v(b){for(var E=[],I=1;I<arguments.length;I++)E[I-1]=arguments[I];if(!l){if(b){h.call.apply(h,Ae([null,b],E));return}var C=c()||s;if(C){h.call.apply(h,Ae([null,b],E));return}r<64&&(r*=2);var P;a===1?(a=2,P=0):P=(r+Math.random())*1e3,p(P)}}var m=!1;function y(b){m||(m=!0,!l&&(i!==null?(b||(a=2),clearTimeout(i),p(0)):b||(a=1)))}return p(0),setTimeout(function(){s=!0,y(!0)},n),y}function UK(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jK=function(){function e(t,n,r,i,s,a,c,l,h,p,v){var m=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s.slice(),this.additionalRetryCodes_=a.slice(),this.callback_=c,this.errorCallback_=l,this.progressCallback_=p,this.timeout_=h,this.pool_=v,this.promise_=new Promise(function(y,b){m.resolve_=y,m.reject_=b,m.start_()})}return e.prototype.start_=function(){var t=this;function n(i,s){if(s){i(!1,new Ph(!1,null,!0));return}var a=t.pool_.createXhrIo();t.pendingXhr_=a;function c(l){var h=l.loaded,p=l.lengthComputable?l.total:-1;t.progressCallback_!==null&&t.progressCallback_(h,p)}t.progressCallback_!==null&&a.addUploadProgressListener(c),a.send(t.url_,t.method_,t.body_,t.headers_).then(function(l){t.progressCallback_!==null&&l.removeUploadProgressListener(c),t.pendingXhr_=null,l=l;var h=l.getErrorCode()===Ns.NO_ERROR,p=l.getStatus();if(!h||t.isRetryStatusCode_(p)){var v=l.getErrorCode()===Ns.ABORT;i(!1,new Ph(!1,null,v));return}var m=t.successCodes_.indexOf(p)!==-1;i(!0,new Ph(m,l))})}function r(i,s){var a=t.resolve_,c=t.reject_,l=s.xhr;if(s.wasSuccessCode)try{var h=t.callback_(l,l.getResponseText());eK(h)?a(h):a()}catch(v){c(v)}else if(l!==null){var p=Hb();p.serverResponse=l.getResponseText(),t.errorCallback_?c(t.errorCallback_(l,p)):c(p)}else if(s.canceled){var p=t.appDelete_?YP():KP();c(p)}else{var p=qz();c(p)}}this.canceled_?r(!1,new Ph(!1,null,!0)):this.backoffId_=FK(n,r,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&UK(this.backoffId_),this.pendingXhr_!==null&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(t){var n=t>=500&&t<600,r=[408,429],i=r.indexOf(t)!==-1,s=this.additionalRetryCodes_.indexOf(t)!==-1;return n||i||s},e}(),Ph=function(){function e(t,n,r){this.wasSuccessCode=t,this.xhr=n,this.canceled=!!r}return e}();function VK(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function BK(e){var t=typeof at<"u"?at.SDK_VERSION:"AppManager";e["X-Firebase-Storage-Version"]="webjs/"+t}function qK(e,t){t&&(e["X-Firebase-GMPID"]=t)}function HK(e,t,n,r){var i=rk(e.urlParams),s=e.url+i,a=Object.assign({},e.headers);return qK(a,t),VK(a,n),BK(a),new jK(s,e.method,a,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(e){return/^[A-Za-z]+:\/\//.test(e)}function GK(e,t){return new Fd(e,t)}function fk(e,t){if(e instanceof Ud){var n=e;if(n._bucket==null)throw Wz();var r=new Fd(n,n._bucket);return t!=null?fk(r,t):r}else if(t!==void 0){if(t.includes(".."))throw el('`path` param cannot contain ".."');return lk(e,t)}else return e}function K1(e,t){if(t&&g_(t)){if(e instanceof Ud)return GK(e,t);throw el("To use ref(service, url), the first argument must be a Storage instance.")}else return fk(e,t)}function WK(e){var t=e==null?void 0:e[zP];return t==null?null:Mr.makeFromBucketSpec(t)}var Ud=function(){function e(t,n,r,i){this.app=t,this._authProvider=n,this._pool=r,this._url=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Mz,this._maxUploadRetryTime=Fz,this._requests=new Set,i!=null?this._bucket=Mr.makeFromBucketSpec(i):this._bucket=WK(this.app.options)}return Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){v_("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){v_("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),e.prototype.getAuthToken=function(){return R(this,void 0,void 0,function(){var t,n;return N(this,function(r){switch(r.label){case 0:return t=this._authProvider.getImmediate({optional:!0}),t?[4,t.getToken()]:[3,2];case 1:if(n=r.sent(),n!==null)return[2,n.accessToken];r.label=2;case 2:return[2,null]}})})},e.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},e.prototype.makeStorageReference=function(t){return new Fd(this,t)},e.prototype.makeRequest=function(t,n){var r=this;if(this._deleted)return new MK(YP());var i=HK(t,this._appId,n,this._pool);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $K=function(){function e(t,n){var r=this;this.app=t,this._delegate=n,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(t){if(g_(t))throw el("ref() expected a child path but got a URL, use refFromURL instead.");return new jl(K1(this._delegate,t),this)},e.prototype.refFromURL=function(t){if(!g_(t))throw el("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Mr.makeFromUrl(t)}catch{throw el("refFromUrl() expected a valid full URL but got an invalid one.")}return new jl(K1(this._delegate,t),this)},e.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},e.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},e}(),zK="@firebase/storage",KK="0.4.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QK="storage";function YK(e,t){var n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=new $K(n,new Ud(n,r,new tK,t));return i}function XK(e){var t={TaskState:Nn,TaskEvent:Jz,StringFormat:sr,Storage:Ud,Reference:jl};e.INTERNAL.registerComponent(new Kn(QK,YK,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(zK,KK)}XK(at);var JK="@firebase/performance",hk="0.4.5";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pk=hk,ZK="FB-PERF-TRACE-START",t6="FB-PERF-TRACE-STOP",m_="FB-PERF-TRACE-MEASURE",dk="_wt_",vk="_fp",gk="_fcp",mk="_fid",yk="@firebase/performance/config",_k="@firebase/performance/configexpire",e6="performance",wk="Performance";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nn,n6=(nn={},nn["trace started"]="Trace {$traceName} was started before.",nn["trace stopped"]="Trace {$traceName} is not running.",nn["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",nn["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",nn["no window"]="Window is not available.",nn["no app id"]="App id is not available.",nn["no project id"]="Project id is not available.",nn["no api key"]="Api key is not available.",nn["invalid cc log"]="Attempted to queue invalid cc event",nn["FB not default"]="Performance can only start when Firebase app instance is the default one.",nn["RC response not ok"]="RC response is not ok",nn["invalid attribute name"]="Attribute name {$attributeName} is invalid.",nn["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",nn["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",nn["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",nn),ln=new Do(e6,wk,n6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qi=new Pu(wk);qi.logLevel=Rt.INFO;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var iy,bk,yn=function(){function e(t){if(this.window=t,!t)throw ln.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(t){!this.performance||!this.performance.mark||this.performance.mark(t)},e.prototype.measure=function(t,n,r){!this.performance||!this.performance.measure||this.performance.measure(t,n,r)},e.prototype.getEntriesByType=function(t){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(t)},e.prototype.getEntriesByName=function(t){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(t)},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return!fetch||!Promise||!this.navigator||!this.navigator.cookieEnabled?(qi.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):Q_()?!0:(qi.info("IndexedDB is not supported by current browswer"),!1)},e.prototype.setupObserver=function(t,n){if(this.PerformanceObserver){var r=new this.PerformanceObserver(function(i){for(var s=0,a=i.getEntries();s<a.length;s++){var c=a[s];n(c)}});r.observe({entryTypes:[t]})}},e.getInstance=function(){return iy===void 0&&(iy=new e(bk)),iy},e}();function r6(e){bk=e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(e,t){var n=e.length-t.length;if(n<0||n>1)throw ln.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oy,Ve=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Q1("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Q1("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw ln.create("no app id");return t},e.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw ln.create("no project id");return t},e.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw ln.create("no api key");return t},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return oy===void 0&&(oy=new e),oy},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ek;function i6(){var e=Ve.getInstance().installationsService.getId();return e.then(function(t){Ek=t}),e}function Qb(){return Ek}function o6(){var e=Ve.getInstance().installationsService.getToken();return e.then(function(t){}),e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xa;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"})(Xa||(Xa={}));var s6=["firebase_","google_","ga_"],a6=new RegExp("^[a-zA-Z]\\w*$"),u6=40,c6=100;function l6(){var e=yn.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function Ik(){var e=yn.getInstance().document,t=e.visibilityState;switch(t){case"visible":return Xa.VISIBLE;case"hidden":return Xa.HIDDEN;default:return Xa.UNKNOWN}}function f6(){var e=yn.getInstance().navigator,t=e.connection,n=t&&t.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function h6(e){if(e.length===0||e.length>u6)return!1;var t=s6.some(function(n){return e.startsWith(n)});return!t&&!!e.match(a6)}function p6(e){return e.length!==0&&e.length<=c6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d6="0.0.1",v6={loggingEnabled:!0},g6="FIREBASE_INSTALLATIONS_AUTH";function m6(e){var t=y6();return t?(Y1(t),Promise.resolve()):b6(e).then(Y1).then(function(n){return _6(n)},function(){})}function y6(){var e=yn.getInstance().localStorage;if(e){var t=e.getItem(_k);if(!(!t||!E6(t))){var n=e.getItem(yk);if(n)try{var r=JSON.parse(n);return r}catch{return}}}}function _6(e){var t=yn.getInstance().localStorage;!e||!t||(t.setItem(yk,JSON.stringify(e)),t.setItem(_k,String(Date.now()+Ve.getInstance().configTimeToLive*60*60*1e3)))}var w6="Could not fetch config, will use default configs";function b6(e){return o6().then(function(t){var n=Ve.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+Ve.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:g6+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:Ve.getInstance().getAppId(),app_version:pk,sdk_version:d6})});return fetch(i).then(function(s){if(s.ok)return s.json();throw ln.create("RC response not ok")})}).catch(function(){qi.info(w6)})}function Y1(e){if(!e)return e;var t=Ve.getInstance(),n=e.entries||{};return n.fpr_enabled!==void 0?t.loggingEnabled=String(n.fpr_enabled)==="true":t.loggingEnabled=v6.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),n.fpr_vc_network_request_sampling_rate!==void 0&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),n.fpr_vc_trace_sampling_rate!==void 0&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=X1(t.tracesSamplingRate),t.logNetworkAfterSampling=X1(t.networkRequestsSamplingRate),e}function E6(e){return Number(e)>Date.now()}function X1(e){return Math.random()<=e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yb=1,sy;function Tk(){return Yb=2,sy=sy||T6(),sy}function I6(){return Yb===3}function T6(){return S6().then(function(){return i6()}).then(function(e){return m6(e)}).then(function(){return J1()},function(){return J1()})}function S6(){var e=yn.getInstance().document;return new Promise(function(t){if(e&&e.readyState!=="complete"){var n=function(){e.readyState==="complete"&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()})}function J1(){Yb=3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xb=10*1e3,A6=5.5*1e3,Sk=3,C6=1e3,Vp=Sk,To=[],Z1=!1;function N6(){Z1||(jd(A6),Z1=!0)}function jd(e){setTimeout(function(){if(Vp!==0){if(!To.length)return jd(Xb);R6()}},e)}function R6(){var e=To.splice(0,C6),t=e.map(function(r){return{source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)}}),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Ve.getInstance().logSource,log_event:t};O6(n,e).catch(function(){To=Ae(e,To),Vp--,qi.info("Tries left: "+Vp+"."),jd(Xb)})}function O6(e,t){return x6(e).then(function(n){return n.ok||qi.info("Call to Firebase backend failed."),n.json()}).then(function(n){var r=Number(n.nextRequestWaitMillis),i=Xb;isNaN(r)||(i=Math.max(r,i));var s=n.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(To=Ae(t,To),qi.info("Retry transport request later.")),Vp=Sk,jd(i)})}function x6(e){var t=Ve.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}function P6(e){if(!e.eventTime||!e.message)throw ln.create("invalid cc log");To=Ae(To,[e])}function k6(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(void 0,t);P6({message:r,eventTime:Date.now()})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ay;function Ak(e,t){ay||(ay=k6(L6)),ay(e,t)}function kh(e){var t=Ve.getInstance();!t.instrumentationEnabled&&e.isAuto||!t.dataCollectionEnabled&&!e.isAuto||yn.getInstance().requiredApisAvailable()&&(e.isAuto&&Ik()!==Xa.VISIBLE||(I6()?uy(e):Tk().then(function(){return uy(e)},function(){return uy(e)})))}function uy(e){if(Qb()){var t=Ve.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(function(){return Ak(e,1)},0)}}function D6(e){var t=Ve.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n===r||n===i||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(function(){return Ak(e,0)},0)}}function L6(e,t){return t===0?M6(e):F6(e)}function M6(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:Ck(),network_request_metric:t};return JSON.stringify(n)}function F6(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};Object.keys(e.counters).length!==0&&(t.counters=e.counters);var n=e.getAttributes();Object.keys(n).length!==0&&(t.custom_attributes=n);var r={application_info:Ck(),trace_metric:t};return JSON.stringify(r)}function Ck(){return{google_app_id:Ve.getInstance().getAppId(),app_instance_id:Qb(),web_app_info:{sdk_version:pk,page_url:yn.getInstance().getUrl(),service_worker_status:l6(),visibility_state:Ik(),effective_connection_type:f6()},application_process_state:0}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U6=100,j6="_",V6=[vk,gk,mk];function B6(e,t){return e.length===0||e.length>U6?!1:t&&t.startsWith(dk)&&V6.indexOf(e)>-1||!e.startsWith(j6)}function q6(e){var t=Math.floor(e);return t<e&&qi.info("Metric value should be an Integer, setting the value as : "+t+"."),t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rl=function(){function e(t,n,r){n===void 0&&(n=!1),this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=yn.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=ZK+"-"+this.randomId+"-"+this.name,this.traceStopMark=t6+"-"+this.randomId+"-"+this.name,this.traceMeasure=r||m_+"-"+this.randomId+"-"+this.name,r&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(this.state!==1)throw ln.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(this.state!==2)throw ln.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),kh(this)},e.prototype.record=function(t,n,r){if(t<=0)throw ln.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw ln.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(t*1e3),r&&r.attributes&&(this.customAttributes=ee({},r.attributes)),r&&r.metrics)for(var i=0,s=Object.keys(r.metrics);i<s.length;i++){var a=s[i];isNaN(Number(r.metrics[a]))||(this.counters[a]=Number(Math.floor(r.metrics[a])))}kh(this)},e.prototype.incrementMetric=function(t,n){n===void 0&&(n=1),this.counters[t]===void 0?this.putMetric(t,n):this.putMetric(t,this.counters[t]+n)},e.prototype.putMetric=function(t,n){if(B6(t,this.name))this.counters[t]=q6(n);else throw ln.create("invalid custom metric name",{customMetricName:t})},e.prototype.getMetric=function(t){return this.counters[t]||0},e.prototype.putAttribute=function(t,n){var r=h6(t),i=p6(n);if(r&&i){this.customAttributes[t]=n;return}if(!r)throw ln.create("invalid attribute name",{attributeName:t});if(!i)throw ln.create("invalid attribute value",{attributeValue:n})},e.prototype.getAttribute=function(t){return this.customAttributes[t]},e.prototype.removeAttribute=function(t){this.customAttributes[t]!==void 0&&delete this.customAttributes[t]},e.prototype.getAttributes=function(){return ee({},this.customAttributes)},e.prototype.setStartTime=function(t){this.startTimeUs=t},e.prototype.setDuration=function(t){this.durationUs=t},e.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),n=t&&t[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))},e.createOobTrace=function(t,n,r){var i=yn.getInstance().getUrl();if(i){var s=new e(dk+i,!0),a=Math.floor(yn.getInstance().getTimeOrigin()*1e3);s.setStartTime(a),t&&t[0]&&(s.setDuration(Math.floor(t[0].duration*1e3)),s.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),s.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),s.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));var c="first-paint",l="first-contentful-paint";if(n){var h=n.find(function(v){return v.name===c});h&&h.startTime&&s.putMetric(vk,Math.floor(h.startTime*1e3));var p=n.find(function(v){return v.name===l});p&&p.startTime&&s.putMetric(gk,Math.floor(p.startTime*1e3)),r&&s.putMetric(mk,Math.floor(r*1e3))}kh(s)}},e.createUserTimingTrace=function(t){var n=new e(t,!1,t);kh(n)},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(e){var t=e;if(!(!t||t.responseStart===void 0)){var n=yn.getInstance().getTimeOrigin(),r=Math.floor((t.startTime+n)*1e3),i=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,s=Math.floor((t.responseEnd-t.startTime)*1e3),a=t.name&&t.name.split("?")[0],c={url:a,responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:s};D6(c)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H6=5e3;function eC(){Qb()&&(setTimeout(function(){return W6()},0),setTimeout(function(){return G6()},0),setTimeout(function(){return $6()},0))}function G6(){for(var e=yn.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){var i=r[n];tC(i)}e.setupObserver("resource",tC)}function W6(){var e=yn.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout(function(){rl.createOobTrace(t,n),r=void 0},H6);e.onFirstInputDelay(function(i){r&&(clearTimeout(r),rl.createOobTrace(t,n,i))})}else rl.createOobTrace(t,n)}function $6(){for(var e=yn.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){var i=r[n];nC(i)}e.setupObserver("measure",nC)}function nC(e){var t=e.name;t.substring(0,m_.length)!==m_&&rl.createUserTimingTrace(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var z6=function(){function e(t){this.app=t,yn.getInstance().requiredApisAvailable()&&Y_().then(function(n){n&&(N6(),Tk().then(eC,eC))}).catch(function(n){qi.info("Environment doesn't support IndexedDB: "+n)})}return e.prototype.trace=function(t){return new rl(t)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return Ve.getInstance().instrumentationEnabled},set:function(t){Ve.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return Ve.getInstance().dataCollectionEnabled},set:function(t){Ve.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K6="[DEFAULT]";function Q6(e){var t=function(n,r){if(n.name!==K6)throw ln.create("FB not default");if(typeof window>"u")throw ln.create("no window");return r6(window),Ve.getInstance().firebaseAppInstance=n,Ve.getInstance().installationsService=r,new z6(n)};e.INTERNAL.registerComponent(new Kn("performance",function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return t(r,i)},"PUBLIC")),e.registerVersion(JK,hk)}Q6(at);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Y6="firebase_id",X6="origin",J6=60*1e3,Z6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Nk="https://www.googletagmanager.com/gtag/js",_n;(function(e){e.EVENT="event",e.SET="set",e.CONFIG="config"})(_n||(_n={}));var y_;(function(e){e.ADD_SHIPPING_INFO="add_shipping_info",e.ADD_PAYMENT_INFO="add_payment_info",e.ADD_TO_CART="add_to_cart",e.ADD_TO_WISHLIST="add_to_wishlist",e.BEGIN_CHECKOUT="begin_checkout",e.CHECKOUT_PROGRESS="checkout_progress",e.EXCEPTION="exception",e.GENERATE_LEAD="generate_lead",e.LOGIN="login",e.PAGE_VIEW="page_view",e.PURCHASE="purchase",e.REFUND="refund",e.REMOVE_FROM_CART="remove_from_cart",e.SCREEN_VIEW="screen_view",e.SEARCH="search",e.SELECT_CONTENT="select_content",e.SELECT_ITEM="select_item",e.SELECT_PROMOTION="select_promotion",e.SET_CHECKOUT_OPTION="set_checkout_option",e.SHARE="share",e.SIGN_UP="sign_up",e.TIMING_COMPLETE="timing_complete",e.VIEW_CART="view_cart",e.VIEW_ITEM="view_item",e.VIEW_ITEM_LIST="view_item_list",e.VIEW_PROMOTION="view_promotion",e.VIEW_SEARCH_RESULTS="view_search_results"})(y_||(y_={}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t5(e,t,n,r,i){return R(this,void 0,void 0,function(){var s,a;return N(this,function(c){switch(c.label){case 0:return i&&i.global?(e(_n.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:s=c.sent(),a=ee(ee({},r),{send_to:s}),e(_n.EVENT,n,a),c.label=3;case 3:return[2]}})})}function e5(e,t,n,r){return R(this,void 0,void 0,function(){var i;return N(this,function(s){switch(s.label){case 0:return r&&r.global?(e(_n.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=s.sent(),e(_n.CONFIG,i,{update:!0,screen_name:n}),s.label=3;case 3:return[2]}})})}function n5(e,t,n,r){return R(this,void 0,void 0,function(){var i;return N(this,function(s){switch(s.label){case 0:return r&&r.global?(e(_n.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=s.sent(),e(_n.CONFIG,i,{update:!0,user_id:n}),s.label=3;case 3:return[2]}})})}function r5(e,t,n,r){return R(this,void 0,void 0,function(){var i,s,a,c,l;return N(this,function(h){switch(h.label){case 0:if(!(r&&r.global))return[3,1];for(i={},s=0,a=Object.keys(n);s<a.length;s++)c=a[s],i["user_properties."+c]=n[c];return e(_n.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:l=h.sent(),e(_n.CONFIG,l,{update:!0,user_properties:n}),h.label=3;case 3:return[2]}})})}function i5(e,t){return R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn=new Pu("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o5(e){var t=document.createElement("script");t.src=Nk+"?l="+e,t.async=!0,document.head.appendChild(t)}function s5(e){var t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function a5(e,t,n,r,i,s){return R(this,void 0,void 0,function(){var a,c,l,h;return N(this,function(p){switch(p.label){case 0:a=r[i],p.label=1;case 1:return p.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return p.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return c=p.sent(),l=c.find(function(v){return v.measurementId===i}),l?[4,t[l.appId]]:[3,6];case 5:p.sent(),p.label=6;case 6:return[3,8];case 7:return h=p.sent(),rn.error(h),[3,8];case 8:return e(_n.CONFIG,i,s),[2]}})})}function u5(e,t,n,r,i){return R(this,void 0,void 0,function(){var s,a,c,l,h,p,v,m,y;return N(this,function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),s=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(c=b.sent(),l=function(E){var I=c.find(function(P){return P.measurementId===E}),C=I&&t[I.appId];if(C)s.push(C);else return s=[],"break"},h=0,p=a;h<p.length&&(v=p[h],m=l(v),m!=="break");h++);b.label=2;case 2:return s.length===0&&(s=Object.values(t)),[4,Promise.all(s)];case 3:return b.sent(),e(_n.EVENT,r,i||{}),[3,5];case 4:return y=b.sent(),rn.error(y),[3,5];case 5:return[2]}})})}function c5(e,t,n,r){function i(s,a,c){return R(this,void 0,void 0,function(){var l;return N(this,function(h){switch(h.label){case 0:return h.trys.push([0,6,,7]),s!==_n.EVENT?[3,2]:[4,u5(e,t,n,a,c)];case 1:return h.sent(),[3,5];case 2:return s!==_n.CONFIG?[3,4]:[4,a5(e,t,n,r,a,c)];case 3:return h.sent(),[3,5];case 4:e(_n.SET,a),h.label=5;case 5:return[3,7];case 6:return l=h.sent(),rn.error(l),[3,7];case 7:return[2]}})})}return i}function l5(e,t,n,r,i){var s=function(){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=c5(s,e,t,n),{gtagCore:s,wrappedGtag:window[i]}}function f5(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(Nk))return r}return null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cr,h5=(Cr={},Cr["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Cr["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Cr["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Cr["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Cr["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Cr["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Cr["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Cr["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Cr["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Cr),mr=new Do("analytics","Analytics",h5);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var p5=30,d5=1e3,v5=function(){function e(t,n){t===void 0&&(t={}),n===void 0&&(n=d5),this.throttleMetadata=t,this.intervalMillis=n}return e.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},e.prototype.setThrottleMetadata=function(t,n){this.throttleMetadata[t]=n},e.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},e}(),Rk=new v5;function g5(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function m5(e){var t;return R(this,void 0,void 0,function(){var n,r,i,s,a,c,l;return N(this,function(h){switch(h.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:g5(r)},s=Z6.replace("{app-id}",n),[4,fetch(s,i)];case 1:if(a=h.sent(),!(a.status!==200&&a.status!==304))return[3,6];c="",h.label=2;case 2:return h.trys.push([2,4,,5]),[4,a.json()];case 3:return l=h.sent(),!((t=l.error)===null||t===void 0)&&t.message&&(c=l.error.message),[3,5];case 4:return h.sent(),[3,5];case 5:throw mr.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c});case 6:return[2,a.json()]}})})}function y5(e,t,n){return t===void 0&&(t=Rk),R(this,void 0,void 0,function(){var r,i,s,a,c,l,h=this;return N(this,function(p){if(r=e.options,i=r.appId,s=r.apiKey,a=r.measurementId,!i)throw mr.create("no-app-id");if(!s){if(a)return[2,{measurementId:a,appId:i}];throw mr.create("no-api-key")}return c=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new b5,setTimeout(function(){return R(h,void 0,void 0,function(){return N(this,function(v){return l.abort(),[2]})})},n!==void 0?n:J6),[2,Ok({appId:i,apiKey:s,measurementId:a},c,l,t)]})})}function Ok(e,t,n,r){var i=t.throttleEndTimeMillis,s=t.backoffCount;return r===void 0&&(r=Rk),R(this,void 0,void 0,function(){var a,c,l,h,p,v,m;return N(this,function(y){switch(y.label){case 0:a=e.appId,c=e.measurementId,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,_5(n,i)];case 2:return y.sent(),[3,4];case 3:if(l=y.sent(),c)return rn.warn("Timed out fetching this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+c)+(' provided in the "measurementId" field in the local Firebase config. ['+l.message+"]")),[2,{appId:a,measurementId:c}];throw l;case 4:return y.trys.push([4,6,,7]),[4,m5(e)];case 5:return h=y.sent(),r.deleteThrottleMetadata(a),[2,h];case 6:if(p=y.sent(),!w5(p)){if(r.deleteThrottleMetadata(a),c)return rn.warn("Failed to fetch this Firebase app's measurement ID from the server."+(" Falling back to the measurement ID "+c)+(' provided in the "measurementId" field in the local Firebase config. ['+p.message+"]")),[2,{appId:a,measurementId:c}];throw p}return v=Number(p.customData.httpStatus)===503?xy(s,r.intervalMillis,p5):xy(s,r.intervalMillis),m={throttleEndTimeMillis:Date.now()+v,backoffCount:s+1},r.setThrottleMetadata(a,m),rn.debug("Calling attemptFetch again in "+v+" millis"),[2,Ok(e,m,n,r)];case 7:return[2]}})})}function _5(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(function(){clearTimeout(s),r(mr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function w5(e){if(!(e instanceof xu)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var b5=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(){return R(this,void 0,void 0,function(){var e;return N(this,function(t){switch(t.label){case 0:return Q_()?[3,1]:(rn.warn(mr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,Y_()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),rn.warn(mr.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}function I5(e,t,n,r,i){return R(this,void 0,void 0,function(){var s,a,c,l,h,p,v;return N(this,function(m){switch(m.label){case 0:return s=y5(e),s.then(function(y){n[y.measurementId]=y.appId,e.options.measurementId&&y.measurementId!==e.options.measurementId&&rn.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+")"+(" does not match the measurement ID fetched from the server ("+y.measurementId+").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(y){return rn.error(y)}),t.push(s),a=E5().then(function(y){if(y)return r.getId()}),[4,Promise.all([s,a])];case 1:return c=m.sent(),l=c[0],h=c[1],i("js",new Date),p=(v={},v[X6]="firebase",v.update=!0,v),h!=null&&(p[Y6]=h),i(_n.CONFIG,l.measurementId,p),[2,l.measurementId]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ai={},rC=[],iC={},Kh="dataLayer",xk="gtag",oC,Uc,__=!1;function T5(e){if(__)throw mr.create("already-initialized");e.dataLayerName&&(Kh=e.dataLayerName),e.gtagName&&(xk=e.gtagName)}function S5(){var e=[];if(K_()&&e.push("This is a browser extension environment."),LN()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(r,i){return"("+(i+1)+") "+r}).join(" "),n=mr.create("invalid-analytics-context",{errorInfo:t});rn.warn(n.message)}}function A5(e,t){S5();var n=e.options.appId;if(!n)throw mr.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)rn.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+(" measurement ID for this Firebase app. Falling back to the measurement ID "+e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.');else throw mr.create("no-api-key");if(Ai[n]!=null)throw mr.create("already-exists",{id:n});if(!__){f5()||o5(Kh),s5(Kh);var r=l5(Ai,rC,iC,Kh,xk),i=r.wrappedGtag,s=r.gtagCore;Uc=i,oC=s,__=!0}Ai[n]=I5(e,rC,iC,t,oC);var a={app:e,logEvent:function(c,l,h){t5(Uc,Ai[n],c,l,h).catch(function(p){return rn.error(p)})},setCurrentScreen:function(c,l){e5(Uc,Ai[n],c,l).catch(function(h){return rn.error(h)})},setUserId:function(c,l){n5(Uc,Ai[n],c,l).catch(function(h){return rn.error(h)})},setUserProperties:function(c,l){r5(Uc,Ai[n],c,l).catch(function(h){return rn.error(h)})},setAnalyticsCollectionEnabled:function(c){i5(Ai[n],c).catch(function(l){return rn.error(l)})},INTERNAL:{delete:function(){return delete Ai[n],Promise.resolve()}}};return a}var C5="@firebase/analytics",N5="0.6.2",sC="analytics";function R5(e){e.INTERNAL.registerComponent(new Kn(sC,function(n){var r=n.getProvider("app").getImmediate(),i=n.getProvider("installations").getImmediate();return A5(r,i)},"PUBLIC").setServiceProps({settings:T5,EventName:y_,isSupported:O5})),e.INTERNAL.registerComponent(new Kn("analytics-internal",t,"PRIVATE")),e.registerVersion(C5,N5);function t(n){try{var r=n.getProvider(sC).getImmediate();return{logEvent:r.logEvent}}catch(i){throw mr.create("interop-component-reg-failed",{reason:i})}}}R5(at);function O5(){return R(this,void 0,void 0,function(){var e;return N(this,function(t){switch(t.label){case 0:if(K_())return[2,!1];if(!LN())return[2,!1];if(!Q_())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Y_()];case 2:return e=t.sent(),[2,e];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var x5=function(){function e(t,n,r,i){this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return e.prototype.isCachedDataFresh=function(t,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var r=Date.now()-n,i=r<=t;return this.logger.debug("Config fetch cache check."+(" Cache age millis: "+r+".")+(" Cache max age millis (minimumFetchIntervalMillis setting): "+t+".")+(" Is cache hit: "+i+".")),i},e.prototype.fetch=function(t){return R(this,void 0,void 0,function(){var n,r,i,s,a;return N(this,function(c){switch(c.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return n=c.sent(),r=n[0],i=n[1],i&&this.isCachedDataFresh(t.cacheMaxAgeMillis,r)?[2,i]:(t.eTag=i&&i.eTag,[4,this.client.fetch(t)]);case 2:return s=c.sent(),a=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],s.status===200&&a.push(this.storage.setLastSuccessfulFetchResponse(s)),[4,Promise.all(a)];case 3:return c.sent(),[2,s]}})})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sn,P5=(Sn={},Sn["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Sn["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Sn["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Sn["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Sn["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Sn["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Sn["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Sn["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Sn["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Sn["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Sn["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Sn["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Sn["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Sn),gr=new Do("remoteconfig","Remote Config",P5);function k5(e,t){return e instanceof xu&&e.code.indexOf(t)!==-1}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(e){return e===void 0&&(e=navigator),e.languages&&e.languages[0]||e.language}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var L5=function(){function e(t,n,r,i,s,a){this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=a}return e.prototype.fetch=function(t){return R(this,void 0,void 0,function(){var n,r,i,s,a,c,l,h,p,v,m,y,b,E,I,C,P,D,F;return N(this,function(Y){switch(Y.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=Y.sent(),r=n[0],i=n[1],s=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",a=s+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},l={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:D5()},h={method:"POST",headers:c,body:JSON.stringify(l)},p=fetch(a,h),v=new Promise(function(U,_t){t.signal.addEventListener(function(){var Wt=new Error("The operation was aborted.");Wt.name="AbortError",_t(Wt)})}),Y.label=2;case 2:return Y.trys.push([2,5,,6]),[4,Promise.race([p,v])];case 3:return Y.sent(),[4,p];case 4:return m=Y.sent(),[3,6];case 5:throw y=Y.sent(),b="fetch-client-network",y.name==="AbortError"&&(b="fetch-timeout"),gr.create(b,{originalErrorMessage:y.message});case 6:if(E=m.status,I=m.headers.get("ETag")||void 0,m.status!==200)return[3,11];D=void 0,Y.label=7;case 7:return Y.trys.push([7,9,,10]),[4,m.json()];case 8:return D=Y.sent(),[3,10];case 9:throw F=Y.sent(),gr.create("fetch-client-parse",{originalErrorMessage:F.message});case 10:C=D.entries,P=D.state,Y.label=11;case 11:if(P==="INSTANCE_STATE_UNSPECIFIED"?E=500:P==="NO_CHANGE"?E=304:(P==="NO_TEMPLATE"||P==="EMPTY_CONFIG")&&(C={}),E!==304&&E!==200)throw gr.create("fetch-status",{httpStatus:E});return[2,{status:E,eTag:I,config:C}]}})})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var M5=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(t){this.listeners.push(t)},e.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var F5=!1,U5="",aC=0,j5=["1","true","t","yes","y","on"],cy=function(){function e(t,n){n===void 0&&(n=U5),this._source=t,this._value=n}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return this._source==="static"?F5:j5.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if(this._source==="static")return aC;var t=Number(this._value);return isNaN(t)&&(t=aC),t},e.prototype.getSource=function(){return this._source},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var V5=60*1e3,B5=12*60*60*1e3,q5=function(){function e(t,n,r,i,s){this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:V5,minimumFetchIntervalMillis:B5},this.defaultConfig={}}return e.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Rt.DEBUG;break;case"silent":this._logger.logLevel=Rt.SILENT;break;default:this._logger.logLevel=Rt.ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return R(this,void 0,void 0,function(){var t,n,r;return N(this,function(i){switch(i.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=i.sent(),n=t[0],r=t[1],!n||!n.config||!n.eTag||n.eTag===r?[2,!1]:[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])];case 2:return i.sent(),[2,!0]}})})},e.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},e.prototype.fetch=function(){return R(this,void 0,void 0,function(){var t,n,r,i=this;return N(this,function(s){switch(s.label){case 0:t=new M5,setTimeout(function(){return R(i,void 0,void 0,function(){return N(this,function(a){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),s.label=1;case 1:return s.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return s.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return s.sent(),[3,6];case 4:return n=s.sent(),r=k5(n,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw s.sent(),n;case 6:return[2]}})})},e.prototype.fetchAndActivate=function(){return R(this,void 0,void 0,function(){return N(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},e.prototype.getAll=function(){var t=this;return H5(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(n,r){return n[r]=t.getValue(r),n},{})},e.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},e.prototype.getNumber=function(t){return this.getValue(t).asNumber()},e.prototype.getString=function(t){return this.getValue(t).asString()},e.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var n=this._storageCache.getActiveConfig();return n&&n[t]!==void 0?new cy("remote",n[t]):this.defaultConfig&&this.defaultConfig[t]!==void 0?new cy("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new cy("static"))},e}();function H5(e,t){return e===void 0&&(e={}),t===void 0&&(t={}),Object.keys(ee(ee({},e),t))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(e,t){var n=e.target.error||void 0;return gr.create(t,{originalErrorMessage:n&&n.message})}var ls="app_namespace_store",G5="firebase_remote_config",W5=1;function $5(){return new Promise(function(e,t){var n=indexedDB.open(G5,W5);n.onerror=function(r){t(Qh(r,"storage-open"))},n.onsuccess=function(r){e(r.target.result)},n.onupgradeneeded=function(r){var i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ls,{keyPath:"compositeKey"})}}})}var z5=function(){function e(t,n,r,i){i===void 0&&(i=$5()),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(t){return this.set("active_config",t)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(t){return R(this,void 0,void 0,function(){var n,r=this;return N(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(s,a){var c=n.transaction([ls],"readonly"),l=c.objectStore(ls),h=r.createCompositeKey(t);try{var p=l.get(h);p.onerror=function(v){a(Qh(v,"storage-get"))},p.onsuccess=function(v){var m=v.target.result;s(m?m.value:void 0)}}catch(v){a(gr.create("storage-get",{originalErrorMessage:v&&v.message}))}})]}})})},e.prototype.set=function(t,n){return R(this,void 0,void 0,function(){var r,i=this;return N(this,function(s){switch(s.label){case 0:return[4,this.openDbPromise];case 1:return r=s.sent(),[2,new Promise(function(a,c){var l=r.transaction([ls],"readwrite"),h=l.objectStore(ls),p=i.createCompositeKey(t);try{var v=h.put({compositeKey:p,value:n});v.onerror=function(m){c(Qh(m,"storage-set"))},v.onsuccess=function(){a()}}catch(m){c(gr.create("storage-set",{originalErrorMessage:m&&m.message}))}})]}})})},e.prototype.delete=function(t){return R(this,void 0,void 0,function(){var n,r=this;return N(this,function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise(function(s,a){var c=n.transaction([ls],"readwrite"),l=c.objectStore(ls),h=r.createCompositeKey(t);try{var p=l.delete(h);p.onerror=function(v){a(Qh(v,"storage-delete"))},p.onsuccess=function(){s()}}catch(v){a(gr.create("storage-delete",{originalErrorMessage:v&&v.message}))}})]}})})},e.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K5=function(){function e(t){this.storage=t}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return R(this,void 0,void 0,function(){var t,n,r,i,s,a;return N(this,function(c){switch(c.label){case 0:return t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,t];case 1:return i=c.sent(),i&&(this.lastFetchStatus=i),[4,n];case 2:return s=c.sent(),s&&(this.lastSuccessfulFetchTimestampMillis=s),[4,r];case 3:return a=c.sent(),a&&(this.activeConfig=a),[2]}})})},e.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},e.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},e}();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q5(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(function(){clearTimeout(s),r(gr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function Y5(e){if(!(e instanceof xu)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}var X5=function(){function e(t,n){this.client=t,this.storage=n}return e.prototype.fetch=function(t){return R(this,void 0,void 0,function(){var n;return N(this,function(r){switch(r.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return n=r.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,n)]}})})},e.prototype.attemptFetch=function(t,n){var r=n.throttleEndTimeMillis,i=n.backoffCount;return R(this,void 0,void 0,function(){var s,a,c;return N(this,function(l){switch(l.label){case 0:return[4,Q5(t.signal,r)];case 1:l.sent(),l.label=2;case 2:return l.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return s=l.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return l.sent(),[2,s];case 5:if(a=l.sent(),!Y5(a))throw a;return c={throttleEndTimeMillis:Date.now()+xy(i),backoffCount:i+1},[4,this.storage.setThrottleMetadata(c)];case 6:return l.sent(),[2,this.attemptFetch(t,c)];case 7:return[2]}})})},e}(),uC="@firebase/remote-config",J5="0.1.30";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(e){e.INTERNAL.registerComponent(new Kn("remoteConfig",t,"PUBLIC").setMultipleInstances(!0)),e.registerVersion(uC,J5);function t(n,r){var i=n.getProvider("app").getImmediate(),s=n.getProvider("installations").getImmediate();if(typeof window>"u")throw gr.create("registration-window");var a=i.options,c=a.projectId,l=a.apiKey,h=a.appId;if(!c)throw gr.create("registration-project-id");if(!l)throw gr.create("registration-api-key");if(!h)throw gr.create("registration-app-id");r=r||"firebase";var p=new z5(h,i.name,r),v=new K5(p),m=new Pu(uC);m.logLevel=Rt.ERROR;var y=new L5(s,e.SDK_VERSION,r,c,l,h),b=new X5(y,p),E=new x5(b,p,v,m),I=new q5(i,E,v,p,m);return I.ensureInitialized(),I}}Z5(at);var tQ="firebase",eQ="8.2.7";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */at.registerVersion(tQ,eQ,"app");var nQ="firebase",rQ="8.2.7";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */console.warn(`
It looks like you're using the development build of the Firebase JS SDK.
When deploying Firebase apps to production, it is advisable to only import
the individual SDK components you intend to use.

For the module builds, these are available in the following manner
(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):

CommonJS Modules:
const firebase = require('firebase/app');
require('firebase/<PACKAGE>');

ES Modules:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';

Typescript:
import firebase from 'firebase/app';
import 'firebase/<PACKAGE>';
`);at.registerVersion(nQ,rQ);const iQ={apiKey:"AIzaSyBsTEvv_k5WEyjnQy0Cdhr5ZNyZe2N00js",authDomain:"twitter-clone-inflearn-10fc8.firebaseapp.com",projectId:"twitter-clone-inflearn-10fc8",storageBucket:"twitter-clone-inflearn-10fc8.appspot.com",messagingSenderId:"325557618636",appId:"1:325557618636:web:fe74e1dad3ca4f98af3f69",measurementId:"G-NT1D3TVGPK"};at.initializeApp(iQ);const Jb=at.auth(),Pk=at.firestore();at.storage();const kk=Pk.collection("users"),oQ=Pk.collection("tweets"),sQ={components:{Trends:q_,Tweet:wN},setup(){const e=Pr(""),t=Bn(()=>iu.state.user);return{currentUser:t,tweetBody:e,onAddTweet:async()=>{try{const r=oQ.doc();await r.set({id:r.id,tweet_body:e.value,uid:t.value.uid,created_at:Date.now(),num_comments:0,num_retweets:0,num_likes:0})}catch(r){console.log("on add tweet error on homepage:",r)}}}}},aQ={class:"flex-1 border-r border-gray-100 overflow-y-auto"},uQ={class:"flex flex-col"},cQ=Q("div",{class:"border-b border-gray-100 px-3 py-2 font-bold text-lg"}," 홈 ",-1),lQ={class:"flex px-3 py-3 border-b-8 border-gray-100"},fQ=["src"],hQ={class:"ml-2 flex-1 flex flex-col"},pQ={class:"text-right"},dQ={key:0,class:"bg-light text-sm font-bold text-white px-4 py-1 rounded-full"};function vQ(e,t,n,r,i,s){const a=qr("Tweet"),c=qr("Trends");return $t(),oe(Fe,null,[Q("div",aQ,[Q("div",uQ,[cQ,Q("div",lQ,[Q("img",{src:r.currentUser.profile_image_url,class:"w-10 h-10 rounded-full hover:opacity-80 cursor-pointer"},null,8,fQ),Q("div",hQ,[Wa(Q("textarea",{"onUpdate:modelValue":t[0]||(t[0]=l=>r.tweetBody=l),placeholder:"무슨 일이 일어나고 있나요?",class:"w-full text-lg font-bold focus:outline-none mb-3 resize-none bg-gray-100"},null,512),[[$a,r.tweetBody]]),Q("div",pQ,[r.tweetBody.length?($t(),oe("button",{key:1,onClick:t[1]||(t[1]=(...l)=>r.onAddTweet&&r.onAddTweet(...l)),class:"bg-primary hover:bg-dark text-sm font-bold text-white px-4 py-1 rounded-full"},"트윗")):($t(),oe("button",dQ,"트윗"))])])]),($t(),oe(Fe,null,Ao(5,l=>_e(a,{key:l,currentUser:r.currentUser},null,8,["currentUser"])),64))])]),_e(c)],64)}const jc=wr(sQ,[["render",vQ]]),gQ={components:{Trends:q_}},mQ={class:"flex-1 border-r border-gray-100 flex flex-col overflow-y-auto"},yQ=Q("div",{class:"p-3 font-bold text-lg border-b border-gray-100"},"알림",-1),_Q=ko('<div class="flex justify-between"><img src="http://picsum.photos/100" class="w-10 h-10 rounded-full hover:opacity-80"><i class="fas fa-ellipsis-h text-gray-500 hover:bg-blue-50 hover:text-primary p-2 rounded-full w-10 h-10 flex items-center justify-center"></i></div><div><span class="font-bold">정재웅</span> 님의 최근 트윗</div><div class="text-gray-500"> wjelifwjeiflwejfiwejfil wefiwejfiweofjweiof wefjiewjf dcivcvf </div>',3),wQ=[_Q];function bQ(e,t,n,r,i,s){const a=qr("Trends");return $t(),oe(Fe,null,[Q("div",mQ,[yQ,($t(),oe(Fe,null,Ao(10,c=>Q("div",{class:"flex flex-col hover:bg-gray-50 p-3 space-y-2 border-b border-gray-100 cursor-pointer",key:c},wQ)),64))]),_e(a)],64)}const EQ=wr(gQ,[["render",bQ]]),IQ={},TQ={class:"flex-1 flex"},SQ={class:"w-2/5 border-r border-gray-100 overflow-y-scroll"},AQ={class:"flex flex-col"},CQ=ko('<div class="p-3 font-bold text-lg border-b border-gray-100 h-14">쪽지</div><div class="flex px-3 py-4 hover:bg-gray-50 border-b border-gray-100 bg-gray-200"><img src="http://picsum.photos/200" class="w-10 h-10 rounded-full cursor-pointer mr-2"><div><div class="flex space-x-1"><div class="font-bold">jjw.com</div><div class="text-gray-500">@jaewoong</div><div class="text-gray-500">9월 17일</div></div><div class="text-gray-500">메세지</div></div></div>',2),NQ=ko('<img src="http://picsum.photos/200" class="w-10 h-10 rounded-full cursor-pointer mr-2"><div><div class="flex space-x-1"><div class="font-bold">jjw.com</div><div class="text-gray-500">@jaewoong</div><div class="text-gray-500">9월 17일</div></div><div class="text-gray-500">메세지</div></div>',2),RQ=[NQ],OQ={class:"w-3/5 border-r border-gray-100"},xQ={class:"flex flex-col h-screen"},PQ=ko('<div class="flex px-3 h-14 items-center border-b border-gray-100"><img src="http://picsum.photos/100" class="w-8 h-8 rounded-full mr-2 cursor-pointer"><div><div class="font-bold text-lg">jjw.com</div><div class="text-sm text-gray-500">@jaewoong</div></div></div><div class="flex flex-col justify-center items-center border-b border-gray-100 hover:bg-gray-50 py-6"><div><span class="font-bold mr-1">jjw.com</span><span class="text-gray-500">@jaewoong</span></div><div><span class="font-bold mr-1">28</span><span class="text-gray-500">팔로우 중</span><span class="font-bold ml-3 mr-1">7</span><span class="text-gray-500">팔로워</span></div><div><span class="text-gray-500 mr-1">가입일</span><span class="text-gray-500">2021년 3월</span></div></div>',2),kQ={class:"flex-1 overflow-y-scroll"},DQ=Q("div",{class:"text-right px-3 py-3"},[Q("span",{class:"bg-primary text-white px-4 py-2 rounded-full"},"메시지"),Q("div",{class:"mt-2 text-xs text-gray-500"},"2023년 9월 17일 오후 7:16")],-1),LQ=Q("span",{class:"bg-gray-100 px-4 py-2 rounded-full"},"메시지",-1),MQ=Q("div",{class:"mt-2 text-xs text-gray-500"},"2023년 9월 17일 오후 7:16",-1),FQ=[LQ,MQ],UQ=Q("div",{class:"flex items-center bg-white border-t border-gray-100 sticky"},[Q("input",{type:"text",class:"m-2 py-1 px-4 rounded-full bg-gray-100 resize-none outline-none flex-1",placeholder:"새 쪽지 작성하기",rows:"1"}),Q("button",{class:"text-center"},[Q("i",{class:"far fa-paper-plane text-primary text-lg hover:bg-blue-50 p-2 rounded-full w-10 h-10"})])],-1);function jQ(e,t,n,r,i,s){return $t(),oe("div",TQ,[Q("div",SQ,[Q("div",AQ,[CQ,($t(),oe(Fe,null,Ao(5,a=>Q("div",{class:"flex px-3 py-4 hover:bg-gray-50 border-b border-gray-100",key:a},RQ)),64))])]),Q("div",OQ,[Q("div",xQ,[PQ,Q("div",kQ,[DQ,($t(),oe(Fe,null,Ao(20,a=>Q("div",{class:"text-left px-3 py-3",key:a},FQ)),64))]),UQ])])])}const VQ=wr(IQ,[["render",jQ]]),BQ={components:{Trends:q_,Tweet:wN}},qQ={class:"flex-1 flex"},HQ={class:"flex-1 flex flex-col border-r border-color"},GQ=ko('<div class="px-3 py-1 flex border-b border-color"><button class="mr-4"><i class="fas fa-arrow-left text-primary p-3 rounded-full hover:bg-blue-50"></i></button><div><div class="font-extrabold text-lg">jjw.com</div><div class="text-xs text-gray">393 트윗</div></div></div><div class="bg-gray-300 h-40 relative flex-none"><div class="border-4 border-white bg-gray-100 w-28 h-28 rounded-full absolute -bottom-14 left-2"><img src="http://picsum.photos/200" class="rounded-full hover:opacity-90 hover:opacity-100 cursor-pointer"></div></div><div class="text-right mt-2 mr-2"><button class="border text-sm border-primary text-primary px-3 py-2 hover:bg-blue-50 font-bold rounded-full">프로필 수정</button></div><div class="mx-3 mt-2"><div class="font-extrabold text-lg">jjw.com</div><div class="text-gray">@jaewoong</div><div><span class="text-gray">가입일:</span><span class="text-gray">2011년 10월</span></div><div><span class="font-bold mr-1">28</span><span class="text-gray mr-3">팔로우 중</span><span class="font-bold mr-1">7</span><span class="text-gray">팔로워</span></div></div><div class="flex border-b border-color mt-3"><div class="py-3 text-primary font-bold border-b border-primary text-center w-1/4 hover:bg-blue-50 cursor-pointer hover:text-primary"> 트윗 </div><div class="py-3 text-gray font-bold text-center w-1/4 hover:bg-blue-50 cursor-pointer hover:text-primary"> 트윗 </div><div class="py-3 text-gray font-bold text-center w-1/4 hover:bg-blue-50 cursor-pointer hover:text-primary"> 트윗 </div><div class="py-3 text-gray font-bold text-center w-1/4 hover:bg-blue-50 cursor-pointer hover:text-primary"> 트윗 </div></div>',5),WQ={class:"overflow-y-auto"};function $Q(e,t,n,r,i,s){const a=qr("Tweet"),c=qr("Trends");return $t(),oe("div",qQ,[Q("div",HQ,[GQ,Q("div",WQ,[($t(),oe(Fe,null,Ao(10,l=>_e(a,{key:l})),64))])]),_e(c)])}const zQ=wr(BQ,[["render",$Q]]),KQ={setup(){const e=Pr(""),t=Pr(""),n=Pr(""),r=Pr(!1),i=_N();return{username:e,email:t,password:n,loading:r,onRegister:async()=>{if(!e.value||!t.value||!n.value){alert("유저네임, 이메일, 비밀번호를 모두 입력해주세요.");return}try{r.value=!0;const{user:a}=await Jb.createUserWithEmailAndPassword(t.value,n.value);await kk.doc(a.uid).set({uid:a.uid,username:e.value,email:t.value,profile_image_url:"/profile.jpeg",num_tweets:0,followers:[],followings:[],created_at:Date.now()}),alert("회원 가입에 성공하셨습니다. 로그인 해 주세요."),i.push("/login")}catch(a){switch(a.code){case"auth/invalid-email":alert("이메일을 바르게 입력해주세요.");break;case"auth/weak-password":alert("비밀번호가 너무 쉬워요");break;case"auth/email-already-in-use":alert("이미 가입되어 있는 이메일 입니다.");break;default:alert("회원가입 실패");break}}finally{r.value=!1}}}}},QQ={class:"flex flex-col items-center space-y-4 mt-10"},YQ=Q("span",{class:"text-2xl font-bold"},"트위떠 회원가입",-1),XQ={key:0,class:"w-96 rounded bg-light text-white py-3"},JQ=Q("button",{class:"text-primary"},"계정이 이미 있으신가요? 로그인 하기",-1);function ZQ(e,t,n,r,i,s){const a=qr("router-link");return $t(),oe("div",QQ,[Q("i",{class:Rs(`fab fa-twitter text-4xl text-primary ${r.loading?"animate-bounce":""}`)},null,2),YQ,Wa(Q("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>r.username=c),type:"text",class:"rounded w-96 px-4 py-3 border border-gray-300 focus:ring-2 focus:border-primary focus:outline-none",placeholder:"아이디"},null,512),[[$a,r.username]]),Wa(Q("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>r.email=c),type:"text",class:"rounded w-96 px-4 py-3 border border-gray-300 focus:ring-2 focus:border-primary focus:outline-none",placeholder:"이메일"},null,512),[[$a,r.email]]),Wa(Q("input",{onClick:t[2]||(t[2]=(...c)=>r.onRegister&&r.onRegister(...c)),"onUpdate:modelValue":t[3]||(t[3]=c=>r.password=c),type:"password",class:"rounded w-96 px-4 py-3 border border-gray-300 focus:ring-2 focus:border-primary focus:outline-none",placeholder:"비밀번호"},null,512),[[$a,r.password]]),r.loading?($t(),oe("button",XQ,"회원가입 중입니다.")):($t(),oe("button",{key:1,class:"w-96 rounded bg-primary text-white py-3 hover:bg-dark",onClick:t[4]||(t[4]=(...c)=>r.onRegister&&r.onRegister(...c))},"회원가입")),_e(a,{to:"/login"},{default:Kp(()=>[JQ]),_:1})])}const tY=wr(KQ,[["render",ZQ]]),eY={setup(){const e=Pr(""),t=Pr(""),n=Pr(!1),r=_N();return{email:e,password:t,loading:n,onLogin:async()=>{if(!e.value||!t.value){alert("이메일, 비밀번호를 모두 입력해주세요.");return}try{n.value=!0;const{user:s}=await Jb.signInWithEmailAndPassword(e.value,t.value),a=await kk.doc(s.uid).get();iu.commit("SET_USER",a.data()),r.replace("/")}catch(s){switch(s.code){case"auth/invalid-email":alert("잘못된 이메일 형식입니다.");break;case"auth/invalid-password":alert("비밀번호가 틀립니다.");break;case"auth/user-not-found":alert("등록되지 않은 이메일입니다.");break;default:alert(s.message);break}}finally{n.value=!1}}}}},nY={class:"flex flex-col items-center space-y-4 mt-10"},rY=Q("span",{class:"text-2xl font-bold"},"트위떠 로그인",-1),iY={key:0,class:"w-96 rounded bg-light text-white py-3"},oY=Q("button",{class:"text-primary"},"계정이 없으신가요? 회원가입 하기",-1);function sY(e,t,n,r,i,s){const a=qr("router-link");return $t(),oe("div",nY,[Q("i",{class:Rs(`fab fa-twitter text-4xl text-primary ${r.loading?"animate-bounce":""}`)},null,2),rY,Wa(Q("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>r.email=c),type:"text",class:"rounded w-96 px-4 py-3 border border-gray-300 focus:ring-2 focus:border-primary focus:outline-none",placeholder:"이메일"},null,512),[[$a,r.email]]),Wa(Q("input",{onKeyup:t[1]||(t[1]=BU((...c)=>r.onLogin&&r.onLogin(...c),["enter"])),"onUpdate:modelValue":t[2]||(t[2]=c=>r.password=c),type:"password",class:"rounded w-96 px-4 py-3 border border-gray-300 focus:ring-2 focus:border-primary focus:outline-none",placeholder:"비밀번호"},null,544),[[$a,r.password]]),r.loading?($t(),oe("button",iY,"로그인 중입니다.")):($t(),oe("button",{key:1,class:"w-96 rounded bg-primary text-white py-3 hover:bg-dark",onClick:t[3]||(t[3]=(...c)=>r.onLogin&&r.onLogin(...c))},"로그인")),_e(a,{to:"/register"},{default:Kp(()=>[oY]),_:1})])}const aY=wr(eY,[["render",sY]]),uY=[{path:"/",name:"home",component:jc,title:"홈",icon:"fas fa-home fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout",requireAuth:!0}},{path:"/",name:"explore",component:jc,title:"탐색하기",icon:"fas fa-hashtag fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout",requireAuth:!0}},{path:"/notifications",name:"notifications",component:EQ,title:"알림",icon:"far fa-bell fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout",requireAuth:!0}},{path:"/Messages",name:"messages",component:VQ,title:"쪽지",icon:"far fa-envelope fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout",requireAuth:!0}},{path:"/",name:"bookmarks",component:jc,title:"북마크",icon:"far fa-bookmark fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout",requireAuth:!0}},{path:"/",name:"list",component:jc,title:"리스트",icon:"far fa-list-alt fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout",requireAuth:!0}},{path:"/Profile",name:"profile",component:zQ,title:"프로필",icon:"far fa-user fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout"}},{path:"/",name:"more",component:jc,title:"더보기",icon:"fas fa-ellipsis-h fa-fw text-2xl",meta:{isMenu:!0,layout:"DefaultLayout"}},{path:"/register",name:"register",component:tY,meta:{isMenu:!1,layout:"EmptyLayout"}},{path:"/login",name:"login",component:aY,meta:{isMenu:!1,layout:"EmptyLayout"}}],il=eV({history:mj(),routes:uY});il.beforeEach((e,t,n)=>{const r=iu.state.user;e.matched.some(s=>s.meta.requireAuth)&&!r?n("/login"):n()});const cY={setup(){const e=Pr([]),t=Pr(!1),n=Bn(()=>iu.state.user),r=async()=>{await Jb.signOut(),iu.commit("SET_USER",null),await il.replace("/login")};return WC(()=>{e.value=il.options.routes}),{routes:e,showProfileDropdown:t,onLogout:r,currentUser:n,router:il}}},lY={class:"flex h-screen container mx-auto"},fY={class:"w-20 xl:w-1/4 pt-5 xl:ml-10 flex flex-col justify-between border-r border-gray-100"},hY={class:"flex flex-col items-center xl:items-start"},pY=Q("i",{class:"fab fa-twitter text-3xl text-primary xl:ml-4 mb-3"},null,-1),dY={class:"flex flex-col items-start space-y-1"},vY={key:0},gY={class:"ml-5 text-xl hidden xl:inline-block"},mY=Q("div",{class:"w-full xl:pr-3 flex justify-center"},[Q("button",{class:"mt-3 bg-primary text-white xl:w-full w-12 h-12 rounded-full hover:bg-dark"},[Q("span",{class:"hidden xl:block"},"트윗"),Q("i",{class:"fas fa-plus xl:hidden"})])],-1),yY={class:"hidden xl:flex mt-3 px-2 py-1 w-full h-12 rounded-full hover:bg-blue-50 items-center"},_Y=["src"],wY={class:"xl:ml-2 hidden xl:block"},bY={class:"text-sm font-bold"},EY={class:"text-xs text-gray-500 text-left"},IY=Q("i",{class:"ml-auto fas fa-ellipsis-h fa-fw text-xs hidden xl:block"},null,-1),TY={class:"xl:hidden flex justify-center"},SY=["src"],AY={class:"flex-1 flex h-screen"},CY={class:"hover:bg-gray-50 border-b border-gray-100 flex p-3 w-full items-center"},NY=["src"],RY={class:"ml-2"},OY={class:"font-bold text-sm"},xY={class:"text-left text-gray-500 text-sm"},PY=Q("i",{class:"fas fa-check text-primary ml-auto"},null,-1);function kY(e,t,n,r,i,s){const a=qr("router-link"),c=qr("router-view");return $t(),oe("div",lY,[Q("div",fY,[Q("div",hY,[pY,Q("div",dY,[($t(!0),oe(Fe,null,Ao(r.routes,l=>($t(),Bl(a,{to:l.path,class:Rs(`hover:text-primary hover:bg-blue-50 px-4 py-2 rounded-full cursor-pointer ${r.router.currentRoute.value.name==l.name?"text-primary":""}`),key:l},{default:Kp(()=>[l.meta.isMenu?($t(),oe("div",vY,[Q("i",{class:Rs(l.icon)},null,2),Q("span",gY,ba(l.title),1)])):nS("",!0)]),_:2},1032,["to","class"]))),128))]),mY]),Q("div",{class:"xl:mr-3 mb-3 relative",onClick:t[0]||(t[0]=l=>r.showProfileDropdown=!0)},[Q("button",yY,[Q("img",{src:r.currentUser.profile_image_url,class:"w-10 h-10 rounded-full"},null,8,_Y),Q("div",wY,[Q("div",bY,ba(r.currentUser.email),1),Q("div",EY,"@"+ba(r.currentUser.username),1)]),IY]),Q("div",TY,[Q("img",{src:r.currentUser.profile_image_url,class:"w-10 h-10 rounded-full cursor-pointer hover:opacity-80"},null,8,SY)])])]),Q("div",AY,[_e(c)]),r.showProfileDropdown?($t(),oe("div",{key:0,class:"absolute bottom-20 left-14 shadow rounded-lg w-60 bg-white",onClick:t[2]||(t[2]=l=>r.showProfileDropdown=!1)},[Q("button",CY,[Q("img",{src:r.currentUser.profile_image_url,class:"w-10 h-10 rounded-full"},null,8,NY),Q("div",RY,[Q("div",OY,ba(r.currentUser.email),1),Q("div",xY,"@"+ba(r.currentUser.username),1)]),PY]),Q("button",{class:"p-3 hover:bg-gray-50 w-full text-left text-sm",onClick:t[1]||(t[1]=(...l)=>r.onLogout&&r.onLogout(...l))}," @"+ba(r.currentUser.username)+" 계정에서 로그아웃 ",1)])):nS("",!0)])}const DY=wr(cY,[["render",kY]]),LY={};function MY(e,t,n,r,i,s){const a=qr("router-view");return $t(),Bl(a)}const FY=wr(LY,[["render",MY]]),UY={components:{DefaultLayout:DY,EmptyLayout:FY},setup(){const e=rV();return{layout:Bn(()=>e.meta.layout||"DefaultLayout")}}};function jY(e,t,n,r,i,s){return $t(),Bl(q2(r.layout))}const VY=wr(UY,[["render",jY]]),BY={components:{Layout:VY}};function qY(e,t,n,r,i,s){const a=qr("Layout");return $t(),Bl(a)}const HY=wr(BY,[["render",qY]]);GU(HY).use(il).use(iu).mount("#app");
